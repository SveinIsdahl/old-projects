/*! jQuery v1.7.1 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test("Â ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};
f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function()
{for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bC(a,b,d);f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cy(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
/*! jQuery UI - v1.11.4 - 2015-06-17
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, sortable.js, autocomplete.js, button.js, datepicker.js, dialog.js, menu.js, progressbar.js, tabs.js, effect.js, effect-highlight.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */

(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(g.inline?g.dpDiv.parent()[0]:g.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var h=0,l=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=l.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=l.call(arguments,1),r=this;return a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'")}):(o.length&&(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=h++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var u=!1;e(document).mouseup(function(){u=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),u=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,N=e.extend({},y),M=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?N.left-=d:"center"===n.my[0]&&(N.left-=d/2),"bottom"===n.my[1]?N.top-=c:"center"===n.my[1]&&(N.top-=c/2),N.left+=M[0],N.top+=M[1],a||(N.left=h(N.left),N.top=h(N.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](N,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+M[0],p[1]+M[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-N.left,i=t+m-d,s=v.top-N.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:N.left,top:N.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(N,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}
},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,s._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};e(n.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),n={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=l-t.width,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e
},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i],this.document[0]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===s?t._createTrPlaceholder(t.currentItem,n):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;
return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var d,c="ui-button ui-widget ui-state-default ui-corner-all",p="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},m=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(c).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===d&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];m(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),d=this,t.document.one("mouseup",function(){d=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(c+" ui-state-active "+p).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?m(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(p),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var g;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),g===n&&(g=null))},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,g=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)
}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,N,M,C,P,A,I,H,z,F,E,W,O,L,j=new Date,R=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),Y=this._get(e,"isRTL"),J=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),K=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),U=this._get(e,"showCurrentAtPos"),q=this._get(e,"stepMonths"),G=1!==V[0]||1!==V[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-U,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-V[0]*V[1]+1,$.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-q,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+q,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?X:R,o=K?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=J?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;V[0]>w;w++){for(k="",this.maxRows=4,T=0;V[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",N="",G){if(N+="<div class='ui-datepicker-group",V[1]>1)switch(T){case 0:N+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case V[1]-1:N+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:N+=" ui-datepicker-group-middle",S=""}N+="'>"}for(N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,Q,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)C=(x+u)%7,M+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[C]+"'>"+p[C]+"</span></th>";for(N+=M+"</tr></thead><tbody>",P=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,P)),A=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((A+P)/7),H=G?this.maxRows>I?this.maxRows:I:I,this.maxRows=H,z=this._daylightSavingAdjust(new Date(et,Z,1-A)),F=0;H>F;F++){for(N+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)W=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],O=z.getMonth()!==Z,L=O&&!y||!W[0]||Q&&Q>z||$&&z>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(O?" ui-datepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(O&&!v?"":" "+W[1]+(z.getTime()===X.getTime()?" "+this._currentClass:"")+(z.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(O&&!v||!W[2]?"":" title='"+W[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(O&&!v?"&#xa0;":L?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===R.getTime()?" ui-state-highlight":"")+(z.getTime()===X.getTime()?" ui-state-active":"")+(O?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);N+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),N+="</tbody></table>"+(G?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=N}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);
return null===t&&(s&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),a.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o},h=function(e,t){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,n){setTimeout(function(){o.html(e),s._trigger("load",i,r),h(n,t)},1)}).fail(function(e,t){setTimeout(function(){h(e,t)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}});var v="ui-effects-",y=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(y),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(y.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return"boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(v+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(v+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})}});
/*

 jPlayer Plugin for jQuery JavaScript Library
 http://www.jplayer.org

 Copyright (c) 2009 - 2014 Happyworm Ltd
 Licensed under the MIT license.
 http://opensource.org/licenses/MIT

 Author: Mark J Panaghiston
 Version: 2.9.2
 Date: 14th December 2014

// jQuery Alert Dialogs Plugin
//
// Version 1.1
//
// Cory S.N. LaViska
// A Beautiful Site (http://abeautifulsite.net/)
// 14 May 2009
//
// Visit http://abeautifulsite.net/notebook/87 for more information
//
// Usage:
//      jAlert( message, [title, callback] )
//      jConfirm( message, [title, callback] )
//      jPrompt( message, [value, title, callback] )
// 
// History:
//
//      1.00 - Released (29 December 2008)
//
//      1.01 - Fixed bug where unbinding would destroy all resize events
//
// License:
// 
// This plugin is dual-licensed under the GNU General Public License and the MIT License and
// is copyright 2008 A Beautiful Site, LLC. 
// https://github.com/aurels/jquery.alerts
//

 Auto-growing textareas; technique ripped from Facebook
 https://github.com/jaz303/jquery-grab-bag/blob/f1a3cc1e86cbb248bcb41391d6eff115b1be6d89/javascripts/jquery.autogrow-textarea.js

 jQuery Hotkeys Plugin
 Copyright 2010, John Resig
 Dual licensed under the MIT or GPL Version 2 licenses.

 Based upon the plugin by Tzury Bar Yochay:
 http://github.com/tzuryby/hotkeys

 Original idea by:
 Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
 jQuery-ajaxTransport-XDomainRequest - v1.0.2 - 2014-05-02
 https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 Copyright (c) 2014 Jason Moon (@JSONMOON)
 Licensed MIT (/blob/master/LICENSE.txt)
 File: OkOrCancel.js

 A client part of the OkOrCancel control

 Dependencies :
   - jQuery 1.7.1 or higher (http://jquery.com/)
   - CommonFunctions.js

 FullCalendar v1.6.4
 Docs & License: http://arshaw.com/fullcalendar/
 (c) 2013 Adam Shaw
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,f){c!=Array.prototype&&c!=Object.prototype&&(c[d]=f.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var d=0;return $jscomp.iteratorPrototype(function(){return d<c.length?{done:!1,value:c[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.findInternal=function(c,d,f){c instanceof String&&(c=String(c));for(var b=c.length,a=0;a<b;a++){var e=c[a];if(d.call(f,e,a,c))return{i:a,v:e}}return{i:-1,v:void 0}};
$jscomp.polyfill=function(c,d,f,b){if(d){f=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var a=c[b];a in f||(f[a]={});f=f[a]}c=c[c.length-1];b=f[c];d=d(b);d!=b&&null!=d&&$jscomp.defineProperty(f,c,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,f){return $jscomp.findInternal(this,c,f).v}},"es6","es3");
$jscomp.iteratorFromArray=function(c,d){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var f=0,b={next:function(){if(f<c.length){var a=f++;return{value:d(a,c[a]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.checkStringArgs=function(c,d,f){if(null==c)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.repeat",function(c){return c?c:function(c){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var b="";c;)if(c&1&&(b+=d),c>>>=1)d+=d;return b}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c,f){return f})}},"es8","es3");$jscomp.owns=function(c,d){return Object.prototype.hasOwnProperty.call(c,d)};
$jscomp.polyfill("Object.assign",function(c){return c?c:function(c,f){for(var b=1;b<arguments.length;b++){var a=arguments[b];if(a)for(var e in a)$jscomp.owns(a,e)&&(c[e]=a[e])}return c}},"es6","es3");$jscomp.polyfill("String.prototype.startsWith",function(c){return c?c:function(c,f){var b=$jscomp.checkStringArgs(this,c,"startsWith");c+="";var a=b.length,e=c.length;f=Math.max(0,Math.min(f|0,b.length));for(var g=0;g<e&&f<a;)if(b[f++]!=c[g++])return!1;return g>=e}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var c={},d=Object.create(new $jscomp.global.Proxy(c,{get:function(f,b,a){return f==c&&"q"==b&&a==d}}));return!0===d.q}catch(f){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var d=c[Symbol.iterator];return d?d.call(c):$jscomp.arrayIterator(c)};
$jscomp.polyfill("WeakMap",function(c){function d(){if(!c||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),e=new c([[a,2],[b,3]]);if(2!=e.get(a)||3!=e.get(b))return!1;e.delete(a);e.set(b,4);return!e.has(a)&&4==e.get(b)}catch(m){return!1}}function f(b){$jscomp.owns(b,a)||$jscomp.defineProperty(b,a,{value:{}})}function b(a){var b=Object[a];b&&(Object[a]=function(a){f(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(d())return c;
var a="$jscomp_hidden_"+Math.random();b("freeze");b("preventExtensions");b("seal");var e=0,g=function(a){this.id_=(e+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};g.prototype.set=function(b,e){f(b);if(!$jscomp.owns(b,a))throw Error("WeakMap key fail: "+b);b[a][this.id_]=e;return this};g.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:void 0};g.prototype.has=
function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};g.prototype.delete=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)?delete b[a][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(c){function d(){if($jscomp.ASSUME_NO_NATIVE_MAP||!c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new c($jscomp.makeIterator([[a,"s"]]));if("s"!=b.get(a)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var e=b.entries(),g=e.next();if(g.done||g.value[0]!=a||"s"!=g.value[1])return!1;g=e.next();return g.done||4!=g.value[0].x||"t"!=g.value[1]||!e.next().done?!1:!0}catch(p){return!1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&
$jscomp.ES6_CONFORMANCE)return c}else if(d())return c;$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=new WeakMap,b=function(a){this.data_={};this.head_=g();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};b.prototype.set=function(b,e){var g=a(this,b);g.list||(g.list=this.data_[g.id]=[]);g.entry?g.entry.value=e:(g.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,value:e},g.list.push(g.entry),this.head_.previous.next=
g.entry,this.head_.previous=g.entry,this.size++);return this};b.prototype.delete=function(b){b=a(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};b.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};b.prototype.has=function(b){return!!a(this,b).entry};b.prototype.get=function(b){return(b=a(this,b).entry)&&
b.value};b.prototype.entries=function(){return e(this,function(a){return[a.key,a.value]})};b.prototype.keys=function(){return e(this,function(a){return a.key})};b.prototype.values=function(){return e(this,function(a){return a.value})};b.prototype.forEach=function(a,b){for(var e=this.entries(),g;!(g=e.next()).done;)g=g.value,a.call(b,g[1],g[0],this)};b.prototype[Symbol.iterator]=b.prototype.entries;var a=function(a,b){var e=b&&typeof b;"object"==e||"function"==e?f.has(b)?e=f.get(b):(e=""+ ++h,f.set(b,
e)):e="p_"+b;var g=a.data_[e];if(g&&$jscomp.owns(a.data_,e))for(a=0;a<g.length;a++){var c=g[a];if(b!==b&&c.key!==c.key||b===c.key)return{id:e,list:g,index:a,entry:c}}return{id:e,list:g,index:-1,entry:void 0}},e=function(a,b){var e=a.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=a.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:b(e)};e=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=a.next=a.head=a},h=0;return b},"es6","es3");
(function(c){"function"===typeof define&&define.amd?define(["jquery","jquery.ui.widget"],c):c(window.jQuery)})(function(c){c.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader);c.support.xhrFormDataFileUpload=!!window.FormData;c.propHooks.elements={get:function(d){return c.nodeName(d,"form")?c.grep(d.elements,function(d){return!c.nodeName(d,"input")||"file"!==d.type}):null}};c.widget("blueimp.fileupload",{options:{dropZone:c(document),pasteZone:c(document),fileInput:void 0,replaceFileInput:!0,
paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(c){return c.serializeArray()},add:function(c,f){f.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart",
"forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date;this.bitrate=this.loaded=0;this.getBitrate=function(c,f,b){var a=c-this.timestamp;if(!this.bitrate||!b||a>b)this.bitrate=1E3/a*(f-this.loaded)*8,this.loaded=f,this.timestamp=c;return this.bitrate}},_isXHRUpload:function(d){return!d.forceIframeTransport&&(!d.multipart&&c.support.xhrFileUpload||c.support.xhrFormDataFileUpload)},_getFormData:function(d){if("function"===typeof d.formData)return d.formData(d.form);if(c.isArray(d.formData))return d.formData;
if(d.formData){var f=[];c.each(d.formData,function(b,a){f.push({name:b,value:a})});return f}return[]},_getTotal:function(d){var f=0;c.each(d,function(b,a){f+=a.size||1});return f},_onProgress:function(c,f){if(c.lengthComputable){var b=+new Date;if(!(f._time&&f.progressInterval&&b-f._time<f.progressInterval&&c.loaded!==c.total)){f._time=b;var a=f.total||this._getTotal(f.files);var e=parseInt(c.loaded/c.total*(f.chunkSize||a),10)+(f.uploadedBytes||0);this._loaded+=e-(f.loaded||f.uploadedBytes||0);f.lengthComputable=
!0;f.loaded=e;f.total=a;f.bitrate=f._bitrateTimer.getBitrate(b,e,f.bitrateInterval);this._trigger("progress",c,f);this._trigger("progressall",c,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(b,this._loaded,f.bitrateInterval)})}}},_initProgressListener:function(d){var f=this,b=d.xhr?d.xhr():c.ajaxSettings.xhr();b.upload&&(c(b.upload).bind("progress",function(a){var b=a.originalEvent;a.lengthComputable=b.lengthComputable;a.loaded=b.loaded;a.total=b.total;
f._onProgress(a,d)}),d.xhr=function(){return b})},_initXHRData:function(d){var f=d.files[0],b=d.multipart||!c.support.xhrFileUpload,a=d.paramName[0];d.headers=d.headers||{};d.contentRange&&(d.headers["Content-Range"]=d.contentRange);if(!b)d.headers["Content-Disposition"]='attachment; filename="'+encodeURI(f.name)+'"',d.contentType=f.type,d.data=d.blob||f;else if(c.support.xhrFormDataFileUpload){if(d.postMessage){var e=this._getFormData(d);d.blob?e.push({name:a,value:d.blob}):c.each(d.files,function(b,
c){e.push({name:d.paramName[b]||a,value:c})})}else d.formData instanceof FormData?e=d.formData:(e=new FormData,c.each(this._getFormData(d),function(a,b){e.append(b.name,b.value)})),d.blob?(d.headers["Content-Disposition"]='attachment; filename="'+encodeURI(f.name)+'"',e.append(a,d.blob,f.name)):c.each(d.files,function(b,c){(window.Blob&&c instanceof Blob||window.File&&c instanceof File)&&e.append(d.paramName[b]||a,c,c.name)});d.data=e}d.blob=null},_initIframeSettings:function(d){d.dataType="iframe "+
(d.dataType||"");d.formData=this._getFormData(d);d.redirect&&c("<a></a>").prop("href",d.url).prop("host")!==location.host&&d.formData.push({name:d.redirectParamName||"redirect",value:d.redirect})},_initDataSettings:function(c){this._isXHRUpload(c)?(this._chunkedUpload(c,!0)||(c.data||this._initXHRData(c),this._initProgressListener(c)),c.postMessage&&(c.dataType="postmessage "+(c.dataType||""))):this._initIframeSettings(c,"iframe")},_getParamName:function(d){var f=c(d.fileInput),b=d.paramName;b?c.isArray(b)||
(b=[b]):(b=[],f.each(function(){var a=c(this),e=a.prop("name")||"files[]";for(a=(a.prop("files")||[1]).length;a;)b.push(e),--a}),b.length||(b=[f.prop("name")||"files[]"]));return b},_initFormSettings:function(d){d.form&&d.form.length||(d.form=c(d.fileInput.prop("form")),d.form.length||(d.form=c(this.options.fileInput.prop("form"))));d.paramName=this._getParamName(d);d.url||(d.url=d.form.prop("action")||location.href);d.type=(d.type||d.form.prop("method")||"").toUpperCase();"POST"!==d.type&&"PUT"!==
d.type&&"PATCH"!==d.type&&(d.type="POST");d.formAcceptCharset||(d.formAcceptCharset=d.form.attr("accept-charset"))},_getAJAXSettings:function(d){d=c.extend({},this.options,d);this._initFormSettings(d);this._initDataSettings(d);return d},_enhancePromise:function(c){c.success=c.done;c.error=c.fail;c.complete=c.always;return c},_getXHRPromise:function(d,f,b){var a=c.Deferred(),e=a.promise();f=f||this.options.context||e;!0===d?a.resolveWith(f,b):!1===d&&a.rejectWith(f,b);e.abort=a.promise;return this._enhancePromise(e)},
_getUploadedBytes:function(c){return(c=(c=(c=c.getResponseHeader("Range"))&&c.split("-"))&&1<c.length&&parseInt(c[1],10))&&c+1},_chunkedUpload:function(d,f){var b=this,a=d.files[0],e=a.size,g=d.uploadedBytes=d.uploadedBytes||0,h=d.maxChunkSize||e,k=a.slice||a.webkitSlice||a.mozSlice,l=c.Deferred(),m=l.promise(),n;if(!(this._isXHRUpload(d)&&k&&(g||h<e))||d.data)return!1;if(f)return!0;if(g>=e)return a.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,d.context,[null,"error",a.error]);var p=
function(){var f=c.extend({},d);f.blob=k.call(a,g,g+h,a.type);f.chunkSize=f.blob.size;f.contentRange="bytes "+g+"-"+(g+f.chunkSize-1)+"/"+e;b._initXHRData(f);b._initProgressListener(f);n=(!1!==b._trigger("chunksend",null,f)&&c.ajax(f)||b._getXHRPromise(!1,f.context)).done(function(a,h,k){g=b._getUploadedBytes(k)||g+f.chunkSize;(!f.loaded||f.loaded<f.total)&&b._onProgress(c.Event("progress",{lengthComputable:!0,loaded:g-f.uploadedBytes,total:g-f.uploadedBytes}),f);d.uploadedBytes=f.uploadedBytes=g;
f.result=a;f.textStatus=h;f.jqXHR=k;b._trigger("chunkdone",null,f);b._trigger("chunkalways",null,f);g<e?p():l.resolveWith(f.context,[a,h,k])}).fail(function(a,e,g){f.jqXHR=a;f.textStatus=e;f.errorThrown=g;b._trigger("chunkfail",null,f);b._trigger("chunkalways",null,f);l.rejectWith(f.context,[a,e,g])})};this._enhancePromise(m);m.abort=function(){return n.abort()};p();return m},_beforeSend:function(c,f){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer);this._active+=
1;this._loaded+=f.uploadedBytes||0;this._total+=this._getTotal(f.files)},_onDone:function(d,f,b,a){if(!this._isXHRUpload(a)||!a.loaded||a.loaded<a.total){var e=this._getTotal(a.files)||1;this._onProgress(c.Event("progress",{lengthComputable:!0,loaded:e,total:e}),a)}a.result=d;a.textStatus=f;a.jqXHR=b;this._trigger("done",null,a)},_onFail:function(c,f,b,a){a.jqXHR=c;a.textStatus=f;a.errorThrown=b;this._trigger("fail",null,a);a.recalculateProgress&&(this._loaded-=a.loaded||a.uploadedBytes||0,this._total-=
a.total||this._getTotal(a.files))},_onAlways:function(c,f,b,a){--this._active;this._trigger("always",null,a);0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(d,f){var b=this,a,e,g=b._getAJAXSettings(f),h=function(){b._sending+=1;g._bitrateTimer=new b._BitrateTimer;return a=a||((e||!1===b._trigger("send",d,g))&&b._getXHRPromise(!1,g.context,e)||b._chunkedUpload(g)||c.ajax(g)).done(function(a,e,c){b._isXHRUpload(g)||"undefined"!==typeof a?
b._onDone(a,e,c,g):b._onFail(c,"error","Unknown",g)}).fail(function(a,e,c){b._onFail(a,e,c,g)}).always(function(a,e,c){--b._sending;b._onAlways(a,e,c,g);if(g.limitConcurrentUploads&&g.limitConcurrentUploads>b._sending)for(a=b._slots.shift();a;){if(e=a.state?"pending"===a.state():!a.isRejected()){a.resolve();break}a=b._slots.shift()}})};this._beforeSend(d,g);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(1<this.options.limitConcurrentUploads){var k=
c.Deferred();this._slots.push(k);f=k.pipe(h)}else f=this._sequence=this._sequence.pipe(h,h);f.abort=function(){e=[void 0,"abort","abort"];return a?a.abort():(k&&k.rejectWith(g.context,e),h())};return this._enhancePromise(f)}return h()},_onAdd:function(d,f){var b=this,a=!0,e=c.extend({},this.options,f),g=e.limitMultiFileUploads,h=this._getParamName(e),k;if((e.singleFileUploads||g)&&this._isXHRUpload(e))if(!e.singleFileUploads&&g){var l=[];var m=[];for(k=0;k<f.files.length;k+=g)l.push(f.files.slice(k,
k+g)),e=h.slice(k,k+g),e.length||(e=h),m.push(e)}else m=h;else l=[f.files],m=[h];f.originalFiles=f.files;c.each(l||f.files,function(e,g){var h=c.extend({},f);h.files=l?g:[g];h.paramName=m[e];h.submit=function(){return h.jqXHR=this.jqXHR=!1!==b._trigger("submit",d,this)&&b._onSend(d,this)};return a=b._trigger("add",d,h)});return a},_replaceFileInput:function(d){var f=d.clone(!0);c("<form></form>").append(f)[0].reset();d.after(f).detach();c.cleanData(d.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(b,
a){return a===d[0]?f[0]:a});d[0]===this.element[0]&&(this.element=f)},_handleFileTreeEntry:function(d,f){var b=this,a=c.Deferred(),e=function(b){b&&!b.entry&&(b.entry=d);a.resolve([b])};f=f||"";if(d.isFile)d._file?(d._file.relativePath=f,a.resolve(d._file)):d.file(function(b){b.relativePath=f;a.resolve(b)},e);else if(d.isDirectory){var g=d.createReader();g.readEntries(function(g){b._handleFileTreeEntries(g,f+d.name+"/").done(function(b){a.resolve(b)}).fail(e)},e)}else a.resolve([]);return a.promise()},
_handleFileTreeEntries:function(d,f){var b=this;return c.when.apply(c,c.map(d,function(a){return b._handleFileTreeEntry(a,f)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(d){d=d||{};var f=d.items;return f&&f.length&&(f[0].webkitGetAsEntry||f[0].getAsEntry)?this._handleFileTreeEntries(c.map(f,function(b){var a;if(b.webkitGetAsEntry){if(a=b.webkitGetAsEntry())a._file=b.getAsFile();return a}return b.getAsEntry()})):c.Deferred().resolve(c.makeArray(d.files)).promise()},
_getSingleFileInputFiles:function(d){d=c(d);var f=d.prop("webkitEntries")||d.prop("entries");if(f&&f.length)return this._handleFileTreeEntries(f);f=c.makeArray(d.prop("files"));if(f.length)void 0===f[0].name&&f[0].fileName&&c.each(f,function(b,a){a.name=a.fileName;a.size=a.fileSize});else{d=d.prop("value");if(!d)return c.Deferred().resolve([]).promise();f=[{name:d.replace(/^.*\\/,"")}]}return c.Deferred().resolve(f).promise()},_getFileInputFiles:function(d){return d instanceof c&&1!==d.length?c.when.apply(c,
c.map(d,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(d)},_onChange:function(d){var f=this,b={fileInput:c(d.target),form:c(d.target.form)};this._getFileInputFiles(b.fileInput).always(function(a){b.files=a;f.options.replaceFileInput&&f._replaceFileInput(b.fileInput);!1!==f._trigger("change",d,b)&&f._onAdd(d,b)})},_onPaste:function(d){var f=d.originalEvent.clipboardData,b={files:[]};c.each(f&&f.items||[],function(a,
e){(a=e.getAsFile&&e.getAsFile())&&b.files.push(a)});if(!1===this._trigger("paste",d,b)||!1===this._onAdd(d,b))return!1},_onDrop:function(c){var f=this,b=c.dataTransfer=c.originalEvent.dataTransfer,a={};b&&b.files&&b.files.length&&c.preventDefault();this._getDroppedFiles(b).always(function(b){a.files=b;!1!==f._trigger("drop",c,a)&&f._onAdd(c,a)})},_onDragOver:function(d){var f=d.dataTransfer=d.originalEvent.dataTransfer;if(!1===this._trigger("dragover",d))return!1;f&&-1!==c.inArray("Files",f.types)&&
(f.dropEffect="copy",d.preventDefault())},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste}));this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(d,f){var b=-1!==
c.inArray(d,this._refreshOptionsList);b&&this._destroyEventHandlers();this._super(d,f);b&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var d=this.options;void 0===d.fileInput?d.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):d.fileInput instanceof c||(d.fileInput=c(d.fileInput));d.dropZone instanceof c||(d.dropZone=c(d.dropZone));d.pasteZone instanceof c||(d.pasteZone=c(d.pasteZone))},_create:function(){var d=
this.options;c.extend(d,c(this.element[0].cloneNode(!1)).data());d.blueimpFileupload=null;d.fileupload=null;this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(d){var f=this;d&&!this.options.disabled&&(d.fileInput&&!d.files?this._getFileInputFiles(d.fileInput).always(function(b){d.files=b;f._onAdd(null,d)}):(d.files=c.makeArray(d.files),
this._onAdd(null,d)))},send:function(d){if(d&&!this.options.disabled){if(d.fileInput&&!d.files){var f=this,b=c.Deferred(),a=b.promise(),e,g;a.abort=function(){g=!0;if(e)return e.abort();b.reject(null,"abort","abort");return a};this._getFileInputFiles(d.fileInput).always(function(a){g||(d.files=a,e=f._onSend(null,d).then(function(a,e,g){b.resolve(a,e,g)},function(a,e,g){b.reject(a,e,g)}))});return this._enhancePromise(a)}d.files=c.makeArray(d.files);if(d.files.length)return this._onSend(null,d)}return this._getXHRPromise(!1,
d&&d.context)}})});
(function(c){var d=c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype,f;if(f=c.Blob)try{f=!!new Blob}catch(h){f=!1}var b=f;if(f=b&&c.Uint8Array)try{f=100===(new Blob([new Uint8Array(100)])).size}catch(h){f=!1}var a=f,e=c.BlobBuilder||c.WebKitBlobBuilder||c.MozBlobBuilder||c.MSBlobBuilder,g=(b||e)&&c.atob&&c.ArrayBuffer&&c.Uint8Array&&function(g){var c,f,d,h;0<=g.split(",")[0].indexOf("base64")?c=atob(g.split(",")[1]):c=decodeURIComponent(g.split(",")[1]);var p=new ArrayBuffer(c.length);var r=new Uint8Array(p);
for(f=0;f<c.length;f+=1)r[f]=c.charCodeAt(f);return d=g.split(",")[0].split(":")[1].split(";")[0],b?new Blob([a?r:p],{type:d}):(h=new e,h.append(p),h.getBlob(d))};c.HTMLCanvasElement&&!d.toBlob&&(d.mozGetAsFile?d.toBlob=function(a,b,e){e&&d.toDataURL&&g?a(g(this.toDataURL(b,e))):a(this.mozGetAsFile("blob",b))}:d.toDataURL&&g&&(d.toBlob=function(a,b,e){a(g(this.toDataURL(b,e)))}));"function"==typeof define&&define.amd?define(function(){return g}):c.dataURLtoBlob=g})(this);
(function(c){"function"===typeof define&&define.amd?define(["jquery","load-image","canvas-to-blob","./jquery.fileupload"],c):c(window.jQuery,window.loadImage)})(function(c,d){c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{process:[],add:function(f,b){c(this).fileupload("process",b).done(function(){b.submit()})}},processActions:{load:function(f,b){var a=this,e=f.files[f.index],g=c.Deferred();window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&("number"!==c.type(b.maxFileSize)||
e.size<b.maxFileSize)&&(!b.fileTypes||b.fileTypes.test(e.type))?d(e,function(b){if(!b.src)return g.rejectWith(a,[f]);f.img=b;g.resolveWith(a,[f])}):g.rejectWith(a,[f]);return g.promise()},resize:function(f,b){var a=f.img;b=c.extend({canvas:!0},b);a&&(b=d.scale(a,b),b.width!==a.width||b.height!==a.height)&&(f.canvas=b);return f},save:function(f,b){if(!f.canvas)return f;var a=this,e=f.files[f.index];b=e.name;var g=c.Deferred(),d=function(b){b.name||(e.type===b.type?b.name=e.name:e.name&&(b.name=e.name.replace(/\..+$/,
"."+b.type.substr(6))));f.files[f.index]=b;g.resolveWith(a,[f])};f.canvas.mozGetAsFile?d(f.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(e.type)&&b||(b&&b.replace(/\..+$/,"")||"blob")+".png",e.type)):f.canvas.toBlob(d,e.type);return g.promise()}},_processFile:function(f,b,a){var e=this,g=c.Deferred().resolveWith(e,[{files:f,index:b}]).promise();e._processing+=1;c.each(a.process,function(a,b){g=g.pipe(function(a){return e.processActions[b.action].call(this,a,b)})});g.always(function(){--e._processing;
0===e._processing&&e.element.removeClass("fileupload-processing")});1===e._processing&&e.element.addClass("fileupload-processing");return g},process:function(f){var b=this,a=c.extend({},this.options,f);a.process&&a.process.length&&this._isXHRUpload(a)&&c.each(f.files,function(e,g){b._processingQueue=b._processingQueue.pipe(function(){var g=c.Deferred();b._processFile(f.files,e,a).always(function(){g.resolveWith(b)});return g.promise()})});return this._processingQueue},_create:function(){this._super();
this._processing=0;this._processingQueue=c.Deferred().resolveWith(this).promise()}})});
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(window.jQuery)})(function(c){var d=0;c.ajaxTransport("iframe",function(f){if(f.async){var b=f.initialIframeSrc||"javascript:false;",a,e,g;return{send:function(h,k){a=c('<form style="display:none;"></form>');a.attr("accept-charset",f.formAcceptCharset);g=/\?/.test(f.url)?"&":"?";"DELETE"===f.type?(f.url=f.url+g+"_method=DELETE",f.type="POST"):"PUT"===f.type?(f.url=f.url+g+"_method=PUT",f.type="POST"):"PATCH"===f.type&&(f.url=
f.url+g+"_method=PATCH",f.type="POST");d+=1;e=c('<iframe src="'+b+'" name="iframe-transport-'+d+'"></iframe>').bind("load",function(){var g=c.isArray(f.paramName)?f.paramName:[f.paramName];e.unbind("load").bind("load",function(){try{var g=e.contents();if(!g.length||!g[0].firstChild)throw Error();}catch(p){g=void 0}k(200,"success",{iframe:g});c('<iframe src="'+b+'"></iframe>').appendTo(a);window.setTimeout(function(){a.remove()},0)});a.prop("target",e.prop("name")).prop("action",f.url).prop("method",
f.type);f.formData&&c.each(f.formData,function(b,e){c('<input type="hidden"/>').prop("name",e.name).val(e.value).appendTo(a)});if(f.fileInput&&f.fileInput.length&&"POST"===f.type){var d=f.fileInput.clone();f.fileInput.after(function(a){return d[a]});f.paramName&&f.fileInput.each(function(a){c(this).prop("name",g[a]||f.paramName)});a.append(f.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");f.fileInput.removeAttr("form")}a.submit();d&&d.length&&f.fileInput.each(function(a,
b){a=c(d[a]);c(b).prop("name",a.prop("name")).attr("form",a.attr("form"));a.replaceWith(b)})});a.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src",b);a&&a.remove()}}}});c.ajaxSetup({converters:{"iframe text":function(f){return f&&c(f[0].body).text()},"iframe json":function(f){return f&&c.parseJSON(c(f[0].body).text())},"iframe html":function(f){return f&&c(f[0].body).html()},"iframe xml":function(f){return(f=f&&f[0])&&c.isXMLDoc(f)?f:c.parseXML(f.XMLDocument&&f.XMLDocument.xml||
c(f.body).html())},"iframe script":function(f){return f&&c.globalEval(c(f[0].body).text())}}})});
!function(c){var d=function(b,a,e){var g,c=document.createElement("img");if(c.onerror=a,c.onload=function(){!g||e&&e.noRevoke||d.revokeObjectURL(g);a&&a(d.scale(c,e))},d.isInstanceOf("Blob",b)||d.isInstanceOf("File",b)){var f=g=d.createObjectURL(b);c._type=b.type}else{if("string"!=typeof b)return!1;f=b;e&&e.crossOrigin&&(c.crossOrigin=e.crossOrigin)}return f?(c.src=f,c):d.readFile(b,function(b){var e=b.target;e&&e.result?c.src=e.result:a&&a(b)})},f=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&
URL||window.webkitURL&&webkitURL;d.isInstanceOf=function(b,a){return Object.prototype.toString.call(a)==="[object "+b+"]"};d.transformCoordinates=function(){};d.getTransformedOptions=function(b){return b};d.renderImageToCanvas=function(b,a,e,g,c,f,d,m,n,p){return b.getContext("2d").drawImage(a,e,g,c,f,d,m,n,p),b};d.hasCanvasOption=function(b){return b.canvas||b.crop};d.scale=function(b,a){a=a||{};var e,g,c,f,l,m,n,p,r,w=document.createElement("canvas"),u=b.getContext||d.hasCanvasOption(a)&&w.getContext,
v=b.naturalWidth||b.width,q=b.naturalHeight||b.height,t=v,B=q,H=function(){var a=Math.max((c||t)/t,(f||B)/B);1<a&&(t=Math.ceil(t*a),B=Math.ceil(B*a))},y=function(){var a=Math.min((e||t)/t,(g||B)/B);1>a&&(t=Math.ceil(t*a),B=Math.ceil(B*a))};return u&&(a=d.getTransformedOptions(a),n=a.left||0,p=a.top||0,a.sourceWidth?(l=a.sourceWidth,void 0!==a.right&&void 0===a.left&&(n=v-l-a.right)):l=v-n-(a.right||0),a.sourceHeight?(m=a.sourceHeight,void 0!==a.bottom&&void 0===a.top&&(p=q-m-a.bottom)):m=q-p-(a.bottom||
0),t=l,B=m),e=a.maxWidth,g=a.maxHeight,c=a.minWidth,f=a.minHeight,u&&e&&g&&a.crop?(t=e,B=g,r=l/m-e/g,0>r?(m=g*l/e,void 0===a.top&&void 0===a.bottom&&(p=(q-m)/2)):0<r&&(l=e*m/g,void 0===a.left&&void 0===a.right&&(n=(v-l)/2))):((a.contain||a.cover)&&(c=e=e||c,f=g=g||f),a.cover?(y(),H()):(H(),y())),u?(w.width=t,w.height=B,d.transformCoordinates(w,a),d.renderImageToCanvas(w,b,n,p,l,m,0,0,t,B)):(b.width=t,b.height=B,b)};d.createObjectURL=function(b){return f?f.createObjectURL(b):!1};d.revokeObjectURL=
function(b){return f?f.revokeObjectURL(b):!1};d.readFile=function(b,a,e){if(window.FileReader){var g=new FileReader;if(g.onload=g.onerror=a,e=e||"readAsDataURL",g[e])return g[e](b),g}return!1};"function"==typeof define&&define.amd?define(function(){return d}):c.loadImage=d}(this);
(function(c){"function"==typeof define&&define.amd?define(["load-image"],c):c(window.loadImage)})(function(c){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var d=c.renderImageToCanvas;c.detectSubsampling=function(c){var b,a;return 1048576<c.width*c.height?(b=document.createElement("canvas"),b.width=b.height=1,a=b.getContext("2d"),a.drawImage(c,-c.width+1,0),0===a.getImageData(0,0,1,1).data[3]):!1};c.detectVerticalSquash=function(c,b){var a=c.naturalHeight||
c.height;var e=document.createElement("canvas");var g=e.getContext("2d");b&&(a/=2);e.width=1;e.height=a;g.drawImage(c,0,0);c=g.getImageData(0,0,1,a).data;b=0;for(g=e=a;g>b;){var f=c[4*(g-1)+3];0===f?e=g:b=g;g=e+b>>1}return g/a||1};c.renderImageToCanvas=function(f,b,a,e,g,h,k,l,m,n){if("image/jpeg"===b._type){var p,r,w=f.getContext("2d"),u=document.createElement("canvas"),v=u.getContext("2d");if(u.width=1024,u.height=1024,w.save(),p=c.detectSubsampling(b),p&&(a/=2,e/=2,g/=2,h/=2),r=c.detectVerticalSquash(b,
p),p||1!==r){e*=r;m=Math.ceil(1024*m/g);n=Math.ceil(1024*n/h/r);for(r=l=0;h>r;){for(p=k=0;g>p;)v.clearRect(0,0,1024,1024),v.drawImage(b,a,e,g,h,-p,-r,g,h),w.drawImage(u,0,0,1024,1024,k,l,m,n),p+=1024,k+=m;r+=1024;l+=n}return w.restore(),f}}return d(f,b,a,e,g,h,k,l,m,n)}}});
(function(c){"function"==typeof define&&define.amd?define(["load-image"],c):c(window.loadImage)})(function(c){var d=c.hasCanvasOption;c.hasCanvasOption=function(c){return d(c)||c.orientation};c.transformCoordinates=function(c,b){var a=c.getContext("2d"),e=c.width,g=c.height;if(b=b.orientation)switch(4<b&&(c.width=g,c.height=e),b){case 2:a.translate(e,0);a.scale(-1,1);break;case 3:a.translate(e,g);a.rotate(Math.PI);break;case 4:a.translate(0,g);a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI);a.scale(1,
-1);break;case 6:a.rotate(.5*Math.PI);a.translate(0,-g);break;case 7:a.rotate(.5*Math.PI);a.translate(e,-g);a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-e,0)}};c.getTransformedOptions=function(c){if(!c.orientation||1===c.orientation)return c;var b,a={};for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);switch(c.orientation){case 2:a.left=c.right;a.right=c.left;break;case 3:a.left=c.right;a.top=c.bottom;a.right=c.left;a.bottom=c.top;break;case 4:a.top=c.bottom;a.bottom=c.top;break;case 5:a.left=
c.top;a.top=c.left;a.right=c.bottom;a.bottom=c.right;break;case 6:a.left=c.top;a.top=c.right;a.right=c.bottom;a.bottom=c.left;break;case 7:a.left=c.bottom;a.top=c.right;a.right=c.top;a.bottom=c.left;break;case 8:a.left=c.bottom,a.top=c.left,a.right=c.top,a.bottom=c.right}return 4<c.orientation&&(a.maxWidth=c.maxHeight,a.maxHeight=c.maxWidth,a.minWidth=c.minHeight,a.minHeight=c.minWidth,a.sourceWidth=c.sourceHeight,a.sourceHeight=c.sourceWidth),a}});
(function(c){"function"==typeof define&&define.amd?define(["load-image"],c):c(window.loadImage)})(function(c){c.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice)&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)};c.metaDataParsers={jpeg:{65505:[]}};c.parseMetaData=function(d,f,b){b=b||{};var a=this,e=b.maxMetaDataSize||262144,g={};window.DataView&&d&&12<=d.size&&"image/jpeg"===d.type&&c.blobSlice&&c.readFile(c.blobSlice.call(d,
0,e),function(e){var d,h,m;e=e.target.result;var n=new DataView(e),p=2,r=n.byteLength-4;var w=p;if(65496===n.getUint16(0)){for(;r>p&&(d=n.getUint16(p),65504<=d&&65519>=d||65534===d);){if(h=n.getUint16(p+2)+2,p+h>n.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(w=c.metaDataParsers.jpeg[d])for(m=0;m<w.length;m+=1)w[m].call(a,n,p,h,g,b);w=p+=h}!b.disableImageHead&&6<w&&(g.imageHead=e.slice?e.slice(0,w):(new Uint8Array(e)).subarray(0,w))}else console.log("Invalid JPEG file: Missing JPEG marker.");
f(g)},"readAsArrayBuffer")||f(g)}});
(function(c){"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],c):c(window.loadImage)})(function(c){c.ExifMap=function(){return this};c.ExifMap.prototype.map={Orientation:274};c.ExifMap.prototype.get=function(c){return this[c]||this[this.map[c]]};c.getExifThumbnail=function(c,f,b){var a;if(!b||f+b>c.byteLength)return console.log("Invalid Exif data: Invalid thumbnail data."),void 0;var e=[];for(a=0;b>a;a+=1){var g=c.getUint8(f+a);e.push((16>g?"0":"")+g.toString(16))}return"data:image/jpeg,%"+
e.join("%")};c.exifTagTypes={1:{getValue:function(c,f){return c.getUint8(f)},size:1},2:{getValue:function(c,f){return String.fromCharCode(c.getUint8(f))},size:1,ascii:!0},3:{getValue:function(c,f,b){return c.getUint16(f,b)},size:2},4:{getValue:function(c,f,b){return c.getUint32(f,b)},size:4},5:{getValue:function(c,f,b){return c.getUint32(f,b)/c.getUint32(f+4,b)},size:8},9:{getValue:function(c,f,b){return c.getInt32(f,b)},size:4},10:{getValue:function(c,f,b){return c.getInt32(f,b)/c.getInt32(f+4,b)},
size:8}};c.exifTagTypes[7]=c.exifTagTypes[1];c.getExifValue=function(d,f,b,a,e,g){var h,k,l;a=c.exifTagTypes[a];if(!a)return console.log("Invalid Exif data: Invalid tag type."),void 0;if(h=a.size*e,k=4<h?f+d.getUint32(b+8,g):b+8,k+h>d.byteLength)return console.log("Invalid Exif data: Invalid data offset."),void 0;if(1===e)return a.getValue(d,k,g);f=[];for(b=0;e>b;b+=1)f[b]=a.getValue(d,k+b*a.size,g);if(a.ascii){d="";for(b=0;b<f.length&&(l=f[b],"\x00"!==l);b+=1)d+=l;return d}return f};c.parseExifTag=
function(d,f,b,a,e){var g=d.getUint16(b,a);e.exif[g]=c.getExifValue(d,f,b,d.getUint16(b+2,a),d.getUint32(b+4,a),a)};c.parseExifTags=function(c,f,b,a,e){var g,d,k;if(b+6>c.byteLength)return console.log("Invalid Exif data: Invalid directory offset."),void 0;if(g=c.getUint16(b,a),d=b+2+12*g,d+4>c.byteLength)return console.log("Invalid Exif data: Invalid directory size."),void 0;for(k=0;g>k;k+=1)this.parseExifTag(c,f,b+2+12*k,a,e);return c.getUint32(d,a)};c.parseExifData=function(d,f,b,a,e){if(!e.disableExif){var g;
b=f+10;if(1165519206===d.getUint32(f+4)){if(b+8>d.byteLength)return console.log("Invalid Exif data: Invalid segment size."),void 0;if(0!==d.getUint16(f+8))return console.log("Invalid Exif data: Missing byte alignment offset."),void 0;switch(d.getUint16(b)){case 18761:f=!0;break;case 19789:f=!1;break;default:return console.log("Invalid Exif data: Invalid byte alignment marker."),void 0}if(42!==d.getUint16(b+2,f))return console.log("Invalid Exif data: Missing TIFF marker."),void 0;var h=d.getUint32(b+
4,f);a.exif=new c.ExifMap;(h=c.parseExifTags(d,b,b+h,f,a))&&!e.disableExifThumbnail&&(g={exif:{}},c.parseExifTags(d,b,b+h,f,g),g.exif[513]&&(a.exif.Thumbnail=c.getExifThumbnail(d,b+g.exif[513],g.exif[514])));a.exif[34665]&&!e.disableExifSub&&c.parseExifTags(d,b,b+a.exif[34665],f,a);a.exif[34853]&&!e.disableExifGps&&c.parseExifTags(d,b,b+a.exif[34853],f,a)}}};c.metaDataParsers.jpeg[65505].push(c.parseExifData)});
(function(c){"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],c):c(window.loadImage)})(function(c){c.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",
273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",
37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",
37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",
41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",
4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",
30:"GPSDifferential",31:"GPSHPositioningError"};c.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",
10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",
15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",
77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",
5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},
Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}};c.ExifMap.prototype.getText=function(c){var d=this.get(c);switch(c){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":case "Orientation":return this.stringValues[c][d];
case "ExifVersion":case "FlashpixVersion":return String.fromCharCode(d[0],d[1],d[2],d[3]);case "ComponentsConfiguration":return this.stringValues[c][d[0]]+this.stringValues[c][d[1]]+this.stringValues[c][d[2]]+this.stringValues[c][d[3]];case "GPSVersionID":return d[0]+"."+d[1]+"."+d[2]+"."+d[3]}return String(d)};(function(c){var d,b=c.tags;c=c.map;for(d in b)b.hasOwnProperty(d)&&(c[b[d]]=d)})(c.ExifMap.prototype);c.ExifMap.prototype.getAll=function(){var c,f,b={};for(c in this)this.hasOwnProperty(c)&&
(f=this.tags[c],f&&(b[f]=this.getText(f)));return b}});
(function(c){var d=function(c,b){var a=/[^\w\-\.:]/.test(c)?new Function(d.arg+",tmpl","var _e=tmpl.encode"+d.helper+",_s='"+c.replace(d.regexp,d.func)+"';return _s;"):d.cache[c]=d.cache[c]||d(d.load(c));return b?a(b,d):function(b){return a(b,d)}};d.cache={};d.load=function(c){return document.getElementById(c).innerHTML};d.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;d.func=function(c,b,a,e,g,d){if(b)return{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[c]||"\\"+c;if(a)return"="===
a?"'+_e("+e+")+'":"'+("+e+"||'')+'";if(g)return"';";if(d)return"_s+='"};d.encReg=/[<>&"'\x00]/g;d.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};d.encode=function(c){return String(c||"").replace(d.encReg,function(b){return d.encMap[b]||""})};d.arg="o";d.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}";"function"===typeof define&&define.amd?define(function(){return d}):c.tmpl=d})(this);
(function(c,d){"function"===typeof define&&define.amd?define(["jquery"],d):"object"===typeof exports?d(require("jquery")):c.jQuery?d(c.jQuery):d(c.Zepto)})(this,function(c,d){c.fn.jPlayer=function(a){var b="string"===typeof a,e=Array.prototype.slice.call(arguments,1),g=this;a=!b&&e.length?c.extend.apply(null,[!0,a].concat(e)):a;if(b&&"_"===a.charAt(0))return g;b?this.each(function(){var b=c(this).data("jPlayer"),f=b&&c.isFunction(b[a])?b[a].apply(b,e):b;if(f!==b&&f!==d)return g=f,!1}):this.each(function(){var b=
c(this).data("jPlayer");b?b.option(a||{}):c(this).data("jPlayer",new c.jPlayer(a,this))});return g};c.jPlayer=function(a,b){if(arguments.length){this.element=c(b);this.options=c.extend(!0,{},this.options,a);var e=this;this.element.bind("remove.jPlayer",function(){e.destroy()});this._init()}};"function"!==typeof c.fn.stop&&(c.fn.stop=function(){});c.jPlayer.emulateMethods="load play pause";c.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";c.jPlayer.emulateOptions=
"muted volume";c.jPlayer.reservedEvent="ready flashreset resize repeat error warning";c.jPlayer.event={};c.each("ready setmedia flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){c.jPlayer.event[this]="jPlayer_"+this});c.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata canplay canplaythrough".split(" ");
c.jPlayer.pause=function(){c.jPlayer.prototype.destroyRemoved();c.each(c.jPlayer.prototype.instances,function(a,b){b.data("jPlayer").status.srcSet&&b.jPlayer("pause")})};c.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var f=function(){this.init()};f.prototype={init:function(){this.options={timeFormat:c.jPlayer.timeFormat}},time:function(a){var b=new Date(1E3*(a&&"number"===typeof a?a:0)),e=b.getUTCHours();a=this.options.timeFormat.showHour?
b.getUTCMinutes():b.getUTCMinutes()+60*e;b=this.options.timeFormat.showMin?b.getUTCSeconds():b.getUTCSeconds()+60*a;e=this.options.timeFormat.padHour&&10>e?"0"+e:e;a=this.options.timeFormat.padMin&&10>a?"0"+a:a;b=this.options.timeFormat.padSec&&10>b?"0"+b:b;e=""+(this.options.timeFormat.showHour?e+this.options.timeFormat.sepHour:"");e+=this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"";return e+=this.options.timeFormat.showSec?b+this.options.timeFormat.sepSec:""}};var b=new f;c.jPlayer.convertTime=
function(a){return b.time(a)};c.jPlayer.uaBrowser=function(a){a=a.toLowerCase();var b=/(opera)(?:.*version)?[ \/]([\w.]+)/,e=/(msie) ([\w.]+)/,g=/(mozilla)(?:.*? rv:([\w.]+))?/;a=/(webkit)[ \/]([\w.]+)/.exec(a)||b.exec(a)||e.exec(a)||0>a.indexOf("compatible")&&g.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};c.jPlayer.uaPlatform=function(a){var b=a.toLowerCase(),e=/(android)/,g=/(mobile)/;a=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(b)||[];b=/(ipad|playbook)/.exec(b)||
!g.exec(b)&&e.exec(b)||[];a[1]&&(a[1]=a[1].replace(/\s/g,"_"));return{platform:a[1]||"",tablet:b[1]||""}};c.jPlayer.browser={};c.jPlayer.platform={};var a=c.jPlayer.uaBrowser(navigator.userAgent);a.browser&&(c.jPlayer.browser[a.browser]=!0,c.jPlayer.browser.version=a.version);a=c.jPlayer.uaPlatform(navigator.userAgent);a.platform&&(c.jPlayer.platform[a.platform]=!0,c.jPlayer.platform.mobile=!a.tablet,c.jPlayer.platform.tablet=!!a.tablet);c.jPlayer.getDocMode=function(){if(c.jPlayer.browser.msie)if(document.documentMode)var a=
document.documentMode;else a=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(a=7);return a};c.jPlayer.browser.documentMode=c.jPlayer.getDocMode();c.jPlayer.nativeFeatures={init:function(){var a=document,b=a.createElement("video"),e={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),
webkit:" webkitCurrentFullScreenElement webkitRequestFullScreen webkitCancelFullScreen webkitfullscreenchange ".split(" "),webkitVideo:"webkitSupportsFullscreen webkitDisplayingFullscreen webkitEnterFullscreen webkitExitFullscreen  ".split(" "),ms:" msFullscreenElement msRequestFullscreen msExitFullscreen MSFullscreenChange MSFullscreenError".split(" ")},c=["w3c","moz","webkit","webkitVideo","ms"],d;this.fullscreen=b={support:{w3c:!!a[e.w3c[0]],moz:!!a[e.moz[0]],webkit:"function"===typeof a[e.webkit[3]],
webkitVideo:"function"===typeof b[e.webkitVideo[2]],ms:"function"===typeof b[e.ms[2]]},used:{}};var f=0;for(d=c.length;f<d;f++){var p=c[f];if(b.support[p]){b.spec=p;b.used[p]=!0;break}}if(b.spec){var r=e[b.spec];b.api={fullscreenEnabled:!0,fullscreenElement:function(b){b=b?b:a;return b[r[1]]},requestFullscreen:function(a){return a[r[2]]()},exitFullscreen:function(b){b=b?b:a;return b[r[3]]()}};b.event={fullscreenchange:r[4],fullscreenerror:r[5]}}else b.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},
requestFullscreen:function(){},exitFullscreen:function(){}},b.event={}}};c.jPlayer.nativeFeatures.init();c.jPlayer.focus=null;c.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var e=function(a){var b=c.jPlayer.focus,e;b&&(c.each(c.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(b,g){if(a.target.nodeName.toUpperCase()===g.toUpperCase())return e=!0,!1}),e||c.each(b.options.keyBindings,function(e,g){if(g&&c.isFunction(g.fn)&&("number"===typeof g.key&&a.which===g.key||"string"===typeof g.key&&
a.key===g.key))return a.preventDefault(),g.fn(b),!1}))};c.jPlayer.keys=function(a){c(document.documentElement).unbind("keydown.jPlayer");a&&c(document.documentElement).bind("keydown.jPlayer",e)};c.jPlayer.keys(!0);c.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,
minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",
duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,
hold:1E3},loop:!1,repeat:function(a){a.jPlayer.options.loop?c(this).unbind(".jPlayerRepeat").bind(c.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){c(this).jPlayer("play")}):c(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},
noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:70,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:77,fn:function(a){a._muted(!a.options.muted)}},
volumeUp:{key:190,fn:function(a){a.volume(a.options.volume+.1)}},volumeDown:{key:188,fn:function(a){a.volume(a.options.volume-.1)}},loop:{key:76,fn:function(a){a._loop(!a.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",
cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},
m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},
fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',
flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var a=this;this.element.empty();this.status=c.extend({},this.status);this.internal=c.extend({},this.internal);this.options.timeFormat=c.extend({},c.jPlayer.timeFormat,this.options.timeFormat);this.internal.cmdsIgnored=c.jPlayer.platform.ipad||c.jPlayer.platform.iphone||c.jPlayer.platform.ipod;this.internal.domNode=this.element.get(0);
this.options.keyEnabled&&!c.jPlayer.focus&&(c.jPlayer.focus=this);this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN};c.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto");this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.aurora={};this.aurora.formats=[];this.aurora.properties=[];this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=
this._limitValue(this.options.volume,0,1);c.each(this.options.supplied.toLowerCase().split(","),function(b,e){var g=e.replace(/^\s+|\s+$/g,"");if(a.format[g]){var d=!1;c.each(a.formats,function(a,b){if(g===b)return d=!0,!1});d||a.formats.push(g)}});c.each(this.options.solution.toLowerCase().split(","),function(b,e){var g=e.replace(/^\s+|\s+$/g,"");if(a.solution[g]){var d=!1;c.each(a.solutions,function(a,b){if(g===b)return d=!0,!1});d||a.solutions.push(g)}});c.each(this.options.auroraFormats.toLowerCase().split(","),
function(b,e){var g=e.replace(/^\s+|\s+$/g,"");if(a.format[g]){var d=!1;c.each(a.aurora.formats,function(a,b){if(g===b)return d=!0,!1});d||a.aurora.formats.push(g)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=c.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=c.extend({},{id:this.options.idPrefix+"_audio_"+this.count,
jq:d});this.internal.video=c.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:d});this.internal.flash=c.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:d,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")});this.internal.poster=c.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:d});c.each(c.jPlayer.event,function(b,e){a.options[b]!==d&&(a.element.bind(e+
".jPlayer",a.options[b]),a.options[b]=d)});this.require.audio=!1;this.require.video=!1;c.each(this.formats,function(b,e){a.require[a.format[e].media]=!0});this.options=this.require.video?c.extend(!0,{},this.optionsVideo,this.options):c.extend(!0,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this.status.noVolume=this._uaBlocklist(this.options.noVolume);
c.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners();this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){a.status.video&&!a.status.waitForPlay||a.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=c("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});
this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(b){b.stopPropagation();a._trigger(c.jPlayer.event.click)});this.html.audio.available=!1;this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio));this.html.video.available=!1;this.require.video&&(this.htmlElement.video=document.createElement("video"),
this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video));this.flash.available=this._checkForFlash(10.1);this.html.canPlay={};this.aurora.canPlay={};this.flash.canPlay={};c.each(this.formats,function(b,e){a.html.canPlay[e]=a.html[a.format[e].media].available&&""!==a.htmlElement[a.format[e].media].canPlayType(a.format[e].codec);a.aurora.canPlay[e]=-1<c.inArray(e,a.aurora.formats);a.flash.canPlay[e]=
a.format[e].flashCanPlay&&a.flash.available});this.html.desired=!1;this.aurora.desired=!1;this.flash.desired=!1;c.each(this.solutions,function(b,e){if(0===b)a[e].desired=!0;else{var g=!1,d=!1;c.each(a.formats,function(b,e){a[a.solutions[0]].canPlay[e]&&("video"===a.format[e].media?d=!0:g=!0)});a[e].desired=a.require.audio&&!g||a.require.video&&!d}});this.html.support={};this.aurora.support={};this.flash.support={};c.each(this.formats,function(b,e){a.html.support[e]=a.html.canPlay[e]&&a.html.desired;
a.aurora.support[e]=a.aurora.canPlay[e]&&a.aurora.desired;a.flash.support[e]=a.flash.canPlay[e]&&a.flash.desired});this.html.used=!1;this.aurora.used=!1;this.flash.used=!1;c.each(this.solutions,function(b,e){c.each(a.formats,function(b,g){if(a[e].support[g])return a[e].used=!0,!1})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:c.jPlayer.error.NO_SOLUTION,
context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:c.jPlayer.errorMsg.NO_SOLUTION,hint:c.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show());if(this.flash.used){var b="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(c.jPlayer.browser.msie&&(9>Number(c.jPlayer.browser.version)||9>c.jPlayer.browser.documentMode)){b=['<param name="movie" value="'+
this.internal.flash.swf+'" />','<param name="FlashVars" value="'+b+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];var e=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var f=0;f<b.length;f++)e.appendChild(document.createElement(b[f]))}else f=function(a,
b,e){var g=document.createElement("param");g.setAttribute("name",b);g.setAttribute("value",e);a.appendChild(g)},e=document.createElement("object"),e.setAttribute("id",this.internal.flash.id),e.setAttribute("name",this.internal.flash.id),e.setAttribute("data",this.internal.flash.swf),e.setAttribute("type","application/x-shockwave-flash"),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("tabindex","-1"),f(e,"flashvars",b),f(e,"allowscriptaccess","always"),f(e,"bgcolor",this.options.backgroundColor),
f(e,"wmode",this.options.wmode);this.element.append(e);this.internal.flash.jq=c(e)}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1;this._updatePlaybackRate();this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=c("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),
this.element.append(this.htmlElement.video),this.internal.video.jq=c("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(b){b.stopPropagation();a._trigger(c.jPlayer.event.click)})));this.options.emulateHtml&&this._emulateHtmlBridge();!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){a.internal.ready=
!0;a.version.flash="n/a";a._trigger(c.jPlayer.event.repeat);a._trigger(c.jPlayer.event.ready)},100);this._updateNativeVideoControls();this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();c.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");c.each(this.css.jq,function(a,b){b.length&&b.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");
this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this._fullscreenRemoveEventListeners();this===c.jPlayer.focus&&(c.jPlayer.focus=null);this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},destroyRemoved:function(){var a=this;c.each(this.instances,function(b,e){a.element===e||e.data("jPlayer")||(e.jPlayer("destroy"),delete a.instances[b])})},enable:function(){},
disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),!0}catch(h){return!1}},_testPlaybackRate:function(a){a=document.createElement("string"===typeof a?a:"audio");try{return"playbackRate"in a?(a.playbackRate=.5,.5===a.playbackRate):!1}catch(h){return!1}},_uaBlocklist:function(a){var b=navigator.userAgent.toLowerCase(),e=!1;c.each(a,function(a,g){if(g&&g.test(b))return e=!0,!1});return e},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&
(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",
height:"0px"})))},_addHtmlEventListeners:function(a,b){var e=this;a.preload=this.options.preload;a.muted=this.options.muted;a.volume=this.options.volume;this.status.playbackRateEnabled&&(a.defaultPlaybackRate=this.options.defaultPlaybackRate,a.playbackRate=this.options.playbackRate);a.addEventListener("progress",function(){b.gate&&(e.internal.cmdsIgnored&&0<this.readyState&&(e.internal.cmdsIgnored=!1),e._getHtmlStatus(a),e._updateInterface(),e._trigger(c.jPlayer.event.progress))},!1);a.addEventListener("loadeddata",
function(){b.gate&&(e.androidFix.setMedia=!1,e.androidFix.play&&(e.androidFix.play=!1,e.play(e.androidFix.time)),e.androidFix.pause&&(e.androidFix.pause=!1,e.pause(e.androidFix.time)),e._trigger(c.jPlayer.event.loadeddata))},!1);a.addEventListener("timeupdate",function(){b.gate&&(e._getHtmlStatus(a),e._updateInterface(),e._trigger(c.jPlayer.event.timeupdate))},!1);a.addEventListener("durationchange",function(){b.gate&&(e._getHtmlStatus(a),e._updateInterface(),e._trigger(c.jPlayer.event.durationchange))},
!1);a.addEventListener("play",function(){b.gate&&(e._updateButtons(!0),e._html_checkWaitForPlay(),e._trigger(c.jPlayer.event.play))},!1);a.addEventListener("playing",function(){b.gate&&(e._updateButtons(!0),e._seeked(),e._trigger(c.jPlayer.event.playing))},!1);a.addEventListener("pause",function(){b.gate&&(e._updateButtons(!1),e._trigger(c.jPlayer.event.pause))},!1);a.addEventListener("waiting",function(){b.gate&&(e._seeking(),e._trigger(c.jPlayer.event.waiting))},!1);a.addEventListener("seeking",
function(){b.gate&&(e._seeking(),e._trigger(c.jPlayer.event.seeking))},!1);a.addEventListener("seeked",function(){b.gate&&(e._seeked(),e._trigger(c.jPlayer.event.seeked))},!1);a.addEventListener("volumechange",function(){b.gate&&(e.options.volume=a.volume,e.options.muted=a.muted,e._updateMute(),e._updateVolume(),e._trigger(c.jPlayer.event.volumechange))},!1);a.addEventListener("ratechange",function(){b.gate&&(e.options.defaultPlaybackRate=a.defaultPlaybackRate,e.options.playbackRate=a.playbackRate,
e._updatePlaybackRate(),e._trigger(c.jPlayer.event.ratechange))},!1);a.addEventListener("suspend",function(){b.gate&&(e._seeked(),e._trigger(c.jPlayer.event.suspend))},!1);a.addEventListener("ended",function(){b.gate&&(c.jPlayer.browser.webkit||(e.htmlElement.media.currentTime=0),e.htmlElement.media.pause(),e._updateButtons(!1),e._getHtmlStatus(a,!0),e._updateInterface(),e._trigger(c.jPlayer.event.ended))},!1);a.addEventListener("error",function(){b.gate&&(e._updateButtons(!1),e._seeked(),e.status.srcSet&&
(clearTimeout(e.internal.htmlDlyCmdId),e.status.waitForLoad=!0,e.status.waitForPlay=!0,e.status.video&&!e.status.nativeVideoControls&&e.internal.video.jq.css({width:"0px",height:"0px"}),e._validString(e.status.media.poster)&&!e.status.nativeVideoControls&&e.internal.poster.jq.show(),e.css.jq.videoPlay.length&&e.css.jq.videoPlay.show(),e._error({type:c.jPlayer.error.URL,context:e.status.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL})))},!1);c.each(c.jPlayer.htmlEvent,function(g,d){a.addEventListener(this,
function(){b.gate&&e._trigger(c.jPlayer.event[d])},!1)})},_addAuroraEventListeners:function(a,b){var e=this;a.volume=100*this.options.volume;a.on("progress",function(){b.gate&&(e.internal.cmdsIgnored&&0<this.readyState&&(e.internal.cmdsIgnored=!1),e._getAuroraStatus(a),e._updateInterface(),e._trigger(c.jPlayer.event.progress),0<a.duration&&e._trigger(c.jPlayer.event.timeupdate))},!1);a.on("ready",function(){b.gate&&e._trigger(c.jPlayer.event.loadeddata)},!1);a.on("duration",function(){b.gate&&(e._getAuroraStatus(a),
e._updateInterface(),e._trigger(c.jPlayer.event.durationchange))},!1);a.on("end",function(){b.gate&&(e._updateButtons(!1),e._getAuroraStatus(a,!0),e._updateInterface(),e._trigger(c.jPlayer.event.ended))},!1);a.on("error",function(){b.gate&&(e._updateButtons(!1),e._seeked(),e.status.srcSet&&(e.status.waitForLoad=!0,e.status.waitForPlay=!0,e.status.video&&!e.status.nativeVideoControls&&e.internal.video.jq.css({width:"0px",height:"0px"}),e._validString(e.status.media.poster)&&!e.status.nativeVideoControls&&
e.internal.poster.jq.show(),e.css.jq.videoPlay.length&&e.css.jq.videoPlay.show(),e._error({type:c.jPlayer.error.URL,context:e.status.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(a,b){isFinite(a.duration)&&(this.status.duration=a.duration);var e=a.currentTime;var g=0<this.status.duration?100*e/this.status.duration:0;if("object"===typeof a.seekable&&0<a.seekable.length){var c=0<this.status.duration?100*a.seekable.end(a.seekable.length-1)/this.status.duration:
100;var d=0<this.status.duration?100*a.currentTime/a.seekable.end(a.seekable.length-1):0}else c=100,d=g;b&&(g=d=e=0);this.status.seekPercent=c;this.status.currentPercentRelative=d;this.status.currentPercentAbsolute=g;this.status.currentTime=e;this.status.remaining=this.status.duration-this.status.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=a.readyState;this.status.networkState=a.networkState;this.status.playbackRate=a.playbackRate;this.status.ended=
a.ended},_getAuroraStatus:function(a,b){this.status.duration=a.duration/1E3;var e=a.currentTime/1E3;var g=0<this.status.duration?100*e/this.status.duration:0;if(0<a.buffered){var c=0<this.status.duration?a.buffered*this.status.duration/this.status.duration:100;a=0<this.status.duration?e/(a.buffered*this.status.duration):0}else c=100,a=g;b&&(g=a=e=0);this.status.seekPercent=c;this.status.currentPercentRelative=a;this.status.currentPercentAbsolute=g;this.status.currentTime=e;this.status.remaining=this.status.duration-
this.status.currentTime;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=!1},_resetStatus:function(){this.status=c.extend({},this.status,c.jPlayer.prototype.status)},_trigger:function(a,b,e){a=c.Event(a);a.jPlayer={};a.jPlayer.version=c.extend({},this.version);a.jPlayer.options=c.extend(!0,{},this.options);a.jPlayer.status=c.extend(!0,{},this.status);a.jPlayer.html=c.extend(!0,{},this.html);a.jPlayer.aurora=c.extend(!0,{},this.aurora);a.jPlayer.flash=
c.extend(!0,{},this.flash);b&&(a.jPlayer.error=c.extend({},b));e&&(a.jPlayer.warning=c.extend({},e));this.element.trigger(a)},jPlayerFlashEvent:function(a,b){if(a===c.jPlayer.event.ready)if(!this.internal.ready)this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=b.version,this.version.needFlash!==this.version.flash&&this._error({type:c.jPlayer.error.VERSION,context:this.version.flash,message:c.jPlayer.errorMsg.VERSION+this.version.flash,hint:c.jPlayer.errorHint.VERSION}),
this._trigger(c.jPlayer.event.repeat),this._trigger(a);else if(this.flash.gate){if(this.status.srcSet){var e=this.status.currentTime,g=this.status.paused;this.setMedia(this.status.media);this.volumeWorker(this.options.volume);0<e&&(g?this.pause(e):this.play(e))}this._trigger(c.jPlayer.event.flashreset)}if(this.flash.gate)switch(a){case c.jPlayer.event.progress:this._getFlashStatus(b);this._updateInterface();this._trigger(a);break;case c.jPlayer.event.timeupdate:this._getFlashStatus(b);this._updateInterface();
this._trigger(a);break;case c.jPlayer.event.play:this._seeked();this._updateButtons(!0);this._trigger(a);break;case c.jPlayer.event.pause:this._updateButtons(!1);this._trigger(a);break;case c.jPlayer.event.ended:this._updateButtons(!1);this._trigger(a);break;case c.jPlayer.event.click:this._trigger(a);break;case c.jPlayer.event.error:this.status.waitForLoad=!0;this.status.waitForPlay=!0;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&
this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._updateButtons(!1);this._error({type:c.jPlayer.error.URL,context:b.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL});break;case c.jPlayer.event.seeking:this._seeking();this._trigger(a);break;case c.jPlayer.event.seeked:this._seeked();this._trigger(a);break;case c.jPlayer.event.ready:break;
default:this._trigger(a)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent;this.status.currentPercentRelative=a.currentPercentRelative;this.status.currentPercentAbsolute=a.currentPercentAbsolute;this.status.currentTime=a.currentTime;this.status.duration=a.duration;this.status.remaining=a.duration-a.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=
!1},_updateButtons:function(a){a===d?a=!this.status.paused:this.status.paused=!a;a?this.addStateClass("playing"):this.removeStateClass("playing");!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen");this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped");this.css.jq.play.length&&this.css.jq.pause.length&&(a?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()));
this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},
_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));if(this.css.jq.currentTime.length){var a=this._convertTime(this.status.currentTime);a!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime))}a=
this.status.duration;var b=this.status.remaining;this.css.jq.duration.length&&("string"===typeof this.status.media.duration?a=this.status.media.duration:("number"===typeof this.status.media.duration&&(a=this.status.media.duration,b=a-this.status.currentTime),a=this.options.remainingDuration&&0<a?(0<b?"-":"")+this._convertTime(b):this._convertTime(a)),a!==this.css.jq.duration.text()&&this.css.jq.duration.text(a))},_convertTime:f.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg");
this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg");this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1;this.html.video.gate=!1;this.aurora.gate=!1;this.flash.gate=!1},_resetActive:function(){this.html.active=!1;this.aurora.active=!1;this.flash.active=!1},_escapeHtml:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(a){var b=
document.createElement("div");b.innerHTML='<a href="'+this._escapeHtml(a)+'">x</a>';return b.firstChild.href},_absoluteMediaUrls:function(a){var b=this;c.each(a,function(e,c){c&&b.format[e]&&"data:"!==c.substr(0,5)&&(a[e]=b._qualifyURL(c))});return a},addStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[a])},removeStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[a])},setMedia:function(a){var b=this,e=!1,
g=this.status.media.poster!==a.poster;this._resetMedia();this._resetGate();this._resetActive();this.androidFix.setMedia=!1;this.androidFix.play=!1;this.androidFix.pause=!1;a=this._absoluteMediaUrls(a);c.each(this.formats,function(g,d){var f="video"===b.format[d].media;c.each(b.solutions,function(g,h){if(b[h].support[d]&&b._validString(a[d]))return g="html"===h,h="aurora"===h,f?(g?(b.html.video.gate=!0,b._html_setVideo(a),b.html.active=!0):(b.flash.gate=!0,b._flash_setVideo(a),b.flash.active=!0),b.css.jq.videoPlay.length&&
b.css.jq.videoPlay.show(),b.status.video=!0):(g?(b.html.audio.gate=!0,b._html_setAudio(a),b.html.active=!0,c.jPlayer.platform.android&&(b.androidFix.setMedia=!0)):h?(b.aurora.gate=!0,b._aurora_setAudio(a),b.aurora.active=!0):(b.flash.gate=!0,b._flash_setAudio(a),b.flash.active=!0),b.css.jq.videoPlay.length&&b.css.jq.videoPlay.hide(),b.status.video=!1),e=!0,!1});if(e)return!1});e?(this.status.nativeVideoControls&&this.html.video.gate||!this._validString(a.poster)||(g?this.htmlElement.poster.src=a.poster:
this.internal.poster.jq.show()),"string"===typeof a.title&&(this.css.jq.title.length&&this.css.jq.title.html(a.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",a.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",a.title)),this.status.srcSet=!0,this.status.media=c.extend({},a),this._updateButtons(!1),this._updateInterface(),this._trigger(c.jPlayer.event.setmedia)):this._error({type:c.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+
"'}",message:c.jPlayer.errorMsg.NO_SUPPORT,hint:c.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(!1);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():
this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(c.jPlayer.focus=this)},play:function(a){"object"===typeof a&&this.options.useStateClassSkin&&!this.status.paused?this.pause(a):(a="number"===typeof a?a:NaN,this.status.srcSet?(this.focus(),this.html.active?
this._html_play(a):this.aurora.active?this._aurora_play(a):this.flash.active&&this._flash_play(a)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(a){a="number"===typeof a?a:NaN;this.status.srcSet?this.html.active?this._html_pause(a):this.aurora.active?this._aurora_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},tellOthers:function(a,b){var e=this,g="function"===typeof b,d=Array.prototype.slice.call(arguments);"string"===typeof a&&(g&&
d.splice(1,1),c.jPlayer.prototype.destroyRemoved(),c.each(this.instances,function(){e.element===this||g&&!b.call(this.data("jPlayer"),e)||this.jPlayer.apply(this,d)}))},pauseOthers:function(a){this.tellOthers("pause",function(){return this.status.srcSet},a)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100);this.status.srcSet?
this.html.active?this._html_playHead(a):this.aurora.active?this._aurora_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.mutedWorker(a);this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},a)},mutedWorker:function(a){this.options.muted=a;this.html.used&&this._html_setProperty("muted",a);this.aurora.used&&this._aurora_mute(a);this.flash.used&&this._flash_mute(a);this.html.video.gate||this.html.audio.gate||
(this._updateMute(a),this._updateVolume(this.options.volume),this._trigger(c.jPlayer.event.volumechange))},mute:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(a=a===d?!0:!!a,this._muted(a))},unmute:function(a){a=a===d?!0:!!a;this._muted(!a)},_updateMute:function(a){a===d&&(a=this.options.muted);a?this.addStateClass("muted"):this.removeStateClass("muted");this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),
this.css.jq.unmute.hide()):a?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){this.volumeWorker(a);this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},a)},volumeWorker:function(a){a=this._limitValue(a,0,1);this.options.volume=a;this.html.used&&this._html_setProperty("volume",a);this.aurora.used&&this._aurora_volume(a);this.flash.used&&this._flash_volume(a);this.html.video.gate||
this.html.audio.gate||(this._updateVolume(a),this._trigger(c.jPlayer.event.volumechange))},volumeBar:function(a){if(this.css.jq.volumeBar.length){var b=c(a.currentTarget),e=b.offset(),g=a.pageX-e.left,d=b.width();a=b.height()-a.pageY+e.top;b=b.height();this.options.verticalVolume?this.volume(a/b):this.volume(g/d)}this.options.muted&&this._muted(!1)},_updateVolume:function(a){a===d&&(a=this.options.volume);a=this.options.muted?0:a;this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&
this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*a+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1);
this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(a){var b=this;this.options.cssSelectorAncestor=a;this._removeUiClass();this.ancestorJq=a?c(a):[];a&&1!==this.ancestorJq.length&&this._warning({type:c.jPlayer.warning.CSS_SELECTOR_COUNT,context:a,message:c.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:c.jPlayer.warningHint.CSS_SELECTOR_COUNT});this._addUiClass();c.each(this.options.cssSelector,function(a,e){b._cssSelector(a,e)});
this._updateInterface();this._updateButtons();this._updateAutohide();this._updateVolume();this._updateMute()},_cssSelector:function(a,b){var e=this;"string"===typeof b?c.jPlayer.prototype.options.cssSelector[a]?(this.css.jq[a]&&this.css.jq[a].length&&this.css.jq[a].unbind(".jPlayer"),this.options.cssSelector[a]=b,this.css.cs[a]=this.options.cssSelectorAncestor+" "+b,this.css.jq[a]=b?c(this.css.cs[a]):[],this.css.jq[a].length&&this[a]&&this.css.jq[a].bind("click.jPlayer",function(b){b.preventDefault();
e[a](b);e.options.autoBlur?c(this).blur():c(this).focus()}),b&&1!==this.css.jq[a].length&&this._warning({type:c.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[a],message:c.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[a].length+" found for "+a+" method.",hint:c.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:c.jPlayer.warning.CSS_SELECTOR_METHOD,context:a,message:c.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:c.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:c.jPlayer.warning.CSS_SELECTOR_STRING,
context:b,message:c.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:c.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(a){this.options.toggleDuration&&(this.options.captureDuration&&a.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(a){if(this.css.jq.seekBar.length){var b=c(a.currentTarget),e=b.offset();a=a.pageX-e.left;b=b.width();this.playHead(100*a/b)}},playbackRate:function(a){this._setOption("playbackRate",a)},playbackRateBar:function(a){if(this.css.jq.playbackRateBar.length){var b=
c(a.currentTarget),e=b.offset(),g=a.pageX-e.left,d=b.width();a=b.height()-a.pageY+e.top;b=b.height();this.playbackRate((this.options.verticalPlaybackRate?a/b:g/d)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate)}},_updatePlaybackRate:function(){var a=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),
this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*a+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.loop?this._loop(!1):this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(a){this.options.loop!==
a&&(this.options.loop=a,this._updateButtons(),this._trigger(c.jPlayer.event.repeat))},option:function(a,b){var e=a;if(0===arguments.length)return c.extend(!0,{},this.options);if("string"===typeof a){var g=a.split(".");if(b===d){e=c.extend(!0,{},this.options);for(var f=0;f<g.length;f++)if(e[g[f]]!==d)e=e[g[f]];else return this._warning({type:c.jPlayer.warning.OPTION_KEY,context:a,message:c.jPlayer.warningMsg.OPTION_KEY,hint:c.jPlayer.warningHint.OPTION_KEY}),d;return e}f=e={};for(var h=0;h<g.length;h++)h<
g.length-1?(f[g[h]]={},f=f[g[h]]):f[g[h]]=b}this._setOptions(e);return this},_setOptions:function(a){var b=this;c.each(a,function(a,e){b._setOption(a,e)});return this},_setOption:function(a,b){var e=this;switch(a){case "volume":this.volume(b);break;case "muted":this._muted(b);break;case "globalVolume":this.options[a]=b;break;case "cssSelectorAncestor":this._cssSelectorAncestor(b);break;case "cssSelector":c.each(b,function(a,b){e._cssSelector(a,b)});break;case "playbackRate":this.options[a]=b=this._limitValue(b,
this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("playbackRate",b);this._updatePlaybackRate();break;case "defaultPlaybackRate":this.options[a]=b=this._limitValue(b,this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("defaultPlaybackRate",b);this._updatePlaybackRate();break;case "minPlaybackRate":this.options[a]=b=this._limitValue(b,.1,this.options.maxPlaybackRate-.1);this._updatePlaybackRate();break;case "maxPlaybackRate":this.options[a]=
b=this._limitValue(b,this.options.minPlaybackRate+.1,16);this._updatePlaybackRate();break;case "fullScreen":if(this.options[a]!==b){var g=c.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;if(!g||g&&!this.status.waitForPlay)g||(this.options[a]=b),b?this._requestFullscreen():this._exitFullscreen(),g||this._setOption("fullWindow",b)}break;case "fullWindow":this.options[a]!==b&&(this._removeUiClass(),this.options[a]=b,this._refreshSize());break;case "size":this.options.fullWindow||this.options[a].cssClass===
b.cssClass||this._removeUiClass();this.options[a]=c.extend({},this.options[a],b);this._refreshSize();break;case "sizeFull":this.options.fullWindow&&this.options[a].cssClass!==b.cssClass&&this._removeUiClass();this.options[a]=c.extend({},this.options[a],b);this._refreshSize();break;case "autohide":this.options[a]=c.extend({},this.options[a],b);this._updateAutohide();break;case "loop":this._loop(b);break;case "remainingDuration":this.options[a]=b;this._updateInterface();break;case "toggleDuration":this.options[a]=
b;break;case "nativeVideoControls":this.options[a]=c.extend({},this.options[a],b);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case "noFullWindow":this.options[a]=c.extend({},this.options[a],b);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this._restrictNativeVideoControls();this._updateButtons();
break;case "noVolume":this.options[a]=c.extend({},this.options[a],b);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case "emulateHtml":this.options[a]!==b&&((this.options[a]=b)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case "timeFormat":this.options[a]=c.extend({},this.options[a],b);break;case "keyEnabled":this.options[a]=b;b||this!==c.jPlayer.focus||(c.jPlayer.focus=null);break;case "keyBindings":this.options[a]=c.extend(!0,
{},this.options[a],b);break;case "audioFullScreen":this.options[a]=b;break;case "autoBlur":this.options[a]=b}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(c.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,
this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass);this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});!this.status.waitForPlay&&this.html.active&&
this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,b=function(b){var e=!1;if("undefined"!==typeof a.internal.mouse){e=a.internal.mouse.x-b.pageX;var c=a.internal.mouse.y-b.pageY;e=0<Math.floor(e)||
0<Math.floor(c)}else e=!0;a.internal.mouse={x:b.pageX,y:b.pageY};e&&a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId);a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?
this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",b),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",b),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",
!1)},_fullscreenAddEventListeners:function(){var a=this,b=c.jPlayer.nativeFeatures.fullscreen;b.api.fullscreenEnabled&&b.event.fullscreenchange&&("function"!==typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){a._fullscreenchange()}),document.addEventListener(b.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var a=c.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(a.event.fullscreenchange,
this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!c.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var a=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],b=c.jPlayer.nativeFeatures.fullscreen;b.used.webkitVideo&&(a=this.htmlElement.video);b.api.fullscreenEnabled&&b.api.requestFullscreen(a)},_exitFullscreen:function(){var a=c.jPlayer.nativeFeatures.fullscreen;if(a.used.webkitVideo)var b=
this.htmlElement.video;a.api.fullscreenEnabled&&a.api.exitFullscreen(b)},_html_initMedia:function(a){var b=c(this.htmlElement.media).empty();c.each(a.track||[],function(a,e){a=document.createElement("track");a.setAttribute("kind",e.kind?e.kind:"");a.setAttribute("src",e.src?e.src:"");a.setAttribute("srclang",e.srclang?e.srclang:"");a.setAttribute("label",e.label?e.label:"");e.def&&a.setAttribute("default",e.def);b.append(a)});this.htmlElement.media.src=this.status.src;"none"!==this.options.preload&&
this._html_load();this._trigger(c.jPlayer.event.timeupdate)},_html_setFormat:function(a){var b=this;c.each(this.formats,function(e,c){if(b.html.support[c]&&a[c])return b.status.src=a[c],b.status.format[c]=!0,b.status.formatType=c,!1})},_html_setAudio:function(a){this._html_setFormat(a);this.htmlElement.media=this.htmlElement.audio;this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a);this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?
a.poster:"");this.htmlElement.media=this.htmlElement.video;this._html_initMedia(a)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=
!1,this.htmlElement.media.load());clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var b=this,e=this.htmlElement.media;this.androidFix.pause=!1;this._html_load();if(this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=a;else if(isNaN(a))e.play();else{this.internal.cmdsIgnored&&e.play();try{if(!e.seekable||"object"===typeof e.seekable&&0<e.seekable.length)e.currentTime=a,e.play();else throw 1;}catch(l){this.internal.htmlDlyCmdId=setTimeout(function(){b.play(a)},250);
return}}this._html_checkWaitForPlay()},_html_pause:function(a){var b=this,e=this.htmlElement.media;this.androidFix.play=!1;0<a?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);e.pause();if(this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=a;else if(!isNaN(a))try{if(!e.seekable||"object"===typeof e.seekable&&0<e.seekable.length)e.currentTime=a;else throw 1;}catch(l){this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(a)},250);return}0<a&&this._html_checkWaitForPlay()},
_html_playHead:function(a){var b=this,e=this.htmlElement.media;this._html_load();try{if("object"===typeof e.seekable&&0<e.seekable.length)e.currentTime=a*e.seekable.end(e.seekable.length-1)/100;else if(0<e.duration&&!isNaN(e.duration))e.currentTime=a*e.duration/100;else throw"e";}catch(l){this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(a)},250);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=
!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(a,b){this.html.audio.available&&(this.htmlElement.audio[a]=b);this.html.video.available&&(this.htmlElement.video[a]=b)},_aurora_setAudio:function(a){var b=this;c.each(this.formats,function(e,c){if(b.aurora.support[c]&&a[c])return b.status.src=a[c],b.status.format[c]=!0,b.status.formatType=
c,!1});this.aurora.player=new AV.Player.fromURL(this.status.src);this._addAuroraEventListeners(this.aurora.player,this.aurora);"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(a){this.status.waitForLoad||isNaN(a)||this.aurora.player.seek(a);
this.aurora.player.playing||this.aurora.player.play();this.status.waitForLoad=!1;this._aurora_checkWaitForPlay();this._updateButtons(!0);this._trigger(c.jPlayer.event.play)},_aurora_pause:function(a){isNaN(a)||this.aurora.player.seek(1E3*a);this.aurora.player.pause();0<a&&this._aurora_checkWaitForPlay();this._updateButtons(!1);this._trigger(c.jPlayer.event.pause)},_aurora_playHead:function(a){0<this.aurora.player.duration&&this.aurora.player.seek(a*this.aurora.player.duration/100);this.status.waitForLoad||
this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(a){this.aurora.player.volume=100*a},_aurora_mute:function(a){a?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume;this.aurora.properties.muted=a},_flash_setAudio:function(a){var b=this;try{c.each(this.formats,function(e,c){if(b.flash.support[c]&&a[c]){switch(c){case "m4a":case "fla":b._getMovie().fl_setAudio_m4a(a[c]);
break;case "mp3":b._getMovie().fl_setAudio_mp3(a[c]);break;case "rtmpa":b._getMovie().fl_setAudio_rtmp(a[c])}b.status.src=a[c];b.status.format[c]=!0;b.status.formatType=c;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(k){this._flashError(k)}},_flash_setVideo:function(a){var b=this;try{c.each(this.formats,function(e,c){if(b.flash.support[c]&&a[c]){switch(c){case "m4v":case "flv":b._getMovie().fl_setVideo_m4v(a[c]);break;case "rtmpv":b._getMovie().fl_setVideo_rtmp(a[c])}b.status.src=
a[c];b.status.format[c]=!0;b.status.formatType=c;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(k){this._flashError(k)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(g){this._flashError(g)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(g){this._flashError(g)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(h){this._flashError(h)}this.status.waitForLoad=
!1;this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(h){this._flashError(h)}0<a&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(h){this._flashError(h)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&
(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(h){this._flashError(h)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(h){this._flashError(h)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var a=0;if(window.ActiveXObject)try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");var e=b.GetVariable("$version");
e&&(e=e.split(" ")[1].split(","),a=parseInt(e[0],10)+"."+parseInt(e[1],10))}catch(l){}else navigator.plugins&&0<navigator.mimeTypes.length&&(b=navigator.plugins["Shockwave Flash"])&&(a=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*a},_checkForFlash:function(a){var b=!1;this._getFlashPluginVersion()>=a&&(b=!0);return b},_validString:function(a){return a&&"string"===typeof a},_limitValue:function(a,b,e){return a<b?b:a>e?e:a},_urlNotSetError:function(a){this._error({type:c.jPlayer.error.URL_NOT_SET,
context:a,message:c.jPlayer.errorMsg.URL_NOT_SET,hint:c.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(a){var b=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:c.jPlayer.error[b],context:this.internal.flash.swf,message:c.jPlayer.errorMsg[b]+a.message,hint:c.jPlayer.errorHint[b]});this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(a){this._trigger(c.jPlayer.event.error,a);this.options.errorAlerts&&this._alert("Error!"+(a.message?"\n"+a.message:"")+(a.hint?
"\n"+a.hint:"")+"\nContext: "+a.context)},_warning:function(a){this._trigger(c.jPlayer.event.warning,d,a);this.options.warningAlerts&&this._alert("Warning!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)},_alert:function(a){a="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(a):alert(a)},_emulateHtmlBridge:function(){var a=this;c.each(c.jPlayer.emulateMethods.split(/\s+/g),
function(b,e){a.internal.domNode[e]=function(b){a[e](b)}});c.each(c.jPlayer.event,function(b,e){var g=!0;c.each(c.jPlayer.reservedEvent.split(/\s+/g),function(a,e){if(e===b)return g=!1});g&&a.element.bind(e+".jPlayer.jPlayerHtml",function(){a._emulateHtmlUpdate();var e=document.createEvent("Event");e.initEvent(b,!1,!0);a.internal.domNode.dispatchEvent(e)})})},_emulateHtmlUpdate:function(){var a=this;c.each(c.jPlayer.emulateStatus.split(/\s+/g),function(b,e){a.internal.domNode[e]=a.status[e]});c.each(c.jPlayer.emulateOptions.split(/\s+/g),
function(b,e){a.internal.domNode[e]=a.options[e]})},_destroyHtmlBridge:function(){var a=this;this.element.unbind(".jPlayerHtml");c.each((c.jPlayer.emulateMethods+" "+c.jPlayer.emulateStatus+" "+c.jPlayer.emulateOptions).split(/\s+/g),function(b,e){delete a.internal.domNode[e]})}};c.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};c.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",
FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+c.jPlayer.prototype.version.script+
" needs Jplayer.swf version "+c.jPlayer.prototype.version.needFlash+" but found "};c.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};
c.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};c.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};
c.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});
function Accordion(c){window[c]=this;var d=this,f,b,a,e,g;d.initialize=function(){f=d.settings.cssClasses.expandedSectionHeader;b=d.settings.cssClasses.sectionHeader;a=d.settings.onSectionSlideDown;e=d.settings.onSectionSlideUp;g=d.settings.onInitComplete;$.each(d.foldableSections(),function(a,b){$("#"+b.headerLink+", #"+b.header).click(function(){d.handleSectionClick(b)})});null!=g&&$(document).trigger(g,d)};d.foldableSections=function(){return $(d.sections).filter(function(a,b){return b.isFoldable})};
d.handleSectionClick=function(a){a.isExpanded?d.collapseSection(a):d.expandSection(a);$("#"+a.headerLink).attr("aria-expanded",a.isExpanded)};d.expandSection=function(e){$("#"+e.header).removeClass(b).addClass(f);$("#"+e.content).slideDown(d.settings.animationDuration,function(){null!=a&&$(document).trigger(a,e.content)});e.isExpanded=!e.isExpanded};d.collapseSection=function(a){$("#"+a.header).removeClass(f).addClass(b);$("#"+a.content).slideUp(d.settings.animationDuration,function(){null!=e&&$(document).trigger(e,
a.content)});a.isExpanded=!a.isExpanded};return d}
function AccordionGrid(c){window[c]=this;var d=this;this.expandedRowCssClass=this.hiddenGridCssClass=null;this.subGridClientIds=[];d.toggleAccordionGrid=function(c,b){var a=$("."+c).parent("li");a.hasClass(d.hiddenGridCssClass)||void 0==b?("UL"!=$("."+c).get(0).tagName&&$(d.subGridClientIds).each(function(){this.cssClass==c&&1>this.totalCount&&this.refresh()}),$(b).addClass(d.expandedRowCssClass),a.removeClass(d.hiddenGridCssClass)):($(b).removeClass(d.expandedRowCssClass),a.addClass(d.hiddenGridCssClass))};
d.reOpenOnPostBack=function(c,b){""!=c&&void 0!=c&&d.toggleAccordionGrid(c);""!=b&&void 0!=b&&d.toggleAccordionGrid(b)};d.getSelectedValues=function(){var c=!1;$(d.subGridClientIds).each(function(){0<this.getSelectedValues().length&&(c=!0)});return c?!0:""}}
function AsyncDependenciesResolver(){var c={},d={deferredObjects:{},getOrCreateDeferredObject:function(c){if(d.deferredObjects[c])return d.deferredObjects[c];d.deferredObjects[c]=$.Deferred();return d.deferredObjects[c]}};c.dependencyLoaded=function(c){d.getOrCreateDeferredObject(c).resolve()};c.subscribeToDependencyLoadEvent=function(c,b){d.getOrCreateDeferredObject(c).done(b)};c.loadScriptDynamically=function(c,b){var a=document.createElement("script");a.type="text/javascript";a.onload=b;a.onreadystatechange=
function(){"complete"===a.readyState&&b()};a.src=c;$(window).load(function(){document.getElementsByTagName("head")[0].appendChild(a)})};c.loadScriptAsync=function(c){var b=$.Deferred(),a=function(){b.resolve()},e=function(){b.reject()},g=function(){b.notify()},d=document.createElement("script");d.type="text/javascript";d.onload=a;d.onreadystatechange=function(){"complete"===d.readyState&&a()};d.onerror=e;if(c.attributes)for(var f in c.attributes)c.attributes.hasOwnProperty(f)&&d.setAttribute(f,c.attributes[f]);
d.src=c.url;document.getElementsByTagName("head")[0].appendChild(d);c.timeoutInMilliseconds&&setTimeout(e,c.timeoutInMilliseconds);c.notifyLongLoading&&setTimeout(g,3E3);return b.promise()};return c}var asyncDependencies={signalRHubScript:0},asyncDependenciesResolver=AsyncDependenciesResolver();
function BrowserSniffer(){var c={isDirectoryUploadSupported:function(){var c=document.createElement("input");return"webkitdirectory"in c||"directory"in c},isDragAndDropSupported:function(){return"draggable"in document.createElement("span")},isInternetExplorer9:function(){return $("body").hasClass("h-ie9")},isInternetExplorer10OrOlder:function(){return 0<window.navigator.userAgent.indexOf("MSIE ")?!0:!1},isInternetExplorer11:function(){return 0<window.navigator.userAgent.indexOf("Trident/")?!0:!1},
isInternetExplorerAnyVersion:function(){return c.isInternetExplorer9()||c.isInternetExplorer10OrOlder()||c.isInternetExplorer11()?!0:!1},isFirefox:function(){return 0<navigator.userAgent.indexOf("Firefox")?!0:!1},isEdge:function(){return 0<window.navigator.userAgent.indexOf("Edge/")?!0:!1},isMobileIos:function(){return window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1},isAnyMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?
!0:!1},isChromeBookOs:function(){return window.navigator.userAgent.match(/(CrOS)/g)?!0:!1}};return c}var browserSniffer=BrowserSniffer();
function Calendar(c){window[c]=this;var d=this,f,b,a,e;d.initialize=function(){b=d.settings;a=d.customSettings;e=d.customScripts;f=d.calendar;$.extend(b,{select:e.onSelect,eventRender:e.eventRender,dayRender:e.dayRender,eventDrop:e.eventDrop,eventResize:e.eventResize,eventClick:e.eventClick,loading:e.loading,weekNumberCalculation:function(a){var e=f.fullCalendar("getView");return e&&e.name==window.fullCalendarViews.agendaDay?"":Calendar.getWeekNumber(a,b.firstDay)},viewChange:e.onChangeView,viewRender:function(a){f.fullCalendar("option",
"contentHeight",a.name==window.fullCalendarViews.month?NaN:2500);e.viewRender(a)},updateTodayButton:e.updateTodayButton,eventAfterAllRender:e.eventAfterAllRender,showMoreMousedown:e.showMoreMousedown});f.fullCalendar(b)};d.refetchEvents=function(b,e){var c=[];$.each(b,function(a,b){c.push(b.id)});$.isFunction(e)&&e(!0);CCL.CommonFunctions.safeAjaxPost({url:a.refetchEventsSource,data:{ids:c},datatype:"json",success:function(a){$.each(b,function(a,b){f.fullCalendar("removeEvents",b.id)});$.each(a,function(a,
e){a=$.grep(b,function(a){return a.id==e.id})[0];a.source?f.fullCalendar("renderEventForSource",e,a.source):f.fullCalendar("renderEvent",e)});$.isFunction(e)&&e(!1)},error:function(){$.isFunction(e)&&e(!1)}})}}
Calendar.getWeekNumber=function(c,d){d="number"==typeof d?d:1;d=0==d?7:d;var f=Calendar.calculateWeekNumber(c,d);if(11==c.getMonth()){var b=new Date(c.getFullYear()+1,0,1);if(7==d)b=new Date(c.getFullYear(),c.getMonth(),c.getDate()-c.getDay()),(new Date(b.getFullYear(),b.getMonth(),b.getDate()+6)).getFullYear()>b.getFullYear()&&(f=1);else{b=b.getIsoDay();var a=new Date(c.getFullYear(),c.getMonth(),c.getDate()-(c.getIsoDay()-1));(new Date(a.getFullYear(),a.getMonth(),a.getDate()+6)).getFullYear()>
a.getFullYear()&&5>b&&(f=1)}}0==f&&(c=new Date(c.getFullYear(),c.getMonth(),c.getDate()-7),f=Calendar.calculateWeekNumber(c,d));return f};
Calendar.calculateWeekNumber=function(c,d){var f=[0,31,59,90,120,151,181,212,243,273,304,334],b=[0,31,60,91,121,152,182,213,244,274,305,335];f=1==(new Date(c.getFullYear(),1,29)).getMonth()?c.getDate()+b[c.getMonth()]:c.getDate()+f[c.getMonth()];c=c.getIsoDay();c=Calendar.getShiftBetweenNumbers(d,c);c=Calendar.shiftNumber(1,c);return Math.floor((f-c+(7==d?13:10))/7)};Calendar.getShiftBetweenNumbers=function(c,d){for(var f=0;7>f;f++){if(c==d)return f;c++;8==c&&(c=1)}return 0};
Calendar.shiftNumber=function(c,d){if(0==d)return c;for(var f=0;f<d;f++)c++,8==c&&(c=1);return c};Date.prototype.getIsoDay=function(){var c=this.getDay();return 0==c?7:c};
function ClientInlineEditor(c,d,f,b,a,e,g){if(c){var h=this;h.isWatermarkMode=!1;h.isGetInitialTextFromHidden=!!f;h.hiddenField=f;h.viewField=$(c);h.editModeActivator=d?$(d):h.viewField;h.editField=void 0;h.editHidden=void 0;h.editLink=$();h.onEditFunction=a;h.onChangeModeFunction=e;h.userData=g;h.options=$.extend({multiline:!1,watermark:"",autoResize:!1,autoResizeAdditionalHeight:void 0,clickToEditToolTip:"",clickToSaveToolTip:"",submitOnEnter:!1,ignoreViewModeText:!1,editFieldCssClass:"",watermarkCssClass:"",
editFieldAutoWidth:!0,editFieldDisplayInline:!1,viewFieldRemoveDisplay:!1,highlightOnSave:!1,highlightOnFocus:!1,maxLength:0,renderRightLinkWithIcon:!1,rightLinkCssClass:"",rightLinkViewModeCssClass:"",rightLinkEditModeCssClass:"",suppressOriginalBehaviour:!1,blockedCharacters:[],forceContainerSize:!1,preventLineBreaksInMultilineMode:!1},b);h.options.useWatermark=!!h.options.watermark;h.options.useClickToEditToolTip=!!h.options.clickToEditToolTip;h.options.useEditFieldCssClass=!!h.options.editFieldCssClass;
h.options.useWatermarkCssClass=!!h.options.watermarkCssClass;h.options.renderRightLinkWithIcon&&(h.editLink=$("<a href='#'></a>").addClass(h.options.rightLinkCssClass).append($("<span/>").addClass(this.hiddenCssClass)).append($("<span/>").attr("aria-hidden","true").append($("<img alt='' />").prop("src",CommonConstants.onePixelTransparentImageSource))).insertAfter(h.viewField).click({self:h},h.rightLinkClick).keydown({self:h},h.rightLinkKeyDown),h.initDeviceChecks(),h.toggleRightLinkMode(!0,!0));h.options.suppressOriginalBehaviour||
h.editModeActivator.click($.proxy(h.switchToEditMode,h)).filter("a").keydown({self:h},h.editModeActivatorKeyDown);h.toggleActivatorTooltip(!0);h.fixSize();return{hideWatermark:function(){h.hideWatermark()},switchToEditMode:function(){h.switchToEditMode();return h.editField},setNewText:function(a){h.setNewText(a)},getEditFieldText:function(){return h.getEditFieldText()},setToolTip:function(a){h.options.clickToEditToolTip=a;h.editModeActivator.attr("title",a)},updateTextOnBlur:function(){h.updateTextOnBlur()}}}}
ClientInlineEditor.prototype={isIos:void 0,hiddenCssClass:"h-hidden",createEditor:function(c){this.options.renderRightLinkWithIcon||this.initDeviceChecks();this.editField=$(c.multiline?"<textarea/>":'<input type="text"/>').css("resize","none").addClass(this.hiddenCssClass);this.setEditFieldWidth();c.useEditFieldCssClass&&this.editField.addClass(c.editFieldCssClass);!c.multiline&&c.maxLength&&this.editField.attr("maxlength",c.maxLength);c.multiline&&c.maxLength&&this.editField.maxlength({max:c.maxLength});
this.editHidden=this.isGetInitialTextFromHidden?$(this.hiddenField):$('<input type="hidden"/>').val(this.viewField.text());this.setNewText(c.ignoreViewModeText?"":$.trim(this.editHidden.val()));this.viewField.after(this.editField);this.isGetInitialTextFromHidden||this.viewField.after(this.editHidden);c.multiline&&c.autoResize&&this.editField.autogrow(void 0===c.autoResizeAdditionalHeight?{}:{additionalHeight:c.autoResizeAdditionalHeight});this.switchToViewMode(!1);this.editField.removeClass(this.hiddenCssClass).keyup({self:this},
this.editFieldKeyUp).keypress({self:this},this.editFieldKeyPress).on("paste",$.proxy(this.hideWatermark,this)).focus({self:this},this.editFieldFocus).blur({self:this},this.editFieldBlur)},setNewText:function(c){this.options.ignoreViewModeText||this.options.suppressOriginalBehaviour||(c?this.options.multiline?this.viewField.html(CommonFunctions.replaceLineBreaksWithBrTags(c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;"))):this.viewField.text(c):this.viewField.html(""));
this.editField||this.createEditor(this.options);this.editField.val(c);this.editHidden.val(c)},fixSize:function(){if(this.options.forceContainerSize){var c=this.viewField.parent();c.css("width","0px");setTimeout(function(){c.css("width","auto")},10)}},switchToViewMode:function(c,d){this.editField.hide();c&&this.options.highlightOnSave?this.viewField.fadeIn("slow"):this.viewField.show();this.options.viewFieldRemoveDisplay&&this.viewField.css("display","");this.toggleActivatorTooltip(!0);this.fireChangeMode(!1,
c,d);this.toggleRightLinkMode(!0)},switchToEditMode:function(){this.editField?this.setEditFieldWidth():this.createEditor(this.options);this.isViewMode()&&(this.viewField.hide(),this.editField.show(),this.options.editFieldDisplayInline&&this.editField.css("display","inline"),this.toggleActivatorTooltip(!1),this.fireChangeMode(!0,!1),this.editField.focus(),this.toggleRightLinkMode(!1))},fireChangeMode:function(c,d,f){if(this.onChangeModeFunction){var b=this;setTimeout(function(){b.onChangeModeFunction({isEditMode:c,
isNewTextSaved:d,actualText:f,source:b.viewField,currentOptions:b.options,userData:b.userData})})}this.fixSize()},isViewMode:function(){return this.editField.is(":hidden")},updateText:function(){var c=this;c.updateValue();var d={isUpdateSuccess:!0,stopOnEdit:!1,actualText:c.isWatermarkMode?"":c.editField.val(),source:c.viewField,currentOptions:c.options,userData:c.userData};if(d.actualText===c.editHidden.val())setTimeout(function(){c.switchToViewMode(!1)},c.options.renderRightLinkWithIcon?100:0);
else if(c.toggleEditField(!1),c.onEditFunction)c.onEditFunction(d,$.proxy(c.onUpdateComplete,c));else setTimeout(function(){c.onUpdateComplete(d)})},onUpdateComplete:function(c){this.toggleEditField(!0);c.isUpdateSuccess?(this.setNewText(c.actualText),this.switchToViewMode(!0,c.actualText)):c.stopOnEdit||this.rollbackText()},rollbackText:function(){this.editField.val(this.editHidden.val());this.switchToViewMode(!1)},toggleEditField:function(c){this.editField.prop("disabled",!c)},toggleActivatorTooltip:function(c){this.editModeActivator.css("cursor",
c?"pointer":"default");this.options.useClickToEditToolTip&&this.editModeActivator.attr("title",c?this.options.clickToEditToolTip:null)},isEnterKey:function(c){return c.which===CommonConstants.keyCodes.enter&&!c.shiftKey},isEnterKeyAndNeedToSubmit:function(c){return this.options.submitOnEnter&&c.which===CommonConstants.keyCodes.enter&&!c.shiftKey},shouldPreventLineBreakEntering:function(c){return c.which===CommonConstants.keyCodes.enter&&!this.isEnterKeyAndNeedToSubmit(c)&&(this.options.multiline&&
this.options.preventLineBreaksInMultilineMode||!this.options.multiline&&!c.shiftKey)},showWatermark:function(){!this.options.useWatermark||this.isWatermarkMode||this.editField.val()||(this.options.useWatermarkCssClass&&this.editField.addClass(this.options.watermarkCssClass),this.editField.val(this.options.watermark),this.isWatermarkMode=!0)},hideWatermark:function(){this.options.useWatermark&&this.isWatermarkMode&&(this.options.useWatermarkCssClass&&this.editField.removeClass(this.options.watermarkCssClass),
this.editField.val(""),this.isWatermarkMode=!1)},editModeActivatorKeyDown:function(c){var d=c.data.self;d.fireClickByKeyDown(c,d.editModeActivator)},rightLinkKeyDown:function(c){var d=c.data.self;d.fireClickByKeyDown(c,d.editLink)},fireClickByKeyDown:function(c,d){c.which===CommonConstants.keyCodes.enter&&(c.preventDefault(),setTimeout(function(){d.click()},400))},editFieldFocus:function(c){c=c.data.self;var d=c.editField.get(0);c.showWatermark();CommonFunctions.setFocusTo(d,!c.isWatermarkMode);c.options.highlightOnFocus&&
(c.isIos?d.setSelectionRange(0,d.value.length):c.editField.select());c.options.multiline&&c.options.autoResize&&c.editField.change()},editFieldBlur:function(c){c.data.self.updateTextOnBlur();c.stopPropagation()},updateTextOnBlur:function(){this.editField&&!this.editField.prop("disabled")&&(this.hideWatermark(),this.updateText())},editFieldKeyUp:function(c){var d=c.data.self;if(!d.isViewMode()){if(d.editField.prop("disabled"))return!0;if(c.which!==CommonConstants.keyCodes.escape||d.options.doNotRollbackTextOnEscape)if(d.isEnterKey(c)){if(d.options.multiline&&
!d.isEnterKeyAndNeedToSubmit(c))return!0;d.updateText();if(d.isEnterKeyAndNeedToSubmit(c))return c.stopPropagation(),!1}else d.isIos||d.isAndroidDevice||d.updateValue();else d.rollbackText()}return!0},updateValue:function(){if(null!=this.options.blockedCharacters&&0<this.options.blockedCharacters.length){for(var c=this.editField.val(),d=c,f=this.options.blockedCharacters.length,b=0;b<f;b++)if(this.options.blockedCharacters[b])for(;-1<c.indexOf(this.options.blockedCharacters[b]);)c=c.replace(this.options.blockedCharacters[b],
"");c!==d&&this.editField.val(c)}},editFieldKeyPress:function(c){var d=c.data.self;d.hideWatermark();d.shouldPreventLineBreakEntering(c)&&c.preventDefault();return!d.isEnterKeyAndNeedToSubmit(c)},initDeviceChecks:function(){this.isAndroidDevice=(this.isIos=CommonFunctions.isIos())?!1:CommonFunctions.isAndroidDevice()},rightLinkClick:function(c){var d=c.data.self;!d.editField||d.isViewMode()?d.switchToEditMode():d.isIos&&d.updateTextOnBlur();c.preventDefault()},toggleRightLinkMode:function(c,d){this.editLink.toggleClass(this.options.rightLinkEditModeCssClass,
!c);var f=c?this.options.clickToEditToolTip:this.options.clickToSaveToolTip;this.editLink.find("."+this.hiddenCssClass).text(f);this.editLink.find("[aria-hidden=true]").prop("title",f);this.isIos||this.isAndroidDevice||this.editLink.toggleClass(this.options.rightLinkViewModeCssClass,c);c&&!d&&this.editLink.focus().blur()},getEditFieldText:function(){return this.editField.val()},setEditFieldWidth:function(){this.options.editFieldAutoWidth&&this.editField.width(this.viewField.width())}};
function CodeContracts(){return{require:function(c,d){if(!objectState.isBoolean(c)||objectState.isNullOrUndefined(d))throw"invalid contract";if(!c)if(objectState.isFunction(d))d();else throw d;}}}var contract=CodeContracts();
function ColorPicker(c){function d(a){a=$(a).find("input:hidden:first").val();b(a)}function f(){var a=h.getSelectedColorKey();b(a)}function b(a){k.trigger(h.settings.clientEvents.colorOver,a)}function a(){if(l.is(":hidden")){var a=k.offset(),b=a.top+k.height()+3+"px";a=h.settings.popupAlignment===h.settings.popupAlignmentType.right?a.left-l.width()+k.width()+3+"px":a.left+"px";l.css({top:b,left:a}).show()}else e()}function e(a){l.hide();a&&k.focus()}function g(){l=$("<div></div>").addClass(h.settings.cssClasses.popup).addClass(h.settings.cssClasses.customPopup).appendTo("form").keydown(function(a){(a||
window.event).which===CommonConstants.keyCodes.escape&&(f(),e());return!0});m=$("<ul></ul>").appendTo(l);for(var a=0;a<h.settings.colorKeys.length;a++){var b=h.settings.colorKeys[a],c=$("<li></li>").append($('<input type="hidden" />').val(b)).append($("<a></a>").attr("href","javascript:void(0);").addClass(h.settings.colors[b].PickerColorCssClass)).appendTo(m);b===h.settings.selectedColorKey&&c.addClass(h.settings.cssClasses.selected)}}window[c]=this;var h=this,k,l,m;h.initialize=function(){k=h.controls.pickerLink;
g();$(document).click(function(a){a=a?a:window.event;var b=a.srcElement||a.target;!l.length||l.is(":hidden")||b===k.get(0)||$(b).parents().filter("#"+k.prop("id")).length||(b=l.offset(),a.clientX>b.left&&a.clientX<b.left+l.width()&&a.clientY>b.top&&a.clientY<b.top+l.height()||e())}).on("closeColorPicker",function(){e(!1)});var c=m.find("li");c.find("a").click(function(){var a=$(this.parentNode),g=a.find("input:hidden:first").val();e();c.removeClass(h.settings.cssClasses.selected);a.addClass(h.settings.cssClasses.selected);
b(g);k.trigger(h.settings.clientEvents.colorChange,g);return!1}).mouseenter(function(){d(this.parentNode)}).mouseleave(function(){f()}).focusin(function(){d(this.parentNode)}).focusout(function(){f()});k.click(function(b){b.preventDefault();$(document).click();a()})};h.getColorByKey=function(a){return h.settings.colors[a].RepaintColorCssClass};h.setColor=function(a){var b=m.find("li > input:hidden:[value='"+a+"']").parent();m.find("li").removeClass(h.settings.cssClasses.selected);b.addClass(h.settings.cssClasses.selected);
k.trigger(h.settings.clientEvents.colorChange,a)};h.setPickerLink=function(a){h.controls.pickerLink!==a&&(f(),e(),h.controls.pickerLink=a,h.initialize())};h.openPopup=function(){a()};h.getSelectedColorKey=function(){return m.find("li."+h.settings.cssClasses.selected+" input:hidden:first").val()};return h}
function ColorPickerMVC(c,d,f,b){function a(b){e(n,v,q);e(w,v,q);u&&u.setAttribute("class",m.preview+" "+q);r.classList.toggle(m.open);r.classList.contains(m.open)?(document.addEventListener("click",a),document.addEventListener("touch",a)):(document.removeEventListener("click",a),document.removeEventListener("touch",a));b&&b.stopPropagation();return!1}function e(a,b,e){a.setAttribute("value",b);a.setAttribute("class",e);try{a.dispatchEvent(new Event("change"))}catch(K){b=document.createEvent("Event"),
b.initEvent("change",!0,!0),a.dispatchEvent(b)}}function g(a,b){a&&b&&(t&&t.removeAttribute("selected"),t=b,v=b.value,q=a.classList?a.classList[0]:"",e(n,v,q),e(w,v,q),u&&u.setAttribute("class",m.preview+" "+q),b.setAttribute("selected","selected"))}function h(b,e){return function(c){g(b,e);a(c);return!1}}function k(a,b){return function(c){e(w,b.value,a.classList[0]);u&&u.setAttribute("class",m.preview+" "+a.classList[0]);c.stopPropagation();return!1}}function l(b,e){return function(b){if(b.keyCode===
CCL.CommonConstants.keyCodes.escape)return a(b),!1}}var m={preview:"ccl-colorpicker-mvc__previewbox",open:"ccl-colorpicker-mvc--open"},n=document.getElementById(c),p=document.getElementById(d),r=n.parentElement,w=r.getElementsByTagName("input")[1],u=r.getElementsByClassName(m.preview)[0];c=r.getElementsByTagName("ul")[0].children;var v,q;r.addEventListener("mouseout",function(){e(n,v,q);e(w,v,q);u&&u.setAttribute("class",m.preview+" "+q)});r.addEventListener("click",function(a){a.stopPropagation();
!1});r.addEventListener("touch",function(a){a.stopPropagation();!1});u&&u.addEventListener("click",a);u&&u.addEventListener("touch",a);p.addEventListener("click",a);p.addEventListener("touch",a);Array.prototype.forEach.call(c,function(a){var b=a.children[0],e=a.children[1];a.addEventListener("click",h(e,b));a.addEventListener("touch",h(e,b));a.addEventListener("mouseover",k(e,b));a.addEventListener("focus",k(e,b));a.addEventListener("keydown",l(e,b))});c[c.length-1].addEventListener("keydown",function(a){a.keyCode===
CCL.CommonConstants.keyCodes.tab&&(p.focus(),a.stopPropagation())});b&&(f=Math.floor(Math.random()*c.length)+1);var t=r.querySelector("ul > li > input[value='"+f+"']");g(t.nextElementSibling,t)}Array.removeElements=function(c,d){for(var f=[].concat(d),b=f.length,a;b&&c.length;)for(d=f[--b];-1!=(a=c.indexOf(d));)c.splice(a,1);return c};String.format||(String.format=function(c){return CCL.CommonFunctions.formatString.apply(this,arguments)});
String.prototype.getQueryStringParameter||(String.prototype.getQueryStringParameter=function(c){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");c=(new RegExp("[\\?&]"+c+"=([^&#]*)")).exec(this);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))});
String.prototype.setQueryStringParameter||(String.prototype.setQueryStringParameter=function(c,d){return d?-1<this.indexOf(c+"=")?this.replace(new RegExp(c+"=[^&]*(&|$)"),c+"="+encodeURIComponent(d)+"&"):this.slice(0,this.indexOf("?")+1)+c+"="+encodeURIComponent(d)+"&"+this.slice(this.indexOf("?")+1):-1<this.indexOf(c+"=")?this.replace(new RegExp(c+"=[^&]*(&|$)"),""):this.toString()});
String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(c,d){d=d||0;return this.lastIndexOf(c,d)===d}});var CCL;
(function(c){(function(c){})(c.CommonConstants||(c.CommonConstants={}));(function(c){c.setFocusTo=function(c,b){c.setSelectionRange?(c.focus(),b=b?c.value.length:0,c.setSelectionRange(b,b)):c.createTextRange&&(c=c.createTextRange(),b&&c.collapse(!1),c.select())};c.setupDropDownMenu=function(c,b,a,e){var g=c?"touchstart":"click";a.find("a").click(function(){a.hide();e&&e()});b.on(g+" keydown",function(b){if(b.type===g||b.which===CommonConstants.keyCodes.arrowDown)"false"===$(".c-messages-popup").attr("aria-hidden")&&
$(".c-messages__overlay").click(),a.toggle()});$(document).on(g+" "+CommonTriggers.clickInInnerFrame,function(c){if(a.is(":visible")){var g=c.target,d=$(g);c=g===b.get(0)||1===d.closest(b).length;g=!c&&(g===a.get(0)||1===d.closest(a).length);c||g||(a.hide(),e&&e())}});$(document).keydown(function(b){b.which===CommonConstants.keyCodes.escape&&($(a).hide(),e&&e())})};c.safeExecuteFunction=function(c){if(c)try{return c()}catch(b){}return!0};c.isPlainText=function(c){var b=/^s*<[a-z]+>[^<]*<\/[a-z]+>(s|\n)*$/ig;
c=c.replace(/<br((\s*)|(\s[^>]*))\/?>/gi,"");c=c.replace(/<\/p>\s*<p(\s+[^>]*)?>/gi,"\n");return-1==c.indexOf("<")||null!=c.match(b)};c.isIos=function(){return null!=navigator.userAgent.match(/iPod|iPhone|iPad/i)};c.isAndroidDevice=function(){return null!=navigator.userAgent.match(/Android/i)};c.isAndroidBrowser=function(){return $("body").hasClass("h-android")};c.isIe=function(){return-1!==navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)};c.setEmbeddedObjectsVisibility=function(d,
b,a){b&&b.find("applet").toggle(d);a&&(b=a.find("iframe,object"),c.isIe()?b.toggle(d):b.css("visibility",d?"visible":"hidden").toggleClass("h-visibility-hidden",!d))}})(c.CommonFunctions||(c.CommonFunctions={}));(function(c){})(c.CommonWindowMessages||(c.CommonWindowMessages={}));(function(c){})(c.CommonTriggers||(c.CommonTriggers={}))})(CCL||(CCL={}));var CommonConstants=CCL.CommonConstants,CommonFunctions=CCL.CommonFunctions,CommonWindowMessages=CCL.CommonWindowMessages,CommonTriggers=CCL.CommonTriggers;
(function(c){c.fn.setCursorPosition=function(c){this.each(function(d,b){b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(d=b.createTextRange(),d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",c),d.select())});return this};c.fn.scrollMinimal=function(){var d=this.offset().top,f=this.outerHeight(!0),b=c(window).scrollTop(),a=c(window).height();d<b?c(window).scrollTop(d):d+f>b+a&&c(window).scrollTop(d-a+f)};c.fn.toggleHyperlink=function(c){c?(this.removeAttr("disabled"),
this.removeData("disabled")):(this.attr("disabled","disabled"),this.data("disabled",!0));return this};c.fn.getIfHyperLinkEnabled=function(){return"disabled"!==this.attr("disabled")&&!this.data("disabled")};c.fn.maxlength=function(d){d=c.extend({max:200},d);return this.each(function(){var f=c(this);f.keypress(function(b){var a=d.max,e=c(b.target),g=b.which;(g>=CommonConstants.keyCodes.space||g===CommonConstants.keyCodes.enter)&&e.val().length>=a&&b.preventDefault()});f.change(function(b){var a=d.max;
b=c(b.target);b.val().length>a&&(a=b.val().substr(0,a),b.val(a))})})};c.fn.tclick=function(c){this.on("touchstart",function(d){c.call(this,d);d.stopPropagation();d.preventDefault()});this.on("click",function(d){c.call(this,d)});return this}})(jQuery);
(function(c){c.ContentBlockExpander=function(c,f){function b(a){if(!a)return!1;var b=a.css("max-height");return!b||0>=b.indexOf("px")?!1:parseInt(b.replace("px",""),10)==a.height()}function a(){n||(n=$('<div class="'+d.container+'" data-collapsed="1"><span class="'+d.line+'"></span><button type="button" id="'+m+'">'+f.lang.showMore+'</button><span class="'+d.line+'"></span></div>').insertAfter(c),n.find("button").attr({"aria-controls":c.prop("id")||null,"aria-expanded":"false"}).click(function(){e(!!n.attr("data-collapsed"))}))}
function e(a){(a=!!a)?n.removeAttr("data-collapsed"):n.attr("data-collapsed",1);$("#"+m).attr("aria-expanded",a.toString()).text(a?f.lang.showLess:f.lang.showMore);c.css("max-height",a?"":l)}if(!c||!f)throw"error invoking ContentBlockExpander";f.clientInstanceName&&(window[f.clientInstanceName]=this);var g=this,d=$.extend({},{overflow:"h-ov-hidden",container:"ccl-textexpander-container",line:"ccl-textexpander-line"},f.css),k=f.maxHeight||0,l=f.collapseHeight||k,m=f.clientInstanceName+c.prop("id")+
"_button",n;g.renderShowMoreLinkIfNeed=function(g){0<k&&(b(c)||c.height()>k)?setTimeout(function(){c.addClass(d.overflow);c.css("max-height",l);a();n.show();f.callback&&f.callback();e(g)},0):n&&(c.css("max-height",""),n.hide())};g.reRenderShowMoreLink=function(){n&&g.renderShowMoreLinkIfNeed(!n.attr("data-collapsed"))};g.renderShowMoreLinkIfNeed(!1)}})(CCL||(CCL={}));
function ContextDialog(c,d){function f(a,b,e){if(CommonFunctions.isIe()||CommonFunctions.isEdge()){var c=setInterval(b,1);setTimeout(function(){clearInterval(c);e&&e()},a)}else{var g=performance.now();requestAnimationFrame(function I(c){b();c-g<=a?requestAnimationFrame(I):e&&e()})}}var b=this,a=$(c),e,g={setFocus:!0,width:300,maxWidth:null,showArrow:!0,arrowOffset:"auto",arrowLeft:void 0,arrowTop:void 0,align:"auto",valign:"auto",marginLeft:10,marginRight:10,marginTop:-40,marginBottom:40,toggleElement:null,
customScripts:{beforeCloseDialog:null},zIndex:999,closeWithOutsideClick:!0,scrollToLastWindowOnClose:!0,allowAccessToParentWindow:!0,expandParentFrame:!0,closeButtonTooltip:"",blackThemeActivated:!1,showHeader:!0,showCloseLink:!0,useMobileViewIfNeeded:!0,closeOnEscape:!0,fadeContentEdgesOnScroll:!1,showPreHeader:!1,canHaveNegativeTop:!0,defaultPaddingTopPixels:5},h=a.wrap("<div class='ccl-context-dialog'></div>").parent(),k=h.parent(),l=$("<header class='ccl-context-dialog-header'></header>").prependTo(h),
m=$("<div class='ccl-context-dialog-preheader'></div>").prependTo(h),n,p=$("<div class='ccl-context-dialog-header-beforetitle'></div>").appendTo(l),r=$("<h2></h2>").appendTo(l),w=$("<div class='ccl-context-dialog-arrow'></div>").prependTo(h),u,v=$("html"),q=$("body"),t=$(window),B,H,y=CommonFunctions.isAndroidBrowser(),K,J,z,D;b.dispose=function(){a.removeClass("ccl-context-dialog-content");a.insertBefore(h);h.remove();b=null};b.openDialogAt=function(c,d,f){f?c+=k.width():(c||(c=0),d||(d=0));$(document).trigger("contextdialog:show",
[a]);u=t.scrollTop();b.isMobileView=!1;g.useMobileViewIfNeeded?(v.addClass("ccl-context-dialog-has-overlay"),b.isMobileView=t.width()<=CommonConstants.mediaScreenSizes.mobile):h.addClass("ccl-disable-mobile-view");h.toggleClass("ccl-context-dialog-black-theme",g.blackThemeActivated);h.toggleClass("show-arrow",g.showArrow);h.removeClass("top bottom left right");g.width&&h.outerWidth(g.width);g.maxWidth&&h.css("max-width",g.maxWidth+"px");g.showHeader||b.hideHeader();g.showPreHeader||b.hidePreHeader();
g.showCloseLink||b.toggleCloseLink(!1);var l=k.position().left,p=t.width();if(b.isMobileView&&f)h.addClass("bottom"),h.css({left:g.marginLeft-l,width:p-g.marginLeft-g.marginRight}),w.css({left:l-g.marginLeft+c});else if(b.isMobileView){if(g.expandParentFrame&&(g.scrollToLastWindowOnClose&&t.scrollTop(0),CommonFunctions.makePostMessageCall(window.top,new CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.expandContentAreaFrame)),IframeResizer.reportSetIframeDefaultHeight()),g.allowAccessToParentWindow&&
window.parent&&$(window.parent).width()>CommonConstants.mediaScreenSizes.mobile&&b.adjustDialogPosition(c,d,f,p),window.top!=window)try{var r=$(window.top).width();r<t.width()&&q.outerWidth(r,!0)}catch(P){}}else b.adjustDialogPosition(c,d,f,p);h.show();g.showCloseLink&&m.is(":visible")&&n.css("top",m.outerHeight(!0));B=window.parent&&g.allowAccessToParentWindow?window.parent.document.activeElement:document.activeElement;g.setFocus&&g.focusTarget&&g.focusTarget.focus();g.fadeContentEdgesOnScroll&&
J.invokeCallback(void 0,0);e=!0};b.openDialog=function(a){if(!e){var c=0,g=0;a&&("touchend"===a.type&&null!=a.originalEvent&&(c=a.originalEvent.changedTouches[0],a.pageX=c.pageX,a.pageY=c.pageY),c=a.pageX,g=a.pageY,0>=c&&0>=g&&a.target&&(g=$(a.target).offset(),c=g.left+a.target.offsetWidth/2,g=g.top+a.target.offsetHeight/2),a.stopPropagation());z=c;D=g;b.openDialogAt(c,g)}};b.openModal=function(){e||(K&&K.remove(),K=$("<div id='mask'></div>").appendTo("body").addClass("ccl-dialog-mask").click(b.closeDialog).css({opacity:"0",
filter:"alpha(opacity=0)","z-index":g.zIndex-1}),K.fadeTo(400,.5),b.openDialogAt($(window).width()/2,$(window).height()/2))};b.closeDialog=function(c){g.customScripts.beforeCloseDialog&&CommonFunctions.safeExecuteFunction(g.customScripts.beforeCloseDialog(c));b.isMobileView&&g.expandParentFrame&&(CommonFunctions.makePostMessageCall(window.top,new CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.collapseContentAreaFrame)),IframeResizer.reportSetIframeDefaultHeight(),q.width(""));
K&&K.fadeOut(400,0,function(){K.remove();K=null});h.hide();v.removeClass("ccl-context-dialog-has-overlay");g.scrollToLastWindowOnClose&&t.scrollTop(u);$(document).trigger("contextdialog:close",[a]);e=!1;g.scrollToLastWindowOnClose&&B&&B.focus()};b.setCloseFunction=function(a){b.closeDialog=a;n.unbind("click");n.click(a)};b.setTitle=function(a){g.title=a;r.text(g.title)};b.setTitleTooltip=function(a){g.titleTooltip=a;r.attr("title",g.titleTooltip)};b.setHeader=function(a){p.html(a)};b.setPreHeader=
function(a){m.html(a)};b.setContent=function(b){a.html(b)};b.setCloseLinkFunction=function(a){n.unbind("click");n.click(a)};b.showFooter=function(){H&&H.show()};b.hideFooter=function(){H&&H.hide()};b.showHeader=function(){l.show()};b.hideHeader=function(){l.hide()};b.togglePreHeader=function(a,e){if(m.is(":visible")?!a:a){var c=n.position().top,d=w.position().top,k=h.position().top;a=t.height()-h.position().top-h.outerHeight(!0);var p=l.position().top,r=h.hasClass("show-arrow")&&!h.hasClass("bottom")&&
!b.isMobileView,v=function(){var a=h.position().top,b=0>a,e=k-a,f=l.position().top-p;a=b?-Math.abs(a):0;g.showCloseLink&&n.css("top",c+f);r&&w.css("top",d+e+a);b&&(b=t.height()-h.position().top-h.outerHeight(!0),h.css("bottom",b+a))};h.css("bottom",a);h.css("top","");f(e,v);m.slideToggle(e,function(){v();h.css({top:h.position().top,bottom:""})})}};b.hidePreHeader=function(){m.hide();g.showCloseLink&&n.css("top",g.defaultPaddingTopPixels)};b.toggleCloseLink=function(a){n.toggle(a)};b.isOpened=function(){return e};
b.setBeforeCloseDialog=function(a){g.customScripts.beforeCloseDialog=a};b.onEscape=function(){n.trigger("click")};b.mainContainer=h;b.arrowContainer=w;b.closeWithOutsideClick=function(a){g.closeWithOutsideClick=a};b.adjustDialogPosition=function(a,b,e,c){a||(a=z);b||(b=D);c||(c=t.width());var d,f,l=h.outerWidth(),m=h.outerHeight(),n=t.scrollLeft(),p=t.scrollTop(),r=t.width()+n,v=t.height()+p;p=k.position().left;"auto"==g.align?f=r-a>l+g.marginLeft?a+g.marginLeft:a-l-g.marginRight:"center"==g.align?
f=a-l/2:"left"==g.align?f=a-l-g.marginRight:"right"==g.align&&(f=a+g.marginLeft);"auto"==g.valign?d=v-g.marginBottom-b>m+g.marginTop?b+g.marginTop:v-m-g.marginBottom:"top"==g.valign?d=b-m-g.marginBottom:"center"==g.valign?d=b-m/2:"bottom"==g.valign&&(d=b+g.marginTop);e||(f=f<n?n:f);!g.canHaveNegativeTop&&0>d&&(d=0);h.css({top:d,left:f,bottom:""});if(d<=b&&d+m>b){var u="top";var q=Math.max(0,Math.min(b-d,m-12));f+l<a?h.addClass("left"):a<f&&h.addClass("right")}else f<=a&&f+l>a&&(u="left",q=Math.max(0,
Math.min(a-f,l-12)),d>b?h.addClass("bottom"):d+m<b&&h.addClass("top"));"auto"==g.arrowOffset?"top"==u?w.css({top:q,left:""}):"left"==u&&w.css({top:"",left:q}):"manual"==g.arrowOffset?(b={},void 0!=g.arrowTop&&(b.top=g.arrowTop),void 0!=g.arrowLeft&&(b.left=g.arrowLeft),w.css(b)):w.css({top:"",left:""});e&&(e=h.outerWidth()/2,0<e-p&&(h.css({left:g.marginLeft-p}),w.css({left:p-g.marginLeft+a})),c=e-(c-p-a-g.marginRight),0<c&&(h.css({left:a-e-c-g.marginRight}),w.css({left:e+c+g.marginRight})),y||(h.css("max-height",
""),a=t.height()-d-g.marginBottom,0<a&&h.height()>a&&h.css("max-height",a)))};b.adjustDialogPositionOnHeightChange=function(a){var b=function(){var a=w.position().top,b=a+w.outerHeight()-h.outerHeight();0<b&&(h.css("top",h.position().top+b),w.css("top",a-b))};a&&0<a?f(a,b):b()};b.setToggleElement=function(a){g.toggleElement=a};b.setWidth=function(a){g.width=a};b.toggleArrow=function(a){g.showArrow=a};(function(){$.extend(g,d);r.uniqueId();g.noTitle&&r.remove();h.attr({role:"dialog","aria-labelledby":r.attr("id")});
a.addClass("ccl-context-dialog-content");if(g.fadeContentEdgesOnScroll){var e=$("<div class='ccl-context-dialog-content-edge-top'></div>").insertBefore(a),c=$("<div class='ccl-context-dialog-content-edge-bottom'></div>").insertAfter(a),f=a.get(0);J=new CCL.CallbackDebouncer(function(){e.toggleClass("ccl-context-dialog-content-edge-active",0<f.scrollTop);c.toggleClass("ccl-context-dialog-content-edge-active",f.scrollHeight-f.scrollTop!==f.clientHeight)});a.scroll(function(){J.invokeCallback(void 0,
25)});(new MutationObserver(function(a){0<a.length&&J.invokeCallback(void 0,50)})).observe(f,{childList:!0,attributes:!0,attributeFilter:["style","src","height","width","class"],characterData:!0,subtree:!0})}if(g.footerContent){var k=$("#"+g.footerContent);H=$("<footer class='ccl-context-dialog-footer'></footer>");H.appendTo(h);k.appendTo(H)}g.cssClass&&h.addClass(g.cssClass);h.css({"z-index":g.zIndex});b.setTitle(g.title);b.setTitleTooltip(g.titleTooltip);a.show();n=$("<button type='button'></button>").appendTo(h);
g.closeButtonTooltip&&(n.attr("title",g.closeButtonTooltip),n.attr("aria-label",g.closeButtonTooltip));g&&g.closeCssClass?n.addClass(g.closeCssClass):n.addClass("ccl-context-dialog-close");n.click(b.closeDialog)})();$(function(){function a(a){e&&0===$(a.target).closest(h).length&&!(g.toggleElement&&0<$(a.target).closest(g.toggleElement).length)&&a.pageX<$(window).width()&&g.closeWithOutsideClick&&b.closeDialog(a)}function c(a){if(e&&g.closeOnEscape&&a.which===CommonConstants.keyCodes.escape)b.onEscape()}
function d(b){b.each(function(b,e){e.addEventListener?(e.addEventListener(k,a,!0),e.addEventListener("keydown",c,!0)):($(e).on(k,a),$(e).on("keydown",c))})}var f=$(window);window.parent&&g.allowAccessToParentWindow&&(f=f.add(window.parent));var k=window.CommonFunctions.isIos()?"touchstart":"mousedown";d(f);$("iframe").on("load",function(){try{var a=$(this.contentWindow||this.contentDocument);d(a)}catch(P){}});$(document).on(CommonTriggers.clickInInnerFrame,function(){e&&g.closeWithOutsideClick&&b.closeDialog()})});
return b}
function CssModal(c){function d(){!t.closeButton.getIfHyperLinkEnabled()||H&&!H()||CssModal.closeDialog()}function f(){return window.location.hash.replace("#","")===w}function b(){$(document).off("cssmodal:hide",b);a()}function a(){if(f()&&!v){if(CssModal.IsAnyDialogOpened()){$(document).on("cssmodal:hide",b);return}if(!e())return;v=!0;CommonFunctions.safeExecuteFunction(B.beforeOpenDialog);k();CommonFunctions.safeExecuteFunction(B.afterOpenDialog)}!f()&&v&&(v=!1,CommonFunctions.safeExecuteFunction(B.beforeCloseDialog),setTimeout(function(){G&&
G.stopTrackFocus();if(q.userInputControlsSelector){var a=$(q.userInputControlsSelector);CommonFunctions.setEmbeddedObjectsVisibility(!0,a,a)}t.contentContainer.removeClass(CssModal.commonSettings.cssClasses.webkitOverflow);D.removeClass(CssModal.commonSettings.cssClasses.overlay);q.isIos&&D.removeClass(CssModal.commonSettings.cssClasses.overlayIos);q.PreventScrollingBeforeCloseDialog||z.scrollTop(J);if(K){if(CssModal.modes.ajaxDynamically===u||CssModal.modes.iframeDynamically===u)t.contentContainer.find("iframe").attr("src",
"about:blank"),setTimeout(m,100);$(K).removeClass(CssModal.commonSettings.cssClasses.isActive);q.addMaskToTopMenu&&(CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.unregisterExtraNavBar)),CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.unmaskNavigationBar)));q.isNestedDialog||(p(CommonWindowMessages.MessageNames.collapseContentAreaFrame),
Q.width(""));$(document).trigger(CssModal.commonSettings.events.hide,[K,w]);K=null}r.setCloseConfirmation(null);y&&y.focus();q.isNestedDialog&&CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.nestedCssModalDialogCollapsed});q.addMaskToTopMenu&&IframeResizer.reportSetIframeDefaultHeight();CommonFunctions.safeExecuteFunction(B.afterCloseDialog)},100))}function e(){var a=!0;CCL.FormCheckBeforeUnload.manuallyRunBeforeUnloadHandler();var b=CCL.DialogWhiteList.isDialogAllowed(r.getId());
b.isAllowed||(confirm(b.confirmationMessage)?b.deniedByInstances.forEach(function(a){a.clearStateCallback()}):(CssModal.closeDialog(),a=!1));return a}function g(){F&&clearTimeout(F);F=setTimeout(h,q.resizeTimeoutInMilliseconds)}function h(){if(f()&&v){t.innerContainer.removeAttr("style");q.preventScrollTopOnAdjust||t.contentContainer.removeAttr("style");if(z.width()>CommonConstants.mediaScreenSizes.mobile&&!q.isNestedDialog){if(r._maximized)t.innerContainer.css({width:$(window).width(),height:$(window).height(),
left:"0",top:"0"});else if(q.preferredWidth&&0<q.preferredWidth&&t.innerContainer.width(Math.min(q.preferredWidth,z.width()-40)),q.preferredHeight&&0<q.preferredHeight){var a=t.contentContainer.outerHeight(!0)-t.contentContainer.height();t.contentContainer.outerHeight(q.preferredHeight+a,!0)}t.contentContainer.css({width:q.minContentWidth&&0<q.minContentWidth?q.minContentWidth:void 0,minWidth:q.minContentWidth&&0<q.minContentWidth?q.minContentWidth:void 0,minHeight:q.minContentHeight&&0<q.minContentHeight?
q.minContentHeight:void 0,maxWidth:q.maxContentWidth&&0<q.maxContentWidth?q.maxContentWidth:void 0,maxHeight:q.maxContentHeight&&0<q.maxContentHeight?q.maxContentHeight:void 0});a=t.innerContainer.height()-t.headerContainer.outerHeight()-t.footerContainer.outerHeight();if(r._maximized)t.contentContainer.outerHeight(a);else{!q.preventScrollTopOnAdjust&&t.contentContainer.outerHeight()-1>a?t.contentContainer.outerHeight(a):q.forceContentHeight&&t.contentContainer.outerHeight(a+1);if(q.addMaskToTopMenu){a=
0;var b="0"}else a=t.innerContainer.height()/2,b="50%";var e=t.innerContainer.width()/2;t.innerContainer.css({left:"50%","margin-left":-1*e,"margin-top":-1*a,top:b})}}else{var c=0;t.innerContainer.children().not(t.contentContainer).each(function(){q.hideFooterInMobileView&&$(this).is(t.footerContainer)||(c+=$(this).outerHeight())});t.contentContainer.outerHeight(t.innerContainer.height()-c)}CommonFunctions.safeExecuteFunction(B.adjustWindowSize)}}function k(){if(f()&&v){if(q.userInputControlsSelector){var a=
$(q.userInputControlsSelector);CommonFunctions.setEmbeddedObjectsVisibility(!1,a,a)}J=z.scrollTop();D.addClass(CssModal.commonSettings.cssClasses.overlay);q.isIos&&D.addClass(CssModal.commonSettings.cssClasses.overlayIos);q.isNestedDialog||p(CommonWindowMessages.MessageNames.expandContentAreaFrame);if(window.top!=window)try{var b=$(window.top).width();b<z.width()&&Q.outerWidth(b,!0)}catch(P){}$(K).removeClass(CssModal.commonSettings.cssClasses.isActive);t.container.addClass(CssModal.commonSettings.cssClasses.isActive);
K=t.container.get(0);q.addMaskToTopMenu&&(CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.registerExtraNavBar)),CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.maskNavigationBar)));CssModal.modes.ajaxDynamically===u&&l();CssModal.modes.iframeDynamically===u&&n();K&&(y=document.activeElement,K.focus());$(document).trigger(CssModal.commonSettings.events.show,
[K,w]);CssModal.modes.ajaxDynamically!==u&&CssModal.modes.iframeDynamically!==u&&h();t.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow);q.isNestedDialog&&CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.nestedCssModalDialogExpanded});q.addMaskToTopMenu&&IframeResizer.reportSetIframeDefaultHeight();CssModal.modes.iframeDynamically!==u&&CssModal.modes.ajaxDynamically!==u&&G&&G.startTrackFocus()}}function l(){t.contentContainer.empty();
t.contentContainer.html(q.loadingText);if(CssModal.modes.ajaxStatically===u)t.contentContainer.load(q.ajaxUrl,h);else if(CssModal.modes.ajaxDynamically===u){var a=void 0!==R?$.param(R,!0):{};$.ajax({type:"GET",url:q.ajaxUrl,data:a,success:function(a){t.contentContainer.html(a);h();r&&r.getIsOpened()&&(a=r.getFocusTracker())&&a.startTrackFocus();CommonFunctions.safeExecuteFunction(B.afterOpenDialogAjaxDynamicallySuccess)},error:function(a,b,e){CommonFunctions.alertAjaxError(a,b,e)}})}}function m(){t.contentContainer.html("")}
function n(){var a=$("<iframe/>").attr("src",q.iframeUrl).addClass(CssModal.commonSettings.cssClasses.iframe).attr("seamless","seamless").attr("frameborder","0").attr("title",q.iframeTitle).on("load",function(){h()});q.IframeClientId&&a.attr("id",q.IframeClientId);q.IframeAllowMedia&&a.attr("allow","microphone *; camera *");t.contentContainer.empty().append(a)}function p(a){q.expandToAllWindowSize&&(CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(window.parent,{messageName:a}),IframeResizer.reportSetIframeDefaultHeight())}
window[c]=this;var r=this,w=c,u,v=!1,q,t,B,H,y,K,J,z=$(window),D=$("html"),Q=$("body"),F,R={},G;r.initialize=function(b,e,c){B=e;q=c;t=$.extend(b,{closeButton:$("."+q.closeButtonClass)});u=q.mode;G=new CCL.FocusTracker(t.innerContainer);$(document).keyup(function(a){r.keyUp(a)});CssModal.modes.ajaxStatically===u&&l();CssModal.modes.iframeStatically===u&&n();z.on("hashchange",a);z.on("resize",g);z.on("load",a);t.closeButton.click(d);CssModal.addOrReplaceInstance(this);if(CssModal.modes.iframeStatically===
u||CssModal.modes.iframeDynamically===u)CommonFunctions.attachPostMessageEventListener($(window),CommonWindowMessages.MessageNames.nestedCssModalDialogExpanded,function(){t.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow,!1);t.innerContainer.toggleClass(q.mobileExpandedNestedContentClass,!0)}),CommonFunctions.attachPostMessageEventListener($(window),CommonWindowMessages.MessageNames.nestedCssModalDialogCollapsed,function(){t.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow,
!0);t.innerContainer.toggleClass(q.mobileExpandedNestedContentClass,!1)});r.verifyEmptyTitle()};r.getId=function(){return w};r.getFocusTracker=function(){return G};r.openDialog=function(a){r._maximized=a;window.location.hash="#"+w;a?(t.innerContainer.addClass("ccl-cssmodal-modal-maximized"),t.innerContainer.removeClass("ccl-cssmodal-modal-inner")):(t.innerContainer.addClass("ccl-cssmodal-modal-inner"),t.innerContainer.removeClass("ccl-cssmodal-modal-maximized"))};r.keyUp=function(a){f()&&a.which===
CommonConstants.keyCodes.escape&&d()&&CssModal.closeDialog()};r.setContentMinSize=function(a,b){q.minContentWidth=a;q.minContentHeight=b;h()};r.setContentMaxSize=function(a,b){q.maxContentWidth=a;q.maxContentHeight=b;h()};r.setPreferredSize=function(a,b){0<a&&(q.preferredWidth=a);0<b&&(q.preferredHeight=b);h()};r.setPreventScrollTopOnAdjust=function(a){q.preventScrollTopOnAdjust=a};r.getIframe=function(){return t.contentContainer.find("iframe")};r.clearContent=function(){t.contentContainer.empty()};
r.getHeaderContainer=function(){return t.headerContainer};r.verifyEmptyTitle=function(){var a=$("h2",t.headerContainer);a&&0===a.text().trim().length&&a.hide()};r.setTitle=function(a){var b=$("h2",t.headerContainer);b&&((a=a.trim())?(b.text(a),b.show()):b.hide())};r.setTitleTooltip=function(a){var b=$("h2",t.headerContainer);b&&b.attr("title",a)};r.setAjaxUrl=function(a,b,e){q.ajaxUrl=a;R=b;e&&l()};r.setIframeUrl=function(a,b){q.iframeUrl=a;b&&n()};r.setIframeTitle=function(a){q.setIframeTitle=a};
r.setCloseConfirmation=function(a){H=a};r.toggleDialogCloseButton=function(a){t.closeButton.toggleHyperlink(a)};r.getHeader=function(){return t.headerContainer};r.getFooter=function(){return t.footerContainer};r.adjustWindowSize=function(){h()};r.setMode=function(a){u=a};r.setCustomScripts=function(a){B=a};r.clearLastActiveElement=function(){y=null};r.setAfterOpenDialog=function(a){B.afterOpenDialog=a};r.getIsOpened=function(){return v};return r}CssModal.commonSettings=void 0;CssModal.modes=void 0;
CssModal.closeDialog=function(){window.location.hash="!"};CssModal.instances=[];CssModal.addOrReplaceInstance=function(c){for(var d=c.getId(),f=-1,b=0;b<CssModal.instances.length;b++)d===CssModal.instances[b].getId()&&(f=b);-1!==f?CssModal.instances[f]=c:CssModal.instances.push(c)};CssModal.IsAnyDialogOpened=function(c){for(var d=0;d<CssModal.instances.length;d++)if((!c||c(CssModal.instances[d].getId()))&&CssModal.instances[d].getIsOpened())return!0;return!1};
function DatePicker(c){function d(a){if("date"===$.type(a))return!0;try{if(1E3>$.datepicker.parseDate(m.dateFormat,a,{shortYearCutoff:99}).getFullYear())return!1}catch(K){return!1}return!0}function f(){return!l.controls.dateInput.val()||l.controls.dateInput.val()===m.waterMark}function b(){l.controls.dateInput.val(m.waterMark).removeClass(n.watermark).addClass(n.watermark)}function a(){!v&&q&&(v=window[l.settings.timeSlotPickerClientInstanceName]);return v}function e(a,b){if((p||t)&&l.getAvailableDatesFunction){var e=
12==b?new Date(a,12,6):new Date(a,b,6);a={startDate:JSON.stringify(1==b?new Date(a,-1,25):new Date(a,b-2,25)),endDate:JSON.stringify(e),filterId:B};l.getAvailableDatesFunction(a);r=a.allowedDates}}function g(a,b){if(w&&l.getCssClassesForCalendarDatesFunction){var e=12==b?new Date(a,12,6):new Date(a,b,6);a={startDate:JSON.stringify(1==b?new Date(a,-1,25):new Date(a,b-2,25)),endDate:JSON.stringify(e)};l.getCssClassesForCalendarDatesFunction(a);u=a.customCssClassesForCalendarDates}}function h(){var a=
l.controls.dateInput.datepicker("option","defaultDate");if(a){var b=typeof a;if("string"===b&&"null"!==a)return $.datepicker.parseDate(m.dateFormat,a);if("object"===b&&a.getTime)return new Date(a.getTime())}}function k(a,b){a.val()===$.datepicker._get(b,"waterMark")&&a.val("");a.removeClass(n.watermark)}window[c]=this;var l=this,m,n,p,r,w,u,v,q,t,B,H;l.initialize=function(){m=l.settings;n=m.cssClasses;w=m.useCustomCssClassesForCalendarDates;p=m.useRestrictedDateSelection;q=!!l.settings.timeSlotPickerClientInstanceName;
DatePickerPool.add(l.controls.dateInput,l);l.controls.dateInput.datepicker({showOn:m.hideInput?"button":"both",buttonImage:"",buttonImageOnly:!1,showButtonPanel:!0,showOtherMonths:!0,selectOtherMonths:!0,defaultDate:m.defaultDate,dateFormat:m.dateFormat,firstDay:m.firstDayOfWeek,waterMark:m.waterMark,monthNames:m.monthNames,monthNamesShort:m.abbreviatedMonthNames,dayNames:m.dayNames,dayNamesShort:m.abbreviatedDayNames,dayNamesMin:m.abbreviatedDayNames,closeText:m.closeText,prevText:m.previousMonthText,
nextText:m.nextMonthText,currentText:m.todayText,disabled:m.disabled,showWeek:m.showWeek,weekHeader:m.weekHeader,disableWeekSelection:m.DisableWeekSelection,beforeShow:function(a,b){H=!1;l.settings.DisableAccessibilityAdapter||CCL.DatePickerAccessibilityAdapter.setCurrentDatePicker(l);a=$(a);k(a,b);b=a.datepicker("getDate")||h()||new Date;(p||t)&&e(b.getFullYear(),b.getMonth()+1);w&&g(b.getFullYear(),b.getMonth()+1);setTimeout(function(){a.trigger("update")},1)},onChangeMonthYear:function(a,b,c){e(a,
b);g(a,b);setTimeout(function(){$(c.input).trigger("update")},1)},beforeShowDay:function(a){if(!p&&!t&&!w||void 0==r&&void 0==u)return[!0];a=[a.getFullYear(),a.getMonth()+1,a.getDate()].join("_");var b=[!0];(p||t)&&void 0!=r&&(b=void 0==r[a]?[!1,n.disabled]:1==r[a]?[!0,n.avalaible]:[!1,n.busy]);w&&void 0!=u&&void 0!=u[a]&&$.each(u[a],function(a,e){b[1]=a;b[2]=e});return b},onClose:function(b,e){H=!0;var c=$(this);c.val()||(c.val($.datepicker._get(e,"waterMark")).addClass(n.watermark),q&&a().resetTimes());
l.relatedWithDateInput&&l.relatedWithDateInput.fillMissingDateFromRelatedInput&&b&&""===window[l.relatedWithDateInput.id].getDateAsString()&&window[l.relatedWithDateInput.id].setDate(b);m.hideInput?c.parent().find(".ui-datepicker-trigger").focus():(CCL.CommonFunctions.isIe()?(c.datepicker("option","showOn","button"),setTimeout(function(){c.focus();setTimeout(function(){c.datepicker("option","showOn","both")})})):c.focus(),k(c,e))}}).on("update",function(){if(l.settings.showWeek)if(l.settings.disableWeekSelection)$("td.ui-datepicker-week-col").addClass(n.disabled).wrapInner("<span></span>");
else $("td.ui-datepicker-week-col").wrapInner('<a href="javascript:void(0);"></a>').on("click",function(){var a;if(l.relatedWithDateInput){if(l.relatedWithDateInput.isLater){$(this).next().click();var b=a=l.controls.dateInput.datepicker("getDate");b.setDate(a.getDate()+6)}else a=$(this).parent().find("td"),a.get(a.length-1).click(),b=a=l.controls.dateInput.datepicker("getDate"),b.setDate(a.getDate()-6);window[l.relatedWithDateInput.id].setDate(b)}else $(this).next().click()});m.hideTodayButton&&$(".ui-datepicker-current").hide()}).trigger("update");
$("#ui-datepicker-div").hide();m.hideInput&&l.controls.dateInput.hide();f()&&b();l.controls.dateInput.change(function(){if(l.onDateSelectedFunction){var a={dateText:l.getDateAsString(),dateFilterId:t?B:0};l.onDateSelectedFunction(a);l.triggerEventsOnChange()}}).keypress(function(a){a.which===CommonConstants.keyCodes.enter&&(l.controls.dateInput.change(),a.preventDefault())}).parent().find(".ui-datepicker-trigger").text(m.openText);if(p)l.controls.dateInput.keydown(function(a){a.which!==CommonConstants.keyCodes.tab&&
(a.preventDefault(),a.which===CommonConstants.keyCodes.del||a.which===CommonConstants.keyCodes.backspace)&&(l.clearDateAndTime(!1),l.closePicker(),$(l.controls.dateInput).trigger("change"))}).on("paste",function(a){a.preventDefault()})};l.closePicker=function(){l.controls.dateInput.datepicker("hide")};l.triggerEventsOnChange=function(){var a=f();a&&m.DateClearedEventName?$(l).trigger(m.DateClearedEventName):!a&&m.DateSetEventName&&$(l).trigger(m.DateSetEventName)};l.getDateAsString=function(){if(f())return"";
var a=l.controls.dateInput.val();return d(a)?a:""};l.getDateAsQueryStringParameter=function(){return $.datepicker.formatDate("yy-mm-dd",l.getDate())};l.getTime=function(){var a=$("#"+l.settings.timePickerSelectHourClientId),b=$("#"+l.settings.timePickerSelectMinuteClientId),e={};0<a.length&&0<b.length&&(e.hours=a.val(),e.minutes=b.val());return e};l.getDateTimeAsString=function(){var a=l.getDateAsString();if(""===a)return a;var b=l.getTime();return null==b.hours||null==b.minutes?a:a+" "+b.hours+":"+
b.minutes};l.isDateValid=function(){if(f())return!1;var a=l.controls.dateInput.val();return d(a)};l.getDate=function(){return f()?void 0:l.controls.dateInput.datepicker("getDate")};l.setDate=function(a){a&&d(a)?(l.controls.dateInput.removeClass(n.watermark),l.controls.dateInput.datepicker("setDate",a)):b()};l.setDefaultDate=function(a){var e=l.getDate();l.controls.dateInput.datepicker("option","defaultDate",a);l.setDate(e);f()&&b()};l.clearDateAndTime=function(b){f()||b||(l.setDate(""),m.DateClearedEventName&&
$(l).trigger(m.DateClearedEventName));q&&a().resetTimes()};l.setFilteringMode=function(a){t=a};l.setFilterId=function(a){B=a};l.focus=function(){l.controls.dateInput.focus()};l.isPickerVisible=function(){return $("#ui-datepicker-div").is(":visible")};l.isPickerClosing=function(){return H};return l}
(function(c,d){function f(a,e){e=e?e:0;if(e<a.length)for(var c=b.length-1;0<=c;c--)if(b[c].jQueryInput.get(0)===a.get(e))return b[c].datePickerFunction;return d}var b=[];c.DatePickerPool={add:function(a,e){b.push({jQueryInput:a,datePickerFunction:e})},getDateAsString:function(a){return(a=f(a))?a.getDateAsString():""},isDateValid:function(a){return(a=f(a))?a.isDateValid():!1},getDate:function(a){return f(a)?f(a).getDate():d},setDate:function(a,b){for(var e=a.length-1;0<=e;e--){var c=f(a,e);c&&c.setDate(b)}}}})(window);
function DateTimeActivation(c){function d(){e||(e=window[f.settings.datePickerClientInstanceName]);return e}window[c]=this;var f=this,b,a,e,g,h,k,l;f.initialize=function(){b=f.settings;a=b.cssClasses;g=b.dateFilteringInUse;h=f.controls.selectActivationMode.parent();l=b.modes;k=!!b.timeSlotPickerClientInstanceName;f.controls.selectActivationMode.change(function(){var e=f.getMode();f.controls.dateTimeControlsContainer.toggle(e!=l.empty&&e!=l.infinity);$("."+a.timeControlsContainer,h).toggleClass(a.hiddenTimeControlsContainer,
e!=l.date&&e!=l.dateAndEndOfDayCombined);f.controls.endOfDayLabel.toggle(e==l.endOfDay);var c=g&&e==l.filtering;f.controls.datePickerFilterHolder.toggle(c);d().setFilteringMode(c);g&&d().clearDateAndTime(e!=l.filtering);k&&window[b.timeSlotPickerClientInstanceName].toggle(e==l.filtering);if(f.onChangeActivationModeFunction)f.onChangeActivationModeFunction()});g&&(f.controls.filterDropDown.change(function(){var a=f.controls.filterDropDown.val();f.controls.filterHidden.val(a);d().clearDateAndTime();
d().setFilterId(a)}),d()&&(d().setFilterId(f.controls.filterHidden.val()),d().setFilteringMode(g&&f.getMode()==l.filtering)))};f.getMode=function(){return b.useRadioButtonStyle?$(f.controls.selectActivationMode).find("input:radio:checked").val():f.controls.selectActivationMode.val()};f.isDateSelected=function(){return f.getMode()==(l.empty||l.infinity)?!1:d().isDateValid()};f.getAllowToSubmitAfterDeadline=function(){return 0<f.controls.useEndOfDateCheckBox.length?f.controls.useEndOfDateCheckBox.is(":checked"):
null};f.getSelectedEventId=function(){return k?window[b.timeSlotPickerClientInstanceName].getSelectedTimeSlotId():null};f.getSelectedDateTime=function(){return d().getDateTimeAsString()};return f}
function Dialog(c){function d(){v&&(l.show(),b(),CommonFunctions.safeExecuteFunction(g.customScripts.afterOpenDialog),IframeResizer.reportSetIframeDefaultHeight(),v=!1)}function f(){k.scrollLeft(B);k.scrollTop(t);IframeResizer.reportSetIframeDefaultHeight();q=!1}function b(){var a=function(a,b,e,c){e=Math.max((a-e)/2,10);a<c&&(e+=b);return 0>e?0:e},b=$(document);l.offset({left:a(k.width(),k.scrollLeft(),l.width(),b.width()),top:a(k.height(),k.scrollTop(),l.height(),b.height())})}function a(){g.settings.useInProgressFunctionality?
(k.unload(function(){g.close()}),n.attr("title",g.settings.okButtonInProgressTitle),n.addClass(g.settings.inProgressCssClass),g.disableDialog(),setTimeout(function(){CommonFunctions.safeExecuteFunction(g.customScripts.afterOkClick);l.find("input,button").prop("disabled",!0)},100)):CommonFunctions.safeExecuteFunction(g.customScripts.afterOkClick)&&g.close()}function e(){CommonFunctions.safeExecuteFunction(g.customScripts.afterCancelClick)&&g.close()}window[c]=this;var g=this,h=$("#mask"),k=$(window),
l,m,n,p,r,w,u,v=!1,q=!1,t,B,H=!1;g.initialize=function(){l=g.controls.container;m=g.controls.iframe;n=g.controls.okButton;p=g.settings.showBackgroundMask;r=g.settings.useTransparentMask;w=g.settings.expandToAllWindowSize;u=g.settings.saveAndCloseDialogOnEnterKey;H=!w||window==window.top;l.css("z-index",g.settings.zIndex).keydown(function(a){return g.keyDown(a)}).keypress(function(a){return g.keyPress(a)});g.controls.closeLink.click(function(){e();return!1}).keydown(function(a){return a.which===CommonConstants.keyCodes.enter?
(e(),!1):!0});n.click(function(){a();return!1});g.controls.cancelLink.click(function(){e();return!1});w&&(CommonFunctions.attachPostMessageEventListener(k,CommonWindowMessages.MessageNames.contentAreaFrameHasExpanded,function(){v&&d()}),CommonFunctions.attachPostMessageEventListener(k,CommonWindowMessages.MessageNames.contentAreaFrameHasCollapsed,function(){q&&f()}));g.settings.openDialogAfterLoading&&g.open()};g.openWithTitle=function(a){g.setNewTitle(a);g.open()};g.open=function(){v=!0;B=k.scrollLeft();
t=k.scrollTop();p&&(0==h.length&&(h=$("<div id='mask'></div>").appendTo("body").addClass(g.settings.maskCssClass)),h.css({opacity:r?"0":"1","z-index":g.settings.backgroundMaskZIndex}),h.show());CommonFunctions.safeExecuteFunction(g.customScripts.beforeOpenDialog);H?d():g.toggleContentAreaFrame(!0);setTimeout(d,100)};g.close=function(){q=!0;CommonFunctions.safeExecuteFunction(g.customScripts.beforeCloseDialog);p&&h.hide();l.hide();CommonFunctions.safeExecuteFunction(g.customScripts.afterCloseDialog);
H?f():g.toggleContentAreaFrame(!1)};g.setupIframe=function(a,b,e,c){m.attr("width",b?b:m.attr("width")).attr("height",e?e:m.attr("height")).attr("scrolling",c?c:m.attr("scrolling"));g.setIframeSrc(a)};g.setIframeSrc=function(a){g.settings.frameLoadingText&&m.contents().find("body").empty().text(g.settings.frameLoadingText);document.getElementById(m.prop("id")).contentWindow.location.href=a};g.setNewAfterOkClickFunction=function(a){g.customScripts.afterOkClick=a};g.setNewAfterCancelClickFunction=function(a){g.customScripts.afterCancelClick=
a};g.setNewBeforeCloseDialogFunction=function(a){g.customScripts.beforeCloseDialog=a};g.setNewTitle=function(a){g.controls.titleContainer.text(a)};g.enableOrDisableOkButton=function(a){n.prop("disabled",!a)};g.disableDialog=function(){g.enableOrDisableOkButton(!1);g.controls.cancelLink.unbind("click").attr("disabled",!0);g.controls.closeLink.unbind("click").attr("disabled",!0);g.controls.closeLink.find("img").prop("src",g.settings.closeImageDisabledUrl)};g.getContainerJQueryElement=function(){return l};
g.focusOnCloseLink=function(){g.controls.closeLink.focus()};g.keyDown=function(b){if(b.target&&b.target.className&&0<=b.target.className.indexOf("cke_source"))return!0;b.which===CommonConstants.keyCodes.escape?e():!u||b.which!==CommonConstants.keyCodes.enter||b.shiftKey||b.srcElement&&"A"===b.srcElement.tagName||a();return!0};g.keyPress=function(a){return!0};g.scrollWindowToCenter=function(){var a=l.offset().top,b=k.height(),e=l.height();window.scrollTo(0,a-(b/2-e/2))};g.toggleContentAreaFrame=function(a){w&&
(CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(window.parent,{messageName:a?CommonWindowMessages.MessageNames.expandContentAreaFrame:CommonWindowMessages.MessageNames.collapseContentAreaFrame}),IframeResizer.reportSetIframeDefaultHeight())};g.setWidth=function(a){l.css("width",a);b()};return g}
function DivToggler(c){var d=this;d.settings=c;d.div=d.settings.divControl?$(d.settings.divControl):$("#"+d.settings.divId);void 0==d.settings.changeDivVisibility&&(d.settings.changeDivVisibility=!0);d.initialize=function(){d.settings.isCollapsed?d.collapseDiv():d.expandDiv();return d};d.afterToggle=function(){d.settings.afterToggle&&"function"===typeof d.settings.afterToggle&&d.settings.afterToggle()};d.toggleDiv=function(c){d.settings.isCollapsed?d.expandDiv():d.collapseDiv();c&&"function"===typeof c&&
c()};d.collapseDiv=function(){d.settings.changeDivVisibility&&d.div.hide();d.settings.isCollapsed=!0;d.afterToggle()};d.expandDiv=function(){d.settings.changeDivVisibility&&d.div.show();d.settings.isCollapsed=!1;d.afterToggle()};return d}
function DropDownMenu(c,d){function f(a,b){n&&clearTimeout(n);n=setTimeout(function(){var a=b.relatedTarget||document.activeElement,e=$(a),c=a===k[0]||1===e.closest(k).length;a=a===l[0]||1===e.closest(l).length;c||a||h.hideMenu()},a)}function b(){if(l.getIfHyperLinkEnabled()){r.scroll(a);h.settings.cssClasses&&h.settings.cssClasses.selectedHolder&&l.addClass(h.settings.cssClasses.selectedHolder);var b=h.settings.useTargetPosition?m.position():m.offset();h.settings.setMinWidthByTarget&&k.css("min-width",
m.outerWidth()+"px");var c=b.top+m.outerHeight(!1),g="auto",d="auto";switch(h.settings.horizontalPosition){case DropDownMenuCommonSettings.horizontalPositions.center:g=b.left+(m.outerWidth(!1)-k.outerWidth(!1))/2;break;case DropDownMenuCommonSettings.horizontalPositions.rightEdge:g=b.left+m.outerWidth(!1)-k.outerWidth(!1);0>g&&(g=b.left);break;case DropDownMenuCommonSettings.horizontalPositions.rightEdgeRightOffset:d=r.width()-r.scrollLeft()-b.left-m.outerWidth(!1);0>d&&(d=0);break;case DropDownMenuCommonSettings.horizontalPositions.auto:break;
case DropDownMenuCommonSettings.horizontalPositions.leftEdgeParentRightBorder:g=b.left;b=m.offsetParent();b=b.outerWidth(!1)+(h.settings.useTargetPosition?0:b.offset().left);var f=k.outerWidth(!1);b<g+f&&(g=b-f);break;default:g=b.left}var n={top:h.settings.useFixedPosition?c-r.scrollTop():c,left:g,right:d,"z-index":h.settings.zIndex};h.settings.useFixedPosition&&(n.position="fixed");h.settings.autofitHeight&&(c=r.height()-c-(k.outerHeight(!0)-k.height()),n["max-height"]=0>c?0:c,n["overflow-y"]="auto");
r.scroll(function(){k.css(n)});k.css(n).show();k.trigger("menu:show");h.settings.renderListItemButton&&e(p);$(l).attr("aria-expanded",!0)}}function a(){var a=h.settings.useTargetPosition?m.position():m.offset();k.css({top:a.top+m.outerHeight(!1)})}function e(a){$(a).addClass("ccl-dropdownmenu-selected");$("button, a",a).focus()}function g(a,b){$(a).removeClass("ccl-dropdownmenu-selected");a=h.settings.items[b];e(a);p=a}window[c]=this;var h=this,k,l,m,n,p,r=$(window);h.name=c;d&&DropDownMenu.instances.push(this);
h.initialize=function(){k||h.initializeControls($("#"+h.controls.menuContainerId),$("#"+h.controls.targetLinkId),$("#"+h.controls.layoutAlignmentControlId))};h.initializeControls=function(a,c,d){if(!k){k=a;h.settings.renderListItemButton&&(h.settings.items=$(k).find("li").toArray(),p=h.settings.items[0],e(p));l=c;m=d;h.settings.cssClasses&&h.settings.cssClasses.targetLink&&l.addClass(h.settings.cssClasses.targetLink);l.attr("aria-haspopup","true");0<k.length&&l.attr("aria-controls",k.get(0).id);if(h.settings.operatesInManagedMode)CCL.DropDownMenuManager.getInstance().containerAddOrReplaceInstance(h.settings.manageModeContainerKey,
h);else if(!h.settings.showMenuOnHover||h.settings.isIos)$(document).on((h.settings.isIos?"touchend":"click")+" "+CommonTriggers.clickInInnerFrame,function(a){a.target===l[0]||1===l.find(a.target).length?k.is(":visible")?h.hideMenu():b():k.is(":visible")&&a.target!==k[0]&&1!==k.find(a.target).length&&h.hideMenu()});else l.on("focusin mouseover",function(){b()}),k.add(l).on("focusout mouseout",function(a){f(250,a)});h.settings.closeMenuWhenClickingOnLink&&k.find("li").click(function(){h.hideMenu()});
h.settings.closeMenuWhenClickingInside&&k.click(function(){h.hideMenu()});$(document).ready(function(){h.settings.appendToBody&&k.appendTo("body")});h.settings.renderListItemButton&&$(document).keydown(function(a){if(k.is(":visible"))switch(a.which){case CommonConstants.keyCodes.enter:var b=$("a",p);0===b.length?($("button",p).trigger("click"),h.hideMenu()):window.location.href=b[0].href;a.preventDefault();return!1;case CommonConstants.keyCodes.tab:case CommonConstants.keyCodes.escape:h.hideMenu();
$("#"+h.controls.targetLinkId).focus();break;case CommonConstants.keyCodes.arrowUp:return k.is(":visible")&&(b=h.settings.items.indexOf(p),b=0===b?h.settings.items.length-1:b-1,g(p,b)),a.preventDefault(),!1;case CommonConstants.keyCodes.arrowDown:return k.is(":visible")&&(b=h.settings.items.indexOf(p),b=b===h.settings.items.length-1?0:b+1,g(p,b)),a.preventDefault(),!1}})}};h.toggleManagedMenu=function(){k.is(":visible")?(h.hideMenu(),$("#"+h.controls.targetLinkId).focus()):b()};h.hideMenu=function(){r.unbind("scroll",
a);k.hide();h.settings.cssClasses&&h.settings.cssClasses.selectedHolder&&l.removeClass(h.settings.cssClasses.selectedHolder);k.trigger("menu:hide");$(l).attr("aria-expanded",!1);h.settings.renderListItemButton&&($(p).removeClass("ccl-dropdownmenu-selected"),p=h.settings.items[0])};return h}DropDownMenu.instances=[];DropDownMenu.initialize=function(){for(var c=0,d=this.instances.length;c<d;c+=1)this.instances[c].initialize()};
ExpandableContainer.defaults={isExpanded:!1,expander:".ccl-expandable-container-header",target:".ccl-expandable-container-content",keepStateInCookie:!1,cookieName:"ExpandableContainerState",accessibleExpander:"a",expandTooltip:void 0,collapseTooltip:void 0};
function ExpandableContainer(c,d){function f(a){g.settings.collapseTooltip&&g.settings.expandTooltip&&m.attr("title",a?g.settings.collapseTooltip:g.settings.expandTooltip)}function b(){var a=e();a?h.addClass("expanded"):l.hide();f(a)}function a(){var a=$.cookie(g.settings.cookieName);return null===a||""===a?{}:JSON.parse(a)}function e(){if(g.settings.isExpanded)return!0;if(!g.settings.keepStateInCookie)return!1;var b=h.attr("Id");return void 0===b?!1:!0===a()[b]||!1}var g=this,h=$(c);g.settings={};
$.extend(g.settings,ExpandableContainer.defaults);$.extend(g.settings,d);var k=$(g.settings.expander,c);d=k.attr("data-expander-target")||g.settings.target;var l=$(d,c),m=$(g.settings.accessibleExpander,k);g.toggle=function(){var b=!g.getIsExpandedState();b?(h.addClass("expanded"),l.slideDown()):(h.removeClass("expanded"),l.slideUp());$(document).trigger("expandablecontainer:toggled",[c,b]);if(g.settings.onToggleCallback)g.settings.onToggleCallback(b,h);f(b);if(g.settings.keepStateInCookie){var e=
h.attr("Id");if(void 0!==e){var d=a();d[e]=b;$.cookie(g.settings.cookieName,JSON.stringify(d),{path:"/"})}}return!1};g.getIsExpandedState=function(){return h.hasClass("expanded")};(function(){if(g.settings.keepStateInCookie&&void 0===$.cookie)throw Error("keepStateInCookie option requires $.cookie to be defined.");k.addClass("ccl-expandable-container-expander");if((0===l.length||0===k.length)&&g.settings.throwOnMissingTarget)throw"Targets not found";b();k.click(function(){g.toggle()})})();return g}
function ExpandableList(c){function d(){try{var a=parent.document.getElementsByTagName("iframe");if(void 0!=a)for(var b=0,c=a.length;b<c;b++){var d=a[b];if((d.contentDocument||d.contentWindow.document)===document)return d}}catch(l){}return null}window[c]=this;var f=this,b,a;f.initialize=function(){b=f.controls;a=f.settings};f.expand=function(e){var c=$(b.showlink).position(),f=c.top,k=$(window).scrollTop(),l=null,m=!1;CommonFunctions.isIos()&&(m=!0,c=d(),null!==c&&(l=c.parentNode,null!==l&&(k=l.scrollTop)));
b.list.children("li").show().removeClass(a.lastVisibleItemCssClass);b.showlink.hide();b.hidelink.show();c=$(b.hidelink).position();k+=c.top-f;a.remainInTheSamePosition&&(m?null!==l&&(l.scrollTop=k):$(window).scrollTop(k));e()};f.collapse=function(e){var c=$(b.hidelink).position(),f=c.top,k=$(window).scrollTop(),l=null,m=!1;CommonFunctions.isIos()&&(m=!0,c=d(),null!==c&&(l=c.parentNode,null!==l&&(k=l.scrollTop)));0<a.maxItemsShown?(c=b.list.children("li").eq(a.maxItemsShown-1),c.addClass(a.lastVisibleItemCssClass),
c.nextAll().hide()):b.list.children("li").hide();b.hidelink.hide();b.showlink.show();c=$(b.showlink).position();k-=f-c.top;a.remainInTheSamePosition&&(m?null!==l&&(l.scrollTop=k):$(window).scrollTop(k));e()};return f}
$.widget("itslccl.extendedTextBox",{options:{watermarkText:"",watermarkCssClass:""},_input:void 0,_isWatermarkMode:!1,_create:function(){var c=this;this._input=this.element;this._input.is(":focus")?this._input.setCursorPosition(this._input.val().length):this._showWatermark();this._input.keypress(function(d){d=d?d:window.event;c._hideWatermark();return d.which!==CommonConstants.keyCodes.enter||d.shiftKey});this._input.blur(function(){c._input.is(":visible")&&c._showWatermark()});this._input.focus(function(){c._hideWatermark()});
this._input.on("paste",function(){c._hideWatermark()})},_showWatermark:function(){this._isWatermarkMode||this._input.val()||(this._input.val(this.options.watermarkText),this._input.addClass(this.options.watermarkCssClass),this._isWatermarkMode=!0)},_hideWatermark:function(){this._isWatermarkMode&&(this._input.val(""),this._input.removeClass(this.options.watermarkCssClass),this._isWatermarkMode=!1)},isEmpty:function(){return this._isWatermarkMode||0==$.trim(this._input.val()).length}});
function ExternalStorageAvailabilityChecker(){return{isDropboxAvailable:function(){return void 0!==window.Dropbox?!0:!1},isGoogleDriveAvailable:function(){return void 0!==window.gapi?!0:!1}}}
function Feedback(c,d,f,b){window[c]=this;var a=this;a.controls=f;a.settings=d;a.functions=b;var e={initialize:function(){a.controls.showMoreLink.click(function(){e.onShowMoreClick()});a.controls.showLessLink.click(function(){e.onShowLessClick()});a.settings.multiline||(a.controls.messageContainer.css("display","block"),a.controls.messageContainer.css("overflow","hidden"),e.setMaxMessageContainerHeight(),$(window).resize(function(){e.handleContainerSizeChange()}),e.handleContainerSizeChange())},onShowMoreClick:function(){a.controls.showMoreLink.hide();
a.controls.showLessLink.show();e.showHideableContent()},showHideableContent:function(){a.settings.multiline?$(".hideable-line").show():a.controls.messageContainer.css("max-height","none")},onShowLessClick:function(){a.controls.showMoreLink.show();a.controls.showLessLink.hide();e.hideHideableContent()},hideHideableContent:function(){a.settings.multiline?$(".hideable-line").hide():e.setMaxMessageContainerHeight()},handleContainerSizeChange:function(){$(a.controls.messageContainer).prop("scrollHeight")>
e.getMaxMessageContainerHeight()?"none"===$(a.controls.showLessLink).css("display")&&a.controls.showMoreLink.show():(a.controls.showMoreLink.hide(),a.controls.showLessLink.hide(),e.setMaxMessageContainerHeight())},setMaxMessageContainerHeight:function(){var b=parseFloat(a.controls.container.css("line-height"));a.controls.messageContainer.css("max-height",b*a.settings.maxLinesToDisplayByDefault+"px")},getMaxMessageContainerHeight:function(){return parseFloat(a.controls.messageContainer.css("line-height"))*
a.settings.maxLinesToDisplayByDefault}};a.showMessage=function(b,e){a.controls.icon.removeClass(a.settings.iconCssClasses.join(" ")).addClass(a.settings.iconCssClasses[b]);a.controls.container.removeClass(a.settings.cssClasses.join(" ")).addClass(a.settings.feedbackCssClass).addClass(a.settings.cssClasses[b]).show();e?a.controls.textSpan.html(e).show():a.controls.textSpan.hide();a.hideUndo()};a.updateMessageContainer=function(b){b?a.controls.messageContainer.html(b).show():a.controls.messageContainer.hide()};
a.hide=function(b){a.controls.container.hide();if((void 0==b||b)&&a.functions.onClose)a.functions.onClose()};a.hideUndo=function(){a.controls.undoLink.hide()};a.show=function(){a.controls.container.show()};a.toggleCloseLink=function(b){a.controls.closeLink.toggle(b)};a.undo=function(){if(a.functions.onUndo)if(a.settings.undoConfirmationText){if(confirm(a.settings.undoConfirmationText))a.functions.onUndo()}else a.functions.onUndo()};e.initialize();return a}
function FileList(c){window[c]=this;var d={},f=this;d.getTitle=function(b){return f.settings.titleText+" "+b};d.setTitle=function(b){$(f.controls.title).html(b)};d.urlHasQueryParams=function(b){return-1===b.indexOf("?")?!1:!0};d.appendQueryParamsToUrl=function(b,a){return b=d.urlHasQueryParams(b)?b+("&"+$.param(a)):b+("?"+$.param(a))};d.getUrl=function(b,a,e,c){var g=f.settings.serviceMethodUrl;d.urlHasQueryParams(g)?(g=g.replace(f.settings.templateQueryParams.fileName,encodeURIComponent(b)),g=g.replace(f.settings.templateQueryParams.viewOnly,
c.toString()),g=g.replace(f.settings.templateQueryParams.fileRepoId,encodeURIComponent(a)),g=g.replace(f.settings.templateQueryParams.uniqueId,e)):g=d.appendQueryParamsToUrl(g,{fileName:b,fileId:a,uniqueFileId:e,viewOnly:c});return g};d.openInModalDialog=function(b,a,e,c){var g=f.controls.dialog.replace("#","");window[g].setAjaxUrl(e);window[g].setContentMinSize(b,a);window[g].openDialog(c)};d.checkIfBrowserIsOldIE=function(){var b=navigator.userAgent.toLowerCase();return-1!=b.indexOf("msie")?10>=
parseInt(b.split("msie")[1])?!0:!1:!1};d.attachEventForOldIE=function(b,a,e){b.addEventListener?b.addEventListener(a,e,!1):b.attachEvent?b.attachEvent(a,e):b[a]=e};d.openInWindow=function(b){var a=window.open(b,"","width="+.8*screen.width+", height="+.8*screen.height+",location = 0, directories = 0, toolbar = 0, scrollbars = 0, status = 0, menubars = 0, resizable = 1");d.checkIfBrowserIsOldIE()&&d.attachEventForOldIE(a,"onload",function(){$("head",a.document).append('<style type="text/css">html,body{height:100%}html{width:auto;margin-top:-8px;}</style>')})};
d.openInNewTab=function(b){window.open(b)};d.getFileExtension=function(b){return(/[.]/.exec(b)?/[^.]+$/.exec(b):void 0).pop()};d.shouldBeOpenedInPopup=function(b){if(!Array.isArray(f.settings.fileExtensionsPreviewedInPopup))return!1;b=d.getFileExtension(b);return 0<=f.settings.fileExtensionsPreviewedInPopup.indexOf(b)};f.showPreview=function(b,a,e,c,f,k,l){var g=d.getTitle(b);d.setTitle(g);a=d.getUrl(b,a,e,c);d.shouldBeOpenedInPopup(b)?d.openInWindow(a):d.openInModalDialog(f,k,a,l)};f.showCloudItemPreview=
function(b){var a=f.settings.cloudItemViewerUrl;a=d.appendQueryParamsToUrl(a,{id:b});d.openInNewTab(a)};f.getUrl=d.getUrl;return f}
(function(c){"function"===typeof define&&define.amd?define(["jquery","tmpl","load-image","./jquery.fileupload-fp"],c):c(window.jQuery,window.tmpl,window.loadImage)})(function(c,d,f){c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{autoUpload:!0,maxNumberOfFiles:void 0,maxFileSize:void 0,minFileSize:void 0,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5E6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,filesContainer:void 0,prependFiles:!1,
dataType:"json",kbText:"KB",mbText:"MB",confirmReplaceFile:function(){return!0},customErrors:void 0,drop:function(b,a){b=(c(this).data("blueimp-fileupload")||c(this).data("fileupload")).options;var e=[],g=!1;c.each(a.files,function(a,b){!b.type&&(void 0===b.size||1>b.size||0==b.size%4096&&2>b.name.split(".").length)?g=!0:e.push(b)});g&&(a.files=e);b.singleFileMode&&1<a.files.length&&(a.files=a.files.slice(0,1))},add:function(b,a){var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),
g=e.options,d=a.files;c(this).fileupload("process",a).done(function(){if(g.singleFileMode&&0==g.maxNumberOfFiles)if(g.confirmReplaceFile())e.emptyFileList();else return!1;e._adjustMaxNumberOfFiles(-d.length);a.maxNumberOfFilesAdjusted=!0;a.files.valid=a.isValidated=e._validate(d);0<a.files.length&&e.options.defaultThumbnailUrl&&(a.files[0].thumbnailUrl=e.options.defaultThumbnailUrl);a.context=e._renderUpload(d).data("data",a);g.filesContainer[g.prependFiles?"prepend":"append"](a.context);e._renderPreviews(a);
e._forceReflow(a.context);e._transition(a.context).done(function(){!1!==e._trigger("added",b,a)&&(g.autoUpload||a.autoUpload)&&!1!==a.autoUpload&&a.isValidated&&a.submit()})})},send:function(b,a){var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload");if(e._additionalClientValidationCallback&&!e._additionalClientValidationCallback(a)||!a.isValidated&&(a.maxNumberOfFilesAdjusted||(e._adjustMaxNumberOfFiles(-a.files.length),a.maxNumberOfFilesAdjusted=!0),!e._validate(a.files)))return!1;
a.context&&a.dataType&&"iframe"===a.dataType.substr(0,6)&&(a.context.find(".ccl-progressbar").addClass(!c.support.transition&&"progress-animated").find(".ui-progressbar-value").css("width","100%"),a.context.find(".ccl-progressbar-labelcontainer").html("100%"));e._addUploadToList(b,a);return e._trigger("sent",b,a)},done:function(b,a){var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),g=e._getFilesFromResponse(a);if(a.context)a.context.each(function(f){var h=g[f]||{error:"Empty file upload result"},
k=e._addFinishedDeferreds();h.error||e._addFilesToList(g);e._transition(c(this)).done(function(){var g=c(this);d=e._renderDownload([h]).replaceAll(g);e._forceReflow(d);e._transition(d).done(function(){a.context=c(this);e._renderPreviews(a);e._trigger("completed",b,a);e._trigger("finished",b,a);k.resolve()})})});else{g.length&&(c.each(g,function(b,c){a.maxNumberOfFilesAdjusted&&c.error?e._adjustMaxNumberOfFiles(1):a.maxNumberOfFilesAdjusted||c.error||e._adjustMaxNumberOfFiles(-1)}),a.maxNumberOfFilesAdjusted=
!0);var d=e._renderDownload(g).appendTo(e.options.filesContainer);e._renderPreviews(a);e._forceReflow(d);var f=e._addFinishedDeferreds();e._transition(d).done(function(){a.context=c(this);e._trigger("completed",b,a);e._trigger("finished",b,a);f.resolve()})}},fail:function(b,a){var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),g;a.maxNumberOfFilesAdjusted&&e._adjustMaxNumberOfFiles(a.files.length);if(a.context)a.context.each(function(f){if("abort"!==a.errorThrown){var h=a.files[f];
if(a.jqXHR&&a.jqXHR.responseText)try{var k=c.parseJSON(a.jqXHR.responseText).message}catch(n){k=void 0}else k=void 0;h.error=h.error||k||a.errorThrown||e.options.customErrors.unknownError;d=e._addFinishedDeferreds();e._transition(c(this)).done(function(){var f=c(this);g=e._renderDownload([h]).replaceAll(f);e._forceReflow(g);e._transition(g).done(function(){a.context=c(this);e._trigger("failed",b,a);e._trigger("finished",b,a);d.resolve()})})}else d=e._addFinishedDeferreds(),e._transition(c(this)).done(function(){c(this).remove();
e._trigger("failed",b,a);e._trigger("finished",b,a);d.resolve()})});else if("abort"!==a.errorThrown){a.context=e._renderUpload(a.files).appendTo(e.options.filesContainer).data("data",a);e._forceReflow(a.context);var d=e._addFinishedDeferreds();e._transition(a.context).done(function(){a.context=c(this);e._trigger("failed",b,a);e._trigger("finished",b,a);d.resolve()})}else e._trigger("failed",b,a),e._trigger("finished",b,a),e._addFinishedDeferreds().resolve()},progress:function(b,a){a.context&&(b=parseInt(a.loaded/
a.total*100,10),a.context.find(".ccl-progressbar .ui-progressbar-value").css("width",b+"%"),a.context.find(".ccl-progressbar-labelcontainer").html(b+"%"))},progressall:function(b,a){b=c(this);var e=parseInt(a.loaded/a.total*100,10),d=b.find(".fileupload-progress"),f=d.find(".progress-extended");f.length&&f.html((b.data("blueimp-fileupload")||b.data("fileupload"))._renderExtendedProgress(a));d.find(".ccl-progressbar .ui-progressbar-value").css("width",e+"%");d.find(".ccl-progressbar-labelcontainer").html(e+
"%")},start:function(b){var a=c(this).data("blueimp-fileupload")||c(this).data("fileupload");a._resetFinishedDeferreds();a._transition(c(this).find(".fileupload-progress")).done(function(){a._trigger("started",b)});a._startUploadCallback&&a._startUploadCallback()},stop:function(b){var a=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e=a._addFinishedDeferreds();c.when.apply(c,a._getFinishedDeferreds()).done(function(){a._trigger("stopped",b)});a._transition(c(this).find(".fileupload-progress")).done(function(){var a=
c(this);a.find(".ccl-progressbar .ui-progressbar-value").css("width","0");a.find(".ccl-progressbar-labelcontainer").html("0%");a.find(".progress-extended").html("&nbsp;");e.resolve()});a._stopUploadCallback&&a._stopUploadCallback()},destroy:function(b,a){var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload");a.url&&c.ajax(a);a.filekey&&e._adjustMaxNumberOfFiles(1);e._removeFilesFromList(a.filekey);e._transition(a.context).done(function(){c(this).remove();e._trigger("destroyed",b,a)})}},
_addFilesToList:function(b){var a=this;a._fileList||(a._fileList=[],a._fileListKeys=[]);c.each(b,function(b,c){a._fileList.push(c);a._fileListKeys.push(c.id)});a.options.stateHiddenField.val(JSON.stringify(a._fileList));a._notifyAboutResultChanges();a._addFileCallback&&a._addFileCallback()},_addUploadToList:function(b,a){this._uploadsList||(this._uploadsList=[]);this._uploadsList.push({element:b,data:a})},_removeFilesFromList:function(b){this._fileList&&0<this._fileList.length&&(b=this._fileListKeys.indexOf(b),
-1<b&&(this._fileList.splice(b,1),this._fileListKeys.splice(b,1)));this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback()},_notifyAboutResultChanges:function(){this._trigger("resultschanged",null,{results:this._fileList})},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(b){b||(b=c.Deferred());this._finishedUploads.push(b);return b},_getFinishedDeferreds:function(){return this._finishedUploads},
_getFilesFromResponse:function(b){return b.result&&c.isArray(b.result.files)?b.result.files:[]},_enableDragToDesktop:function(){var b=c(this),a=b.prop("href"),e=b.prop("download");b.bind("dragstart",function(b){try{b.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",e,a].join(":"))}catch(h){}})},_adjustMaxNumberOfFiles:function(b){"number"===typeof this.options.maxNumberOfFiles&&(this.options.maxNumberOfFiles+=b,1>this.options.maxNumberOfFiles&&!this.options.singleFileMode?
this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(b){return"number"!==typeof b?"":1048576<=b?(b/1048576).toFixed(2)+" "+this.options.mbText:(b/1024).toFixed(2)+" "+this.options.kbText},_formatBitrate:function(b){return"number"!==typeof b?"":1E9<=b?(b/1E9).toFixed(2)+" Gbit/s":1E6<=b?(b/1E6).toFixed(2)+" Mbit/s":1E3<=b?(b/1E3).toFixed(2)+" kbit/s":b.toFixed(2)+" bit/s"},_formatTime:function(b){var a=new Date(1E3*b);b=parseInt(b/86400,10);return(b?b+"d ":"")+("0"+
a.getUTCHours()).slice(-2)+":"+("0"+a.getUTCMinutes()).slice(-2)+":"+("0"+a.getUTCSeconds()).slice(-2)},_formatPercentage:function(b){return(100*b).toFixed(2)+" %"},_renderExtendedProgress:function(b){return this._formatBitrate(b.bitrate)+" | "+this._formatTime(8*(b.total-b.loaded)/b.bitrate)+" | "+this._formatPercentage(b.loaded/b.total)+" | "+this._formatFileSize(b.loaded)+" / "+this._formatFileSize(b.total)},_hasError:function(b){return b.error?b.error:0>this.options.maxNumberOfFiles?this.options.customErrors&&
this.options.customErrors.maxNumberOfFilesExceeded?this.options.customErrors.maxNumberOfFilesExceeded:"Maximum number of files exceeded":this.options.acceptFileTypes.test(b.type)||this.options.acceptFileTypes.test(b.name)?this.options.maxFileSize&&b.size>this.options.maxFileSize?(this._errorCallback&&this._errorCallback(),this.options.customErrors&&this.options.customErrors.fileIsTooBig?this.options.customErrors.fileIsTooBig:"File is too big"):"number"===typeof b.size&&b.size<this.options.minFileSize?
this.options.customErrors&&this.options.customErrors.fileIsTooSmall?this.options.customErrors.fileIsTooSmall:"File is too small":null:this.options.customErrors&&this.options.customErrors.fileTypeNotAllowed?this.options.customErrors.fileTypeNotAllowed:"Filetype not allowed"},_validate:function(b){var a=this,e=!!b.length;c.each(b,function(b,c){c.error=a._hasError(c);c.error&&(e=!1)});return e},_renderTemplate:function(b,a){if(!b)return c();b=b({files:a,formatFileSize:this._formatFileSize,options:this.options});
return b instanceof c?b:c(this.options.templatesContainer).html(b).children()},_renderPreview:function(b,a){var e=this,d=this.options,h=c.Deferred();if(f){var k=0,l=function(){f(b,function(b){a.empty();a.append(b);e._forceReflow(a);e._transition(a).done(function(){h.resolveWith(a)});c.contains(e.document[0].body,a[0])||h.resolveWith(a)},{maxWidth:d.previewMaxWidth,maxHeight:d.previewMaxHeight,canvas:d.previewAsCanvas,orientation:k})};f.parseMetaData?f.parseMetaData(b,function(a){k=a.exif?a.exif.get("Orientation"):
0;l()}):l();return h}return h.resolveWith(a)&&h},_renderPreviews:function(b){var a=this,e=this.options;b.context.find(".preview span").each(function(d,f){var g=b.files[d];e.previewSourceFileTypes.test(g.type)&&("number"!==c.type(e.previewSourceMaxFileSize)||g.size<e.previewSourceMaxFileSize)&&(a._processingQueue=a._processingQueue.pipe(function(){var e=c.Deferred(),d=c.Event("previewdone",{target:f});a._renderPreview(g,c(f)).done(function(){a._trigger(d.type,d,b);e.resolveWith(a)});return e.promise()}))});
return this._processingQueue},_renderUpload:function(b){return this._renderTemplate(this.options.uploadTemplate,b)},_renderDownload:function(b){return this._renderTemplate(this.options.downloadTemplate,b).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(b){b.preventDefault();b=c(b.currentTarget);var a=b.closest(".template-upload").data("data");a&&a.submit&&!a.jqXHR&&a.submit()&&b.prop("disabled",!0)},_cancelHandler:function(b){b.preventDefault();var a=c(b.currentTarget).closest(".template-upload").data("data")||
{};this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback();a.jqXHR?a.jqXHR.abort():(a.errorThrown="abort",this._trigger("fail",b,a))},_deleteHandler:function(b){b.preventDefault();var a=c(b.currentTarget);this._trigger("destroy",b,c.extend({context:a.closest(".template-download"),type:"POST",dataType:this.options.dataType},a.data()))},_forceReflow:function(b){return c.support.transition&&b.length&&b[0].offsetWidth},_transition:function(b){var a=c.Deferred();c.support.transition&&
b.hasClass("fade")?b.bind(c.support.transition.end,function(e){e.target===b[0]&&(b.unbind(c.support.transition.end),a.resolveWith(b))}).toggleClass("in"):(b.toggleClass("in"),a.resolveWith(b));return a},_initButtonBarEventHandlers:function(){var b=this.element.find(".fileupload-buttonbar"),a=this.options.filesContainer;this._on(b.find(".start"),{click:function(b){b.preventDefault();a.find(".start button").click()}});this._on(b.find(".cancel"),{click:function(b){b.preventDefault();a.find(".cancel button").click()}});
this._on(b.find(".delete"),{click:function(e){e.preventDefault();a.find(".delete input:checked").siblings("button").click();b.find(".toggle").prop("checked",!1)}});this._on(b.find(".toggle"),{change:function(b){a.find(".delete input").prop("checked",c(b.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar button"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();
this._on(this.options.filesContainer,{"click .start button":this._startHandler,"click .cancel button":this._cancelHandler,"click .delete .button":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",
!0).parent().addClass("disabled")},_initTemplates:function(){var b=this.options;b.templatesContainer=this.document[0].createElement(b.filesContainer.prop("nodeName"));d&&(b.uploadTemplateId&&(b.uploadTemplate=d(b.uploadTemplateId)),b.downloadTemplateId&&(b.downloadTemplate=d(b.downloadTemplateId)))},_initFilesContainer:function(){var b=this.options;void 0===b.filesContainer?b.filesContainer=this.element.find(".files"):b.filesContainer instanceof c||(b.filesContainer=c(b.filesContainer))},_stringToRegExp:function(b){b=
b.split("/");var a=b.pop();b.shift();return new RegExp(b.join("/"),a)},_initRegExpOptions:function(){var b=this.options;"string"===c.type(b.acceptFileTypes)&&(b.acceptFileTypes=this._stringToRegExp(b.acceptFileTypes));"string"===c.type(b.previewSourceFileTypes)&&(b.previewSourceFileTypes=this._stringToRegExp(b.previewSourceFileTypes))},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates();this._initRegExpOptions()},_setOption:function(b,a){this._super(b,a);
"maxNumberOfFiles"===b&&this._adjustMaxNumberOfFiles(0)},_create:function(){this._super();this._refreshOptionsList.push("filesContainer","uploadTemplateId","downloadTemplateId");this._processingQueue||(this._processingQueue=c.Deferred().resolveWith(this).promise(),this.process=function(){return this._processingQueue});this._resetFinishedDeferreds()},enable:function(){var b=!1;this.options.disabled&&(b=!0);this._super();b&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},
disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());this._super()},emptyFileList:function(){this.options.filesContainer.find(".delete .button, .cancel button").click()},clearResults:function(){c(this.options.filesContainer[0]).find("tr").each(function(){var b=c(this);b.hasClass("clearme")||0===b.find(".error").length?b.remove():b.addClass("clearme")});this._fileList&&(this._adjustMaxNumberOfFiles(this._fileList.length),
this._fileList.length=0,this._fileListKeys.length=0);this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges()},allowHide:function(){return 0===c(this.options.filesContainer[0]).find("tr .error").length},abortAllUploads:function(){if(this._uploadsList){var b=this;c.each(this._uploadsList,function(a,e){e.data.jqXHR?e.data.jqXHR.abort():(e.data.errorThrown="abort",b._trigger("fail",e,e.data))})}},getUploadedFiles:function(){return this._fileList||[]},setStartUploadCallback:function(b){"function"==
typeof b&&(this._startUploadCallback=b)},setStopUploadCallback:function(b){"function"==typeof b&&(this._stopUploadCallback=b)},setAddFileCallback:function(b){"function"==typeof b&&(this._addFileCallback=b)},setRemoveFileCallback:function(b){"function"==typeof b&&(this._removeFileCallback=b)},setErrorCallback:function(b){"function"==typeof b&&(this._errorCallback=b)},setAdditionalClientValidationCallback:function(b){"function"==typeof b&&(this._additionalClientValidationCallback=b)},renderHiddenFieldContent:function(){var b=
this.options,a=this.options.stateHiddenField.val();if((a=a?JSON.parse(a):[])&&0<a.length){var e=this._renderDownload(a);e.appendTo(b.filesContainer);var d=[];c.each(a,function(a,b){b.error&&0!=b.error.length||d.push(b)});0<d.length&&this._addFilesToList(d);this._adjustMaxNumberOfFiles(b.singleFileMode?-a.length:-d.length);var f=[];c.each(a,function(a,e){e.type&&b.previewSourceFileTypes.test(e.type)&&e.fileUrl&&(f.push(e),f[f.length-1].toString=function(){return e.fileUrl})});0<f.length&&(a=e.data("data",
{files:a}),this._renderPreviews({context:a,files:f}))}}})});var FixedHeader;
(function(c,d,f){FixedHeader=function(b,a){if(b)if(!this instanceof FixedHeader)alert("FixedHeader warning: FixedHeader must be initialised with the 'new' keyword.");else{var e={aoCache:[],oSides:{top:!0,bottom:!1,left:0,right:0},oZIndexes:{top:104,bottom:103,left:102,right:101,topLeft:105},oCloneOnDraw:{top:!1,bottom:!1,left:!0,right:!0},oMes:{iTableWidth:0,iTableHeight:0,iTableLeft:0,iTableRight:0,iTableTop:0,iTableBottom:0},oOffset:{top:0},nTable:null,bFooter:!1,bInitComplete:!1};this.fnGetSettings=
function(){return e};this.fnUpdate=function(){this._fnUpdateClones();this._fnUpdatePositions()};this.fnPosition=function(){this._fnUpdatePositions()};this.fnInit(b,a);"function"==typeof b.fnSettings&&(b._oPluginFixedHeader=this)}};FixedHeader.prototype={fnInit:function(b,a){var e=this.fnGetSettings(),d=this;this.fnInitSettings(e,a);e.nTable=b;e.bFooter=0<f(">tfoot",e.nTable).length?!0:!1;e.oSides.left&&e.aoCache.push(d._fnCloneTable("fixedLeft","FixedHeader_Left",d._fnCloneTLeft,e.oSides.left));e.oSides.top&&
e.oSides.left&&e.aoCache.push(d._fnCloneTable("fixedTopLeft","FixedHeader_TopLeft",d._fnCloneTTopLeft,e.oSides.left));e.oSides.top&&e.aoCache.push(d._fnCloneTable("fixedHeader","FixedHeader_Header",d._fnCloneThead));FixedHeader.afnScroll.push(function(){d._fnUpdatePositions.call(d)});f(c).resize(function(){FixedHeader.fnCalculatePosition()});e.frameSizeChangedEvent&&f(c).bind(e.frameSizeChangedEvent,function(){FixedHeader.fnCalculatePosition()});f(e.nTable).on("column-reorder column-visibility",function(){FixedHeader.fnMeasure();
d._fnUpdateClones(!0);d._fnUpdatePositions()}).on("row-resize",function(){d._fnFindEqualiseTLeftRowsHeight()});FixedHeader.fnMeasure();d._fnUpdateClones();d._fnUpdatePositions();d._fnRemoveExcessIdentifiers();e.bInitComplete=!0},fnInitSettings:function(b,a){void 0!==a&&(void 0!==a.top&&(b.oSides.top=a.top),void 0!==a.bottom&&(b.oSides.bottom=a.bottom),"boolean"==typeof a.left?b.oSides.left=a.left?1:0:void 0!==a.left&&(b.oSides.left=a.left),"boolean"==typeof a.right?b.oSides.right=a.right?1:0:void 0!==
a.right&&(b.oSides.right=a.right),void 0!==a.zTop&&(b.oZIndexes.top=a.zTop),void 0!==a.zBottom&&(b.oZIndexes.bottom=a.zBottom),void 0!==a.zLeft&&(b.oZIndexes.left=a.zLeft),void 0!==a.zRight&&(b.oZIndexes.right=a.zRight),void 0!==a.offsetTop&&(b.oOffset.top=a.offsetTop),void 0!==a.alwaysCloneTop&&(b.oCloneOnDraw.top=a.alwaysCloneTop),void 0!==a.alwaysCloneBottom&&(b.oCloneOnDraw.bottom=a.alwaysCloneBottom),void 0!==a.alwaysCloneLeft&&(b.oCloneOnDraw.left=a.alwaysCloneLeft),void 0!==a.alwaysCloneRight&&
(b.oCloneOnDraw.right=a.alwaysCloneRight),void 0!=a.frameSizeChangedEvent&&(b.frameSizeChangedEvent=a.frameSizeChangedEvent))},_fnCloneTable:function(b,a,e,c){var g=this.fnGetSettings();var f=g.nTable.cloneNode(!1);f.removeAttribute("id");var l=d.createElement("div");l.style.position="absolute";l.style.top="0px";l.style.left="0px";l.className+=" FixedHeader_Cloned "+b+" "+a;"fixedHeader"==b&&(l.style.zIndex=g.oZIndexes.top);"fixedLeft"==b&&(l.style.zIndex=g.oZIndexes.left);"fixedTopLeft"==b&&(l.style.zIndex=
g.oZIndexes.topLeft);f.style.margin="0";l.appendChild(f);d.body.appendChild(l);return{nNode:f,nWrapper:l,sType:b,sPosition:"",sTop:"",sLeft:"",fnClone:e,iCells:c}},_fnMeasure:function(){var b=this.fnGetSettings(),a=b.oMes,e=f(b.nTable),c=e.offset(),d=this._fnSumScroll(b.nTable.parentNode,"scrollTop");this._fnSumScroll(b.nTable.parentNode,"scrollLeft");a.iTableWidth=e.outerWidth();a.iTableHeight=e.outerHeight();a.iTableLeft=c.left+b.nTable.parentNode.scrollLeft;a.iTableTop=c.top+d;a.iTableRight=FixedHeader.oDoc.iWidth-
a.iTableLeft-a.iTableWidth;a.iTableBottom=FixedHeader.oDoc.iHeight-a.iTableTop-a.iTableHeight},_fnSumScroll:function(b,a){for(var e=b[a];(b=b.parentNode)&&"HTML"!=b.nodeName&&"BODY"!=b.nodeName;)e=b[a];return e},_fnUpdatePositions:function(){var b=this.fnGetSettings();this._fnMeasure();for(var a=0,e=b.aoCache.length;a<e;a++)"fixedHeader"==b.aoCache[a].sType?this._fnScrollFixedHeader(b.aoCache[a]):"fixedLeft"==b.aoCache[a].sType?this._fnScrollHorizontalLeft(b.aoCache[a]):"fixedTopLeft"==b.aoCache[a].sType&&
this._fnScrollHorisontalOrVerticalTopLeft(b.aoCache[a])},_fnRemoveExcessIdentifiers:function(){var b=this.fnGetSettings();f("thead",b.nTable).find(":not(input[type=hidden])").removeAttr("id").removeAttr("name");f("td:nth-child(-n+"+b.oSides.left+")",b.nTable).find(":not(input[type=hidden])").andSelf().removeAttr("id").removeAttr("name");for(var a=0,e=b.aoCache.length;a<e;a++){var c=b.aoCache[a].nNode;f("input[type=hidden]",c).remove();switch(b.aoCache[a].sType){case "fixedHeader":f("th:nth-child(-n+"+
b.oSides.left+")",c).children().andSelf().removeAttr("id").removeAttr("name");break;case "fixedLeft":f("thead",c).find("*").removeAttr("id").removeAttr("name")}}},_fnUpdateClones:function(b){var a=this.fnGetSettings();b&&(a.bInitComplete=!1);for(var e=0,c=a.aoCache.length;e<c;e++)a.aoCache[e].fnClone.call(this,a.aoCache[e]);b&&(a.bInitComplete=!0)},_fnClearTableColumnWidths:function(){},_fnScrollHorizontalLeft:function(b){var a=this.fnGetSettings().oMes,e=FixedHeader.oWin,c=b.nWrapper,d=f(c).outerWidth();
e.iScrollLeft<a.iTableLeft?(this._fnUpdateCache(b,"sPosition","absolute","position",c.style),this._fnUpdateCache(b,"sTop",a.iTableTop+"px","top",c.style),this._fnUpdateCache(b,"sLeft",a.iTableLeft+"px","left",c.style)):e.iScrollLeft<a.iTableLeft+a.iTableWidth-d?(this._fnUpdateCache(b,"sPosition","fixed","position",c.style),this._fnUpdateCache(b,"sTop",a.iTableTop-e.iScrollTop+"px","top",c.style),this._fnUpdateCache(b,"sLeft","0px","left",c.style)):(this._fnUpdateCache(b,"sPosition","absolute","position",
c.style),this._fnUpdateCache(b,"sTop",a.iTableTop+"px","top",c.style),this._fnUpdateCache(b,"sLeft",a.iTableLeft+a.iTableWidth-d+"px","left",c.style))},_fnScrollHorisontalOrVerticalTopLeft:function(b){var a=this.fnGetSettings(),e=a.oMes,c=FixedHeader.oWin,d=b.nWrapper,k=f(d).outerWidth();a.nTable.getElementsByTagName("tbody");c.iScrollLeft<e.iTableLeft&&e.iTableTop>c.iScrollTop+a.oOffset.top?(this._fnUpdateCache(b,"sPosition","absolute","position",d.style),this._fnUpdateCache(b,"sTop",e.iTableTop+
"px","top",d.style),this._fnUpdateCache(b,"sLeft",e.iTableLeft+"px","left",d.style)):e.iTableTop>c.iScrollTop+a.oOffset.top?c.iScrollLeft<e.iTableLeft?(this._fnUpdateCache(b,"sPosition","absolute","position",d.style),this._fnUpdateCache(b,"sTop",e.iTableTop+"px","top",d.style),this._fnUpdateCache(b,"sLeft",e.iTableLeft+"px","left",d.style)):c.iScrollLeft<e.iTableLeft+e.iTableWidth-k?(this._fnUpdateCache(b,"sPosition","fixed","position",d.style),this._fnUpdateCache(b,"sTop",e.iTableTop-c.iScrollTop+
"px","top",d.style),this._fnUpdateCache(b,"sLeft","0px","left",d.style)):(this._fnUpdateCache(b,"sPosition","absolute","position",d.style),this._fnUpdateCache(b,"sTop",e.iTableTop+"px","top",d.style),this._fnUpdateCache(b,"sLeft",e.iTableLeft+e.iTableWidth-k+"px","left",d.style)):(this._fnUpdateCache(b,"sPosition","fixed","position",d.style),this._fnUpdateCache(b,"sTop",a.oOffset.top+"px","top",d.style),c.iScrollLeft<e.iTableLeft?this._fnUpdateCache(b,"sLeft",e.iTableLeft-c.iScrollLeft+"px","left",
d.style):this._fnUpdateCache(b,"sLeft","0px","left",d.style))},_fnScrollFixedHeader:function(b){for(var a=this.fnGetSettings(),e=a.oMes,c=FixedHeader.oWin,d=b.nWrapper,f=0,l=a.nTable.getElementsByTagName("tbody"),m=0;m<l.length;++m)f+=l[m].offsetHeight;e.iTableTop>c.iScrollTop+a.oOffset.top?(this._fnUpdateCache(b,"sPosition","absolute","position",d.style),this._fnUpdateCache(b,"sTop",e.iTableTop+"px","top",d.style),this._fnUpdateCache(b,"sLeft",e.iTableLeft+"px","left",d.style)):c.iScrollTop+a.oOffset.top>
e.iTableTop+f?(this._fnUpdateCache(b,"sPosition","absolute","position",d.style),this._fnUpdateCache(b,"sTop",e.iTableTop+f+"px","top",d.style),this._fnUpdateCache(b,"sLeft",e.iTableLeft+"px","left",d.style)):(this._fnUpdateCache(b,"sPosition","fixed","position",d.style),this._fnUpdateCache(b,"sTop",a.oOffset.top+"px","top",d.style),this._fnUpdateCache(b,"sLeft",e.iTableLeft-c.iScrollLeft+"px","left",d.style))},_fnUpdateCache:function(b,a,e,c,d){b[a]!=e&&(d[c]=e,b[a]=e)},_fnClassUpdate:function(b,
a){var e=this;if("TR"===b.nodeName.toUpperCase()||"TH"===b.nodeName.toUpperCase()||"TD"===b.nodeName.toUpperCase()||"SPAN"===b.nodeName.toUpperCase())a.className=b.className;f(b).children().each(function(c){e._fnClassUpdate(f(b).children()[c],f(a).children()[c])})},_fnCloneThead:function(b){var a=this.fnGetSettings(),e=b.nNode;if(a.bInitComplete&&!a.oCloneOnDraw.top)this._fnClassUpdate(f("thead",a.nTable)[0],f("thead",e)[0]);else{var c=f(a.nTable).outerWidth();b.nWrapper.style.width=c+"px";for(e.style.width=
c+"px";0<e.childNodes.length;)f("thead th",e).unbind("click"),e.removeChild(e.childNodes[0]);b=f("thead",a.nTable).clone(!0,!0)[0];e.appendChild(b);var d=[],k=[];f("thead>tr th",a.nTable).each(function(a){d.push(f(this).width())});f("thead>tr td",a.nTable).each(function(a){k.push(f(this).width())});f("thead>tr th",a.nTable).each(function(a){f("thead>tr th:eq("+a+")",e).width(d[a]);f(this).width(d[a])});f("thead>tr td",a.nTable).each(function(a){f("thead>tr td:eq("+a+")",e).width(k[a]);f(this).width(k[a])})}},
_fnCloneTLeft:function(b){for(var a=this.fnGetSettings(),e=b.nNode,c=f("tbody",a.nTable)[0];0<e.childNodes.length;)e.removeChild(e.childNodes[0]);e.appendChild(f("thead",a.nTable).clone(!0)[0]);e.appendChild(f("tbody",a.nTable).clone(!0)[0]);var d="gt("+(b.iCells-1)+")";f("thead tr",e).each(function(a){f("th:"+d,this).remove()});f("tbody tr",e).each(function(a){f("td:"+d,this).remove()});this._fnEqualiseRowsHeight(a,b,c,e);for(var k=c=0;k<b.iCells;k++)c+=f("thead tr th:eq("+k+")",a.nTable).outerWidth();
e.style.width=c+"px";b.nWrapper.style.width=c+"px"},_fnEqualiseRowsHeight:function(b,a,e,c){f("tr",c).removeClass("ccl-table-highlight");f("tr",b.nTable).height("auto");this._fnEqualiseHeights("thead",e.parentNode,c);this._fnEqualiseHeights("tbody",e.parentNode,c)},_fnFindEqualiseTLeftRowsHeight:function(){var b=this.fnGetSettings();this._fnMeasure();for(var a=0,e=b.aoCache.length;a<e;a++)if("fixedLeft"==b.aoCache[a].sType){var c=b.aoCache[a],d=f("tbody",b.nTable)[0];this._fnEqualiseRowsHeight(b,
c,d,c.nNode)}},_fnCloneTTopLeft:function(b){var a=this.fnGetSettings(),e=b.nNode;for(f("tbody",a.nTable);0<e.childNodes.length;)e.removeChild(e.childNodes[0]);e.appendChild(f("thead",a.nTable).clone(!0)[0]);var c="gt("+(b.iCells-1)+")";f("thead tr",e).each(function(a){f("th:"+c,this).remove()});for(var d=0,k=0;k<b.iCells;k++)d+=f("thead tr th:eq("+k+")",a.nTable).outerWidth();e.style.width=d+"px";b.nWrapper.style.width=d+"px"},_fnEqualiseHeights:function(b,a,e){var c=f(b+" tr",a),d;f(b+" tr",e).each(function(a){d=
c.eq(a).css("height");"Microsoft Internet Explorer"==navigator.appName&&(d=parseInt(d,10)+1);f(this).css("height",d);c.eq(a).css("height",d)})}};FixedHeader.oWin={iScrollTop:0,iScrollRight:0,iScrollBottom:0,iScrollLeft:0,iHeight:0,iWidth:0};FixedHeader.oDoc={iHeight:0,iWidth:0};FixedHeader.afnScroll=[];FixedHeader.fnMeasure=function(){var b=f(c),a=f(d),e=FixedHeader.oWin,g=FixedHeader.oDoc;g.iHeight=a.height();g.iWidth=a.width();e.iHeight=b.height();e.iWidth=b.width();e.iScrollTop=b.scrollTop();e.iScrollLeft=
b.scrollLeft();e.iScrollRight=g.iWidth-e.iScrollLeft-e.iWidth;e.iScrollBottom=g.iHeight-e.iScrollTop-e.iHeight};FixedHeader.VERSION="2.1.0-dev";FixedHeader.prototype.VERSION=FixedHeader.VERSION;FixedHeader.fnCalculatePosition=function(){FixedHeader.fnMeasure();for(var b=0,a=FixedHeader.afnScroll.length;b<a;b++)FixedHeader.afnScroll[b]()};f(c).scroll(function(){FixedHeader.fnCalculatePosition()})})(window,document,jQuery);
function FolderSelector(c){window[c.clientId]=this;var d=this;d.settings=c;d.id=c.clientId;d.rootId="0";d.rootTitle="";d.hideRootCrumb=!1;d.selectedId="";d.parentId="";d.cache={};d.hiddenItems=c.hiddenItems;d.loadingTreshold=c.loadingTreshold;d.insertFeedbackClientId=c.insertFeedbackClientId;d.showBreadCrumbs="true"===c.showBreadCrumbs;d.closeOnlyAfterSelectionSaved="true"===c.closeOnlyAfterSelectionSaved;d.needToClose=!1;d.showUnpublishedFolders=c.showUnpublishedFolders||!1;d.controls={dialog:window[c.dialogClientId],
grid:window[c.gridClientId]};d.dialogContainer=$("#"+c.dialogClientId);d.gridContainer=d.dialogContainer.find("."+c.cssClasses.gridContainer);d.treeContainer=d.dialogContainer.find("."+c.cssClasses.treeContainer);d.navigation=d.dialogContainer.find("."+c.cssClasses.navigation);d.loadingIndicator=d.dialogContainer.find("."+c.cssClasses.loadingIndicator);d.dialogContainer.addClass(c.cssClasses.folderSelector);d.gridContainer.addClass(c.cssClasses.hidecontents);d.treeContainer.addClass(c.cssClasses.hidecontents);
d.selectButton=$("."+c.cssClasses.selectButton);d.selectAndCloseButton=$("."+c.cssClasses.selectAndCloseButton);d.navigateUpLink=$("a."+c.cssClasses.navigateUpLink);d.openDialog=function(a){d.toggleSelectButtons(!1);d.needToClose=!1;d.hideSelectFeedback();d.initializeCurrentView(a);window[c.dialogClientId].openDialog()};d.buildStructure=function(){d.reinitialize();$(d).trigger(c.eventNames.open);return!1};d.disposeStructure=function(){$(d).trigger(c.eventNames.close);d.treeContainer.empty();delete d.controls.tree};
d.reinitialize=function(a,e){a&&(d.cache={});d.treeContainer.empty();delete d.controls.tree;d.selectedId="";d.parentId="";d.toggleNavigateUpLink(!(d.selectedId===d.rootId||!d.parentId&&!d.selectedId));d.showBreadCrumbs&&b(0);d.hideSelectFeedback();d.initializeCurrentView(e);d.createTreeMenu()};d.initializeCurrentView=function(a){a&&(d.rootId="0",""!=a.ReadDataServiceUrl&&(d.controls.grid.dataSourceWebMethodUrl=a.ReadDataServiceUrl))};d.createTreeMenu=function(){d.treeContainer.empty();d.treeContainer.jstree({json_data:{data:d._loadTreeData},
plugins:["ui","json_data"],core:{animation:0,strings:{loading:" "}}}).bind("select_node.jstree",function(a,b){d.navigateToNode(b.rslt.obj.attr("nodeId"))});d.controls.tree=$.jstree._reference(d.treeContainer)};d.showEmptyContentFeedback=function(){d.dialogContainer.find("."+c.cssClasses.content).hide();d.navigation.hide();d.selectButton.hide();d.selectAndCloseButton.hide();d.dialogContainer.find("."+c.cssClasses.emptyContent).show()};d.controls.grid.refresh=function(){d.navigateToPage(d.controls.grid.pageNumber,
d.controls.grid.pageSize)};$(d.controls.grid).on(CclAjaxGrid.selectionChangeEvent,function(a,b){d.toggleSelectButtons(0<b.nodeIds.length)});d.toggleSelectButtons=function(a){d.selectButton.toggleHyperlink(a);d.selectAndCloseButton.toggleHyperlink(a)};var f=function(){var a=d.controls.grid.getSelectedValues();$(d).trigger(c.eventNames.select,[{selectedId:d.selectedId,nodeIds:a}])};d.saveSelection=function(){if(!d.selectButton.getIfHyperLinkEnabled())return!1;d.needToClose=!1;f();return!1};d.saveSelectionAndClose=
function(){if(!d.selectAndCloseButton.getIfHyperLinkEnabled())return!1;d.needToClose=!0;f();d.closeOnlyAfterSelectionSaved?d.toggleSelectButtons(!1):CssModal.closeDialog();return!1};$(document).on(c.eventNames.selectionSaved,function(){d.needToClose&&(CssModal.closeDialog(),d.toggleSelectButtons(!0))});d.gridContainer.on("click","a."+c.cssClasses.folderLink,function(){d.navigateToNode($(this).attr("folderId"));return!1});d.navigateUp=function(){if(!d.navigateUpLink.getIfHyperLinkEnabled())return!1;
if(d.parentId&&"0"!=d.parentId||"0"==d.parentId&&"0"==d.rootId)d.selectedId==d.rootId?(d.rootId=d.parentId,d.reinitialize(),d.showBreadCrumbs&&b()):d.navigateToNode(d.parentId);return!1};d.toggleNavigateUpLink=function(a){d.navigateUpLink.toggleHyperlink(a)};d._loadTreeData=function(a,b){var e=(a.data?a.attr("nodeId"):void 0)||d.rootId;a=(a.data?a.attr("setRootAsParent"):void 0)||!1;d.getData(e,1,d.controls.grid.pageSize,function(a){a=d.getCachedFolderData(a);if(!c.hideEmptyStateFeedback&&d.showFeedbackOnEmpty&&
d.isContentEmpty(e,a))d.showEmptyContentFeedback();else{for(var g=-1,f=[],h=a.folders.length,n=0;n<h;n++){var p=a.folders[n];f.push({data:{title:p.title,icon:p.cssClass},attr:{nodeId:p.id,setRootAsParent:p.setRootAsParent},state:"closed"});p.selectedByDefault&&0>g&&(g=n)}b(f);""===d.selectedId&&(d.selectedId=d.rootId,d.renderGrid(d.selectedId,1,d.controls.grid.pageSize),0<=g&&g<h&&(d.hideRootCrumb=!0,d.navigateToNode(a.folders[g].id,!0)))}},a)};d.isContentEmpty=function(a,b){return"0"==a?0==b.folders.length&&
0==b.items.pages[1].length:!1};d.navigateToNode=function(a,e,g,f){var h="undefined"==typeof g||!0===g;if(a!=d.selectedId){d.hideSelectFeedback();d.treeContainer.find("li").removeClass(c.cssClasses.selected);var l=d.treeContainer.find("li[nodeId="+a+"]");l.addClass(c.cssClasses.selected);d.showBreadCrumbs&&b(l);g=(l.data?l.attr("setRootAsParent"):void 0)||!1;d.getData(a,1,d.controls.grid.pageSize,function(a){d.selectedId=a;e&&(d.rootId=a);d.toggleNavigateUpLink(!(d.selectedId===d.rootId||!d.parentId&&
!d.selectedId));h&&d.renderGrid(a,1,d.controls.grid.pageSize);l[0]&&d.controls.tree.open_node(l);f&&f()},g)}};d.navigateToPage=function(a,b){d.hideSelectFeedback();d.getData(d.selectedId,a,b,function(){d.renderGrid(d.selectedId,a,b);d.controls.dialog.adjustWindowSize()})};d.getData=function(a,e,g,f,k){e=e||d.controls.grid.page;g=g||d.controls.grid.pageSize;d.hasCachedFolderData(a)&&d.hasCachedItemData(a,e,g)?f(a):(d.showLoadingIndicator(),$(d).trigger(c.eventNames.loadStart,[{nodeId:a,page:e,pageSize:g}]),
$.ajax({type:"GET",url:d.controls.grid.dataSourceWebMethodUrl,data:d.getRequestData(a,e,g,k),dataType:"jsonp",success:function(h){var k=$.Event(c.eventNames.loadComplete);$(d).trigger(k,[{success:!0,data:h}]);k.isPropagationStopped()||(a==d.rootId&&(d.rootId=h.Id,d.rootTitle=h.Title,d.showBreadCrumbs&&b()),d.cacheData(h,h.Id,e,g),f(h.Id),d.hideLoadingIndicator())},error:function(){$(d).trigger(c.eventNames.loadComplete,[{success:!1}]);d.hideLoadingIndicator()}}))};d.showLoadingIndicator=function(){clearTimeout(d.loadingTimeout);
d.loadingTimeout=setTimeout(function(){d.loadingIndicator.show()},d.loadingTreshold)};d.hideLoadingIndicator=function(){clearTimeout(d.loadingTimeout);d.loadingIndicator.hide();d.gridContainer.removeClass(c.cssClasses.hidecontents);d.treeContainer.removeClass(c.cssClasses.hidecontents)};d.getCachedFolderData=function(a){return d.cache[a]};d.getCachedItemData=function(a,b,c){a=d.cache[a];if(void 0!==a&&null!==a&&(a=a.items||{},a.pageSize===c&&a.pages))return a.pages[b.toString()]};d.hasCachedFolderData=
function(a){a=d.getCachedFolderData(a);return void 0!==a&&null!==a};d.hasCachedItemData=function(a,b,c){a=d.getCachedItemData(a,b,c);return void 0!==a&&null!==a};d.getRequestData=function(a,b,c,f){return{nodeId:a,page:b,pageSize:c,omitItems:d.hasCachedItemData(a,b,c),omitFolders:d.hasCachedFolderData(a),includeUnpublished:d.showUnpublishedFolders,setRootAsParent:void 0!==f?f||!1:!1}};d.cacheData=function(a,b,c,f){var e=d.cache[b]||{};e.description=a.Description;e.parentId=a.SetRootAsParent?d.rootId:
a.ParentId;e.title=a.Title;if(null!=a.Folders){e.folders=[];for(var g=a.Folders.length,h=0;h<g;h++){var n=a.Folders[h];e.folders.push({id:n.Id,title:n.Title,description:n.Description,cssClass:n.CssClass,isFolder:n.IsFolder,selectedByDefault:n.SelectedByDefault,setRootAsParent:n.SetRootAsParent})}}if(null!=a.Items){g=[];var p=a.Items.length;for(h=0;h<p;h++)n=a.Items[h],g.push({id:n.Id,title:n.Title,description:n.Description,cssClass:n.CssClass,isFolder:n.IsFolder,selectable:n.Selectable&&(!d.hiddenItems||
-1===d.hiddenItems.indexOf(parseInt(n.Id))),selectedByDefault:n.SelectedByDefault});e.items=e.items||{};f!==e.items.pageSize&&(e.items={});e.items.pageSize=f;e.items.pages=e.items.pages||{};e.items.pages[c.toString()]=g;e.virtualItemCount=a.VirtualItemCount}d.cache[b]=e};d.renderTypeCell=function(a){return"<div class='"+a.cssClass+"'></div>"};d.renderItemCell=function(a){var b="<span class='"+a.cssClass+"'>"+CommonFunctions.htmlEncode(a.title)+"</span>",d="";a.description&&void 0!==a.description&&
(d="<div class='"+c.cssClasses.itemDescription+"'>"+CommonFunctions.htmlEncode(a.description)+"</div>");return a.isFolder?"<a href='#' class='"+c.cssClasses.folderLink+"' folderId='"+a.id+"'>"+b+"</a>"+d:b+d};d.getItemXML=function(a){var b=[];b.push("<Item>");b.push("<Id>"+a.id+"</Id>");b.push("<Item>"+CommonFunctions.htmlEncode(d.renderItemCell(a))+"</Item>");b.push("<Selectable>"+(!0===a.selectable?"true":"false")+"</Selectable>");b.push("</Item>");return b.join("")};d.renderGrid=function(a,b,f){a=
d.cache[a];d.controls.grid.pageNumber=b;d.controls.grid.pageSize=f;f=d.gridContainer.find("."+c.cssClasses.gridHeader+" > h2");var e=d.gridContainer.find("."+c.cssClasses.gridHeader+" > span");f.show();f.text(a.title);e.text(a.description);d.parentId=a.parentId;f=d.gridContainer.find("."+c.cssClasses.navigateUpLink);""===d.parentId?f.addClass(c.cssClasses.disabled):f.removeClass(c.cssClasses.disabled);d.controls.grid.clearSelection();d.toggleSelectButtons(!1);f=a.items.pages[b].length;e=[];e.push("<Data>");
e.push("<Items>");for(var g=0;g<f;g++)e.push(d.getItemXML(a.items.pages[b][g]));e.push("</Items>");e.push("<VirtualCount>"+a.virtualItemCount+"</VirtualCount>");e.push("</Data>");d.controls.grid.render(e.join(""),!1);$(d).trigger(c.eventNames.gridRender,[d.controls.grid,a])};d.showSuccessFeedback=function(){"undefined"!=d.insertFeedbackClientId&&window[d.insertFeedbackClientId].showMessage(c.feedbackTypes.info,c.terms.insertSuccessFeedbackText)};d.showErrorFeedback=function(){"undefined"!=d.insertFeedbackClientId&&
window[d.insertFeedbackClientId].showMessage(c.feedbackTypes.error,c.terms.insertErrorFeedbackText)};d.showProgressFeedback=function(){if("undefined"!=d.insertFeedbackClientId){var a=$("<span></span>").addClass(c.cssClasses.progressMessage).html(c.terms.insertProgressFeedbackText);window[d.insertFeedbackClientId].showMessage(c.feedbackTypes.info,a)}};d.hideSelectFeedback=function(){"undefined"!=d.insertFeedbackClientId&&window[d.insertFeedbackClientId].hide()};var b=function(a){var b=[];a&&(null!=
a.attr("nodeid")&&b.push([a.attr("nodeid"),a.children("a:first").contents().last().text()]),a.parentsUntil("."+c.cssClasses.treeContainer,"li").each(function(){var a=$(this);b.push([a.attr("nodeid"),a.children("a:first").contents().last().text()])}));d.hideRootCrumb||b.push([d.rootId,d.rootTitle]);var f=$("<ul />").addClass(c.cssClasses.crumbs);a=$("<nav />").addClass(c.cssClasses.crumbsWrapper).append(f);$.each(b,function(a,b){var e=$("<li />").append($("<span />").addClass(c.cssClasses.crumbsSeparator).text(c.breadCrumbsSeparator));
0<a?e.append($("<span />").append($("<a />").addClass(c.cssClasses.crumb).attr("href","#").data("node-id",b[0]).text(b[1]))):e.append($("<span />").text(b[1]));e.prependTo(f)});d.navigation.children("."+c.cssClasses.crumbsWrapper).remove().end().append(a)};d.navigation.on("click","a."+c.cssClasses.leftMenuToggler,function(){768<$(window).width()?d.dialogContainer.toggleClass(c.cssClasses.desktopTreeContainerVisible).toggleClass(c.cssClasses.desktopTreeContainerHidden):d.dialogContainer.toggleClass(c.cssClasses.mobileTreeContainerVisible).toggleClass(c.cssClasses.mobileTreeContainerHidden);
return!1});d.navigation.on("click","."+c.cssClasses.crumb,function(){d.navigateToNode($(this).data("node-id"));return!1});return d}function FunctionFinder(){return{getFunctionByName:function(c,d){if(void 0!==c&&null!==c){if(void 0===d||null===d)d=window;c=c.split(".");for(var f=c.pop(),b=0;b<c.length;b++)d=d[c[b]];return d[f]}}}}
function CclGridColumn(c,d,f,b,a,e,g,h){this.dataField=c;this.sortField=d;this.sortDescendingByDefault=a;this.headerHtml=f;this.width=b;this.title=e;this.className=g;this.renderTableDataCellValueInsideDiv=h}CclAjaxGrid.selectionChangeEvent="grid:selectionChange";
function CclAjaxGrid(c){function d(){$(f).trigger(CclAjaxGrid.selectionChangeEvent,[{nodeIds:f.getSelectedValues()}])}window[c]=this;var f=this;f.name=c;f.pageSize=null;f.pageNumber=null;f.mainColumn=null;f.sortingProperty=null;f.filteringPreference=null;f.sortingDirection=null;f.dataSourceWebMethodUrl=null;f.dataSourceWebMethodParams={};f.gridClientID=null;f.columnChooserDialogName=null;f.columnChooserClientID=null;f.pagerInstanceName=null;f.allowSelecting=!1;f.allowColumnChoosing=!0;f.dataKeyName=
null;f.selectingHiddenClientID=null;f.pageNumberHiddenClientID=null;f.pageSizeHiddenClientID=null;f.sortingHiddenClientID=null;f.filteringHiddenClientID=null;f.columnOrderHiddenClientID=null;f.gridContentHiddenClientID=null;f.preferenceCategoryName=null;f.visibleColumns=[];f.columns=[];f.totalCount=0;f.keepSelection=!0;f.allowRowExpanding=!0;f.expandedRowButtonTitle=null;f.emptyTableText=null;f.accordionDataSourceUrl=null;f.saveToPreferencesWebMethodUrl=null;f.gridEmbeddedInAccordionGridControlClientId=
null;f.cclGridConstants=null;f.virtualCount=null;f.rowClickable=!1;f.selectAllCheckBoxClientID=null;f.$selectAllCheckBox=null;f.getSelectedIds=function(){return CCL.CommonFunctions.getIdsFromHidden($("#"+f.selectingHiddenClientID))};f.getSelectCheckBox=function(b){return $("#"+f.gridClientID+" tr[data-id='"+b+"'] td ."+f.cclGridConstants.cssClasses.checkboxCssClass)};f._getColumnsCount=function(){return f.visibleColumns.length+(f.allowColumnChoosing?1:0)+(f.allowSelecting?1:0)};f._saveToPreferences=
function(b,a,e,c){f.saveToPreferencesWebMethodUrl&&CCL.CommonFunctions.safeAjaxPost({url:f.saveToPreferencesWebMethodUrl,data:{category:b,name:a,value:e}}).done(c)};f._getInvisibleColumns=function(){for(var b=[],a=0;a<f.columns.length;a++)f.visibleColumns.contains(f.columns[a].dataField)||b.push(f.columns[a].dataField);return b};f._applySelectedRowClass=function(b,a){b.toggleClass(f.cclGridConstants.cssClasses.selectedRow,a)};f._addRemoveSelectedValue=function(b,a){a?CCL.CommonFunctions.addIdToHidden($("#"+
f.selectingHiddenClientID),b.toString()):CCL.CommonFunctions.removeIdFromHidden($("#"+f.selectingHiddenClientID),b.toString())};f.createCheckbox=function(b){return $("<input />",{type:"checkbox",id:b,name:b})};f.toggleSelectById=function(b,a){b=$("#"+f.gridClientID+" tr[data-id='"+b+"'] ."+f.cclGridConstants.cssClasses.checkboxCssClass);b.length&&(b.prop("checked",!0).change(),a&&b.prop("disabled",!0),f._applySelectedRowClass(b.closest("tr"),!0),d())};f.toggleSelectAll=function(b){$.each(f._getCheckBoxesIds(),
function(a,e){a=$("#"+e);a.prop("disabled")||(a.prop("checked",b),a=a.closest("tr"),f._applySelectedRowClass(a,b),f._addRemoveSelectedValue(a.data("id"),b))});f.$selectAllCheckBox.length&&f.$selectAllCheckBox.prop("checked",b);d()};f.toggleEnableAll=function(b){f.$selectAllCheckBox.prop("disabled",!b);$.each(f._getCheckBoxesIds(),function(a,e){$("#"+e).prop("disabled",!b)})};f.init=function(){f.restoreState();f.hidePagerDependingOnElementsNumberAndGridSettings();f.rowClickable&&$("#"+f.gridClientID+
" tr."+f.cclGridConstants.cssClasses.rowClickable+" td").not("."+f.cclGridConstants.cssClasses.selectColumn).mousedown(f._mousedown.bind(this)).mouseup(f._mouseup.bind(this));$(function(){setTimeout(function(){f.selectAllCheckBoxClientID&&(f.$selectAllCheckBox=$("#"+f.selectAllCheckBoxClientID),f.$selectAllCheckBox.length&&f.$selectAllCheckBox.change(function(b){f.toggleSelectAll(b.target.checked)}));$.each(f._getCheckBoxesIds(),function(b,a){f.addCheckBoxHandler(a)})},1)})};f.addCheckBoxHandler=
function(b){$("#"+b).change(function(a){var b=a.target;f._applySelectedRowClass($(a.currentTarget).closest("tr"),b.checked);var c=!0;$.each(f._getCheckBoxesIds(),function(a,b){a=$("#"+b);a.prop("checked")||(c=!1);f._addRemoveSelectedValue(a.closest("tr").data("id"),a.prop("checked"));f.selectAllCheckBoxClientID&&f.$selectAllCheckBox.length&&f.$selectAllCheckBox.prop("checked",c)});d()})};f._getCheckBoxesIds=function(){return $("#"+f.gridClientID+" td ."+f.cclGridConstants.cssClasses.checkboxCssClass).map(function(){return this.id})};
f._mousedown=function(b){f._skipRowClickAction(b)||f._isRightButton(b)||(window.getSelection?window.getSelection().removeAllRanges():document.selection.empty())};f._mouseup=function(b){f._skipRowClickAction(b)||f._isRightButton(b)||0<(window.getSelection?window.getSelection().toString():document.selection.createRange().text).length||$(b.target).trigger("clickableRowClicked")};f._isRightButton=function(b){if("which"in b)return 3===b.which;if("button"in b)return 2===b.button};f._skipRowClickAction=
function(b){return b.target instanceof HTMLInputElement||b.target instanceof HTMLAnchorElement||$(b.target).hasClass(f.cclGridConstants.cssClasses.emptyTableCell)?!0:!1};f.restoreState=function(){var b=document.getElementById(f.sortingHiddenClientID).value.split(":");f.pageSize=parseInt(document.getElementById(f.pageSizeHiddenClientID).value,10);f.pageNumber=parseInt(document.getElementById(f.pageNumberHiddenClientID).value,10);f.sortingProperty=b[0];f.sortingDirection=b[1];f.filteringPreference=
document.getElementById(f.filteringHiddenClientID).value;f.visibleColumns=document.getElementById(f.columnOrderHiddenClientID).value.split(",")};f.hidePagerDependingOnElementsNumberAndGridSettings=function(){var b=$("#"+f.pagerContainerClientId);b&&f.hidePagerWhenTotalCountLessMinPageSize&&f.virtualCount<=f.cclGridConstants.minRowCount&&b.hide()};f.saveState=function(){document.getElementById(f.sortingHiddenClientID).value=f.sortingProperty+":"+f.sortingDirection;document.getElementById(f.pageSizeHiddenClientID).value=
f.pageSize;document.getElementById(f.pageNumberHiddenClientID).value=f.pageNumber;document.getElementById(f.columnOrderHiddenClientID).value=f.visibleColumns.toString();document.getElementById(f.filteringHiddenClientID).value=f.filteringPreference};f._getParams=function(){var b={},a;for(a in f.dataSourceWebMethodParams)b[a]=f.dataSourceWebMethodParams[a];return b};f.refresh=function(){f.saveState();if(f.dataSourceWebMethodUrl){var b="",a="";f.sortingProperty&&(b=f.sortingProperty+":"+f.sortingDirection,
f.columns.findBySortField(f.sortingProperty).dataField!=f.mainColumn&&(b+=","+f.columns.findByDataField(f.mainColumn).sortField+":asc"));f.filteringPreference&&(a=f.filteringPreference);if(0<f.gridEmbeddedInAccordionGridControlClientId.length&&0<f.getSelectedValues().length&&0<document.getElementById(f.gridContentHiddenClientID).value.length)f.render(document.getElementById(f.gridContentHiddenClientID).value,!1);else{if(0==f.totalCount&&f.gridEmbeddedInAccordionGridControlClientId.length){var e=$("#"+
f.gridClientID+" ."+f.cclGridConstants.cssClasses.emptyTableCell);1>$(e).length&&(e=$("#"+f.gridClientID+" > tbody"),$(e).empty(),$("#"+f.gridClientID+" > tfoot").empty(),f._addRowWithText(e,"<img class='"+f.cclGridConstants.cssClasses.gridEmbededInAccordionGridControlLoadingCssClass+"'src='"+f.cclGridConstants.onePixelTransparentImageUrl+"' />",f._getColumnsCount(),f.cclGridConstants.cssClasses.emptyTableCell))}b=$.extend({pageNumber:f.pageNumber,pageSize:f.pageSize,sort:b,filter:a},f._getParams());
CCL.CommonFunctions.safeAjaxPost({url:f.dataSourceWebMethodUrl,data:b,dataType:"xml"}).done(function(a){0<f.gridEmbeddedInAccordionGridControlClientId.length&&(document.getElementById(f.gridContentHiddenClientID).value=a.xml?a.xml:f.XmlToString(a));f.render(a,!0)})}}else f.postbackFunction()};f.sort=function(b){f.sortingDirection=f.sortingProperty==b?"asc"==f.sortingDirection?"desc":"asc":f.columns.findBySortField(b).sortDescendingByDefault?"desc":"asc";f.sortingProperty=b;f.goToPage(1);b=f.sortingProperty+
":"+f.sortingDirection;f.columns.findByDataField(f.mainColumn).sortField==f.sortingProperty&&"asc"==f.sortingDirection&&(b=null);f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.sorting,b)};f.filter=function(b){f.filteringPreference!=b&&(f.filteringPreference=b,f.goToPage(1),f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.filtering,b))};f.goToPage=function(b){f.keepSelection||b==f.pageNumber||(document.getElementById(f.selectingHiddenClientID).value=
"");f.pageNumber=b;f.refresh()};f.changePageSize=function(b){f.pageSize=b;f.goToPage(1);f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.pagesize,b)};f._getPageHref=function(b){return"javascript:"+f.name+".goToPage("+b+");"};f._addPager=function(){var b=window[f.pagerInstanceName];b&&(b.totalCount=f.totalCount,b.pageSize=f.pageSize,b.pageNumber=f.pageNumber,f.hidePagerWhenTotalCountLessMinPageSize&&f.totalCount<=b.getMinAvailablePageSize()?$("#"+f.pagerContainerClientId).hide():
($("#"+f.pagerContainerClientId).show(),b.createIn($("#"+f.pagerContainerClientId).empty())))};f._addHeader=function(b){var a=$("<tr></tr>");if(f.allowSelecting){var e=$("<th></th>").attr("scope","col").attr("class",f.cclGridConstants.cssClasses.selectColumn);e.append(f.createCheckbox(f.selectAllCheckBoxClientID));a.append(e)}for(var c=0;c<f.visibleColumns.length;c++){var d=f.columns.findByDataField(f.visibleColumns[c]);e=$("<th></th>").attr("scope","col");if(d.sortField){var k=$("<a></a>").attr("href",
"#").attr("title",d.title).click({sortField:d.sortField},function(a){f.sort(a.data.sortField);return!1}),l=f.sortingProperty==d.sortField?"asc"==f.sortingDirection?f.cclGridConstants.cssClasses.sortingAsc:f.cclGridConstants.cssClasses.sortingDesc:"";l=$("<span></span>").attr("class",f.cclGridConstants.cssClasses.thText+" "+l).html(d.headerHtml);e.attr("class",f.sortingProperty==d.sortField?f.cclGridConstants.cssClasses.thSelected:f.cclGridConstants.cssClasses.thSortable);k.append(l);e.append(k)}else e.html(d.headerHtml);
d.className&&e.addClass(d.className);d.width&&e.css("width",d.width+"px");e.appendTo(a)}f.allowColumnChoosing&&(e=$("<a class='"+f.cclGridConstants.cssClasses.columnChooserLink+"'></a>").attr("href","javascript:"+f.name+".showColumnChooser();").attr("title",f.cclGridConstants.terms.columnChooserToolTip),e.append($("<img />").attr("src",f.cclGridConstants.onePixelTransparentImageUrl).attr("alt",f.cclGridConstants.terms.columnChooserToolTip)),$("<th></th>").attr("class",f.cclGridConstants.cssClasses.columnChooserColumn).append(e).appendTo(a));
b.append(a);f.allowSelecting&&(f.$selectAllCheckBox=$("#"+f.selectAllCheckBoxClientID),CCL.ModernCheckbox.BuildCheckbox(f.$selectAllCheckBox,f.cclGridConstants.terms.selectAllRows,!0,!0),f.$selectAllCheckBox.change(function(a){f.toggleSelectAll(a.target.checked)}))};f.getSelectedValues=function(){var b=$("#"+f.selectingHiddenClientID).val();return 0==b.length?[]:b.slice(0,b.length-1).split(",")};f.clearSelection=function(){$("#"+f.selectingHiddenClientID).val("")};f.clear=function(){f.totalCount=
0;f._addHeader($("#"+f.gridClientID+" > thead").empty());f._addPager();var b=$("#"+f.gridClientID+" > tbody");b.empty();var a=f._getColumnsCount();f._addRowWithText(b,f.emptyTableText,a,f.cclGridConstants.cssClasses.emptyTableCell);f._addEmptyRows(b,f.cclGridConstants.minRowCount-1,a);$("tr:nth-child(even)",b).addClass(f.cclGridConstants.cssClasses.alternateRow)};f.render=function(b,a){a||(b=f.StringToXml(b));f.totalCount=$("VirtualCount",b).last().text();var e=f.getSelectedValues();f._addHeader($("#"+
f.gridClientID+" > thead").empty());f._addPager();var c=$("#"+f.gridClientID+" > tbody");c.empty();a=$(":first-child > Items > *",b);var d=0<a.length;1>a.length&&""!=$(b).text()&&(a=$(b).children().children());1>f.totalCount&&(a.length=0,d=!1);a.each(function(a,b){var g=$(f.dataKeyName,b).text();a=$("<tr data-id='"+g+"'></tr>");var h=$(f.cclGridConstants.rowTooltipTextProperty,b);0<h.length&&a.attr("title",h.text());f.allowRowExpanding&&(a.css("cursor","pointer"),a.on("click",function(a){f.expandCollapseRow(b,
a,g);return!0}));h=f.allowSelecting?f.name+"_select_"+g:"";if(f.allowSelecting){var k=e.contains(g);d&=k;var l=$("<td></td>").attr("class",f.cclGridConstants.cssClasses.selectColumn);0!=f.dataKeySelectionVisible.length&&"true"!==$(f.dataKeySelectionVisible,b).text()||l.append(f.createCheckbox(h));a.append(l);k&&a.addClass(f.cclGridConstants.cssClasses.selectedRow)}for(k=0;k<f.visibleColumns.length;k++){l=f.columns.findByDataField(f.visibleColumns[k]);var w=$(f.visibleColumns[k],b),u=$("<td></td>");
u.html(l.renderTableDataCellValueInsideDiv?"<div title='"+w.text()+"'>"+w.text()+"</div>":w.text());l.className&&u.addClass(l.className);u.appendTo(a)}f.allowColumnChoosing&&a.append($("<td></td>"));c.append(a);f.allowSelecting&&(a=$("#"+h),CCL.ModernCheckbox.BuildCheckbox(a,f.cclGridConstants.terms.selectOneRow,!0,!0),f.addCheckBoxHandler(h))});f.allowSelecting&&$("#"+f.selectAllCheckBoxClientID).prop("checked",!!d);b=f._getColumnsCount();0==a.length&&f._addRowWithText(c,f.emptyTableText,b,f.cclGridConstants.cssClasses.emptyTableCell);
a.length<f.cclGridConstants.minRowCount&&f._addEmptyRows(c,f.cclGridConstants.minRowCount-Math.max(a.length,1),b);$("tr:nth-child(even)",c).addClass(f.cclGridConstants.cssClasses.alternateRow)};f._addRowWithText=function(b,a,e,c){b.append($("<tr></tr>").append($("<td></td>").attr("class",c).attr("colSpan",e).html(a)))};f._addEmptyRows=function(b,a,e){for(var c=0;c<a;c++)f._addRowWithText(b,"&nbsp;",e,"")};f.createColumnChooser=function(b){f.columnChooserClientID&&$("#"+f.columnChooserClientID).sortable({opacity:.8,
placeholder:b,tolerance:"pointer"})};f.showColumnChooser=function(){$("#"+f.columnChooserClientID).empty();for(var b=f.visibleColumns.concat(f._getInvisibleColumns()),a=0;a<b.length;a++){var e=f.columns.findByDataField(b[a]),c=f.visibleColumns.contains(e.dataField);e=$("<li />").attr("class",f.cclGridConstants.cssClasses.columnChooser).append($("<input type='checkbox'/>").val(e.dataField).attr("id",f.name+"_"+e.dataField+"_chk").prop("checked",c).prop("defaultChecked",c)).append($("<label></label>").attr("for",
f.name+"_"+e.dataField+"_chk").html(e.headerHtml));$("#"+f.columnChooserClientID).append(e)}window[f.columnChooserDialogName].open();(b=$("#"+this.columnChooserClientID).find("input:not(:disabled):first"))&&b.focus()};f.updateColumnsList=function(){var b=[];$(":checkbox","#"+f.columnChooserClientID).each(function(a,c){a=$(c);a.prop("checked")&&b.push(a.val())});0==b.length&&b.push(f.mainColumn);if(!b.isEqual(f.visibleColumns)){f.visibleColumns=b;f.visibleColumns.contains(f.columns.findBySortField(f.sortingProperty).dataField)?
f.refresh():f.sort(f.columns.findByDataField(f.visibleColumns[0]).sortField);var a=null;b.isEqual(f.defaultColumnOrder)||(a=f.visibleColumns.toString());f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.columnOrder,a)}return!0};f._collapseAll=function(){$("#"+f.gridClientID+" > tbody > tr."+f.accordionRow).hide()};f.expandCollapseRow=function(b,a,e){if(a=a?a:window.event)if(a=a.srcElement||a.target,"TD"!=a.tagName&&"TR"!=a.tagName)return;if($(b).next().hasClass(f.cclGridConstants.cssClasses.accordionRow))c=
$(b).next(),c.is(":hidden")?(f._collapseAll(),c.show(),c.removeAttr("style")):c.hide();else{f._collapseAll();var c=$("<tr class='"+f.cclGridConstants.cssClasses.accordionRow+"'></tr>").hide(),d=$("<td></td>").attr("colSpan",f._getColumnsCount());a=0<this.accordionDataSourceUrl.indexOf("?")?"&":"?";$.get(f.accordionDataSourceUrl+a+f.accordionDataSourceUrlParameterName+"="+encodeURIComponent(e),{},function(a){d.html(a);c.show();c.removeAttr("style")},"html");c.append(d);$(b).after(c)}};f.getRow=function(b){return $("#"+
f.gridClientID+" > tbody tr[data-id='"+b+"']")};Array.prototype.findByDataField=function(b){for(x in this)if(this[x].dataField==b)return this[x];return null};Array.prototype.findBySortField=function(b){for(x in this)if(this[x].sortField==b)return this[x];return null};Array.prototype.isEqual=function(b){if(this.length!=b.length)return!1;for(var a=0;a<b.length;a++)if(this[a].compare&&!this[a].compare(b[a])||this[a]!==b[a])return!1;return!0};Array.prototype.contains=function(b){for(x in this)if(this[x]==
b)return!0;return!1};f.StringToXml=function(b){if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.XMLDOM");a.async="false";a.loadXML(b)}else a=(new DOMParser).parseFromString(b,"text/xml");return a};f.XmlToString=function(b){return window.ActiveXObject?b.xml:(new XMLSerializer).serializeToString(b)}}
function CclGridSearchFilterInstance(c){window[c]=this;var d=this;this.inputEmptyCssClass=null;d.firstLoad=function(){d.isEmpty=d.settings.isEmpty;d.controls.searchInput.focus(function(){d.onFocus()}).keyup(function(c){return d.onKeyUp(c)}).keydown(function(c){c.which===CommonConstants.keyCodes.enter&&c.stopPropagation()}).keypress(function(c){return c.which!==CommonConstants.keyCodes.enter}).blur(function(){d.onBlur()});d.refresh()};d.onFocus=function(){d.isEmpty&&(d.isEmpty=!1,d.refresh(!0))};d.onBlur=
function(){if(0==d.controls.searchInput.val().length)d.isEmpty=!0,d.refresh(),d.filter("");else{var c=d.settings.preferenceWithoutValue+d.controls.searchInput.val();d.filter(c)}};d.onKeyUp=function(c){if(d.isEmpty)return d.isEmpty=!1,d.refresh(!0),!0;if(c.which===CommonConstants.keyCodes.enter)return c=d.settings.preferenceWithoutValue+d.controls.searchInput.val(),d.filter(c),!1};d.defineState=function(){d.isEmpty||0!=d.controls.searchInput.val().length||(d.isEmpty=!0)};d.refresh=function(c){d.isEmpty?
(d.controls.searchInput.addClass(d.inputEmptyCssClass),d.controls.searchInput.val(d.settings.searchText)):(c&&d.controls.searchInput.val(""),d.controls.searchInput.removeClass(d.inputEmptyCssClass))}}
function HtmlItemPicker(c){function d(){p.css("width",n.width()-u);p.removeClass(l.settings.cssClasses.hiddenClass)}function f(){return m.is(":visible")}function b(a){$(m).find("li[data-id='"+a+"']").addClass("ccl-htmlitempicker-highlighteditem");document.querySelector(".ccl-htmlitempicker-highlighteditem").scrollIntoView({block:"center"})}function a(a){$(m).find("li[data-id='"+a+"']").removeClass("ccl-htmlitempicker-highlighteditem")}function e(e,c){a(e.id);e=l.settings.items[c];b(e.id);r=e}function g(){m=
$("<span></span>").attr("id",c+"_menu").addClass(l.settings.cssClasses.menu).insertAfter(n).hide();var a=$(String.format("<ul class='{0}'></ul>",l.settings.cssClasses.alignment)).appendTo(m);$.each(l.settings.items,function(b,e){a.append($("<li>").attr("data-id",e.id.toString()).append($("<span>").addClass("ccl-htmlitempicker-item").html(e.innerHtml).mouseenter(function(a){a=$(a.currentTarget);this.offsetWidth<this.scrollWidth&&!a.prop("title")&&a.prop("title",a.text())}).click(function(a){h();l.controls.selectedValueHidden.val()!==
e.id.toString()&&(k(e.id,e.innerHtml),l.onValueChangedFunction(e,l));a.preventDefault()})))})}function h(){m.hide();a(r.id);n.removeClass(l.settings.cssClasses.menuOpen)}function k(a,b){l.controls.selectedValueHidden.val(a);l.setSelectedHtmlContainer(b);l.controls.container.trigger(l.settings.StateChangedEventName);d()}window[c]=this;var l=this,m,n,p,r,w=$(window),u;l.initialize=function(){n=l.controls.container;p=n.find("> span");n.find("> a");g();u=p.outerWidth(!0)-p.width();d();$(document).click(function(a){if(a.target===
n[0]||1===$(a.target).closest(n).length){if(n.getIfHyperLinkEnabled())if(m.is(":visible"))h();else{var e=n.offset();a=l.settings.menuAlignment===l.settings.menuAlignmentEnum.top?e.top-m.outerHeight():e.top+n.outerHeight();var c=n.position();a=l.settings.menuAlignment===l.settings.menuAlignmentEnum.top?0<a?c.top-m.outerHeight():c.top-e.top:c.top+n.outerHeight();c=c.left;var d=w.width(),g=n.innerWidth();m.css("width",m.width()<=g?g:"auto");var k=m.outerWidth();g=w.scrollLeft();l.settings.menuHorizontalAlignment===
l.settings.menuHorizontalAlignmentEnum.left?c=0:k<d?(e=e.left+k,e>d+g&&(c-=e-d-g)):c=-e.left+g;d=(e=CCL.CommonFunctions.isIosDevice())&&10>CCL.CommonFunctions.getIosVersion();!CCL.CommonFunctions.isSafari()||e&&!d||(c=a=0);m.css({top:a+"px",left:c+"px","z-index":l.settings.zIndex});null!==l.settings.listHeight&&m.css("max-height",l.settings.listHeight);l.settings.useModernSkin&&m.css("top",n.outerHeight(!0)+"px");m.show();n.addClass(l.settings.cssClasses.menuOpen)}f()&&(r=l.getSelectedItem(),b(r.id))}else f()&&
(c=m.offset(),a.clientX>c.left&&a.clientX<c.left+m.width()&&a.clientY>c.top&&a.clientY<c.top+m.height()||h())});$(document).keydown(function(a){if(f())switch(a.which){case CommonConstants.keyCodes.enter:return l.controls.selectedValueHidden.val()!==r.id.toString()&&(k(r.id,r.innerHtml),l.onValueChangedFunction(r,l)),h(),a.preventDefault(),!1;case CommonConstants.keyCodes.tab:case CommonConstants.keyCodes.escape:h();break;case CommonConstants.keyCodes.arrowUp:if(f()){var b=l.settings.items.indexOf(r);
b=0==b?l.settings.items.length-1:b-1;e(r,b)}a.preventDefault();return!1;case CommonConstants.keyCodes.arrowDown:return f()&&(b=l.settings.items.indexOf(r),b=b==l.settings.items.length-1?0:b+1,e(r,b)),a.preventDefault(),!1}});$(window).resize(function(a){p.addClass(l.settings.cssClasses.hiddenClass);d()});l.settings.disabled&&l.toggleEnabled(!1)};l.loadMenu=function(a){l.settings.items=a;l.getMenu().remove();g()};l.selectItem=function(a){k(a,$.grep(l.settings.items,function(b){return b.id.toString()===
a.toString()})[0].innerHtml)};l.hasAnyItems=function(){return 0<l.settings.items.length};l.onchange=function(a){l.controls.container.on(l.settings.StateChangedEventName,a)};l.toggleEnabled=function(a){l.controls.container.toggleHyperlink(a)};l.closeMenu=function(){m.is(":visible")&&h()};l.getMenu=function(){return m};l.getSelectedItem=function(){var a=l.settings.items[0];$.each(l.settings.items,function(b,e){l.controls.selectedValueHidden.val()==e.id.toString()&&(a=e)});return a};l.setSelectedHtmlContainer=
function(a){p.html("\n"+a+"\n")};l.setMenuItemContent=function(a,b){$(m.find("a")[a]).html(b);l.settings.items[a].innerHtml=b};l.resizeComponent=function(){d()};return l}
(function(c,d){c(document).on("click","div[data-hybrid-editor-settings]>div.ccl-hybrideditoritem-text-container, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(d){var b=c(d.currentTarget).parent("div.ccl-hybrideditoritem");b.hybridEditorItem();b.hybridEditorItem("edit",d.currentTarget,d.target)});c(document).on("keydown","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",
null,function(c){c.which===CommonConstants.keyCodes.enter&&(c.preventDefault(),setTimeout(function(){c.target.click()},400))});c(document).on("mouseenter mouseleave focus blur","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(d){c(d.currentTarget).siblings("div.ccl-hybrideditoritem-text-container:first").toggleClass("ccl-hybrideditoritem-text-container-hovered","mouseenter"==d.type||"focusin"==
d.type)});c.widget("ccl.hybridEditor",{options:{editorClientId:d,editorSetContentFuncName:d,editorGetContentFuncName:d,dialogClientId:d,saveButtonClientId:d,modalDialogCloseHref:d,textUpdateCompleted:c.noop,ckePopupFixClass:d,isIos:!1,containerCss:d,textContainerCss:d,closeAfterSave:!1},_create:function(){var d=c("#"+this.options.saveButtonClientId);d.on("click",c.proxy(this._handleSaveClick,this));var b=c("#"+this.options.cancelButtonClientId);b.on("click",c.proxy(this._handleCancelClick,this));
c(document).on("keyup","."+this.options.containerCss,c.proxy(this._handleContainerKeyUp,this));new CCL.ButtonLoadingIndicator(d,"ccl-button-in-progress",[d,b],0);if(this.options.isIos){var a=this,e=c("html");c(document).on("cssmodal:show",function(b,c,d){d==a.options.dialogClientId&&e.addClass(a.options.ckePopupFixClass)}).on("cssmodal:hide",function(b,c,d){d==a.options.dialogClientId&&e.removeClass(a.options.ckePopupFixClass)})}},_handleContainerKeyUp:function(d){d.which===CCL.CommonConstants.keyCodes.enter&&
c(d.target).find("."+this.options.textContainerCss).click()},_handleCancelClick:function(c){this._closeDialog();return!1},_handleSaveClick:function(c){var b="";this.options.editorClientId&&this.options.editorGetContentFuncName&&(b=this.options.editorGetContentFuncName(this.options.editorClientId));this._trigger("textUpdateCompleted",c,b);this.options.closeAfterSave||this._closeDialog();return!1},_closeDialog:function(){window.location.href=this.options.modalDialogCloseHref},activateButtons:function(){c("#"+
this.options.saveButtonClientId).trigger(CCL.ButtonLoadingIndicator.eventRemoveLoadingIndicator)},closeDialog:function(){this._closeDialog()},setCloseAfterSave:function(c){this.options.closeAfterSave=c},openEditor:function(c,b){this.activateButtons();this.updateEditorText(c);b&&""!=b&&window[this.options.dialogClientId].setTitle(b);window.location.href="#"+this.options.dialogClientId},updateEditorText:function(c){this.options.editorClientId&&this.options.editorSetContentFuncName&&(this.options.editorSetContentFuncName(c,
this.options.editorClientId),window[this.options.dialogClientId].adjustWindowSize())}})})(jQuery);
(function(c,d){c.widget("ccl.hybridEditorItem",{options:{groupSettingsFunctionName:d,groupSettingsFunctionParam:d,textContainerId:d,editLinkId:d,hybridEditorClientId:d,editModeEnabled:"hybrid",webMethodParams:d,webMethodDataParamName:d,saveContentWebUrl:d,inlineEditorOptions:d,editorDialogTitle:"",editToolTipText:d,textContainerWatermark:d,textContainerWatermarkCssClass:d,watermarkDataAttributeName:d,enable:!0},widgetState:{idle:0,inlineEditorOpened:1,savingPlainText:2,savingRichContent:3},_editor:d,
_inlineEditor:d,_textContainer:d,_editLink:d,_isAjaxEnabled:!1,_isWatermarkUsed:!1,_groupSettingsAreUsed:!1,_currentState:d,_create:function(){this._initializeSettings();this.options.webMethodParams=this._groupSettingsAreUsed?this.options.webMethodParams:JSON.parse(this.options.webMethodParams);this.options.webMethodDataParamName=this.options.webMethodDataParamName?this.options.webMethodDataParamName:"data";this._isAjaxEnabled=!!this.options.saveContentWebUrl;this._textContainer=c("#"+this.options.textContainerId);
this._textValueHidden=c("#"+this.options.textValueHiddenId);this._editLink=c("#"+this.options.editLinkId);this._isWatermarkUsed=this.options.textContainerWatermark!=d&&""!==this.options.textContainerWatermark;if(("hybrid"===this.options.editModeEnabled||"inline"===this.options.editModeEnabled)&&this.options.inlineEditorOptions){var f=this._groupSettingsAreUsed?this.options.inlineEditorOptions:JSON.parse(this.options.inlineEditorOptions);f.editFieldCssClass=(f.editFieldCssClass?f.editFieldCssClass:
"")+(f.multiline?" ccl-modern-textarea":" ccl-modern-input");this._inlineEditor=new ClientInlineEditor(this._textContainer,null,this._textValueHidden,f,c.proxy(this._savePlainText,this),c.proxy(this._inlineEditorModeChanged,this),null)}this.options.hybridEditorClientId&&(this._editor=c("#"+this.options.hybridEditorClientId));this._editor&&0!==this._editor.length||(this.options.editModeEnabled="inline");this._currentState=this.widgetState.idle},edit:function(d,b){if(this.options.enable){if(d===this._textContainer.get(0)){if(b&&
0<c(b).closest("a,input,button,textarea").length)return;this._handleTextContainerClick()}d===this._editLink.get(0)&&this._handleIconClick()}},updateInlineEditorText:function(){this._inlineEditor&&"function"===typeof this._inlineEditor.updateTextOnBlur&&this._inlineEditor.updateTextOnBlur()},updateTextContainer:function(c,b){this._updateText(c,b)},connectHybridEditor:function(d){this._editor=c("#"+d);this.options.editModeEnabled="hybrid"},_initializeSettings:function(){var d=this.element.data("hybrid-editor-settings");
if(c.isFunction(window[d.groupSettingsFunctionName])){var b=d.groupSettingsFunctionParam?window[d.groupSettingsFunctionName](d.groupSettingsFunctionParam):window[d.groupSettingsFunctionName]();c.extend(this.options,b);this.options.textContainerId=d.textContainerId;this.options.textValueHiddenId=d.textValueHiddenId;this.options.editLinkId=d.editLinkId;this.options.hybridEditorClientId||(this.options.hybridEditorClientId=d.hybridEditorClientId);this.options.watermarkDataAttributeName=d.watermarkDataAttributeName;
c.extend(this.options.inlineEditorOptions,{suppressOriginalBehaviour:!0,editFieldAutoWidth:!1});this._groupSettingsAreUsed=!0}else c.extend(this.options,d)},_handleTextContainerClick:function(){if(this._editor)switch(this.options.editModeEnabled){case "dialog":this._openHybridEditor();break;case "hybrid":var c=this._textContainer.html();""===c||this._isWatermarkApplied()||CommonFunctions.isPlainText(c)?this._openInlineEditor():this._openHybridEditor();break;default:this._openInlineEditor()}else this._openInlineEditor()},
_handleIconClick:function(){!this._editor||"hybrid"!==this.options.editModeEnabled&&"dialog"!==this.options.editModeEnabled?this._openInlineEditor():this._openHybridEditor()},_openInlineEditor:function(){this._inlineEditor&&this._currentState===this.widgetState.idle&&(this._removeWatermark(),this._inlineEditor.switchToEditMode(),this._currentState=this.widgetState.inlineEditorOpened)},_openHybridEditor:function(){if(this._editor&&this._currentState!==this.widgetState.savingRichContent){var d=this._currentState===
this.widgetState.inlineEditorOpened||this._currentState===this.widgetState.savingPlainText,b=c.proxy(this._saveRichContent,this);this._editor.off("hybrideditortextupdatecompleted").one("hybrideditortextupdatecompleted",b);b=this._textValueHidden.val();CommonFunctions.isPlainText(b)&&(b=this._textContainer.html());d&&(b=CommonFunctions.replaceLineBreaksWithBrTags(this._inlineEditor.getEditFieldText()));!this._isAjaxEnabled&&this.options.processContentWebUrl&&this._editor.hybridEditor("setCloseAfterSave",
!0);this._editor.hybridEditor("openEditor",this._isWatermarkApplied()&&!d?"":b,this.options.editorDialogTitle)}},_savePlainText:function(d,b){var a=c.trim(d.actualText);if(this._isAjaxEnabled){if(this.options.saveContentWebUrl&&this.options.webMethodParams){var e=this,g={};g[this.options.webMethodDataParamName]=encodeURIComponent(this._processPlainText(a));a=c.extend(this.options.webMethodParams,g);this._currentState=this.widgetState.savingPlainText;CCL.CommonFunctions.safeAjaxPost({url:this.options.saveContentWebUrl,
data:a,success:function(a){a&&(a.IsSuccessfull?(d.actualText=a.Value,e._textUpdated(a.SafeHtml,a.Value,a.CustomData)):(d.isUpdateSuccess=!1,d.stopOnEdit=!0,e._handleError(a.ErrorText)))},error:function(a,b,c){d.isUpdateSuccess=!1;d.stopOnEdit=!0;e._handleAjaxError(a,b,c)},complete:function(){b(d);e.options.textUpdatedCallback&&(new Function(e.options.textUpdatedCallback))()}})}}else this._textUpdated(this._processPlainText(a),a),b(d)},_saveRichContent:function(d,b){var a=this;c.isPlainObject(b)&&
(b="");this._isAjaxEnabled?this.options.saveContentWebUrl&&this.options.webMethodParams?(d={},d[this.options.webMethodDataParamName]=encodeURIComponent(b),b=c.extend(this.options.webMethodParams,d),this._currentState=this.widgetState.savingRichContent,CCL.CommonFunctions.safeAjaxPost({url:this.options.saveContentWebUrl,data:b,success:function(b){b&&(b.IsSuccessfull?(a._textUpdated(b.SafeHtml,b.Value,b.CustomData),CommonFunctions.isPlainText(b.SafeHtml)&&a._inlineEditor.setNewText(b.Value)):a._handleError(b.ErrorText));
a._addWatermark();a._currentState=a.widgetState.idle},error:function(b,c,d){a._handleAjaxError(b,c,d)},complete:function(){a._editor.hybridEditor("activateButtons")}})):a._editor.hybridEditor("activateButtons"):this.options.processContentWebUrl?CCL.CommonFunctions.safeAjaxPost({url:this.options.processContentWebUrl,data:b,dataType:"json"}).done(function(b){a._textUpdated(b.displayText,b.text);CommonFunctions.isPlainText(b.displayText)&&a._inlineEditor.setNewText(b.text);a._addWatermark()}).complete(function(){a._editor.hybridEditor("activateButtons");
a._editor.hybridEditor("closeDialog")}):(this._textUpdated(b,b),this._addWatermark(),a._editor.hybridEditor("activateButtons"))},_addWatermark:function(){if(this._isWatermarkUsed&&!this._isWatermarkApplied()&&!c.trim(this._textContainer.html())){var d=c("<span "+this.options.watermarkDataAttributeName+"='true'/>").text(this.options.textContainerWatermark);this.options.textContainerWatermarkCssClass&&d.addClass(this.options.textContainerWatermarkCssClass);this._textContainer.prepend(d)}},_removeWatermark:function(){if(this._isWatermarkUsed){var c=
this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]");0<c.length&&c.remove()}},_isWatermarkApplied:function(){return this._isWatermarkUsed&&0<this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]").length},_inlineEditorModeChanged:function(c){c.isEditMode||(this._addWatermark(),this._currentState=this.widgetState.idle);this._trigger("inlinemodechanged",null,c)},_textUpdated:function(c,b,a){this._updateText(c,b);this._trigger("textupdated",null,{html:c,
value:b,customData:a})},_updateText:function(c,b){this._textValueHidden.val(b);this._textContainer.html(c)},_processPlainText:function(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;").replace(/\r?\n/g,"<br />\n")},_handleAjaxError:function(c){this._trigger("ajaxerror",null,{xhrObject:c})},_handleError:function(c){this._trigger("saveerror",null,{errorText:c})},value:function(){return this._textValueHidden.val()},resetValue:function(){this._textUpdated("");
this._inlineEditor.setNewText("");this._addWatermark()},setToolTip:function(c){this._inlineEditor.setToolTip(c);this._editLink.attr("title",c)},setEnable:function(c){this.options.enable=c;this._editLink.toggle(c);this._textContainer.toggleClass("ccl-hybrideditoritem-text-container-hovered",c);this._textContainer.toggleClass("h-cursor-default",!c);c?(this._addWatermark(),this._textContainer.attr("title",this.options.editToolTipText)):(this._removeWatermark(),this._textContainer.attr("title",""))}})})(jQuery);
(function(c){var d=$(c.document);c.IframeClickEventHelper={registerDocumentClickBubblingOnTop:function(){var f="click touchstart";navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)&&(f="click");var b=c.parent,a=c.top;d.on(f,function(){a!=c&&(CommonFunctions.makePostMessageCall(a,{messageName:"iframeClickBubble"}),b!=a&&CommonFunctions.makePostMessageCall(b,{messageName:"iframeClickBubble"}))});d.on("touchstart",function(){a!=c&&(CommonFunctions.makePostMessageCall(a,{messageName:"iframeTouchstartBubble"}),
b!=a&&CommonFunctions.makePostMessageCall(b,{messageName:"iframeTouchstartBubble"}))})},handleDocumentClickBubblingOnTop:function(){CommonFunctions.attachPostMessageEventListener($(c),"iframeClickBubble",function(c){d.trigger(CommonTriggers.clickInInnerFrame)});CommonFunctions.attachPostMessageEventListener($(c),"iframeTouchstartBubble",function(c){d.trigger(CommonTriggers.touchstartInInnerFrame)})}}})(window);
function IframeIterator(c){if(void 0===c.nodeType||void 0===c.nodeName)throw"Starting element must be a HTML Node.";var d=[c],f=c;return{hasNext:function(){return 0<d.length},next:function(){void 0!==f&&$(f).find("iframe").each(function(b,a){b=void 0;try{b=a.contentDocument}catch(e){return}null!==b&&d.push(b)});return f=d.pop()}}}
(function(c){c.IframeResizer={reportSetIframeDefaultHeight:function(){var d;(d=c.parent)&&c!==d&&CommonFunctions.makePostMessageCall(d,{messageName:"setIframeDefaultHeight"})},registerDefaultHeight:function(d,f){var b=$(c),a=$("#"+d.iframeClientId),e,g=CCL.CommonFunctions.calculateRightAndBottomOffset(a);var h=c[d.setIframeDefaultHeightFunctionName]=function(){var e=IframeResizer.getFixedIframeDefaultWidthAndHeight(b,a,g);d.useMinHeight?a.css("min-height",e.height+"px"):a.height(e.height);f&&f({width:e.width+
8,height:e.height+8},a)};h();b.resize(function(){e&&clearTimeout(e);e=setTimeout(h,200)});CommonFunctions.attachPostMessageEventListener(b,"setIframeDefaultHeight",function(a){h()})},getIframeDefaultWidthAndHeight:function(c,f,b){var a=CCL.CommonFunctions.isIosDevice(),e=a?screen.width:c.innerWidth();c=a?screen.height:c.innerHeight();f=f.offset();return{width:e-f.left-b.right,height:c-f.top-b.bottom}},getFixedIframeDefaultWidthAndHeight:function(c,f,b){c=IframeResizer.getIframeDefaultWidthAndHeight(c,
f,b);return{width:c.width-8,height:c.height-8}},registerExtensionIframeListener:function(d){var f=$("#"+d.IframeClientId);CommonFunctions.attachPostMessageEventListener($(c),[CommonWindowMessages.MessageNames.expandExtensionIframe,CommonWindowMessages.MessageNames.collapseExtensionIframe],function(b){var a=(b=b.messageName===CommonWindowMessages.MessageNames.expandExtensionIframe)?"0":"";f.css({position:b?"fixed":"",top:a,right:a,bottom:a,left:a});f.toggleClass(d.ExpandedIframeCssClass,b);IframeResizer.reportSetIframeDefaultHeight()})}}})(window);
function postWidthAndHeightToExtension(c,d){d.get(0)&&CommonFunctions.makePostMessageCall(d.get(0).contentWindow,new CommonWindowMessages.GenericMessageWithData(CommonWindowMessages.MessageNames.extensionContentOpened,{iframeWidth:c.width&&0<c.width?c.width:d.width(),iframeHeight:c.height&&0<c.height?c.height:d.height()}))}function attachOnReadySendTitleToParent(){"complete"===document.readyState?sendDocumentTitleToParent():document.addEventListener("DOMContentLoaded",sendDocumentTitleToParent)}
function sendDocumentTitleToParent(){window.self!==window.top&&window.parent.postMessage(JSON.stringify({messageName:"setIFrameTitleMessage",iFrameTitle:document.title}),"*")}
function attachSetIFrameTitlePostMessageEventListener(c){window.addEventListener("message",function(d){if(d.data&&d.source){var f=document.getElementById(c);if(f&&d.source===f.contentWindow)try{var b=JSON.parse(d.data);b.messageName&&"setIFrameTitleMessage"===b.messageName&&setTitleToIFrame(b.iFrameTitle,f)}catch(a){}}},!1)}function setTitleToIFrame(c,d){d&&(c?d.setAttribute("title",c):d.removeAttribute("title"))}
function InlineFeedback(c){window[c]=this;var d=this;d.show=function(c){var b=d.controls;b.container.css("visibility","visible");0<c&&b.container.delay(1E3*c).fadeTo("slow",0,function(){$(this).css("visibility","hidden").css("opacity",1)})}}
(function(c){c.InlineReplyManager={sendButtonClick:function(c,f){var b=$(c),a=b.parent().prev();if(c=a.val())b.prop("disabled",!0),f({target:b,messageBody:CommonFunctions.replaceLineBreaksWithBrTags(CommonFunctions.htmlEncode(c)),sendMessageCompleteCallback:function(){b.prop("disabled",!1)},sendMessageSuccessCallback:function(){a.val("")}})}}})(window);
function ItslTextBox(c){function d(a){if((a.keyCode?a.keyCode:a.which?a.which:a.charCode)===CommonConstants.keyCodes.enter){if(h.onEnterAction)return h.onEnterAction(),a.preventDefault(),!1;$(this.form).submit();a.preventDefault();return!1}return!0}function f(b){var c=b.keyCode?b.keyCode:b.which?b.which:b.charCode;if("undefined"!==e.selectionStart){var d=0<e.selectionEnd-e.selectionStart;e.focus()}else d=!1;if(!d&&0<g.maxLength&&this.value.length>=g.maxLength){d=b.ctrlKey||b.metaKey;if(c>=CommonConstants.keyCodes.arrowLeft&&
c<=CommonConstants.keyCodes.arrowDown||c===CommonConstants.keyCodes.del||c===CommonConstants.keyCodes.backspace||d&&120===c||d&&97===c||d&&118===c||d&&99===c||d&&90===c)return b=a.val(),b.length>g.maxLength&&a.val(b.substr(0,g.maxLength)),!0;b.preventDefault();return!1}return!0}window[c]=this;var b=this,a=$("#"+c),e=a.get(0),g,h;b.initialize=function(){g=b.settings;h=b.functions;"maxLength"in e||a.bind("change keyup keydown input paste",f);g.submitOnEnter&&a.bind("change keyup keydown input paste",
d);if(b.settings.isAutogrow){var c=a.width();a.css({resize:"none",overflow:"hidden",width:c});a.autogrow({additionalHeight:b.settings.autogrowAdditionalHeight,fontWeight:b.settings.autogrowFontWeight})}};return b}
(function(c){c.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.01,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;OK&nbsp;",cancelButton:"&nbsp;Cancel&nbsp;",dialogClass:null,promptInputMaxLength:0,focusTracker:void 0,alert:function(d,f,b){null==f&&(f="Alert");c.alerts._show(f,d,null,"alert",function(a){b&&b(a)})},confirm:function(d,f,b){null==f&&(f="Confirm");c.alerts._show(f,d,null,"confirm",function(a){b&&b(a)})},prompt:function(d,f,b,a){null==b&&(b="Prompt");
c.alerts._show(b,d,f,"prompt",function(b){a&&a(b)})},multiButtonConfirm:function(d,f,b,a){null==f&&(f="multiButtonConfirm");c.alerts._show(f,d,null,"multiButtonConfirm",function(b){a&&a(b)},b)},_show:function(d,f,b,a,e,g){c.alerts._hide();c.alerts._overlay("show");c("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_message"></div></div></div>');c.alerts.dialogClass&&c("#popup_container").addClass(c.alerts.dialogClass);var h=c("#popup_container");
h.attr({role:"dialog","aria-labelledby":"popup_title","aria-describedby":"popup_content"});h.css({position:"fixed",zIndex:99999,padding:0,margin:0});c.alerts.focusTracker=new CCL.FocusTracker(h);c("#popup_title").text(d);c("#popup_content").addClass(a);c("#popup_message").text(f);c("#popup_message").html(c("#popup_message").text().replace(/\n/g,"<br />"));switch(a){case "alert":c("#popup_message").after('<div id="popup_panel"><input type="button" value="'+c.alerts.okButton+'" id="popup_ok" autofocus/></div>');
c("#popup_ok").click(function(){c.alerts._hide();e(!0)});c("#popup_ok").focus().keypress(function(a){13!=a.keyCode&&27!=a.keyCode||c("#popup_ok").trigger("click")});break;case "confirm":c("#popup_message").after('<div id="popup_panel"><input type="button" value="'+c.alerts.okButton+'" id="popup_ok" autofocus/> <input type="button" value="'+c.alerts.cancelButton+'" id="popup_cancel" /></div>');c("#popup_ok").click(function(){c.alerts._hide();e&&e(!0)});c("#popup_cancel").click(function(){c.alerts._hide();
e&&e(!1)});c("#popup_ok").focus();c("#popup_ok, #popup_cancel").keypress(function(a){27==a.keyCode&&c("#popup_cancel").trigger("click")});break;case "prompt":g=0<c.alerts.promptInputMaxLength?'maxlength="'+c.alerts.promptInputMaxLength+'"':"";c("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" '+g+" />").after('<div id="popup_panel"><input type="button" value="'+c.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+c.alerts.cancelButton+'" id="popup_cancel" /></div>');
c("#popup_prompt").width(c("#popup_message").width());c("#popup_ok").click(function(){var a=c("#popup_prompt").val();c.alerts._hide();e&&e(a)});c("#popup_cancel").click(function(){c.alerts._hide();e&&e(null)});c("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(a){27==a.keyCode&&c("#popup_cancel").trigger("click")});b&&c("#popup_prompt").val(b);c("#popup_prompt").focus().select();break;case "multiButtonConfirm":b="";for(d=0;d<g.length;d++)b+='<input type="button" ',b+=' value="'+g[d].text+
'" ',b+=' id="jqueryalertsbutton'+d+'" ',b+=' class="ccl-button '+(g[d].css?g[d].css:"ccl-button-color-grey")+'"',b+=' data-userid="'+g[d].customId+'" ',0===d&&(b+=" autofocus "),b+=" />\r\n";c("#popup_message").after('<div class="jquery-alerts-footer">'+b+"</div>");for(d=0;d<g.length;d++)c("#jqueryalertsbutton"+d).click(function(a){a=c(a.target);a={buttonIndex:parseInt(a.attr("id").replace("jqueryalertsbutton",""),10),customId:a.data("userid")};c.alerts._hide();e&&e(a)});c("#jqueryalertsbutton0").focus()}g=
c("#popup_container").outerWidth()+1;c("#popup_container").css({minWidth:g,maxWidth:g});c.alerts._reposition();c.alerts._maintainPosition(!0);if(c.alerts.draggable)try{c("#popup_container").draggable({handle:c("#popup_title")}),c("#popup_title").css({cursor:"move"})}catch(k){}c.alerts.focusTracker.startTrackFocus()},_hide:function(){c.alerts.focusTracker&&c.alerts.focusTracker.stopTrackFocus();c("#popup_container").remove();c.alerts._overlay("hide");c.alerts._maintainPosition(!1)},_overlay:function(d){switch(d){case "show":c.alerts._overlay("hide");
c("BODY").append('<div id="popup_overlay"></div>');c("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:c(document).height(),background:c.alerts.overlayColor,opacity:c.alerts.overlayOpacity});break;case "hide":c("#popup_overlay").remove()}},_reposition:function(){if(-1!=navigator.platform.indexOf("iPad"))if(90===window.orientation||-90===window.orientation){var d=screen.width;var f=screen.height}else d=screen.height,f=screen.width;else d=c(window).height(),
f=c(window).width();d=d/2-c("#popup_container").outerHeight()/2+c.alerts.verticalOffset;f=f/2-c("#popup_container").outerWidth()/2+c.alerts.horizontalOffset;0>d&&(d=0);0>f&&(f=0);c("#popup_container").css({top:d+"px",left:f+"px"});c("#popup_overlay").height(c(document).height())},_maintainPosition:function(d){if(c.alerts.repositionOnResize)switch(d){case !0:c(window).bind("resize",c.alerts._reposition);break;case !1:c(window).unbind("resize",c.alerts._reposition)}}};jAlert=function(d,f,b){c.alerts.alert(d,
f,b)};jConfirm=function(d,f,b){c.alerts.confirm(d,f,b)};jPrompt=function(d,f,b,a){c.alerts.prompt(d,f,b,a)};jMultiButtonConfirm=function(d,f,b,a){c.alerts.multiButtonConfirm(d,f,b,a)}})(jQuery);
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){if(!c.support.cors&&c.ajaxTransport&&window.XDomainRequest){var d=/^https?:\/\//i,f=/^get|post$/i,b=new RegExp("^"+location.protocol,"i");c.ajaxTransport("* text html xml json",function(a,e,g){if(a.crossDomain&&a.async&&f.test(a.type)&&d.test(a.url)&&b.test(a.url)){var h=null;return{send:function(b,d){b="";var g=(e.dataType||"").toLowerCase();h=new XDomainRequest;/^\d+$/.test(e.timeout)&&(h.timeout=e.timeout);
h.ontimeout=function(){d(500,"timeout")};h.onload=function(){var a="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,b=200,e="success",f={text:h.responseText};try{if("html"===g||/text\/html/i.test(h.contentType))f.html=h.responseText;else if("json"===g||"text"!==g&&/\/json/i.test(h.contentType))try{f.json=c.parseJSON(h.responseText)}catch(v){b=500,e="parseerror"}else if("xml"===g||"text"!==g&&/\/xml/i.test(h.contentType)){var k=new ActiveXObject("Microsoft.XMLDOM");k.async=
!1;try{k.loadXML(h.responseText)}catch(v){k=void 0}if(!k||!k.documentElement||k.getElementsByTagName("parsererror").length)throw b=500,e="parseerror","Invalid XML: "+h.responseText;f.xml=k}}catch(v){throw v;}finally{d(b,e,f,a)}};h.onprogress=function(){};h.onerror=function(){d(500,"error",{text:h.responseText})};e.data&&(b="string"===c.type(e.data)?e.data:c.param(e.data));h.open(a.type,a.url);h.send(b)},abort:function(){h&&h.abort()}}}})}});
function LabeledInput(c){function d(){return m.find("."+e.settings.itemClass)}function f(a,b){e.settings.throwEventInsteadAddingItemToInput?($(document).trigger(e.settings.onSelectEventName,b.item.metadata),e.settings.eventNamespace&&$(document).trigger(e.settings.onSelectEventName+":"+e.settings.eventNamespace,b.item.metadata)):e.pushLabel(b.item.label,b.item.metadata);h.val("");return!1}function b(){h.prop("placeholder",d().length?"":e.settings.watermark);a();e.settings.onLabelsChangedHandler&&
$.each(l,function(a,b){b()})}function a(){e.settings.watermark&&!h.val()&&0==d().length?(h.removeAttr("width"),h.attr("size",h.attr("placeholder").length),h.css("max-width",m.width()-40+"px")):(h.removeAttr("size"),h.attr("width","100"))}var e=this,g,h,k,l=[],m;window[c]=e;e.initialize=function(){e.settings.onLabelsChangedHandler&&l.push(e.settings.onLabelsChangedHandler);g=e.settings.removeButtonTooltipFormat;m=$("#"+e.settings.containerId);m.on(e.settings.clickOrTouch,".ccl-labeled-input-remove",
function(a){$(a.target).parent().remove();b()});h=$("#"+e.settings.inputId);k=h.parent();h.autocomplete({open:function(a,b){$(".ui-autocomplete").width(m.width())},focus:function(a,b){a.preventDefault()},position:{collision:"none flip",of:m},source:e.settings.autocompleteCallback,select:f,delay:e.settings.autocomplete.delay,minLength:e.settings.autocomplete.minLength,messages:{noResults:"",results:function(){return""}},create:function(){e.settings.renderItem&&($(this).data("ui-autocomplete")._renderItem=
e.settings.renderItem)}});h.keyup(function(){a()});h.keydown(function(a){a.which!==CommonConstants.keyCodes.backspace||e.hasText()||(a=d(),0<a.length&&(a.last().remove(),b()))});h.blur(function(){h.val("");a()});h.focus(function(){a()});e.settings.autocomplete.autocompleteMenuCssClass&&h.data("ui-autocomplete").menu.activeMenu.addClass(e.settings.autocomplete.autocompleteMenuCssClass);k.append(h.data("ui-autocomplete").menu.activeMenu.detach());m.on(e.settings.clickOrTouch,function(a){h.is(":focus")||
(a.preventDefault(),h.focus())});a()};e.pushLabel=function(a,c){var d=$("<span></span>"),f=$("<span>"+CCL.CommonFunctions.htmlEncode(a)+"</span>"),h=$('<a href="#" class="ccl-labeled-input-remove">\u00d7</a>');h.prop("title",g.replace("{0}",a));d.data("meta",c);f.addClass(e.settings.textClass);d.addClass(e.settings.itemClass);d.append(f).append(h);d.insertBefore(k);b()};e.getLabelsMetadata=function(){return $.makeArray(d().map(function(a,b){return $(b).data("meta")}))};e.mapLabelsField=function(a){return e.getLabelsMetadata().map(function(b){return b[a]})};
e.clear=function(){d().remove();h.val("");b()};e.hasText=function(){return""!==h.val().trim()};e.getText=function(){return h.val()};e.addLabelsChangedHandler=function(a){e.settings.onLabelsChangedHandler&&l.push(a)};e.focus=function(){h.focus()}}
function LearningObjectivesSelector(c,d,f,b,a,e){window[c]=this;var g=this;g.readLearningObjectivesUrl=a.readLearningObjectivesUrl;g.selectedIds=b;g.selectableCategory=a.selectableCategory;g.selectableObjective=a.selectableObjective;g.selectableSubject=a.selectableSubject;g.cutOffLoStructure=a.cutOffLoStructure;g.terms=f;g.language=a.language;g.updateContainerOnSelect=a.updateContainerOnSelect;d?(g.folderSelector=d,g.baseGetRequestData=d.getRequestData,g.editable=!0):g.editable=!1;g.placeHolderOnEmpty=
a.placeHolderOnEmpty;g.courseId=a.courseId;g.countryCode=a.countryCode;g.showTooltip=a.showTooltip;g.firstLoad=!0;g.cache={};g.cssClasses=e;g.filtersData={};""!=a.filtersData&&(g.filtersData=a.filtersData);g.defaultFilter=a.defaultFilter;g.filtersddl=$(".js-filter-ddl");g.GetCurrentFilter=function(){return 0<g.filtersddl.length?g.filtersddl.find(":selected").val():g.defaultFilter};g.folderSelector&&(g.folderSelector.dialogContainer.addClass(g.cssClasses.learningObjectivesSelector),g.folderSelector.showFeedbackOnEmpty=
0==g.filtersddl.length);g.selectedContainer=$("#"+c).find("."+g.cssClasses.selectedContainer);g.emptyContainer=$("#"+c).find("."+g.cssClasses.emptyContainer);g.addLink=$("#"+c).find("."+g.cssClasses.addLink);if(g.editable)g.selectedContainer.on("click","."+g.cssClasses.removeLink,function(){$(g).trigger(a.clientEvents.removeItem,$(this));g.removeSelectedIds([$(this).data("loId")]);return!1});g.openDialog=function(){g.folderSelector&&g.folderSelector.openDialog(g.filtersData[g.GetCurrentFilter()])};
g.updateSelectedItemsContainer=function(){g.updateContainerOnSelect&&(g.selectedContainer.empty(),g.emptyContainer.empty(),g.listIsEmpty()?g.toggleEmptyContentFeedback(!0):(g.setSelectedIds(g.selectedIds,!0),g.loadData(g.selectedIds,function(a){var b=[];$.each(a,function(a,e){g.renderSelectedItemHtml(e.id,e.title,e.description,e.type,e.options);b.push(e.id)});0===b.length&&g.toggleEmptyContentFeedback(!0)})),$(g).trigger(a.clientEvents.itemContainerUpdated))};g.createTooltip=function(a,b){var e=$("<span></span>");
e.text(a);var c=new ToolTip(null,e);c.title=$("<div/>").text(a).html();c.description=b;c.settings={showPopupTimeout:300,hidePopupTimeout:300,cssClasses:{tooltipPopup:"ccl-tooltip-popup",linkToTooltip:"ccl-tooltip-link",arrowUp:"ccl-tooltip-arrow-up",arrowDown:"ccl-tooltip-arrow-down",arrowContainer:"ccl-tooltip-arrow-container",tooltipTitle:"ccl-tooltip-popup-title",tooltipDescription:"ccl-tooltip-popup-description"}};c.initialize();return e};g.renderSelectedItemHtml=function(a,b,e,c,d){b=$("<div></div>").addClass(g.cssClasses.selectedItem).append($("<span></span>").addClass(g.cssClasses.selectedItemIcon).addClass(c)).append(g.showTooltip?
g.createTooltip(b,e):$("<span></span>").text(b));g.editable&&(a=$("<a></a>").data("loId",a).addClass(g.cssClasses.removeLink).attr("data-loId",a).attr("title",g.terms.deleteTooltip).attr("href","#").text("\u00d7"),void 0!==d&&a.data("options",d),b.append(a));g.selectedContainer.append(b)};g.getSelectedItemsSelector=function(){return String.format(".{0}",g.cssClasses.selectedItem)};g.listIsEmpty=function(){return 0==g.selectedIds.length};g.toggleEmptyContentFeedback=function(a){g.emptyContainer.toggle(a).text(a?
g.placeHolderOnEmpty:"")};g.showSuccessFeedback=function(){g.folderSelector.showSuccessFeedback()};g.showErrorFeedback=function(){g.folderSelector.showErrorFeedback()};g.showProgressFeedback=function(){g.folderSelector.showProgressFeedback()};g.addSelectedIds=function(b){var e={};$.each(g.selectedIds,function(a,b){e[b]=b});$.each(b,function(a,b){e[b]=b});g.selectedIds=[];$.each(e,function(a){g.selectedIds.push(a)});$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.removeSelectedIds=
function(b){var e={};$.each(g.selectedIds,function(a,b){e[b]=b});$.each(b,function(a,b){delete e[b]});g.selectedIds=[];$.each(e,function(a){g.selectedIds.push(a)});$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.clearSelectedIds=function(){g.selectedIds=[];$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.setSelectedIds=function(a,b){g.selectedIds=a;g.toggleFolderSelectById(g.selectedIds,b)};g.toggleFolderSelectById=function(a,b){g.folderSelector&&
($.each(a,function(a,e){g.folderSelector.controls.grid.toggleSelectById(e,b)}),b&&g.folderSelector.toggleSelectButtons(!1))};g.loadData=function(b,e){var c=[],d={};$.each(b,function(a,b){void 0===g.cache[b]?c.push(b):d[b]=g.cache[b]});0==c.length?e(d):$.ajax({url:g.readLearningObjectivesUrl,data:{ids:c.join(",")},dataType:"jsonp",success:function(a){$.each(a.Items,function(a,b){a={id:b.Id,title:b.Title,description:b.Description,type:b.Type};g.cache[b.Id]=a;d[b.Id]=a});e(d)},error:function(){$(g).trigger(a.clientEvents.error)}})};
g.changeFilter=function(a){g.folderSelector.reinitialize(!0,g.filtersData[a])};if(d){var h=!1;d.getRequestData=function(a,b,e,c){a=g.baseGetRequestData(a,b,e,c);a.SelectableCategory=g.selectableCategory;a.SelectableLearningObjective=g.selectableObjective;a.SelectableSubject=g.selectableSubject;a.cutOffLoStructure=g.cutOffLoStructure;g.language&&(a.lan=g.language);return a};$(d).on(a.folderSelectorEvents.select,function(b,e){b=h?[e.selectedId]:e.nodeIds;$(g).trigger(a.clientEvents.addItems,[b.filter(function(a){return 0>
g.selectedIds.indexOf(a)})]);g.addSelectedIds(b)});if(a.restrictInsertContext)$(d).on(a.folderSelectorEvents.gridRender,function(a,b,e){if(h=e.virtualItemCount>e.folders.length)b.toggleSelectAll(!0),b.toggleEnableAll(!1)});else $(d).on(a.folderSelectorEvents.gridRender,function(a,b,e){$.each(g.selectedIds,function(a,e){b.toggleSelectById(e,!0)})});if(g.filtersddl)g.filtersddl.on("change",function(){g.changeFilter($(this).val())})}g.updateSelectedItemsContainer();return g}
function ListCollapser(c,d,f,b,a){var e=this;e.showCount=d;e.showCountJquerySelector=d-1;e.hidden=!0;e.listHolder=c;e.listChangesEvents=f;e.showLinkText=b;e.hideLinkText=a;e.getList=function(){return e.listHolder.children("ul")};e.getLength=function(){return e.getList().children("li").length};e.restructure=function(){var b=e.getLength(),c=$("#showLink",e.listHolder),d=$("#hideLink",e.listHolder),f=Math.min(e.showCount,b);e.getList().children("li:lt("+f+")").show();e.showCount<b?(void 0==c[0]?(c=$("<a>").attr("href",
"javascript:void(0);").attr("id","showLink").css("display","none").insertAfter(e.getList()),c.click(function(){e.hidden=!1;e.getList().children("li").show();d.show();c.hide()})):c.insertAfter(e.getList()),void 0==d[0]?(d=$("<a>").html(a).attr("href","javascript:void(0);").attr("id","hideLink").css("display","none").insertAfter(e.getList()),d.click(function(){e.hidden=!0;e.getList().children("li:gt("+e.showCountJquerySelector+")").hide();d.hide();c.show().html(e.showLinkText+" ("+e.getLength()+")")})):
d.insertAfter(e.getList()),e.hidden?(e.getList().children("li:gt("+e.showCountJquerySelector+")").hide(),d.hide(),c.show().html(e.showLinkText+" ("+b+")")):(c.hide(),d.show())):(c.hide(),d.hide())};e.init=function(){e.restructure();if(e.listChangesEvents)e.listHolder.on(e.listChangesEvents,e.restructure)}}
function MetadataTranslationsList(c){window[c]=this;var d=this,f;d.firstLoad=function(){f=d.controls.table.find("tbody");var b=d.controls.languageDataHidden.val();d.settings.metadataLanguages=b?JSON.parse(b):[];d.controls.addLanguageLink.on("click",function(){d.addLanguageLinkClick()});d.controls.languageInput.on("change",function(){d.controls.languageIdHidden.val(d.controls.languageInput.val())});d.updateAddButton();$.each(d.metadataColumns,function(a,b){if(b.IsMultiLine){var e=d.getInputForMetadataColumn(b),
c=e.attr("rows")*e.attr("cols")*2;e.keypress(function(a){e.val().length>c&&a.preventDefault()});e.on("paste",function(){setTimeout(function(){e.val($.trim(e.val().replace(/[\n\r]+/g,"")));e.val(e.val().substring(0,c))},100)})}})};d.getInputForMetadataColumn=function(b){return $("#"+d.settings.modalDialogClientId+"_"+b.Name)};d.addLanguageLinkClick=function(){d.fillLanguageInfo(null)};d.editLanguageLinkClick=function(b,a){d.fillLanguageInfo(a)};d.dialogLoaded=function(){d.controls.languageInput.is(":visible")?
d.controls.languageInput.focus():d.getInputForMetadataColumn(d.metadataColumns[0]).focus()};d.saveLanguageClick=function(){d.clearValidators();var b={},a=!0,e=parseInt(d.controls.languageIdHidden.val());0>e&&(d.showValidationMessage(d.controls.languageInput,d.settings.requiredValidationMessage),a=!1);b[d.settings.metadataLanguageIdDataField]=e;$.each(d.metadataColumns,function(e,c){e=$.trim(d.getInputForMetadataColumn(c).val());d.validateMetadataColumn(c,e)||(a=!1);b[c.DataField]=e});if(!a)return!1;
var c=d.findMetadataLanguageById(e);c?$.each(d.metadataColumns,function(a,e){c[e.DataField]=b[e.DataField]}):d.settings.metadataLanguages.push(b);d.saveLanguagesToHidden();d.fillTableRow(b);d.updateTable();d.updateAddButton();return!0};d.getTableRow=function(b){b=f.find("tr:has(td:first input[value='"+b+"']:hidden)");0==b.length&&(b=$("<tr></tr>").appendTo(f));return b};d.fillTableRow=function(b){var a=d.cssClasses,e=b[d.settings.metadataLanguageIdDataField],c=d.getTableRow(e);c.empty().append($("<td></td>").addClass(a.TableColumnLanguage).append($("<input />").attr("type",
"hidden").val(e)).append($("<a></a>").attr("href","javascript:void(0);").text(d.getLanguageTitleById(e)).on("click",function(){d.editLanguageLinkClick(this,e)})));$.each(d.metadataColumns,function(a,e){c.append($("<td></td>").addClass(e.CssClass).text(b[e.DataField]))});c.append($("<td></td>").addClass(a.TableColumnDelete).append($("<a></a>").addClass("ccl-iconlink").addClass(a.TableColumnDeleteImage).attr("href","javascript:void(0);").attr("title",d.settings.deleteRowTooltip).on("click",function(){d.removeLanguageClick(this,
e)}).append($("<img />").attr("src",d.settings.deleteImageUrl).attr("alt",d.settings.deleteRowTooltip).addClass(a.tableColumnDeleteImage))))};d.validateMetadataColumn=function(b,a){var e=!0;b.IsRequired&&0==a.length&&(e=!1,d.showValidationMessage(d.getInputForMetadataColumn(b),d.settings.requiredValidationMessage));return e};d.removeLanguageClick=function(b,a){var e=d.settings.metadataLanguages;$.each(e,function(b,c){return c[d.settings.metadataLanguageIdDataField]==a?(e.splice(b,1),d.saveLanguagesToHidden(),
!1):!0});$(b).parent().parent().remove();d.updateTable();d.updateAddButton()};d.saveLanguagesToHidden=function(){d.controls.languageDataHidden.val(JSON.stringify(d.settings.metadataLanguages))};d.findMetadataLanguageById=function(b){var a=null;$.each(d.settings.metadataLanguages,function(e,c){return c[d.settings.metadataLanguageIdDataField]==b?(a=c,!1):!0});return a};d.getAvailableLanguagesData=function(){return $.grep(d.settings.languages,function(b){return null==d.findMetadataLanguageById(b.Key)})};
d.disableSelectedLanguages=function(){var b=d.controls.languageInput;b.find("option").remove();$.each(d.getAvailableLanguagesData(),function(a,e){b.append($("<option></option>").val(e.Key).text(e.Value))})};d.getLanguageTitleById=function(b){for(index in d.settings.languages)if(d.settings.languages[index].Key==b)return d.settings.languages[index].Value;return""};d.showValidationMessage=function(b,a){$("<div></div>").text(a).addClass(d.cssClasses.ErrorMessage).appendTo(b.parent())};d.clearValidators=
function(){d.controls.modalDialogContainer.find("div."+d.cssClasses.ErrorMessage).remove()};d.fillLanguageInfo=function(b){var a=null;0<=b&&(a=d.findMetadataLanguageById(b));var e=!!a;d.clearValidators();window[d.settings.modalDialogName].setNewTitle(e?d.getLanguageTitleById(b):d.settings.addLanguageDialogTitle);d.controls.languageIdHidden.val(e?a[d.settings.metadataLanguageIdDataField]:-1);d.controls.languageInput.parent().toggle(!e);$.each(d.metadataColumns,function(b,c){d.getInputForMetadataColumn(c).val(e?
a[c.DataField]:"")});e||d.disableSelectedLanguages();window[d.settings.modalDialogName].open()};d.updateTable=function(){var b=d.cssClasses.TableRowAlternate;f.find("tr:even").removeClass(b);f.find("tr:odd").addClass(b);f.parent().toggle(0<f.find("tr:has(td)").length)};d.updateAddButton=function(){d.controls.addLanguageLink.toggle(d.settings.metadataLanguages.length<d.settings.languages.length-1)};return d}
function ObjectInstanceAdministrator(){return{cleanupObject:function(c,d,f){var b=Object.keys(f);$.each(b,function(a,b){void 0===d[b]?delete c[b]:d[b]!=f[b]&&(c[b]=d[b])})},cloneObject:function(c){return Object.create(c)}}}
function ObjectPropertiesInspector(){return{getObjectProperties:function(c){var d=Object.keys(c),f={};$.each(d,function(b,a){f[a]=c[a]});return f},isValuePropertyOfObject:function(c,d){var f=Object.keys(d),b=!1;$.each(f,function(a,e){d[e]===c&&(b=!0)});return b},getPropertiesDelta:function(c,d){var f=Object.keys(d),b=[];$.each(f,function(a,e){c[e]!==d[e]&&b.push({keyValue:e,beforeValue:c[e],afterValue:d[e]})});return b}}}
function ObjectStateValidators(){var c={},d={isUndefinedSafe:function(c,b){return c===b}};c.isNull=function(c){return null===c};c.isUndefined=function(c){return d.isUndefinedSafe(c)};c.isNullOrUndefined=function(d){return c.isUndefined(d)||c.isNull(d)};c.isFunction=function(c){return"function"===typeof c};c.isArray=function(c){return Array.isArray(c)};c.isString=function(c){return"string"===typeof c};c.isNumber=function(c){return"number"===typeof c&&!isNaN(c)};c.isBoolean=function(c){return"boolean"===
typeof c};c.isWhitespace=function(d){return c.isString(d)&&/^\s*$/.test(d)};c.isNullOrWhitespace=function(d){return c.isNullOrUndefined(d)||c.isWhitespace(d)};c.isFileError=function(c){return"undefined"!==typeof FileError&&c instanceof FileError?!0:!1};c.isDomError=function(c){return"undefined"!==typeof DOMError&&c instanceof DOMError?!0:!1};return c}var objectState=ObjectStateValidators();
function OkOrCancel(c){window[c]=this;var d=this,f,b,a,e;d.initialize=function(){f=d.settings;b=d.scripts;a=d.controls;e=a.okButton.val();f.attachInProgressEventManually||a.okButton.click(function(){var a=$(this).parents("form:first");if(a.length&&"undefined"!==typeof a[0].checkValidity?a[0].checkValidity():1)d.toggleInProgressState(!0,f.toggleCancel),CommonFunctions.safeExecuteFunction(b.okButtonClick)})};d.toggleInProgressState=function(b,c){b?(a.okButton.addClass(d.settings.inProgressCssClass),
a.okButton.attr("title",d.settings.inProgressTitle),a.okButton.attr("value","")):(a.okButton.removeAttr("title"),a.okButton.removeClass(d.settings.inProgressCssClass),a.okButton.attr("value",e));a.okButton.prop("disabled",b);c&&a.cancelButton.toggleHyperlink(!b)};return d}
function Pager(c){window[c]=this;var d=this,f,b;d.totalCount=0;d.pageSize=0;d.pageNumber=0;d.initialize=function(){f=d.settings.cssClasses;b=d.settings.terms};d.goToPage=function(a){d.customScripts.goToPage&&d.customScripts.goToPage({pageNumber:a});d.events&&$(document).trigger(d.events.onPageNumberChanged,[c,a])};d.changePageSize=function(a){d.customScripts.changePageSize&&d.customScripts.changePageSize({pageSize:a});d.events&&$(document).trigger(d.events.onPageSizeChanged,[c,a])};d.hide=function(){d.controls.pagerContainer.empty()};
d.getMinAvailablePageSize=function(){return d.settings.pageSizes&&0<d.settings.pageSizes.length?d.settings.pageSizes[0]:0};d.render=function(){var a=d.controls.pagerContainer,e=$("<ul></ul>").attr("class",f.pager),g=Math.ceil(d.totalCount/d.pageSize);a.empty();a.append(e);if(d.mode&d.settings.pagerMode.nextPrev&&0<g){if(1<d.pageNumber){var h=$("<li></li>").attr("class",f.previousNext);var k=d.pageNumber-1;var l=$("<a></a>").attr("href","#").attr("title",b.previous).click(function(){d.goToPage(k);
return!1}).append($("<span></span>").html("&laquo;").attr("class",f.prevArrow));h.append(l)}else h=$("<li></li>").attr("class",f.text).append($("<span></span>").html("&laquo;").attr("class",f.prevArrowDisabled));if(d.pageNumber<g){var m=d.pageNumber+1;l=$("<li></li>").attr("class",f.previousNext).append($("<a></a>").attr("href","#").attr("title",b.next).click(function(){d.goToPage(m);return!1}).append($("<span></span>").html("&raquo;").attr("class",f.nextArrow)))}else l=$("<li></li>").attr("class",
f.text).append($("<span></span>").html("&raquo;").attr("class",f.nextArrowDisabled));e.append(h);d.mode&d.settings.pagerMode.nextPrevBeforeNumericPages&&e.append(l)}if(d.mode&d.settings.pagerMode.numericPages)for(d.mode&d.settings.pagerMode.nextPrevBeforeNumericPages&&e.append($("<li>|</li>").attr("class",f.text)),h=1;h<=g;h++)if(d.pageNumber==h){var n=!1;e.append($("<li></li>").attr("class",f.selectedItem).append($("<span></span>").text(h)))}else d.pageNumber==h||1==h||h==g||Math.abs(d.pageNumber-
h)<=d.settings.pageLinksNearSelectedCount?e.append($("<li></li>").append($("<a>"+h+"</a>").attr("href","#").click({actualPageNumber:h},function(a){d.goToPage(a.data.actualPageNumber);return!1}))):n||(n=!0,e.append($("<li></li>").attr("class",f.text).append("<span>...</span>")));0==(d.mode&d.settings.pagerMode.nextPrevBeforeNumericPages)&&e.append(l);if(d.mode&d.settings.pagerMode.pageSize||d.mode&d.settings.pagerMode.pageSizeDropdown||d.mode&d.settings.pagerMode.pageSizeStaticLabel||d.mode&d.settings.pagerMode.pageInfo){e=
$("<span></span>").attr("class",f.pageSizeChooser);a.append(e);if(d.mode&d.settings.pagerMode.pageInfo){h=d.pageSize*d.pageNumber;h>d.totalCount&&(h=d.totalCount);a=1+d.pageSize*(d.pageNumber-1);if(0==d.pageNumber||0==d.totalCount)a=0;e.append($("<span></span>").text(b.pageInfoLabelTemplate.replace("{0}",a).replace("{1}",h).replace("{2}",d.totalCount)))}a=d.settings.pageSizes;if(d.mode&d.settings.pagerMode.pageSize)for(g=$("<ul></ul>"),e.append(g),g.append($("<li></li>").attr("class",f.pageSizeChooserLabel).text(b.pageSizeChooserLabel)),
h=0;h<a.length;h++)n=a[h]==d.pageSize?$("<li></li>").attr("class",f.selectedItem).text(a[h]):$("<li></li>").append($("<a></a>").attr("href","javascript:"+c+".changePageSize("+a[h]+");").text(a[h])),g.append(n);if(d.mode&d.settings.pagerMode.pageSizeDropdown){h=$("<select></select>");$(h).change(function(){window[c].changePageSize(this.options[this.selectedIndex].value)});e.append(h);for(g=0;g<a.length;g++)n=$("<option></option>").attr("value",a[g]).text(b.pageSizeItemPrefix+" "+a[g]),h.append(n);
h.find("option").each(function(){var a=$(this);if(a.val()==d.pageSize)return a.prop("selected",!0),!1})}d.mode&d.settings.pagerMode.pageSizeStaticLabel&&e.append($("<span/>").text(b.pageSizeItemPrefix+" "+d.pageSize).addClass(f.pageSizeStaticLabel))}};d.createIn=function(a){var b=$("<div></div>").prop("className",f.main);a.append(b);d.controls.pagerContainer=b;d.render()};return d}
(function e$jscomp$0(c,d,f){function a(g,k){if(!d[g]){if(!c[g]){var h="function"==typeof require&&require;if(!k&&h)return h(g,!0);if(e)return e(g,!0);k=Error("Cannot find module '"+g+"'");throw k.code="MODULE_NOT_FOUND",k;}k=d[g]={exports:{}};c[g][0].call(k.exports,function(e){var d=c[g][1][e];return a(d?d:e)},k,k.exports,e$jscomp$0,c,d,f)}return d[g].exports}for(var e="function"==typeof require&&require,g=0;g<f.length;g++)a(f[g]);return a})({1:[function(c,d,f){function b(b){b.fn.perfectScrollbar=
function(b){return this.each(function(){"object"===typeof b||"undefined"===typeof b?e.get(this)||a.initialize(this,b):"update"===b?a.update(this):"destroy"===b&&a.destroy(this)})}}var a=c("../main"),e=c("../plugin/instances");"function"===typeof define&&define.amd?define(["jquery"],b):(c=window.jQuery?window.jQuery:window.$,"undefined"!==typeof c&&b(c));d.exports=b},{"../main":7,"../plugin/instances":18}],2:[function(c,d,f){f.add=function(b,a){if(b.classList)b.classList.add(a);else{var e=b.className.split(" ");
0>e.indexOf(a)&&e.push(a);b.className=e.join(" ")}};f.remove=function(b,a){if(b.classList)b.classList.remove(a);else{var e=b.className.split(" ");a=e.indexOf(a);0<=a&&e.splice(a,1);b.className=e.join(" ")}};f.list=function(b){return b.classList?Array.prototype.slice.apply(b.classList):b.className.split(" ")}},{}],3:[function(c,d,f){var b={e:function(a,b){a=document.createElement(a);a.className=b;return a},appendTo:function(a,b){b.appendChild(a);return a},css:function(a,b,c){if("object"===typeof b){for(var e in b)c=
b[e],"number"===typeof c&&(c=c.toString()+"px"),a.style[e]=c;return a}if("undefined"===typeof c)return window.getComputedStyle(a)[b];e=c;"number"===typeof e&&(e=e.toString()+"px");a.style[b]=e;return a},matches:function(a,b){if("undefined"!==typeof a.matches)return a.matches(b);if("undefined"!==typeof a.matchesSelector)return a.matchesSelector(b);if("undefined"!==typeof a.webkitMatchesSelector)return a.webkitMatchesSelector(b);if("undefined"!==typeof a.mozMatchesSelector)return a.mozMatchesSelector(b);
if("undefined"!==typeof a.msMatchesSelector)return a.msMatchesSelector(b)},remove:function(a){"undefined"!==typeof a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a)},queryChildren:function(a,e){return Array.prototype.filter.call(a.childNodes,function(a){return b.matches(a,e)})}};d.exports=b},{}],4:[function(c,d,f){var b=function(a){this.element=a;this.events={}};b.prototype.bind=function(a,b){"undefined"===typeof this.events[a]&&(this.events[a]=[]);this.events[a].push(b);this.element.addEventListener(a,
b,!1)};b.prototype.unbind=function(a,b){var e="undefined"!==typeof b;this.events[a]=this.events[a].filter(function(c){if(e&&c!==b)return!0;this.element.removeEventListener(a,c,!1);return!1},this)};b.prototype.unbindAll=function(){for(var a in this.events)this.unbind(a)};c=function(){this.eventElements=[]};c.prototype.eventElement=function(a){var e=this.eventElements.filter(function(b){return b.element===a})[0];"undefined"===typeof e&&(e=new b(a),this.eventElements.push(e));return e};c.prototype.bind=
function(a,b,c){this.eventElement(a).bind(b,c)};c.prototype.unbind=function(a,b,c){this.eventElement(a).unbind(b,c)};c.prototype.unbindAll=function(){for(var a=0;a<this.eventElements.length;a++)this.eventElements[a].unbindAll()};c.prototype.once=function(a,b,c){var e=this.eventElement(a),d=function(a){e.unbind(b,d);c(a)};e.bind(b,d)};d.exports=c},{}],5:[function(c,d,f){d.exports=function(){function b(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return b()+
b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()}}()},{}],6:[function(c,d,f){var b=c("./class"),a=c("./dom"),e=f.toInt=function(a){return parseInt(a,10)||0},g=f.clone=function(a){if(null===a)return null;if(a.constructor===Array)return a.map(g);if("object"===typeof a){var b={},e;for(e in a)b[e]=g(a[e]);return b}return a};f.extend=function(a,b){a=g(a);for(var e in b)a[e]=g(b[e]);return a};f.isEditable=function(b){return a.matches(b,"input,[contenteditable]")||a.matches(b,"select,[contenteditable]")||a.matches(b,
"textarea,[contenteditable]")||a.matches(b,"button,[contenteditable]")};f.removePsClasses=function(a){for(var e=b.list(a),c=0;c<e.length;c++){var d=e[c];0===d.indexOf("ps-")&&b.remove(a,d)}};f.outerWidth=function(b){return e(a.css(b,"width"))+e(a.css(b,"paddingLeft"))+e(a.css(b,"paddingRight"))+e(a.css(b,"borderLeftWidth"))+e(a.css(b,"borderRightWidth"))};f.startScrolling=function(a,e){b.add(a,"ps-in-scrolling");"undefined"!==typeof e?b.add(a,"ps-"+e):(b.add(a,"ps-x"),b.add(a,"ps-y"))};f.stopScrolling=
function(a,e){b.remove(a,"ps-in-scrolling");"undefined"!==typeof e?b.remove(a,"ps-"+e):(b.remove(a,"ps-x"),b.remove(a,"ps-y"))};f.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(c,d,f){f=c("./plugin/destroy");var b=c("./plugin/initialize");c=c("./plugin/update");d.exports={initialize:b,
update:c,destroy:f}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(c,d,f){d.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(c,d,f){var b=c("../lib/helper"),a=c("../lib/dom"),
e=c("./instances");d.exports=function(c){var d=e.get(c);d&&(d.event.unbindAll(),a.remove(d.scrollbarX),a.remove(d.scrollbarY),a.remove(d.scrollbarXRail),a.remove(d.scrollbarYRail),b.removePsClasses(c),e.remove(c))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(c,d,f){function b(b,e){var c=function(a){a.stopPropagation()};e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarY,"click",c);e.event.bind(e.scrollbarYRail,"click",function(c){var d=a.toInt(e.scrollbarYHeight/2);
d=e.railYRatio*(c.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top-d)/(e.railYRatio*(e.railYHeight-e.scrollbarYHeight));0>d?d=0:1<d&&(d=1);h(b,"top",(e.contentHeight-e.containerHeight)*d);g(b);c.stopPropagation()});e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarX,"click",c);e.event.bind(e.scrollbarXRail,"click",function(c){var d=a.toInt(e.scrollbarXWidth/2);d=e.railXRatio*(c.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left-d)/(e.railXRatio*(e.railXWidth-
e.scrollbarXWidth));0>d?d=0:1<d&&(d=1);h(b,"left",(e.contentWidth-e.containerWidth)*d-e.negativeScrollAdjustment);g(b);c.stopPropagation()})}var a=c("../../lib/helper"),e=c("../instances"),g=c("../update-geometry"),h=c("../update-scroll");d.exports=function(a){var c=e.get(a);b(a,c)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(c,d,f){function b(a,b){var c=null,d=null,f=function(g){var f=c+(g.pageX-d)*b.railXRatio,h=Math.max(0,b.scrollbarXRail.getBoundingClientRect().left)+
b.railXRatio*(b.railXWidth-b.scrollbarXWidth);b.scrollbarXLeft=0>f?0:f>h?h:f;f=e.toInt(b.scrollbarXLeft*(b.contentWidth-b.containerWidth)/(b.containerWidth-b.railXRatio*b.scrollbarXWidth))-b.negativeScrollAdjustment;l(a,"left",f);k(a);g.stopPropagation();g.preventDefault()},h=function(){e.stopScrolling(a,"x");b.event.unbind(b.ownerDocument,"mousemove",f)};b.event.bind(b.scrollbarX,"mousedown",function(k){d=k.pageX;c=e.toInt(g.css(b.scrollbarX,"left"))*b.railXRatio;e.startScrolling(a,"x");b.event.bind(b.ownerDocument,
"mousemove",f);b.event.once(b.ownerDocument,"mouseup",h);k.stopPropagation();k.preventDefault()})}function a(a,b){var c=null,d=null,f=function(g){var f=c+(g.pageY-d)*b.railYRatio,h=Math.max(0,b.scrollbarYRail.getBoundingClientRect().top)+b.railYRatio*(b.railYHeight-b.scrollbarYHeight);b.scrollbarYTop=0>f?0:f>h?h:f;f=e.toInt(b.scrollbarYTop*(b.contentHeight-b.containerHeight)/(b.containerHeight-b.railYRatio*b.scrollbarYHeight));l(a,"top",f);k(a);g.stopPropagation();g.preventDefault()},h=function(){e.stopScrolling(a,
"y");b.event.unbind(b.ownerDocument,"mousemove",f)};b.event.bind(b.scrollbarY,"mousedown",function(k){d=k.pageY;c=e.toInt(g.css(b.scrollbarY,"top"))*b.railYRatio;e.startScrolling(a,"y");b.event.bind(b.ownerDocument,"mousemove",f);b.event.once(b.ownerDocument,"mouseup",h);k.stopPropagation();k.preventDefault()})}var e=c("../../lib/helper"),g=c("../../lib/dom"),h=c("../instances"),k=c("../update-geometry"),l=c("../update-scroll");d.exports=function(e){var c=h.get(e);b(e,c);a(e,c)}},{"../../lib/dom":3,
"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(c,d,f){function b(b,c){function d(a,e){var d=b.scrollTop;if(0===a){if(!c.scrollbarYActive)return!1;if(0===d&&0<e||d>=c.contentHeight-c.containerHeight&&0>e)return!c.settings.wheelPropagation}d=b.scrollLeft;if(0===e){if(!c.scrollbarXActive)return!1;if(0===d&&0>a||d>=c.contentWidth-c.containerWidth&&0<a)return!c.settings.wheelPropagation}return!0}var g=!1;c.event.bind(b,"mouseenter",function(){g=!0});
c.event.bind(b,"mouseleave",function(){g=!1});var f=!1;c.event.bind(c.ownerDocument,"keydown",function(l){if(!l.isDefaultPrevented||!l.isDefaultPrevented()){var m=e.matches(c.scrollbarX,":focus")||e.matches(c.scrollbarY,":focus");if(g||m){if(m=document.activeElement?document.activeElement:c.ownerDocument.activeElement){if("IFRAME"===m.tagName)m=m.contentDocument.activeElement;else for(;m.shadowRoot;)m=m.shadowRoot.activeElement;if(a.isEditable(m))return}var n=m=0;switch(l.which){case 37:m=-30;break;
case 38:n=30;break;case 39:m=30;break;case 40:n=-30;break;case 33:n=90;break;case 32:n=l.shiftKey?90:-90;break;case 34:n=-90;break;case 35:n=l.ctrlKey?-c.contentHeight:-c.containerHeight;break;case 36:n=l.ctrlKey?b.scrollTop:c.containerHeight;break;default:return}k(b,"top",b.scrollTop-n);k(b,"left",b.scrollLeft+m);h(b);(f=d(m,n))&&l.preventDefault()}}})}var a=c("../../lib/helper"),e=c("../../lib/dom"),g=c("../instances"),h=c("../update-geometry"),k=c("../update-scroll");d.exports=function(a){var e=
g.get(a);b(a,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(c,d,f){function b(a,b){function c(e,c){var d=a.scrollTop;if(0===e){if(!b.scrollbarYActive)return!1;if(0===d&&0<c||d>=b.contentHeight-b.containerHeight&&0>c)return!b.settings.wheelPropagation}d=a.scrollLeft;if(0===c){if(!b.scrollbarXActive)return!1;if(0===d&&0>e||d>=b.contentWidth-b.containerWidth&&0<e)return!b.settings.wheelPropagation}return!0}function d(b,e){var c=
a.querySelector("textarea:hover, .ps-child:hover");if(c){if("TEXTAREA"!==c.tagName&&!window.getComputedStyle(c).overflow.match(/(scroll|auto)/))return!1;var d=c.scrollHeight-c.clientHeight;if(0<d&&!(0===c.scrollTop&&0<e||c.scrollTop===d&&0>e))return!0;e=c.scrollLeft-c.clientWidth;if(0<e&&!(0===c.scrollLeft&&0>b||c.scrollLeft===e&&0<b))return!0}return!1}function f(f){var k=f.deltaX;var l=-1*f.deltaY;if("undefined"===typeof k||"undefined"===typeof l)k=-1*f.wheelDeltaX/6,l=f.wheelDeltaY/6;f.deltaMode&&
1===f.deltaMode&&(k*=10,l*=10);k!==k&&l!==l&&(k=0,l=f.wheelDelta);l=[k,l];k=l[0];l=l[1];!d(k,l)&&(h=!1,b.settings.useBothWheelAxes?b.scrollbarYActive&&!b.scrollbarXActive?(l?g(a,"top",a.scrollTop-l*b.settings.wheelSpeed):g(a,"top",a.scrollTop+k*b.settings.wheelSpeed),h=!0):b.scrollbarXActive&&!b.scrollbarYActive&&(k?g(a,"left",a.scrollLeft+k*b.settings.wheelSpeed):g(a,"left",a.scrollLeft-l*b.settings.wheelSpeed),h=!0):(g(a,"top",a.scrollTop-l*b.settings.wheelSpeed),g(a,"left",a.scrollLeft+k*b.settings.wheelSpeed)),
e(a),h=h||c(k,l))&&(f.stopPropagation(),f.preventDefault())}var h=!1;"undefined"!==typeof window.onwheel?b.event.bind(a,"wheel",f):"undefined"!==typeof window.onmousewheel&&b.event.bind(a,"mousewheel",f)}var a=c("../instances"),e=c("../update-geometry"),g=c("../update-scroll");d.exports=function(e){var c=a.get(e);b(e,c)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(c,d,f){function b(a,b){b.event.bind(a,"scroll",function(){e(a)})}var a=c("../instances"),e=c("../update-geometry");
d.exports=function(e){var c=a.get(e);b(e,c)}},{"../instances":18,"../update-geometry":19}],15:[function(c,d,f){function b(b,c){function d(){var a=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===a.toString().length?null:a.getRangeAt(0).commonAncestorContainer}function f(){l||(l=setInterval(function(){e.get(b)?(h(b,"top",b.scrollTop+w.top),h(b,"left",b.scrollLeft+w.left),g(b)):clearInterval(l)},50))}function k(){l&&(clearInterval(l),l=null);a.stopScrolling(b)}
var l=null,w={top:0,left:0},u=!1;c.event.bind(c.ownerDocument,"selectionchange",function(){b.contains(d())?u=!0:(u=!1,k())});c.event.bind(window,"mouseup",function(){u&&(u=!1,k())});c.event.bind(window,"mousemove",function(e){if(u){var c=e.pageX;e=e.pageY;var d=b.offsetLeft+b.offsetWidth,g=b.offsetTop,h=b.offsetTop+b.offsetHeight;c<b.offsetLeft+3?(w.left=-5,a.startScrolling(b,"x")):c>d-3?(w.left=5,a.startScrolling(b,"x")):w.left=0;e<g+3?(w.top=5>g+3-e?-5:-20,a.startScrolling(b,"y")):e>h-3?(w.top=
5>e-h+3?5:20,a.startScrolling(b,"y")):w.top=0;0===w.top&&0===w.left?k():f()}})}var a=c("../../lib/helper"),e=c("../instances"),g=c("../update-geometry"),h=c("../update-scroll");d.exports=function(a){var c=e.get(a);b(a,c)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(c,d,f){function b(a,b,c,d){var f;function k(b,e){h(a,"top",a.scrollTop-e);h(a,"left",a.scrollLeft-b);g(a)}function l(){z=!0}function m(){z=!1}function n(a){return a.targetTouches&&
1===a.targetTouches.length||a.pointerType&&"mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE?!0:!1}function q(a){if(n(a)){D=!0;var b=a.targetTouches?a.targetTouches[0]:a;H.pageX=b.pageX;H.pageY=b.pageY;y=(new Date).getTime();null!==J&&clearInterval(J);a.stopPropagation()}}function t(e){!D&&b.settings.swipePropagation&&q(e);if(!z&&D&&n(e)){var c=e.targetTouches?e.targetTouches[0]:e,d={pageX:c.pageX,pageY:c.pageY};c=d.pageX-H.pageX;var g=d.pageY-H.pageY;k(c,g);H=d;d=(new Date).getTime();
var h=d-y;0<h&&(f=c/h,K=g/h,y=d);a:{d=a.scrollTop;h=a.scrollLeft;var l=Math.abs(c),m=Math.abs(g);if(m>l){if(0>g&&d===b.contentHeight-b.containerHeight||0<g&&0===d){c=!b.settings.swipePropagation;break a}}else if(l>m&&(0>c&&h===b.contentWidth-b.containerWidth||0<c&&0===h)){c=!b.settings.swipePropagation;break a}c=!0}c&&(e.stopPropagation(),e.preventDefault())}}function B(){!z&&D&&(D=!1,clearInterval(J),J=setInterval(function(){e.get(a)?.01>Math.abs(f)&&.01>Math.abs(K)?clearInterval(J):(k(30*f,30*K),
f*=.8,K*=.8):clearInterval(J)},10))}var H={},y=0;var K=f=void 0;var J=null,z=!1,D=!1;c&&(b.event.bind(window,"touchstart",l),b.event.bind(window,"touchend",m),b.event.bind(a,"touchstart",q),b.event.bind(a,"touchmove",t),b.event.bind(a,"touchend",B));d&&(window.PointerEvent?(b.event.bind(window,"pointerdown",l),b.event.bind(window,"pointerup",m),b.event.bind(a,"pointerdown",q),b.event.bind(a,"pointermove",t),b.event.bind(a,"pointerup",B)):window.MSPointerEvent&&(b.event.bind(window,"MSPointerDown",
l),b.event.bind(window,"MSPointerUp",m),b.event.bind(a,"MSPointerDown",q),b.event.bind(a,"MSPointerMove",t),b.event.bind(a,"MSPointerUp",B)))}var a=c("../../lib/helper"),e=c("../instances"),g=c("../update-geometry"),h=c("../update-scroll");d.exports=function(c){if(a.env.supportsTouch||a.env.supportsIePointer){var d=e.get(c);b(c,d,a.env.supportsTouch,a.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(c,d,f){var b=c("../lib/helper"),
a=c("../lib/class"),e=c("./instances"),g=c("./update-geometry"),h={"click-rail":c("./handler/click-rail"),"drag-scrollbar":c("./handler/drag-scrollbar"),keyboard:c("./handler/keyboard"),wheel:c("./handler/mouse-wheel"),touch:c("./handler/touch"),selection:c("./handler/selection")},k=c("./handler/native-scroll");d.exports=function(c,d){d="object"===typeof d?d:{};a.add(c,"ps-container");var f=e.add(c);f.settings=b.extend(f.settings,d);a.add(c,"ps-theme-"+f.settings.theme);f.settings.handlers.forEach(function(a){h[a](c)});
k(c);g(c)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(c,d,f){function b(b){function c(){e.add(b,"ps-focus")}function d(){e.remove(b,"ps-focus")}this.settings=a.clone(g);this.contentHeight=this.contentWidth=this.containerHeight=this.containerWidth=null;this.isRtl="rtl"===
h.css(b,"direction");this.negativeScrollAdjustment=(this.isNegativeScroll=function(){var a=b.scrollLeft;b.scrollLeft=-1;var e=0>b.scrollLeft;b.scrollLeft=a;return e}())?b.scrollWidth-b.clientWidth:0;this.event=new k;this.ownerDocument=b.ownerDocument||document;this.scrollbarXRail=h.appendTo(h.e("div","ps-scrollbar-x-rail"),b);this.scrollbarX=h.appendTo(h.e("div","ps-scrollbar-x"),this.scrollbarXRail);this.scrollbarX.setAttribute("tabindex",0);this.event.bind(this.scrollbarX,"focus",c);this.event.bind(this.scrollbarX,
"blur",d);this.scrollbarXLeft=this.scrollbarXWidth=this.scrollbarXActive=null;this.scrollbarXBottom=a.toInt(h.css(this.scrollbarXRail,"bottom"));this.scrollbarXTop=(this.isScrollbarXUsingBottom=this.scrollbarXBottom===this.scrollbarXBottom)?null:a.toInt(h.css(this.scrollbarXRail,"top"));this.railBorderXWidth=a.toInt(h.css(this.scrollbarXRail,"borderLeftWidth"))+a.toInt(h.css(this.scrollbarXRail,"borderRightWidth"));h.css(this.scrollbarXRail,"display","block");this.railXMarginWidth=a.toInt(h.css(this.scrollbarXRail,
"marginLeft"))+a.toInt(h.css(this.scrollbarXRail,"marginRight"));h.css(this.scrollbarXRail,"display","");this.railXRatio=this.railXWidth=null;this.scrollbarYRail=h.appendTo(h.e("div","ps-scrollbar-y-rail"),b);this.scrollbarY=h.appendTo(h.e("div","ps-scrollbar-y"),this.scrollbarYRail);this.scrollbarY.setAttribute("tabindex",0);this.event.bind(this.scrollbarY,"focus",c);this.event.bind(this.scrollbarY,"blur",d);this.scrollbarYTop=this.scrollbarYHeight=this.scrollbarYActive=null;this.scrollbarYRight=
a.toInt(h.css(this.scrollbarYRail,"right"));this.scrollbarYLeft=(this.isScrollbarYUsingRight=this.scrollbarYRight===this.scrollbarYRight)?null:a.toInt(h.css(this.scrollbarYRail,"left"));this.scrollbarYOuterWidth=this.isRtl?a.outerWidth(this.scrollbarY):null;this.railBorderYWidth=a.toInt(h.css(this.scrollbarYRail,"borderTopWidth"))+a.toInt(h.css(this.scrollbarYRail,"borderBottomWidth"));h.css(this.scrollbarYRail,"display","block");this.railYMarginHeight=a.toInt(h.css(this.scrollbarYRail,"marginTop"))+
a.toInt(h.css(this.scrollbarYRail,"marginBottom"));h.css(this.scrollbarYRail,"display","");this.railYRatio=this.railYHeight=null}var a=c("../lib/helper"),e=c("../lib/class"),g=c("./default-setting"),h=c("../lib/dom"),k=c("../lib/event-manager"),l=c("../lib/guid"),m={};f.add=function(a){var e=l();a.setAttribute("data-ps-id",e);m[e]=new b(a);return m[e]};f.remove=function(a){delete m[a.getAttribute("data-ps-id")];a.removeAttribute("data-ps-id")};f.get=function(a){return m[a.getAttribute("data-ps-id")]}},
{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(c,d,f){function b(a,b){a.settings.minScrollbarLength&&(b=Math.max(b,a.settings.minScrollbarLength));a.settings.maxScrollbarLength&&(b=Math.min(b,a.settings.maxScrollbarLength));return b}function a(a,b){var e={width:b.railXWidth};e.left=b.isRtl?b.negativeScrollAdjustment+a.scrollLeft+b.containerWidth-b.contentWidth:a.scrollLeft;b.isScrollbarXUsingBottom?e.bottom=b.scrollbarXBottom-
a.scrollTop:e.top=b.scrollbarXTop+a.scrollTop;h.css(b.scrollbarXRail,e);e={top:a.scrollTop,height:b.railYHeight};b.isScrollbarYUsingRight?e.right=b.isRtl?b.contentWidth-(b.negativeScrollAdjustment+a.scrollLeft)-b.scrollbarYRight-b.scrollbarYOuterWidth:b.scrollbarYRight-a.scrollLeft:e.left=b.isRtl?b.negativeScrollAdjustment+a.scrollLeft+2*b.containerWidth-b.contentWidth-b.scrollbarYLeft-b.scrollbarYOuterWidth:b.scrollbarYLeft+a.scrollLeft;h.css(b.scrollbarYRail,e);h.css(b.scrollbarX,{left:b.scrollbarXLeft,
width:b.scrollbarXWidth-b.railBorderXWidth});h.css(b.scrollbarY,{top:b.scrollbarYTop,height:b.scrollbarYHeight-b.railBorderYWidth})}var e=c("../lib/helper"),g=c("../lib/class"),h=c("../lib/dom"),k=c("./instances"),l=c("./update-scroll");d.exports=function(c){var d=k.get(c);d.containerWidth=c.clientWidth;d.containerHeight=c.clientHeight;d.contentWidth=c.scrollWidth;d.contentHeight=c.scrollHeight;if(!c.contains(d.scrollbarXRail)){var f=h.queryChildren(c,".ps-scrollbar-x-rail");0<f.length&&f.forEach(function(a){h.remove(a)});
h.appendTo(d.scrollbarXRail,c)}c.contains(d.scrollbarYRail)||(f=h.queryChildren(c,".ps-scrollbar-y-rail"),0<f.length&&f.forEach(function(a){h.remove(a)}),h.appendTo(d.scrollbarYRail,c));!d.settings.suppressScrollX&&d.containerWidth+d.settings.scrollXMarginOffset<d.contentWidth?(d.scrollbarXActive=!0,d.railXWidth=d.containerWidth-d.railXMarginWidth,d.railXRatio=d.containerWidth/d.railXWidth,d.scrollbarXWidth=b(d,e.toInt(d.railXWidth*d.containerWidth/d.contentWidth)),d.scrollbarXLeft=e.toInt((d.negativeScrollAdjustment+
c.scrollLeft)*(d.railXWidth-d.scrollbarXWidth)/(d.contentWidth-d.containerWidth))):d.scrollbarXActive=!1;!d.settings.suppressScrollY&&d.containerHeight+d.settings.scrollYMarginOffset<d.contentHeight?(d.scrollbarYActive=!0,d.railYHeight=d.containerHeight-d.railYMarginHeight,d.railYRatio=d.containerHeight/d.railYHeight,d.scrollbarYHeight=b(d,e.toInt(d.railYHeight*d.containerHeight/d.contentHeight)),d.scrollbarYTop=e.toInt(c.scrollTop*(d.railYHeight-d.scrollbarYHeight)/(d.contentHeight-d.containerHeight))):
d.scrollbarYActive=!1;d.scrollbarXLeft>=d.railXWidth-d.scrollbarXWidth&&(d.scrollbarXLeft=d.railXWidth-d.scrollbarXWidth);d.scrollbarYTop>=d.railYHeight-d.scrollbarYHeight&&(d.scrollbarYTop=d.railYHeight-d.scrollbarYHeight);a(c,d);d.scrollbarXActive?g.add(c,"ps-active-x"):(g.remove(c,"ps-active-x"),d.scrollbarXWidth=0,d.scrollbarXLeft=0,l(c,"left",0));d.scrollbarYActive?g.add(c,"ps-active-y"):(g.remove(c,"ps-active-y"),d.scrollbarYHeight=0,d.scrollbarYTop=0,l(c,"top",0))}},{"../lib/class":2,"../lib/dom":3,
"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(c,d,f){var b=c("./instances"),a=document.createEvent("Event"),e=document.createEvent("Event"),g=document.createEvent("Event"),h=document.createEvent("Event"),k=document.createEvent("Event"),l=document.createEvent("Event"),m=document.createEvent("Event"),n=document.createEvent("Event"),p=document.createEvent("Event"),r=document.createEvent("Event"),w,u;a.initEvent("ps-scroll-up",!0,!0);e.initEvent("ps-scroll-down",!0,!0);g.initEvent("ps-scroll-left",
!0,!0);h.initEvent("ps-scroll-right",!0,!0);k.initEvent("ps-scroll-y",!0,!0);l.initEvent("ps-scroll-x",!0,!0);m.initEvent("ps-x-reach-start",!0,!0);n.initEvent("ps-x-reach-end",!0,!0);p.initEvent("ps-y-reach-start",!0,!0);r.initEvent("ps-y-reach-end",!0,!0);d.exports=function(c,d,f){if("undefined"===typeof c)throw"You must provide an element to the update-scroll function";if("undefined"===typeof d)throw"You must provide an axis to the update-scroll function";if("undefined"===typeof f)throw"You must provide a value to the update-scroll function";
"top"===d&&0>=f&&(c.scrollTop=f=0,c.dispatchEvent(p));"left"===d&&0>=f&&(c.scrollLeft=f=0,c.dispatchEvent(m));var v=b.get(c);"top"===d&&f>=v.contentHeight-v.containerHeight&&(f=v.contentHeight-v.containerHeight,1>=f-c.scrollTop?f=c.scrollTop:c.scrollTop=f,c.dispatchEvent(r));"left"===d&&f>=v.contentWidth-v.containerWidth&&(f=v.contentWidth-v.containerWidth,1>=f-c.scrollLeft?f=c.scrollLeft:c.scrollLeft=f,c.dispatchEvent(n));w||(w=c.scrollTop);u||(u=c.scrollLeft);"top"===d&&f<w&&c.dispatchEvent(a);
"top"===d&&f>w&&c.dispatchEvent(e);"left"===d&&f<u&&c.dispatchEvent(g);"left"===d&&f>u&&c.dispatchEvent(h);"top"===d&&(c.scrollTop=w=f,c.dispatchEvent(k));"left"===d&&(c.scrollLeft=u=f,c.dispatchEvent(l))}},{"./instances":18}],21:[function(c,d,f){var b=c("../lib/helper"),a=c("../lib/dom"),e=c("./instances"),g=c("./update-geometry"),h=c("./update-scroll");d.exports=function(c){var d=e.get(c);d&&(d.negativeScrollAdjustment=d.isNegativeScroll?c.scrollWidth-c.clientWidth:0,a.css(d.scrollbarXRail,"display",
"block"),a.css(d.scrollbarYRail,"display","block"),d.railXMarginWidth=b.toInt(a.css(d.scrollbarXRail,"marginLeft"))+b.toInt(a.css(d.scrollbarXRail,"marginRight")),d.railYMarginHeight=b.toInt(a.css(d.scrollbarYRail,"marginTop"))+b.toInt(a.css(d.scrollbarYRail,"marginBottom")),a.css(d.scrollbarXRail,"display","none"),a.css(d.scrollbarYRail,"display","none"),g(c),h(c,"top",c.scrollTop),h(c,"left",c.scrollLeft),a.css(d.scrollbarXRail,"display",""),a.css(d.scrollbarYRail,"display",""))}},{"../lib/dom":3,
"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]);
function PersonActivityLogger(c){function d(){for(var b=new IframeIterator(window.top.document);b.hasNext();)if(b.next().hasFocus())return!0;return!1}function f(b){if(!1!==d()){b.forEach(function(a){a.DateTime=(new Date).toISOString()});var a={};c.antiForgery&&(a[c.antiForgery.headerName]=c.antiForgery.headerValue);CCL.CommonFunctions.safeAjaxPost({url:c.serviceUrl,data:b,headers:a})}}return{initialize:function(b,a){setInterval(function(){f(a)},1E3*b);f(a)}}}
(function(c,d){function f(e,c,d,f){var h={};h[d.format]=d.url;e.jPlayer("setMedia",h);if(d.isVideo){c.css({"line-height":0});h=a(c);var k=b(c);f.jPlayer.flash.used||k.add(h).removeAttr("style");f.jPlayer.status.noFullWindow&&(f=$(e.jPlayer("option","cssSelectorAncestor")),f.find(".jp-screen-control").hide(),f.find(".jp-bar").css({right:"0"}));0<k.length?(d=d.width?d.width:c.width(),e.jPlayer("option","size",{width:d+"px",height:Math.round(d/16*9)+"px"}),c.css({position:"relative"})):g.commonSettings.isIpad?
0===c.find("canvas").length&&(e=$("<canvas>"),e.css({height:"auto"}),c.prepend(e),c.css({position:"relative","padding-top":"6.2%"})):h.css({position:"inherit"})}}function b(a){return a.find("object, embed")}function a(a){return a.find("video")}function e(a,b,e){$("#"+a).find(".jp-play").prop("title",b?e.pause:e.play)}var g=c.PlayerManager={commonSettings:d,addPlayer:function(c,d){$("#"+d.playerContainerId).on("click",function(a){a.stopPropagation()});var h=!1;return c.jPlayer({ready:function(a){f($(this),
c,d,a)},ended:function(a){f($(this),c,d,a)},error:function(a){if(a.jPlayer.error.type===$.jPlayer.error.URL)if(d.fallbackUrl&&!h){d.url=d.fallbackUrl;h=!0;var b=d.url,e=$("#"+d.playerContainerId).find(".jp-title > a");e.prop("href",b,b);e[0].setAttribute("onclick","javascript:window.open('"+b+"'); return false;");f($(this),c,d,a)}else a='<div class="'+d.cssClassFeedback+'">'+d.terms.contentNotAvailable+"</div>",$(this).closest(".jp-flat-video, .jp-flat-audio").html(a).removeClass()},swfPath:g.commonSettings.swfPath,
cssSelectorAncestor:"#"+d.playerContainerId,useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!0,remainingDuration:!0,keyEnabled:!0,keyBindings:{loop:null,muted:null,volumeUp:null,volumeDown:null},supplied:d.format,size:d.isVideo?{width:"100%",height:0<b(c).length?"100%":"auto",cssClass:d.cssClassSize?d.cssClassSize:g.commonSettings.defaultCssClassSize}:{},sizeFull:d.isVideo?{cssClass:"jp-flat-video-full"}:{},autohide:d.isVideo?{full:!1,restored:!1}:{},noFullWindow:{msie:/msie/,ipad:/ipad.*?os [0-4]\./,
iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/}}).on($.jPlayer.event.play,function(f){d.isVideo&&!f.jPlayer.flash.used&&b(c).add(a(c)).removeAttr("style");d.isVideo&&$(this).jPlayer("option","autohide",{full:!0,restored:!0});g.commonSettings.isIpad||a(c).css({position:"inherit"});e(d.playerContainerId,!0,d.terms);$(this).jPlayer("pauseOthers")}).on($.jPlayer.event.pause,
function(){d.isVideo&&$(this).jPlayer("option","autohide",{full:!1,restored:!1});e(d.playerContainerId,!1,d.terms)}).on($.jPlayer.event.resize,function(e){if(d.isVideo&&!e.jPlayer.flash.used){b(c).add(a(c)).removeAttr("style");c.css({position:e.jPlayer.options.fullScreen||e.jPlayer.options.fullWindow?"":"relative"});g.commonSettings.isIpad||a(c).css({position:"inherit"});e=e.jPlayer.options.fullScreen||e.jPlayer.options.fullWindow;var f=d.terms;$("#"+d.playerContainerId).find(".jp-full-screen").prop("title",
e?f.restoreScreen:f.fullScreen)}}).on($.jPlayer.event.click,function(a){d.isVideo&&(a.jPlayer.status.paused?$(this).jPlayer("play"):$(this).jPlayer("pause"))})}}})(window);
function ProgressBar(c){window[c]=this;var d=this,f=!0,b,a;d.initialize=function(){b=d.settings;a=d.controls;void 0!==b.showLabel&&(f=b.showLabel);a.bar.find(".ui-progressbar-value").remove();a.bar.progressbar({value:b.percent});f&&a.labelContainer.html(b.percent+"%")};d.setPercent=function(b){a.bar.progressbar("option",{value:b});f&&a.labelContainer.html(b+"%")};d.setToolTip=function(b){a.bar.attr("title",b)};return d}
(function(c){c.ProgressCircle=function(c,f,b){function a(a,b,e){var c=document.createElementNS("http://www.w3.org/2000/svg",a);c.attr=function(a,b){c.setAttributeNS(null,a,b);return c};b&&c.attr("class",b);e.appendChild(c);return c}function e(a){b?h.textContent=Math.round(a.done/a.total*100)+"%":(k.textContent=a.done,l.textContent="/"+a.total);if(0===a.done)d.attr("d"," ");else{a=a.done/a.total*Math.PI*2;var e=["M",50,5];a>Math.PI&&(e=e.concat(["A",45,45,0,0,1,50,95]));e=e.concat(["A",45,45,0,0,1,
50+45*Math.cos(a-Math.PI/2),50+45*Math.sin(a-Math.PI/2)]);d.attr("d",e.join(" "))}}b=b||!1;c=a("svg","itsl-progress-circle",c).attr("viewBox","0 0 100 100");a("path","itsl-progress-circle__outer",c).attr("d","M 50 5 A 45 45 0 1 1 49.999 5");var d=a("path","itsl-progress-circle__progress",c);if(b)var h=a("text","itsl-progress-circle__percent",c).attr("x",50).attr("y",50);else{var k=a("text","itsl-progress-circle__done",c).attr("x",25).attr("y",65);var l=a("text","itsl-progress-circle__total",c).attr("x",
50).attr("y",65)}e(f);return{update:e}}})(CCL||(CCL={}));
function QuotaBarInitializer(c,d,f,b,a){var e={},g={};e.safeBarWidth=c;e.warningBarWidth=d;e.unusedSpaceBarWidth=f;e.literals={};e.functionFinder=FunctionFinder();e.windowWidth={small:480,large:960};e.thresholdTextWidth={small:10,medium:15,large:20};e.positionerSelectors={leftBufferId:"#quota-left-buffer",warningThresholdTextId:"#quota-warning-threshold-text",middleBufferId:"#quota-middle-buffer",dangerThresholdTextId:"#quota-danger-threshold-text",rightBufferId:"#quota-right-buffer",safeBarId:"#quota-safe-bar",
warningBarId:"#quota-warning-bar",dangerBarId:"#quota-danger-bar",unusedSpaceBarId:"#quota-unused-space-bar"};e.literalsSelectors={warningThresholdTextId:"#quota-warning-threshold-text",dangerThresholdTextId:"#quota-danger-threshold-text",currentUsageTextId:"#quota-current-usage-text"};g.updateUsedSpace=function(a,b){e.unusedSpaceBarWidth=100-a;e.initAndRunPositioner();e.literals.currentUsageLiteral=b;e.literals.setLiteralsOnTextElements()};e.initialize=function(){e.initializeLiterals();e.initAndRunPositioner();
e.attachResizeEvent();void 0!==a.OnControlInitialization&&(a.OnControlInitialization=e.functionFinder.getFunctionByName(a.OnControlInitialization),a.OnControlInitialization(g))};e.initializeLiterals=function(){e.literals=QuotaBarLiterals(b,e.literalsSelectors);e.literals.setLiteralsOnTextElements()};e.attachResizeEvent=function(){$(window).resize(function(){e.initAndRunPositioner()})};e.initAndRunPositioner=function(){var a=e.calculateThresholdTextWidth();QuotaBarPositioner(e.positionerSelectors,
a).positionElements(e.safeBarWidth,e.warningBarWidth,e.unusedSpaceBarWidth)};e.calculateThresholdTextWidth=function(){var a=$(window).width();return a>=e.windowWidth.large?e.thresholdTextWidth.small:a<e.windowWidth.large&&a>=e.windowWidth.small?e.thresholdTextWidth.medium:a<e.windowWidth.small?e.thresholdTextWidth.large:e.thresholdTextWidth.small};e.initialize();return g}
function QuotaBarLiterals(c,d){contract.require(!objectState.isNullOrUndefined(c),"argument 'translations' is not defined");contract.require(!objectState.isNullOrUndefined(c.WarningThreshold),"argument 'translations.WarningThreshold' is not defined");contract.require(!objectState.isNullOrUndefined(c.DangerThreshold),"argument 'translations.DangerThreshold' is not defined");contract.require(!objectState.isNullOrUndefined(c.CurrentUsage),"argument 'translations.CurrentUsage' is not defined");contract.require(!objectState.isNullOrUndefined(d),
"argument 'selectors' is not defined");contract.require(!objectState.isNullOrUndefined(d.warningThresholdTextId),"argument 'selectors.warningThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(d.dangerThresholdTextId),"argument 'selectors.dangerThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(d.currentUsageTextId),"argument 'selectors.currentUsageTextId' is not defined");var f={};f.warningThresholdLiteral=c.WarningThreshold;f.dangerThresholdLiteral=
c.DangerThreshold;f.currentUsageLiteral=c.CurrentUsage;f.warningThresholdTextElement=$(d.warningThresholdTextId);f.dangerThresholdTextElement=$(d.dangerThresholdTextId);f.currentUsageTextElement=$(d.currentUsageTextId);f.setLiteralsOnTextElements=function(){f.warningThresholdTextElement.text(f.warningThresholdLiteral);f.dangerThresholdTextElement.text(f.dangerThresholdLiteral);f.currentUsageTextElement.text(f.currentUsageLiteral)};return f}
function QuotaBarPositioner(c,d){contract.require(!objectState.isNullOrUndefined(c),"argument 'selectors' is not defined");contract.require(!objectState.isNullOrUndefined(c.leftBufferId),"argument 'selectors.leftBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(c.warningThresholdTextId),"argument 'selectors.warningThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(c.middleBufferId),"argument 'selectors.middleBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(c.dangerThresholdTextId),
"argument 'selectors.dangerThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(c.rightBufferId),"argument 'selectors.rightBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(c.safeBarId),"argument 'selectors.safeBarId' is not defined");contract.require(!objectState.isNullOrUndefined(c.warningBarId),"argument 'selectors.warningBarId' is not defined");contract.require(!objectState.isNullOrUndefined(c.dangerBarId),"argument 'selectors.dangerBarId' is not defined");
contract.require(!objectState.isNullOrUndefined(c.unusedSpaceBarId),"argument 'selectors.unusedSpaceBarId' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'thresholdTextWidth' is not defined");contract.require(50>=d,"argument 'thresholdTextWidth' can't be greater than 50");var f={},b={};f.leftBufferElement=$(c.leftBufferId);f.warningThresholdTextElement=$(c.warningThresholdTextId);f.middleBufferElement=$(c.middleBufferId);f.dangerThresholdTextElement=$(c.dangerThresholdTextId);
f.rightBufferElement=$(c.rightBufferId);f.safeBarElement=$(c.safeBarId);f.warningBarElement=$(c.warningBarId);f.dangerBarElement=$(c.dangerBarId);f.unusedSpaceBarElement=$(c.unusedSpaceBarId);b.widths={};b.widths.header={leftBuffer:null,warningThreshold:null,middleBuffer:null,dangerThreshold:null,rightBuffer:null};b.widths.bars={safe:null,warning:null,danger:null,unusedSpace:null};b.extraSpaceTakenByThresholdText=d/2;f.positionElements=function(a,e,c){contract.require(!objectState.isNullOrUndefined(a),
"argument 'safeBarWidth' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'warningBarWidth' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'unusedSpaceBarWidth' is not defined");contract.require(100>=a+e,"sum of 'safeBarWidth' and 'warningBarWidth' can't be greater than 100");contract.require(100>=c,"argument 'unusedSpaceBarWidth' can't be greater than 100");b.calculateWidthsOfHeaderElements(a,e);b.calculateWidthsOfBars(a,e,c);b.setWidthsOfHeaderElements();
b.setWidthsOfBars(c);b.determineWarningElementsVisibility(a,c);b.determineDangerElementsVisibility(a,e,c)};b.calculateWidthsOfHeaderElements=function(a,e){b.calculateLeftBufferWidth(a);b.widths.header.warningThreshold=d;b.calculateMiddleBufferWidth(a,e);b.widths.header.dangerThreshold=d;b.calculateRightBufferWidth()};b.calculateLeftBufferWidth=function(a){b.widths.header.leftBuffer=b.ensureBufferWidthIsInBounds(a-b.extraSpaceTakenByThresholdText)};b.calculateMiddleBufferWidth=function(a,e){e=a+e+
b.extraSpaceTakenByThresholdText;100<e&&(e=100);b.widths.header.middleBuffer=b.ensureBufferWidthIsInBounds(e-(a+b.extraSpaceTakenByThresholdText)-d)};b.ensureBufferWidthIsInBounds=function(a){a=b.ensureBufferWidthIsNotBiggerThanMaxWidth(a);return b.ensureBufferWidthIsNotNegative(a)};b.ensureBufferWidthIsNotBiggerThanMaxWidth=function(a){var b=100-2*d;return b<a?b:a};b.ensureBufferWidthIsNotNegative=function(a){return 0>a?0:a};b.calculateRightBufferWidth=function(){b.widths.header.rightBuffer=b.ensureBufferWidthIsNotNegative(100-
b.widths.header.leftBuffer-b.widths.header.warningThreshold-b.widths.header.middleBuffer-b.widths.header.dangerThreshold)};b.calculateWidthsOfBars=function(a,e,c){b.widths.bars.safe=a;b.widths.bars.warning=e;b.widths.bars.danger=100-a-e;b.widths.bars.unusedSpace=c};b.setWidthsOfHeaderElements=function(){f.leftBufferElement.width(b.convertToPercentageString(b.widths.header.leftBuffer));f.warningThresholdTextElement.width(b.convertToPercentageString(b.widths.header.warningThreshold));f.middleBufferElement.width(b.convertToPercentageString(b.widths.header.middleBuffer));
f.dangerThresholdTextElement.width(b.convertToPercentageString(b.widths.header.dangerThreshold));f.rightBufferElement.width(b.convertToPercentageString(b.widths.header.rightBuffer))};b.setWidthsOfBars=function(a){f.safeBarElement.width(b.convertToPercentageString(b.widths.bars.safe));f.warningBarElement.width(b.convertToPercentageString(b.widths.bars.warning));f.dangerBarElement.width(b.convertToPercentageString(b.widths.bars.danger));f.unusedSpaceBarElement.width(b.convertToPercentageString(a))};
b.convertToPercentageString=function(a){return a+"%"};b.determineWarningElementsVisibility=function(a,b){100-b<=a?(f.warningThresholdTextElement.hide(),f.warningBarElement.hide()):(f.warningThresholdTextElement.show(),f.warningBarElement.show())};b.determineDangerElementsVisibility=function(a,b,c){100-c<=a+b?(f.dangerThresholdTextElement.hide(),f.dangerBarElement.hide()):(f.dangerThresholdTextElement.show(),f.dangerBarElement.show())};return f}
function CclResponsiveGrid(c){function d(){r=!1;g.trigger(CclResponsiveGrid.LoadingCompletedEventName)}function f(a){var b=l.scrollTop(),e=l.scrollLeft(),c=g.offset();c.frameTop=0;c.frameLeft=0;if(m){var d=$('iframe[name="mainmenu"]',l[0].document).offset();c.frameTop=d.top;c.frameLeft=d.left}d=c.top+c.frameTop+g.outerHeight()-h.outerHeight();b>=c.top+c.frameTop&&b<d?(h.hasClass(n)||(k.height(h.height()).show(),h.css("width",h.width()).addClass(n)),a?h.css("top",b-c.frameTop):h.css("left",c.left-
e)):h.hasClass(n)&&(k.hide(),h.removeClass(n).css("top","").css("left","").css("width",""))}function b(){h.hasClass(n)&&(h.removeClass(n).css("width",""),k.height(h.height()),h.css("width",h.width()).addClass(n))}function a(a,b){b&&(a+="[value='"+b+"']");return g.find(a)}window[c]=this;var e=this;e.name=c;e.gridClientID=null;e.pageSize=null;e.pageNumber=null;e.pagerInstanceName=null;e.cclGridConstants=null;e.pageNumberHiddenClientID=null;e.pageSizeHiddenClientID=null;e.preferenceCategoryName=null;
e.selectingHiddenClientID=null;e.sortingHiddenClientID=null;e.filteringHiddenClientID=null;e.selectColumn=null;e.selectedRow=null;e.ajaxSettings=null;e.totalCount=0;e.freezeToolbar=!1;e.scrollToControlOnPagination=!1;e.filteringPreference=null;e.sortingProperty=null;e.isIos=!1;e.isReorderModeAvailable=!1;e.orderProperty=null;e.reorderTogglerClientId=null;e.isReorderModeOn=!1;e.isReorderModeHandlerAttached=!1;var g,h,k,l=$(window),m=!1,n,p=0,r=!1;e.initialize=function(){g=$("#"+e.gridClientID);h=g.find("."+
e.cclGridConstants.cssClasses.toolbar);e.rowCheckBoxesSelector="."+e.cclGridConstants.cssClasses.gridRow+" ."+e.cclGridConstants.cssClasses.selectColumn+" input[type=checkbox]";e.headerRowCheckBoxesSelector="."+e.cclGridConstants.cssClasses.headerGridRow+" ."+e.cclGridConstants.cssClasses.selectColumn+" input[type=checkbox]";e.pageSizeHidden=document.getElementById(e.pageSizeHiddenClientID);e.pageNumberHidden=document.getElementById(e.pageNumberHiddenClientID);e.sortingHidden=document.getElementById(e.sortingHiddenClientID);
e.filteringHidden=document.getElementById(e.filteringHiddenClientID);e.selectingHidden=document.getElementById(e.selectingHiddenClientID);e.restoreState();e.attachEvents();e.ajaxSettings.useAjaxMode&&e.ajaxSettings.dataSourceWebMethodUrl&&!e.ajaxSettings.delayedInitialization&&e.refresh();if(e.freezeToolbar&&h.length){n=e.cclGridConstants.cssClasses.toolbarFreeze;k=$('<div style="display:none;"/>').attr("class",h.attr("class")).insertAfter(h);if(e.isIos&&(m=window.top!=window)){l=$(window.top);var a=
function(){f(!0)};l.on("scroll",a);$(window).on("unload",function(){l.off("scroll",a)})}var c=new CCL.CallbackDebouncer(f);$(window).scroll(function(){c.invokeCallback(void 0,100)}).resize(function(){b()})}};e.useAjaxMode=function(){return e.ajaxSettings&&e.ajaxSettings.useAjaxMode};e.goToPage=function(a){e.clearSelection();e.pageNumber=a;e.refresh();e.scrollAfterPagination()};e.sort=function(a){e.sortingProperty!=a&&(e.sortingProperty=a,e.goToPage(1))};e.filter=function(a){e.filteringPreference!=
a&&(e.filteringPreference=a,e.goToPage(1))};e.changePageSize=function(a){e.pageSize=a;e.goToPage(1)};e.restoreState=function(){null!=e.pageSizeHidden&&(e.pageSize=parseInt(e.pageSizeHidden.value,10));null!=e.pageNumberHidden&&(e.pageNumber=parseInt(e.pageNumberHidden.value,10));null!=e.sortingHidden&&(e.sortingProperty=e.sortingHidden.value);null!=e.filteringHidden&&(e.filteringPreference=e.filteringHidden.value)};e.saveState=function(){null!=e.pageSizeHidden&&(e.pageSizeHidden.value=e.pageSize);
null!=e.pageNumberHidden&&(e.pageNumberHidden.value=e.pageNumber);null!=e.sortingHidden&&(e.sortingHidden.value=e.sortingProperty);null!=e.filteringHidden&&(e.filteringHidden.value=e.filteringPreference)};e._addRemoveSelectedValue=function(a,b){b?CCL.CommonFunctions.addIdToHidden($(e.selectingHidden),a):CCL.CommonFunctions.removeIdFromHidden($(e.selectingHidden),a)};e.toggleSelect=function(a){e._applySelectedRowClass(a.parentNode.parentNode,a.checked);e.updateHeaderRowCheckBoxSelection()};e.updateHeaderRowCheckBoxSelection=
function(){var b=!0;a(e.rowCheckBoxesSelector).each(function(a,c){b&&!c.checked&&(b=!1);e._addRemoveSelectedValue(c.value,c.checked)});a(e.headerRowCheckBoxesSelector).prop("checked",b)};e.getSelectedValues=function(){return null!=e.selectingHidden&&0<e.selectingHidden.value.length?e.selectingHidden.value.slice(0,e.selectingHidden.value.length-1).split(","):[]};e.getAllValues=function(){var a=[];e.getRows().each(function(){a.push($(this).data(e.cclGridConstants.dataAttributes.id))});return a};e.replaceKeyValue=
function(b,c){a(e.rowCheckBoxesSelector,b).each(function(a,d){d.value=c;d.checked&&(e._addRemoveSelectedValue(b,!1),e._addRemoveSelectedValue(c,!0))});var d=e.cclGridConstants.cssClasses.gridRow+"-";g.find("."+d+b+":first").removeClass(d+b).addClass(d+c)};e.isHeaderExist=function(){return g.find("."+e.cclGridConstants.cssClasses.headerGridRow).length};e.getRows=function(){return g.find("."+e.cclGridConstants.cssClasses.gridRow)};e.getSelectedRows=function(){return g.find("."+e.cclGridConstants.cssClasses.selectedRow)};
e.getRowById=function(a){return g.find("."+e.cclGridConstants.cssClasses.gridRow+"[data-"+e.cclGridConstants.dataAttributes.id+"="+a+"]:first")};e.deleteRowById=function(a,b){e.getRowById(a).remove();b&&eval(b)};e.getRowsContainer=function(){return g.find("."+e.cclGridConstants.cssClasses.gridRowsContainer+":first")};e.getRows=function(){return e.getRowsContainer().find("."+e.cclGridConstants.cssClasses.gridRow)};e.getRowsCount=function(){return e.getRows().length};e.toggleRowStatus=function(a,b){return e.getRowById(a).toggleClass(e.cclGridConstants.cssClasses.inactiveRow,
!b)};e.getGridElement=function(){return g};e.getToolbarElement=function(){return h};e.disableToolbarItem=function(a){a=e.getToolbarElement().find(a);0<a.length&&$(a.parent("li")).addClass("disabled")};e.getFeedback=function(){return window[e.feedbackInstanceName]};e.clearSelection=function(){null!=e.selectingHidden&&(e.selectingHidden.value="")};e._applySelectedRowClass=function(a,b){b?(b=e.cclGridConstants.cssClasses.selectedRow,a.className=a.className.replace(b,"").replace(/^\s+|\s+$/,""),a.className=
(a.className+" "+b).replace(/^\s+|\s+$/,"")):a.className=a.className.replace(e.cclGridConstants.cssClasses.selectedRow,"").replace(/^\s+|\s+$/,"")};e.toggleSelectAll=function(b){a(e.rowCheckBoxesSelector).each(function(a,c){c.checked=b;e._addRemoveSelectedValue(c.value,b);e._applySelectedRowClass(c.parentNode.parentNode,b)});a(e.headerRowCheckBoxesSelector).prop("checked",b)};e.toggleDisableAll=function(b){a(e.rowCheckBoxesSelector).each(function(a,e){e.disabled=b});a(e.headerRowCheckBoxesSelector).prop("disabled",
b)};e.addGridMessage=function(a){e.removeGridMessage();e.removeEmptyText();var b=e.getRowsContainer();a=$("<div></div>").addClass(e.cclGridConstants.cssClasses.gridText).html(a);b.before(a)};e.addGridLoadingMessage=function(){e.addGridMessage(e.cclGridConstants.terms.ajaxLoadingText)};e.removeGridMessage=function(){g.find("."+e.cclGridConstants.cssClasses.gridText+":first").remove()};e.refresh=function(){e.saveState();e.updateFreezeState();if(e.ajaxSettings.useAjaxMode){e.addGridLoadingMessage();
if(e.ajaxSettings.useChunkLoading&&0<e.ajaxSettings.chunkSize){p=0;var a=e.getRowsContainer();a.empty();a.css("display","none");return e.refreshChunks()}r=!0;a=$.extend({pageNumber:e.pageNumber,pageSize:e.pageSize,sort:e.sortingProperty,filter:e.filteringPreference},this._getParams());return CCL.CommonFunctions.safeAjaxPost({url:e.ajaxSettings.dataSourceWebMethodUrl,data:a,dataType:"json",success:function(a){e.removeGridMessage();e.render(a);e.updateFreezeState();d()},error:function(){e.addGridMessage(e.cclGridConstants.terms.ajaxErrorText);
d()}})}e.postbackFunction()};e.refreshChunks=function(){0===p&&(r=!0);var a=$.extend({pageNumber:e.pageNumber,pageSize:e.pageSize,sort:e.sortingProperty,filter:e.filteringPreference,chunkNumber:p,chunkSize:e.ajaxSettings.chunkSize},this._getParams());return $.when(CCL.CommonFunctions.safeAjaxPost({url:e.ajaxSettings.dataSourceWebMethodUrl,data:a,dataType:"json"})).done(function(a){"undefined"!==typeof a.noChunks?(a.noChunks?(e.removeGridMessage(),e.render(a,!0),e.updateFreezeState(),d()):(p++,e.render(a,
!0),e.refreshChunks()),e.getRowsContainer().css("display","")):(e.removeGridMessage(),e.addGridMessage(e.cclGridConstants.terms.ajaxErrorText))}).fail(function(){e.removeGridMessage();e.addGridMessage(e.cclGridConstants.terms.ajaxErrorText);d()})};e.isLoadingInProgress=function(){return r};e.scrollAfterPagination=function(){!0===e.scrollToControlOnPagination?$(window).scrollTop($("#"+e.gridClientID).offset().top):$(window).scrollTop(0)};e._getParams=function(){var a={};$.each(e.ajaxSettings.dataSourceWebMethodParams,
function(b,e){a[b]=e});return a};e.getRowPrimaryKeyValue=function(a){return e.getCurrentRow(a).find("."+e.cclGridConstants.cssClasses.rowDetailsColumn+" ."+e.cclGridConstants.cssClasses.primaryKey).val()};e.getRowPrimaryKeyValueByIndex=function(a){return e.getRowsContainer().find("."+e.cclGridConstants.cssClasses.gridRow+":eq("+a+") ").find("."+e.cclGridConstants.cssClasses.rowDetailsColumn+" ."+e.cclGridConstants.cssClasses.primaryKey).val()};e.getRowPrimaryKeyValueByRow=function(a){return a.find("."+
e.cclGridConstants.cssClasses.rowDetailsColumn+" ."+e.cclGridConstants.cssClasses.primaryKey).val()};e.getRowIndex=function(a){return e.getCurrentRow(a).find("."+e.cclGridConstants.cssClasses.rowDetailsColumn+" ."+e.cclGridConstants.cssClasses.rowIndex).val()};e.getCurrentRow=function(a){return $(a).parents("."+e.cclGridConstants.cssClasses.gridRow)};e.setMode=function(a){e.getRowsContainer().attr("class",e.cclGridConstants.cssClasses.gridRowsContainer+" "+a)};e.render=function(a,b){b="undefined"!==
typeof b?b:!1;e.totalCount=b?e.totalCount+a.virtualCount:a.virtualCount;e.reInitializePager(e.pageNumber,e.pageSize,e.totalCount);var c=e.getRowsContainer();b?c.append(a.gridData):c.html(a.gridData);e.isReorderModeAvailable&&$("#"+e.reorderTogglerClientId).parent("li").removeClass(e.cclGridConstants.cssClasses.selectedItem);0<e.orderProperty.length&&(e.isReorderModeAvailable=0<=e.sortingProperty.indexOf(e.orderProperty)&&1<e.totalCount,e.attachReorderModeHandler(),0<e.reorderTogglerClientId.length&&
e.toggleReorderTogglerElement($("#"+e.reorderTogglerClientId),e.isReorderModeAvailable),"Auto"==e.reorderModeAjaxSettings.reorderMode&&e.toggleReorderMode());g.trigger("datachanged")};e.addNewRow=function(){return CCL.CommonFunctions.safeAjaxPost({url:e.addNewSettings.webMethodUrl,data:e.addNewSettings.params||"{}",dataType:"json"}).done(function(a){e.render(a,!0);e.updateFreezeState();0<e.getRowsCount()&&e.getEmptyTextContainer().hide()}).fail(function(){e.addGridMessage(e.cclGridConstants.terms.ajaxErrorText)})};
e.attachEvents=function(){g.on("click",e.headerRowCheckBoxesSelector,function(){e.toggleSelectAll($(this).prop("checked"))});g.on("click",e.rowCheckBoxesSelector,function(){e.toggleSelect(this)});g.on("change","."+e.cclGridConstants.cssClasses.sorting+" > select",function(){var a=$(this).val();e.sort(a)});if(e.freezeToolbar&&e.isIos)g.on("hybrideditoriteminlinemodechanged",function(a,b){b.isEditMode||f(!0)});e.isReorderModeAvailable&&e.attachReorderModeHandler()};e.reInitializePager=function(a,b,
c){var d=window[e.pagerInstanceName];d&&(d.pageNumber=a,d.pageSize=b,d.totalCount=c,d.render(),e.hidePagerWhenTotalCountLessMinPageSize?d.controls.pagerContainer.toggle(0<c&&e.totalCount>d.getMinAvailablePageSize()):d.controls.pagerContainer.toggle(0<c))};e.updateFreezeState=function(a){e.freezeToolbar&&h.length&&(f(a),b())};e.removeEmptyText=function(){e.getEmptyTextContainer().remove()};e.getEmptyTextContainer=function(){return e.getRowsContainer().children("."+e.cclGridConstants.cssClasses.emptyGridText)};
e.getRowOrderPropertyValue=function(a){return a.find("."+e.cclGridConstants.cssClasses.rowDetailsColumn+" ."+e.cclGridConstants.cssClasses.orderValue).val()};e.setRowOrderPropertyValue=function(a,b){return a.find("."+e.cclGridConstants.cssClasses.rowDetailsColumn+" ."+e.cclGridConstants.cssClasses.orderValue).val(b)};e.setRowIndexPropertyValue=function(a,b){return a.find("."+e.cclGridConstants.cssClasses.rowDetailsColumn+" ."+e.cclGridConstants.cssClasses.rowIndex).val(b)};e.attachReorderModeHandler=
function(){!e.isReorderModeHandlerAttached&&e.isReorderModeAvailable&&($("."+e.cclGridConstants.cssClasses.reorderModeSelector).sortable({axis:"y",scroll:!0,scrollSensitivity:50,scrollSpeed:10,handle:"."+e.cclGridConstants.cssClasses.reorderModeDragHandler,cursor:"move",items:"> ."+e.cclGridConstants.cssClasses.reorderMode}),g.find("."+e.cclGridConstants.cssClasses.reorderModeSelector).on("sortstart",function(a,b){b.item.hasClass(e.cclGridConstants.cssClasses.reorderMode)&&b.item.data(e.cclGridConstants.dataAttributes.startPosition,
b.item.index())}),g.find("."+e.cclGridConstants.cssClasses.reorderModeSelector).on("sortstop",function(a,b){if(b.item.hasClass(e.cclGridConstants.cssClasses.reorderMode)){var c=e.isHeaderExist()?1:0;a=b.item.data(e.cclGridConstants.dataAttributes.startPosition)-c;c=b.item.index()-c;var d=e.getRowsCount();if(a!=c){b=e.getRowPrimaryKeyValueByRow(b.item);var f=c>a?c==d-1?e.getRowPrimaryKeyValueByIndex(c-1):e.getRowPrimaryKeyValueByIndex(c+1):e.getRowPrimaryKeyValueByIndex(c+1);e.useAjaxMode()?e.callReorderModeUpdateMethod(b,
f,a,c,c==d-1):"undefined"!==typeof e.reorderModeAjaxSettings.reorderModeCallbackClientFunction&&e.reorderModeAjaxSettings.reorderModeCallbackClientFunction(null)}}}),e.isReorderModeHandlerAttached=!0)};e.toggleReorderMode=function(){e.isReorderModeOn="Auto"==e.reorderModeAjaxSettings.reorderMode?!0:!e.isReorderModeOn;$("#"+e.reorderTogglerClientId).parent("li").toggleClass(e.cclGridConstants.cssClasses.selectedItem,e.isReorderModeOn);e.getRowsContainer().find("."+e.cclGridConstants.cssClasses.gridRow).toggleClass(e.cclGridConstants.cssClasses.reorderMode,
e.isReorderModeOn);g.find("."+e.cclGridConstants.cssClasses.reorderModeColumnSelector+" div > img").toggleClass(e.cclGridConstants.cssClasses.hidden,!e.isReorderModeOn)};e._getReorderParamsStr=function(){var a={};$.each(e.reorderModeAjaxSettings.reorderModeWebMethodParams,function(b,e){a[b]=encodeURIComponent(e)});return a};e.callReorderModeUpdateMethod=function(a,b,c,d,f){a={sourceId:a,targetId:b,oldIndex:c,newIndex:d,insertAfterTargetItem:f};$.extend(a,e._getReorderParamsStr());return CCL.CommonFunctions.safeAjaxPost({url:e.reorderModeAjaxSettings.reorderModeWebMethodUrl,
data:a,dataType:"json",success:function(a){"undefined"!==typeof e.reorderModeAjaxSettings.reorderModeCallbackClientFunction&&e.reorderModeAjaxSettings.reorderModeCallbackClientFunction(a)},error:function(a,b,c){$("."+e.cclGridConstants.cssClasses.reorderModeSelector).sortable("cancel")}})};e.toggleReorderTogglerElement=function(a,b){var e=a.attr("id"),c=a.html(),d=a.attr("class");b?(a.parent("li").removeClass("disabled"),a.replaceWith('<a href="#" id="'+e+'" class="'+d+'" onclick="javascript:'+this.name+
'.toggleReorderMode();">'+c+"</a>")):(a.parent("li").addClass("disabled"),a.replaceWith('<span id="'+e+'" class="'+d+'">'+c+"</span>"))}}CclResponsiveGrid.LoadingCompletedEventName="ResponsiveGrid:LoadingCompleted";
function RubricAssessmentCriteriaList(c){function d(a,b,e){ia[a]&&delete ia[a];document.getElementById(e).remove();b=b||0===Object.keys(ia).length;$(document).trigger(I.deleteLearningObjectiveEvent,{learningObjectiveId:a,reloadPage:b})}function f(a,e,c){F(a,e,c,!1);b();a.toggleSelectAll(!1)}function b(){I.searchSharedCriteriaBox&&window[I.searchSharedCriteriaBox]&&window[I.searchSharedCriteriaBox].refresh()}function a(a,b){m(a);p(a,b);r(a);w(a)}function e(a,b,e,c){e=a.getRowById(e);var d=e.find("."+
A.row+":first").find("a."+A.criteriaWeight).text(),f=$(b);f.find("a."+A.undoLink).click(function(){h(a,f,d?d:0,c)});f.find("a."+A.undoCloseImage).click(function(){f.remove()});e.replaceWith(f)}function g(b,e,c){var d=window[ia[b]].getRowsContainer(),f=0===l(d);e=$(e).appendTo(d);f&&0<l(d)&&(d.children("."+A.gridEmptyText).remove(),$(document).trigger(I.emptyStateChangedEvent,{isAnyEmpty:k(),loUpdate:{id:b,isEmpty:!1}}));a(e,c);J()}function h(b,e,c,d){var f=e.children("input:first").val();CCL.CommonFunctions.safeAjaxPost({url:I.webMethods.restoreCriteria,
dataType:"html",data:{courseId:I.courseId,criteriaJson:f,showCriteriaWeights:I.showCriteriaWeights,criteriaWeightToRestore:c}}).done(function(f){f=$(f);var g=f.find("."+A.row+":first");e.replaceWith(f);f.find("a."+A.criteriaWeight).text(c);g=g.next().val();K(d,g,c);a(f,!1);f.scrollMinimal();f=b.getRowsContainer();1===l(f)&&(f.children("."+A.gridEmptyText).remove(),$(document).trigger(I.emptyStateChangedEvent,{isAnyEmpty:k(),loUpdate:{id:d,isEmpty:!1}}))}).fail(G)}function k(){return 0<$("div."+A.criteriaContainer).filter(function(){return 0===
l(this)}).length}function l(a){return $("."+A.row,a).length}function m(a){a=a.find("."+A.criteriaItem);$.each(a,function(a,b){if(n(b))return!0;a={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:A.inlineEditor,maxLength:I.criteriaItemDescriptionMaxLength};new ClientInlineEditor($(b),void 0,$(b).parent().find("input").last(),a,B,D,void 0)})}function n(a){return 0<$(a).closest(CommonFunctions.formatString(".{0},.{1}",A.officialCriteria,A.criteriaOfObsoleteLearningObjective)).length}function p(a,
b){a=a.find("."+A.criteriaTitle);$.each(a,function(a,e){if(n(e))return!0;a=new ClientInlineEditor(e,void 0,void 0,{submitOnEnter:!0,editFieldDisplayInline:!0,editFieldAutoWidth:!1,editFieldCssClass:A.criteriaTitle,maxLength:64},u,void 0,{isTitle:!0});b&&a.switchToEditMode().select()})}function r(a){a=a.find("."+A.criteriaDescription);$.each(a,function(a,b){if(n(b))return!0;a={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:A.inlineEditor,maxLength:I.criteriaItemDescriptionMaxLength};
new ClientInlineEditor(b,void 0,$(b).parent().find("input").last(),a,u,D,{isTitle:!1})})}function w(a){a=a.find("."+A.criteriaWeight);$.each(a,function(a,b){new ClientInlineEditor(b,void 0,void 0,{submitOnEnter:!0,editFieldDisplayInline:!0,editFieldAutoWidth:!1,editFieldCssClass:A.criteriaWeight,maxLength:3},v,q,void 0)})}function u(a,b){var e=a.source.parents("ul").next().val();a.actualText=$.trim(a.actualText);a.userData.isTitle&&!a.actualText.length?(a.isUpdateSuccess=!1,b(a)):CCL.CommonFunctions.safeAjax({type:"PUT",
url:I.webMethods.updateCriteria,dataType:"json",data:{courseId:I.courseId,criteriaId:e,text:a.actualText,isTitle:a.userData.isTitle}}).done(function(b){a.isUpdateSuccess=!0;var c=a.source.parents("ul");R(c);b&&(H(b.learningObjectiveId,c,b.criteriaId),window[ia[b.learningObjectiveId]].replaceKeyValue(e,b.criteriaId))}).fail(function(b,e,c){a.isUpdateSuccess=!1;G(b,e,c)}).always(function(){b(a)})}function v(a,b){var e=parseInt(a.source.parents("."+A.criteriaContainer).siblings("input[type=hidden]").val()),
c=a.source.parents("ul").next().val(),d=a.source.parents("ul"),f=!$.trim(a.actualText).length||!/^[1-9][0-9]?$|^100$/.test(a.actualText);d.find("."+A.criteriaWeightValidationMessage).toggle(f);f?(a.stopOnEdit=!0,a.isUpdateSuccess=!1):(da&&(f=parseInt(a.actualText),t(f,d),K(e,c,f)),a.isUpdateSuccess=!0);b(a)}function q(a){a.isEditMode||a.source.parents("ul").find("."+A.criteriaWeightValidationMessage).hide()}function t(a,b){b=b.find("."+A.criteriaItemWeight);var e=I.achivementLevelOrderDirection===
ca.lowestToHighest?1:b.length;$.each(b,function(b,c){c.innerHTML=e*a;I.achivementLevelOrderDirection===ca.lowestToHighest?e++:e--})}function B(a,b){var e=a.source.parents("li");e=O(e.find("input[type=hidden]").val());var c=e.key;e=e.value;a.actualText=$.trim(a.actualText);CCL.CommonFunctions.safeAjax({type:"PUT",url:I.webMethods.updateCriteriaItem,dataType:"json",data:{courseId:I.courseId,criteriaId:c,levelId:e,text:a.actualText}}).done(function(b){a.isUpdateSuccess=!0;var e=a.source.parents("ul");
R(e);b&&(H(b.learningObjectiveId,e,b.criteriaId),window[ia[b.learningObjectiveId]].replaceKeyValue(c,b.criteriaId))}).fail(function(b,e,c){a.isUpdateSuccess=!1;G(b,e,c)}).always(function(){b(a)})}function H(a,b,e){y(a,b,e);b.next().val(e);a=b.find("li."+A.column+" > input[type=hidden]");$.each(a,function(a,b){a=$(b);b=O(a.val());b.key=e.toString();a.val(JSON.stringify(b))})}function y(a,b,e){if(da){var c=b.next().val();b=parseInt(b.find("."+A.criteriaWeight+":first").text());da&&da[a]&&delete da[a][c];
K(a,e,b)}}function K(a,b,e){da&&0<e&&(da[a]||(da[a]={}),da[a][b]=e,J())}function J(){$(document).trigger(I.criteriaWeightsChangedEvent,{data:da,loCriteriaWeights:z()})}function z(){var a={};$("."+A.criteriaContainer).each(function(){var b=$(this),e=parseInt(b.siblings("input[type=hidden]").val());a[e]=0;$("a."+A.criteriaWeight,b).each(function(){var b=$(this),c=b.siblings("input."+A.criteriaWeight);a[e]+=parseInt(c.length?c.val():b.text())})});return a}function D(a){var b=a.source;a.isEditMode||b.parent().find("input").last().val()?
b.removeClass(A.criteriaItemEmptyState):(b.addClass(A.criteriaItemEmptyState),b.text(I.watermark))}function Q(a,b){$.each(b,function(b,e){b=a.getRowById(e).find("."+A.row+":first");b.find("img."+A.shareLoadingIcon).show();b.find("img."+A.shareIcon).hide()})}function F(a,b,e,c){$.each(e,function(e,d){e=a.getRowById(d).find("."+A.row+":first");var f=e.find("img."+A.shareIcon);void 0!=b[d]&&(f.attr("title",c?b[d]:""),f.toggle(c),e.find("img."+A.reshareIcon).hide());e.find("img."+A.shareLoadingIcon).hide()})}
function R(a){a.find("img."+A.reshareIcon).toggle(a.find("img."+A.shareIcon).is(":visible"))}function G(a,b){a.status>=CCL.CommonConstants.httpStatusCodes.badRequest&&alert(!0===b&&a.statusText.length?a.statusText:P.settings.terms.errorOccured)}function O(a){return JSON.parse(a||"{}")}function U(){var a=$.find("img."+A.shareLoadingIcon+":visible");$.each(a,function(a,b){b.hide()})}window[c]=this;var P=this,I,ha,A,ca,da={},ia,sa;P.initialize=function(){I=P.settings;ha=P.controls;A=I.cssClasses;O(ha.updatedCriteriaDecriptionsHidden.val());
ca=I.achievementLevelOrder;ia=O(I.grids);sa=O(I.officialCriteriaGrids);I.criteriaWeightsData&&(da=JSON.parse(I.criteriaWeightsData));a(ha.container,!1);if(I.isIosDevice)$("input."+A.addButton).on("touchend",function(){$(this).click()});$(function(){$(document).on(P.settings.events.addSharedCriteriaJsEvent,function(a,b){$.each(b.Criteria,function(a,b){g(a,b,!1)});b.IsThereMismatchBetweenLevelsCount&&I.levelsMismatchWarningClientId&&$("#"+I.levelsMismatchWarningClientId).show()})})};P.deleteLearningObjective=
function(a,b,e,c){I.webMethods.deleteLearningObjective?CCL.CommonFunctions.safeAjax({type:"DELETE",url:I.webMethods.deleteLearningObjective,dataType:"json",data:{courseId:I.courseId,topicId:e,learningObjectiveId:a}}).done(function(){d(a,b,c)}).fail(function(a){G(a,!0)}):d(a,b,c)};P.addCriteria=function(a){CCL.CommonFunctions.safeAjaxPost({url:I.webMethods.addCriteria,dataType:"html",data:{courseId:I.courseId,learningObjectiveId:a,showCriteriaWeights:I.showCriteriaWeights}}).done(function(b){g(a,b,
!0)}).fail(G)};P.shareSelectedCriterias=function(a,e){var c=window[ia[a]],d=c.getSelectedValues();1>d.length?alert(I.terms.noSelectionForSharing):(Q(c,d),CCL.CommonFunctions.safeAjaxPost({url:I.webMethods.shareCriteria,dataType:"json",data:{courseId:I.courseId,hierarchyId:e,criteriaIdsJson:JSON.stringify(d)}}).done(function(a){F(c,a,d,!0);b();c.toggleSelectAll(!1)}).fail(function(a){G(a,!0)}).always(function(){U()}))};P.stopSharingSelectedCriterias=function(a){var b=window[ia[a]],e=b.getSelectedValues();
1>e.length?alert(I.terms.noSelectionForSharing):(Q(b,e),CCL.CommonFunctions.safeAjax({type:"DELETE",url:I.webMethods.stopSharingCriteria,dataType:"json",data:{courseId:I.courseId,criteriaIdsJson:JSON.stringify(e)}}).done(function(a){f(b,a,e)}).fail(G).always(function(){U()}))};P.removeSelectedCriterias=function(a){var b=window[ia[a]],c=b.getSelectedValues();c.length?(CCL.CommonFunctions.safeAjax({type:"DELETE",url:I.webMethods.deleteCriteria,dataType:"html",data:{courseId:I.courseId,criteriaIdsJson:JSON.stringify(c)}}).done(function(d){d=
O(d);f(b,d.criteriaToUnshare,c);$.each(d.criterias,function(c,d){e(b,d,c,a);da&&da[a]&&delete da[a][c]});J();d=b.getRowsContainer();if(0===l(d)){var g=b.getGridElement().find("."+A.criteriaEmptyGridText);0<g.length&&d.append(g.html());d=!1;(g=window[sa[a]])?(g=g.getRowsContainer(),0===l(g)&&(d=!0)):d=!0;d&&$(document).trigger(I.emptyStateChangedEvent,{isAnyEmpty:!0,loUpdate:{id:a,isEmpty:!0}})}}).fail(G),b.toggleSelectAll(!1)):alert(I.terms.noSelectionForRemoval)}}
function SafeConsoleLogger(){var c={},d={noop:function(){}};d.safeLogger={assert:d.noop,count:d.noop,dir:d.noop,error:d.noop,group:d.noop,groupEnd:d.noop,info:d.noop,log:d.noop,time:d.noop,timeEnd:d.noop,trace:d.noop,warn:d.noop};d.initialize=function(){objectState.isNullOrUndefined(window.console)||(d.safeLogger=window.console)};c.assert=function(c){d.safeLogger.assert(c)};c.count=function(c){d.safeLogger.count(c)};c.dir=function(c){d.safeLogger.dir(c)};c.error=function(c){d.safeLogger.error(c)};
c.group=function(c){d.safeLogger.group(c)};c.groupEnd=function(c){d.safeLogger.groupEnd(c)};c.info=function(c){d.safeLogger.info(c)};c.log=function(c){d.safeLogger.log(c)};c.time=function(c){d.safeLogger.time(c)};c.timeEnd=function(c){d.safeLogger.timeEnd(c)};c.trace=function(c){d.safeLogger.trace(c)};c.warn=function(c){d.safeLogger.warn(c)};d.initialize();return c}var safeConsoleLogger=SafeConsoleLogger();
$.widget("itslccl.searchTextBox",$.itslccl.extendedTextBox,{options:{searchInput:void 0,container:void 0,searchLink:void 0,fakeInput:void 0,searchKeyStorage:void 0,textSearchEvent:void 0,usePostBack:!1,clearByEsc:!1,postBackReference:void 0},_create:function(){this._super();var c=this,d=this.options.searchInput,f=this.options.searchLink,b=this.options.fakeInput;d.keydown(function(a){return a.which!==CommonConstants.keyCodes.enter||a.shiftKey?!0:(c._doSearch(),!1)});d.keyup(function(a){c.options.clearByEsc&&
a.which===CommonConstants.keyCodes.escape&&c._clearSearchBox();return!0});f&&f.click(function(a){a.preventDefault();c._doSearch()});b&&b.focus(function(){d.focus()})},_clearSearchBox:function(){this.options.searchInput.val("");this.options.searchInput.focus()},_doSearch:function(){this.options.searchInput.focus();var c=this._isWatermarkMode?"":$.trim(this.options.searchInput.val());this.options.usePostBack?(this._saveSearchTextToHiddenField(),eval(this.options.postBackReference)):this.options.container.trigger(this.options.textSearchEvent,
c)},_saveSearchTextToHiddenField:function(c){!this.options.usePostBack&&c?this.options.searchKeyStorage.val($.trim(c)):this.options.searchKeyStorage.val($.trim(this.options.searchInput.val()))}});
function SearchTextBox(c,d){window[c]=this;var f=this;d&&SearchTextBox.instances.push(this);f.initialize=function(){f.controls={searchInput:$("#"+f.controlIds.searchInputId),container:$("#"+f.controlIds.containerId),searchLink:$("#"+f.controlIds.searchLinkId),fakeInput:$("#"+f.controlIds.fakeInputId),searchKeyStorage:$("#"+f.controlIds.searchKeyStorageId)};var b=f.controls.searchInput;d&&b.hasClass(f.settings.focusRequiredCssClass)&&b.focus();b.searchTextBox({searchInput:f.controls.searchInput,container:f.controls.container,
searchLink:f.controls.searchLink,fakeInput:f.controls.fakeInput,searchKeyStorage:f.controls.searchKeyStorage,watermarkText:f.settings.watermarkText,watermarkCssClass:f.settings.watermarkCssClass,textSearchEvent:f.settings.textSearchEvent,clearByEsc:f.settings.clearByEsc,usePostBack:f.settings.usePostBack,postBackReference:f.settings.postBackReference,focusRequiredCssClass:f.settings.focusRequiredCssClass})};f.clearSearch=function(){f.controls.searchInput.val("")};f.autocompleteopen=function(b,a){var e=
f.controls.searchInput.autocomplete("widget");if(1<$(".ui-menu-item",e).length){var c=f.controls.searchInput.autocomplete("option","select");f.controls.searchInput.autocomplete({select:function(a,b){if(-1!==b.item.id)c(a,b);else{var d=[];$(".ui-menu-item:not(.ccl-searchtextbox-select-all)",e).each(function(){d.push($(this).data("ui-autocomplete-item"))});f.controls.searchInput.trigger("autocompleteselectall",{items:d});f.controls.searchInput.autocomplete("close")}}});b=$("<li></li>").data("ui-autocomplete-item",
{id:-1,value:""}).attr("class","ui-menu-item ccl-searchtextbox-select-all").appendTo(e);$("<a></a>").attr("href","#").text(f.settings.selectAllText).appendTo(b)}}}SearchTextBox.instances=[];SearchTextBox.initialize=function(){for(var c=0,d=this.instances.length;c<d;c+=1)this.instances[c].initialize()};
function StarsSelector(c){window[c]=this;var d=this,f,b;d.initialize=function(){function a(a){a=isNaN(a)?0:a;d.settings.activeIconCss&&d.settings.inactiveIconCss?(b.filter(":lt("+a+")").find("i").removeClass().addClass(d.settings.activeIconCss),b.filter(":eq("+a+"), :gt("+a+")").find("i").removeClass().addClass(d.settings.inactiveIconCss)):d.settings.activeIconUrl&&d.settings.inactiveIconUrl&&(b.filter(":lt("+a+")").find("img").prop("src",d.settings.activeIconUrl),b.filter(":eq("+a+"), :gt("+a+")").find("img").prop("src",
d.settings.inactiveIconUrl))}f=d.controls.ratingHidden;b=d.controls.starsContainer.find("a");b.click(function(e){e=b.index(this)+1;f.val()!=e&&(f.val(e).change(),a(e));return!1}).mouseover(function(e){a(b.index(this)+1)}).mouseout(function(b){a(parseInt(f.val()))});$(document).on(d.settings.showRateEventName,function(b,c){f.val()!=c&&(f.val(c),a(c))});$(document).on(d.settings.rateSuccessEventName,function(a,c){a=b.filter(":lt("+c+")");for(c=0;2>c;c++)a.fadeTo("normal",.5).fadeTo("normal",1)})};return d}
function Switch(c,d){var f={};f.state=c;f.settings=d;f.button=document.querySelector("#"+f.settings.containerId+" button");f.changeCallback=function(){};this.setChangeCallback=function(b){f.changeCallback=b};f.button.addEventListener("click",function(){f.state=!f.state;!0===f.state?(f.button.classList.add(f.settings.onCssClass),f.button.classList.remove(f.settings.offCssClass)):(f.button.classList.add(f.settings.offCssClass),f.button.classList.remove(f.settings.onCssClass));f.changeCallback(f.state)});
return this}function MakeTableHighlightable(c){function d(c){var b="mouseenter"==c.type;$("tr > :nth-child("+($(this).index()+1)+")",$(c.delegateTarget)).toggleClass("ccl-table-highlight",b);$(this).parent().toggleClass("ccl-table-highlight",b)}c.delegate("td","mouseenter mouseleave",d);c.delegate("tbody th","mouseenter mouseleave",d)}
(function(c,d){var f=c.TextBoxAutoCompleteManager={commonSettings:d,makeTextBoxAutocomplete:function(b,a,e,g){function h(a,b){a=a.split(" ");var e=b.split(" "),c=-1,d=!0,f=!1;$.each(a,function(a,b){f=!1;$.each(e,function(a,e){if(f=0==e.indexOf(b))return c=a,!1});-1<c&&(e.splice(c,1),c=-1);d=f&&d});return d}function k(){u.autocomplete("widget").is(":visible")?u.autocomplete("close"):($(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close"),u.autocomplete("option","minLength",0),u.autocomplete("search",
""));u.focus()}function l(){var a=u.get(0);b.isIos?a.setSelectionRange(0,a.value.length):a.select()}function m(a,e){var c=!1;$.each(a,function(a,d){a=b.caseSensitiveSearch?e:e.toLowerCase();if((b.caseSensitiveSearch?d.value:d.value.toLowerCase())===a)return c=!0,!1});return c}function n(){b.allowCustomText||(m(b.values,u.val())?b.defaultText=u.val():(b.defaultText?u.val(b.defaultText):u.val(""),p(!1)));a&&a();b.isAutoPostBack&&u.closest("form").submit()}function p(a){b.useHighlight&&v.toggleClass(f.commonSettings.cssClasses.highlight,
a)}function r(a){var e=b.caseSensitiveSearch?$(this).val():$(this).val().toUpperCase(),c=u.data("ui-autocomplete");c.widget().children(".ui-menu-item").each(function(){var a=$(this).data("ui-autocomplete-item");if((b.caseSensitiveSearch?a.value:a.value.toUpperCase())===e)return c.selectedItem=a,!1});c.selectedItem&&c._trigger("select",a,{item:c.selectedItem})}var w=!0,u=$("#"+b.textboxId),v=u.parent(),q=c[b.textboxId]=u;b.isDropDown&&(b.minLength=0);u.autocomplete({autoFocus:!0,source:function(a,
e){e($.map(b.values,function(e){var c=b.caseSensitiveSearch?a.term:a.term.toLowerCase(),g=b.caseSensitiveSearch?e.value:e.value.toLowerCase();switch(b.filterType){case f.commonSettings.filterType.wordStartsWith:return h(c,g)?e:d;default:return 0<=g.indexOf(c)?e:d}}))},delay:b.delay,minLength:b.minLength,change:function(a,e){b.defaultText!==u.val()&&n()},close:function(a,b){e&&e();w=!0},select:function(a,b){q.selectValue(b.item);n()},open:function(a,e){b.zIndex&&u.autocomplete("widget").css("z-index",
b.zIndex);w=!1},create:function(a,e){u.data("autocompleteItemId",b.defaultValue)},messages:{noResults:b.terms.noResults,results:function(a){return 1==a?b.terms.oneResult:b.terms.resultsTemplate.replace("{0}",a.toString())}}});u.keyup(function(){p(!!u.val()&&!m(b.values,u.val()))}).keydown(function(a){a.which===CommonConstants.keyCodes.enter&&(w||a.preventDefault(),b.defaultText!==u.val()&&(a.preventDefault(),n()),u.autocomplete("close"))}).click(l).on("autocompletesearchcomplete",function(a,b){});
q.selectValue=function(a){p(!1);u.val(a.value);u.data("autocompleteItemId",a.id);$(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close");g&&g(a)};q.getValue=function(){return u.data("autocompleteItemId")};b.isDropDown&&($("#"+b.buttonId).click(k).click(l),u.click(k),u.blur(r))}}})(window);
(function(c){var d={},f=!1,b=c.TextEditorManager={commonSettings:void 0,addStartupFunction:function(a,b){d[a]=b},textEditorSetup:function(){function a(a,b,c){if(a=a.getButton(b))c=$("#"+a.domId).removeClass().addClass(c).removeAttr("title"),a=c.find("span").removeClass(),c.append(document.createTextNode(a.text())),a.text("")}f||(f=!0,c.CKEDITOR&&(CKEDITOR.on("dialogDefinition",function(e){var c=e.data.definition,d=c.onLoad;c.onLoad=function(){a(this,"ok",b.commonSettings.cssClasses.ok);a(this,"cancel",
b.commonSettings.cssClasses.cancel);if(d)return d.apply(this,arguments)};"link"===e.data.name&&(c.getContents("target").get("linkTargetType")["default"]="_blank")}),CKEDITOR.on("instanceReady",function(a){(a=d[a.editor.name])&&a()}),CommonFunctions.attachPostMessageEventListener($(c),CommonWindowMessages.MessageNames.textEditorInteraction,function(a,b){switch(a.interactionType){case CommonWindowMessages.TextEditorInteractionType.CloseDialog:CloseDialog();return;case CommonWindowMessages.TextEditorInteractionType.InsertHtml:InsertHtml(a.htmlContent,
a.editorInstanceId,a.isEmbeddedImage);break;case CommonWindowMessages.TextEditorInteractionType.InsertLinkToFile:b=CKEDITOR;var e=b.dialog.getCurrent()._.editor,c={href:a.linkUrl,target:"_blank"};e.focus();var d=e.getSelection(),f=d.getRanges(!0);if(1==f.length&&f[0].collapsed){var g=new b.dom.text(a.linkName,e.document);f[0].insertNode(g);f[0].selectNodeContents(g);d.selectRanges(f)}c=new b.style({element:"a",attributes:c});c.type=b.STYLE_INLINE;c.apply(e.document);break;case CommonWindowMessages.TextEditorInteractionType.UpdateItslPluginsList:e=
a.editorInstanceId&&""!=a.editorInstanceId?CKEDITOR.instances[a.editorInstanceId]:CKEDITOR.dialog.getCurrent()._.editor;e.plugins.dynamicinsertmenu?e.plugins.dynamicinsertmenu.update(e,a.pluginId):e.plugins.itslpluginlist&&e.plugins.itslpluginlist.update(e,a.pluginId);break;case CommonWindowMessages.TextEditorInteractionType.InsertImageToSlideshow:null!=(a.editorInstanceId&&0<a.editorInstanceId.length?CKEDITOR.instances[a.editorInstanceId]:CKEDITOR.dialog.getCurrent()._.editor)&&(a.closeDialogAfterPerformingOperation&&
(CloseDialog(),a.closeDialogAfterPerformingOperation=!1),CKEDITOR.dialog.getCurrent().insertImageToSlideshow(a.extendedData));break;case CommonWindowMessages.TextEditorInteractionType.InsertTextLink:b=CKEDITOR,e=b.dialog.getCurrent()._.editor,c={href:a.linkUrl,target:a.linkTarget},a.linkAdditionalAttributes&&Object.assign(c,a.linkAdditionalAttributes),e.focus(),d=e.getSelection(),f=d.getRanges(!0),1==f.length&&f[0].collapsed&&(g=new b.dom.text(a.linkText,e.document),f[0].insertNode(g),f[0].selectNodeContents(g),
d.selectRanges(f)),c=new b.style({element:"a",attributes:c}),c.type=b.STYLE_INLINE,c.apply(e.document)}a.closeDialogAfterPerformingOperation&&CloseDialog()})))},getIframeFromDialog:function(a){return $("#"+a._.contents.iframe.undefined.domId)},refreshCustomOpenPopupButtonPosition:function(a,b){""===a.val()?b.html(unescape(b.attr("data-temp-html"))).removeClass("ccl-ck-link-right-bottom").addClass("ccl-ck-link-center"):b.html("").removeClass("ccl-ck-link-center").addClass("ccl-ck-link-right-bottom")}};
b.getOnContentLoadFunctionForIframeDialog=function(a){return function(){var e=CKEDITOR.dialog.getCurrent();if(e){e=b.getIframeFromDialog(e).attr({webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"true",allow:"microphone *; camera *"});a&&a(e);try{e.contents().keydown(function(a){a.which===CommonConstants.keyCodes.escape&&c.CloseDialog()}),e[0].focus()}catch(g){}}}};b.setupIframePlugin=function(a,e){var c=$.extend({addToolBarButton:!0,dialogName:void 0,dialogSrcReplacementFunction:void 0,
beforeInitComplete:void 0,dialogContentLoad:void 0,emptyIframeOnClose:!1,useBuiltInCloseButton:!1},e);return{requires:["iframedialog"],init:function(e){var d=e.config[a],f=d.DialogWidth,g=d.DialogHeight,h=c.dialogName,p=0,r=b.getOnContentLoadFunctionForIframeDialog(function(a){d.IsEditorDialogTransparent&&d.IframeCssClass&&a.addClass(d.IframeCssClass);c.dialogContentLoad&&c.dialogContentLoad(e,d,a)});e.addCommand(d.Id,{startDisabled:d.Disabled,exec:function(a){var b=h+p++,k=c.dialogSrcReplacementFunction?
c.dialogSrcReplacementFunction(e,d,a):d.DialogSrc;k&&(CKEDITOR.dialog.addIframe(b,"",k,f,g,r,{onShow:function(){var a=CKEDITOR.dialog.getCurrent(),b=a.parts;!1===c.useBuiltInCloseButton&&b.close.hide();b.footer.hide();b.title.hide();d.IsEditorDialogTransparent&&a._.element.addClass("hiddenDialog");CKEDITOR.env.ie&&a._.element.addClass("noScrollbars");a=TextEditorManager.getIframeFromDialog(a).parents("div.cke_dialog_page_contents");a.css({width:d.DialogWidth});d.DialogClass&&a.parents("table.cke_dialog_contents").addClass(d.DialogClass)},
onHide:function(){c.emptyIframeOnClose&&TextEditorManager.getIframeFromDialog(CKEDITOR.dialog.getCurrent()).attr("src","")}}),a.openDialog(b))}});if(c.addToolBarButton){var w={label:d.Text,command:d.Id};"string"===typeof c.icon&&(w.icon=c.icon);e.ui.addButton(d.Id,w)}c.beforeInitComplete&&c.beforeInitComplete(e,d)}}};b.setupContentForIframe=function(){$(c.document).keydown(function(a){a.which===CommonConstants.keyCodes.escape&&CommonFunctions.makePostMessageCall(c.parent,new CommonWindowMessages.TextEditorCloseDialogMessage)});
c.focus()};b.setupPopupSettings=function(a){var e=$("#"+a.popupSettings.linkToEditId),d=$("#"+a.popupSettings.hiddenInputId);""===d.val()&&e.html(a.popupSettings.text);e.attr("data-temp-html",escape(a.popupSettings.text)).click(function(a){a.preventDefault();c.open(e.prop("href"),"_blank")});b.refreshCustomOpenPopupButtonPosition(d,e)};b.getExtensionIdFromIdString=function(a){var b=a.indexOf(":",0);if(0>b)return null;var c=a.indexOf(":",b+1);return 0>c?null:a.substring(b+1,c)}})(window);
function InsertHtml(c,d,f){var b=d&&0<d.length?CKEDITOR.instances[d]:CKEDITOR.dialog.getCurrent()._.editor;null!=b&&(f&&(f=b.getSelection().getSelectedElement())&&(f=f.getAscendant("img",!0),f=f.getAttribute("src"),c=c.replace("src='data:'","src='"+f+"'")),"WebkitAppearance"in document.documentElement.style?b.config.mask&&IsEditorEmpty(b.name,b.config.mask)?(SetHtml(c,d),checkForMaskAndDelete(b.name)):b.insertHtml(c):(CKEDITOR.env.gecko&&b.config.mask&&checkForMaskAndDelete(b.name),b.insertHtml(c)))}
function CloseDialog(){window.CKEDITOR.env.webkit&&closeRecorderIfExists();CKEDITOR.dialog.getCurrent().hide()}function SetHtml(c,d,f){d&&0<d.length?CKEDITOR.instances[d].setData(c,function(){f||SetTextEditorFocus(d)}):CKEDITOR.dialog.getCurrent()._.editor.setData(c,function(){f||this.focus()})}
function GetTextEditorContent(c){return window.CKEDITOR?c&&0<c.length?CKEDITOR.instances[c].getData():CKEDITOR.dialog.getCurrent()?CKEDITOR.dialog.getCurrent()._.editor.getData():null:(c=$("div[data-ck-id="+c+"] > input[type=hidden]"),1===c.length?c.val():null)}function SetTextEditorFocus(c){CKEDITOR.instances[c].focus()}function RemoveEditorInstance(c){if(CKEDITOR.instances[c]){var d=CKEDITOR.instances[c].editable();d.hasFocus&&(d.blur(),d.hasFocus=!1);CKEDITOR.instances[c].destroy()}}
function IsEditorEmpty(c,d){if(c=CKEDITOR.instances[c]){c=c.getData().replace("\n","");var f=CommonFunctions.htmlEncode(c),b=CommonFunctions.htmlEncode(d);return""==c||d&&f===b||"<p>&nbsp;</p>"==c||"<div>&nbsp;</div>"==c||"<p>&#160;</p>"==c||"<p></p>"==c||"<p>"+b+"</p>"==c?!0:!1}}function IsEditorContainsMask(c,d){if(c=CKEDITOR.instances[c])return-1<c.getData().indexOf(d)}
function isTextEditorDirty(c){var d;if(c&&0<c.length&&(d=CKEDITOR.instances[c]))return d.checkDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.checkDirty()}function isAnyTextEditorDirty(){if(window.CKEDITOR)for(var c in CKEDITOR.instances)if(!0===CKEDITOR.instances[c].checkDirty())return!0;return!1}
function resetEditorIsDirty(c){if(c&&0<c.length)return CKEDITOR.instances[c].resetDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.resetDirty()}function resetAllTextEditorsIsDirty(){if(window.CKEDITOR)for(var c in CKEDITOR.instances)CKEDITOR.instances[c].resetDirty();return!1}function setTextEditorTextColor(c,d){c=CKEDITOR.instances[c];d=new CKEDITOR.style(CKEDITOR.config.colorButton_foreStyle,{color:d});c.applyStyle(d)}
function setTextEditorTextSize(c,d){c=CKEDITOR.instances[c];d=new CKEDITOR.style(CKEDITOR.config.fontSize_style,{size:d});c.applyStyle(d)}
var focusListener=function(c){var d=c.editor.config.mask,f=!1;IsEditorEmpty(c.editor.name,d)?(toggleWatermark(!1,c.editor),f=!0):IsEditorContainsMask(c.editor.name,d)&&(d=c.editor.getData().replace(d,""),c.editor.document.getBody().setHtml(d),f=!0);f&&(c.editor.mayBeDirty=!0,resetEditorIsDirty(c.editor.name))},blurListener=function(c){IsEditorEmpty(c.editor.name)&&c.editor.config.mask&&0<c.editor.config.mask.length&&(toggleWatermark(!0,c.editor),resetEditorIsDirty(c.editor.name))},modeListener=function(c){IsEditorEmpty(c.editor.name,
c.editor.config.mask)&&toggleWatermark("source"!=c.editor.mode,c.editor)};function toggleWatermark(c,d){if("wysiwyg"==d.mode){var f=d.document.getBody();c?(f.setHtml(d.config.mask),f.addClass("watermarked")):(f.setHtml(""),f.removeClass("watermarked"))}else c||d.setData("")}
function cleanOnFocusEvent(c,d,f){var b=CKEDITOR.instances[d];if(b){b.config.mask=c;if(f||IsEditorEmpty(b.name,b.config.mask))b.focusManager.hasFocus||setTimeout(function(){toggleWatermark(!0,b);b.mayBeDirty=!1;resetEditorIsDirty(b.name)},50);b.on("focus",focusListener);b.on("blur",blurListener);b.on("mode",modeListener);window.CKEDITOR.env.ie&&AttachListenersToInsertEvents(d)}}
function closeRecorderIfExists(){var c=TextEditorManager.getIframeFromDialog(CKEDITOR.dialog.getCurrent()),d;try{var f=c.contents();(d=f.find("object"))&&d.hide()}catch(b){}}function checkForMaskAndDelete(c){var d=null;c&&0<c.length?d=CKEDITOR.instances[c]:CKEDITOR.dialog.getCurrent()&&(d=CKEDITOR.dialog.getCurrent()._.editor);null!=d&&d.config.mask&&IsEditorEmpty(d.name,d.config.mask)&&d.document.getBody().setHtml("")}
function AttachListenersToInsertEvents(c){if(c&&0<c.length){var d=CKEDITOR.instances[c];d.on("insertText",function(d){checkForMaskAndDelete(c)});d.on("insertElement",function(d){checkForMaskAndDelete(c)});d.on("insertHtml",function(d){checkForMaskAndDelete(c)})}}
function TextEditorToolbar(c){function d(a){a.parent("ul").children("li").removeClass("active");a.addClass("active")}window[c]=this;var f=this,b,a,e;f.initialize=function(){a=f.controls.container.find("."+f.settings.fontColorSectionClass).find("li");e=f.controls.container.find("."+f.settings.fontSizeSectionClass).find("li");CKEDITOR.on("instanceReady",function(){b=CKEDITOR.instances[f.settings.editorId];b.on("selectionChange",function(){f.updateToolbarState()});a.find("a").click(function(){var a=
$(this).parent("li"),b=a.find("input:hidden:first").val();SetTextEditorFocus(f.settings.editorId);setTextEditorTextColor(f.settings.editorId,b);d(a);return!1});e.find("a").click(function(){var a=$(this).parent("li"),b=a.find("input:hidden:first").val();SetTextEditorFocus(f.settings.editorId);setTextEditorTextSize(f.settings.editorId,b);d(a);return!1});f.updateToolbarState()})};f.insertImage=function(a){InsertHtml('<img src="'+a+'" alt="" />',f.settings.editorId)};f.updateToolbarState=function(){var c=
b.getSelection();if(c){var d;if(c=$(c.getStartElement().$)){var k=c.prop("style").color;k||(d=c.parents('span[style*="color:"]:first'))&&d.prop("style")&&(k=d.prop("style").color);d=k;(k=d.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?(d=[],d.push("#"),d.push(("0"+parseInt(k[1],10).toString(16)).slice(-2)),d.push(("0"+parseInt(k[2],10).toString(16)).slice(-2)),d.push(("0"+parseInt(k[3],10).toString(16)).slice(-2)),k=d.join("")):k=d;k=k.toLowerCase();d=c.prop("style").fontSize;d||(c=c.parents('span[style*="font-size:"]:first'))&&
c.prop("style")&&(d=c.prop("style").fontSize)}k||(k="#000000");d||(d=f.settings.defaultFontSizeStyle);a.removeClass("active");a.filter(":has(input[value='"+k+"']:hidden)").addClass("active");e.removeClass("active");d&&e.filter(":has(input[value='"+d+"']:hidden)").addClass("active")}}}
function TextEditorToolbarExtenderDialog(c){window[c]=this;var d=this;d.initialize=function(){d.controls.targetlink.on("click",function(c){c.preventDefault();d.show();return!1});d.controls.closelink.on("click",function(c){c.preventDefault();d.hide();return!1});d.controls.container.appendTo("body").on("click",function(c){c.preventDefault();return!1});d.controls.container.find("ul li a").on("click",function(c){d.hide();return!0});$(document).click(function(c){var b=d.controls.container;return 2>c.button&&
!b.is(":hidden")?(d.hide(),!1):!0})};d.show=function(){var c=d.controls.targetlink.offset();d.controls.container.css({top:c.top+d.controls.targetlink.height()+"px",left:c.left+"px"}).show()};d.hide=function(){d.controls.container.hide()};return d}
function TimeSlotPicker(c){function d(){g.val(a.val())}window[c]=this;var f=this,b,a,e,g,h;f.initialize=function(){b=$("#"+f.settings.clientIds.timeSlotPickerPanel);a=$("#"+f.settings.clientIds.timeSlotDropDown);e=$("#"+f.settings.clientIds.availableTimeSlotsHidden);g=$("#"+f.settings.clientIds.selectedTimeSlotIdHidden);a.change(function(){d()});if(CommonFunctions.isEdge())a.on("keydown",function(a){a.which!==CommonConstants.keyCodes.del&&a.which!==CommonConstants.keyCodes.backspace||a.preventDefault()});
var c=e.val();c&&(h=JSON.parse(c));f.toggle(!0)};f.toggle=function(a){b.toggle(a&&!!h)};f.updateFilteredTimeForDate=function(b,c){if(f.getAvailableTimeSlotsForDateFunction)if(b={date:b,dateFilterId:c},f.getAvailableTimeSlotsForDateFunction(b),h=b.availableTimeSlots,e.val(h?JSON.stringify(h):""),h&&0<h.length){a.empty();if(h&&h.length)for(b=0;b<h.length;b++)a.append("<option value='"+h[b].TimeSlotId+"'>"+h[b].Description+"</option>");f.toggle(!0);d()}else f.resetTimes()};f.resetTimes=function(){a.empty();
h=void 0;e.val(h?JSON.stringify(h):"");d();f.toggle(!1)};f.getSelectedTimeSlot=function(){if(h)for(var a=0;a<h.length;a++){var b=h[a];if(b.TimeSlotId===g.val())return b}};f.getSelectedTimeSlotId=function(){return g.val()};f.setSelectedTimeSlot=function(b){a.val(b);g.val(b)};f.getSelectedTimeSlotText=function(){return-1<a[0].selectedIndex?a[0].options[a[0].selectedIndex].text:""};return f}
function Toast(c,d,f,b,a,e){var g={controls:{},collapseAnimationDurationInMs:1500,scrollFrictionTimer:null,scrollFrictionStopTimeInMs:1200,minimalBottomMargin:20,isCollapsedHiddenField:null,initialize:function(){g.configureToastrPlugin();g.setuUpButtons();g.isCollapsedHiddenField=$("#"+e);"true"===g.isCollapsedHiddenField.val()&&setInterval(g.collapse(),100);g.attachPositionHandlersForMobileIos()},attachPositionHandlersForMobileIos:function(){if(browserSniffer.isMobileIos()){window.document.addEventListener("touchmove",
function(a){g.moveForMobileIosHandler()},!1);window.addEventListener("orientationchange",function(){g.moveForMobileIosHandler()});var a=g.calculateDefaultBottomMargin();g.setBottomMargin(a)}},configureToastrPlugin:function(){toastr.options=g.getToastrPluginOptions();toastr.success(c,d,f)},getToastrPluginOptions:function(){return{closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,toastClass:"ccl-toast",positionClass:"ccl-toast position-bottom-right",preventDuplicates:!0,onclick:null,showDuration:"0",
hideDuration:"1000",timeOut:"0",extendedTimeOut:"0",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",tapToDismiss:!1,containerId:a}},setuUpButtons:function(){g.controls.toastContainer=$("#"+a);g.controls.messageContainer=$(".ccl-toast.ccl-default-toast");g.controls.collapseButton=g.createButton("toggle-toast-button collapse");g.controls.collapseButtonContainer=g.createCollapseButtonContainer(g.controls.collapseButton);g.controls.expandButton=g.createButton("toggle-toast-button expand");
g.controls.collapsedStateIcon=g.createCollapsedStateIcon();g.controls.expandButtonContainer=g.createExpandButtonContainer();g.setUpExpandButton();g.setUpCollapseButton()},createCollapsedStateIcon:function(){return $("<img/>",{src:b,style:"background-color: white;"})},createButton:function(a){return $("<button/>",{"class":a})},createExpandButtonContainer:function(){return $("<div />",{"class":"expand-button-container"}).append(g.controls.expandButton).append($("<br />")).append(g.controls.collapsedStateIcon)},
createCollapseButtonContainer:function(a){return $("<div />",{"class":"collapse-button-container"}).append(a)},setUpExpandButton:function(){g.controls.toastContainer.prepend(g.controls.expandButtonContainer);g.controls.expandButtonContainer.hide();g.controls.expandButton.click(function(){g.isCollapsedHiddenField.val("false");g.controls.messageContainer.css("margin-left","0");g.controls.expandButtonContainer.hide();g.controls.collapseButton.show();g.controls.toastContainer.animate({right:"+="+g.controls.toastContainer.css("right").replace("-",
"")},g.collapseAnimationDurationInMs)})},setUpCollapseButton:function(){g.controls.toastContainer.prepend(g.controls.collapseButtonContainer);g.controls.collapseButton.click(function(){g.onCollapseButtonClick()})},onCollapseButtonClick:function(){g.isCollapsedHiddenField.val("true");g.controls.collapseButton.unbind("click");g.controls.toastContainer.animate({right:"-="+g.controls.toastContainer.css("width")},g.collapseAnimationDurationInMs,function(){g.collapse();g.controls.collapseButton.click(function(){g.onCollapseButtonClick()})})},
collapse:function(){g.controls.toastContainer.css("right","-"+g.controls.toastContainer.width()+"px");g.controls.collapseButton.hide();g.controls.expandButtonContainer.show();g.controls.messageContainer.css("margin-left",g.controls.expandButtonContainer.width())},getScreenHeight:function(){return g.isMobileLandscape()?screen.width:screen.height},isMobileLandscape:function(){return 90===Math.abs(window.orientation)?!0:!1},calculateDefaultBottomMargin:function(){return $(parent.document).height()-g.getScreenHeight()+
$("#"+a).height()},setBottomMargin:function(b){$("#"+a).css("margin-bottom",b)},calculateBottomMarginForMobileIos:function(){var a=g.calculateDefaultBottomMargin()-$(parent.document).scrollTop();return 0>=$(parent.document).scrollTop()?g.calculateDefaultBottomMargin():a<g.minimalBottomMargin?g.minimalBottomMargin:a},moveForMobileIosHandler:function(){null!==g.scrollFrictionTimer&&clearTimeout(g.scrollFrictionTimer);g.scrollFrictionTimer=setTimeout(function(){var a=g.calculateBottomMarginForMobileIos();
g.setBottomMargin(a)},g.scrollFrictionStopTimeInMs)}};g.initialize();return{}}
(function(c){c(["jquery"],function(c){return function(){function d(a,b){a||(a=e());h=c("#"+a.containerId);if(h.length)return h;b&&(h=c("<div/>").attr("id",a.containerId).addClass(a.positionClass).attr("aria-live","polite").attr("role","alert"),h.appendTo(c(a.target)));return h}function b(a,b,e){e=e&&e.force?e.force:!1;return a&&(e||0===c(":focus",a).length)?(a[b.hideMethod]({duration:b.hideDuration,easing:b.hideEasing,complete:function(){g(a)}}),!0):!1}function a(a){function b(a){if(!c(":focus",y).length||
a)return clearTimeout(D.intervalId),y[q.hideMethod]({duration:q.hideDuration,easing:q.hideEasing,complete:function(){g(y);if(q.onHidden&&"hidden"!==Q.state)q.onHidden();Q.state="hidden";Q.endTime=new Date;k&&k(Q)}})}function f(){if(0<q.timeOut||0<q.extendedTimeOut)H=setTimeout(b,q.extendedTimeOut),D.maxHideTime=parseFloat(q.extendedTimeOut),D.hideEta=(new Date).getTime()+D.maxHideTime}function m(){clearTimeout(H);D.hideEta=0;y.stop(!0,!0)[q.showMethod]({duration:q.showDuration,easing:q.showEasing})}
function p(){var a=(D.hideEta-(new Date).getTime())/D.maxHideTime*100;J.width(a+"%")}var q=e(),t=a.iconClass||q.iconClass;"undefined"!==typeof a.optionsOverride&&(q=c.extend(q,a.optionsOverride),t=a.optionsOverride.iconClass||t);a:{if(q.preventDuplicates)if(a.message===n){var B=!0;break a}else n=a.message;B=!1}if(!B){l++;h=d(q,!0);var H=null,y=c("<div/>");B=c("<div/>");var K=c("<div/>"),J=c("<div/>"),z=c(q.closeHtml),D={intervalId:null,hideEta:null,maxHideTime:null},Q={toastId:l,state:"visible",startTime:new Date,
options:q,map:a};a.iconClass&&y.addClass(q.toastClass).addClass(t);a.title&&(B.append(a.title).addClass(q.titleClass),y.append(B));a.message&&(K.append(a.message).addClass(q.messageClass),y.append(K));q.closeButton&&(z.addClass("toast-close-button").attr("role","button"),y.prepend(z));q.progressBar&&(J.addClass("toast-progress"),y.prepend(J));q.newestOnTop?h.prepend(y):h.append(y);y.hide();y[q.showMethod]({duration:q.showDuration,easing:q.showEasing,complete:q.onShown});0<q.timeOut&&(H=setTimeout(b,
q.timeOut),D.maxHideTime=parseFloat(q.timeOut),D.hideEta=(new Date).getTime()+D.maxHideTime,q.progressBar&&(D.intervalId=setInterval(p,10)));(function(){y.hover(m,f);!q.onclick&&q.tapToDismiss&&y.click(b);q.closeButton&&z&&z.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&!0!==a.cancelBubble&&(a.cancelBubble=!0);b(!0)});q.onclick&&y.click(function(){q.onclick();b()})})();k&&k(Q);q.debug&&console&&console.log(Q);return y}}function e(){return c.extend({},{tapToDismiss:!0,
toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1E3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1E3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5E3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',
newestOnTop:!0,preventDuplicates:!1,progressBar:!1},m.options)}function g(a){h||(h=d());a.is(":visible")||(a.remove(),0===h.children().length&&(h.remove(),n=void 0))}var h,k,l=0,m={clear:function(a,f){var g=e();h||d(g);if(!b(a,g,f))for(a=h.children(),f=a.length-1;0<=f;f--)b(c(a[f]),g)},remove:function(a){var b=e();h||d(b);a&&0===c(":focus",a).length?g(a):h.children().length&&h.remove()},error:function(b,c,d){return a({type:"error",iconClass:e().iconClasses.error,message:b,optionsOverride:d,title:c})},
getContainer:d,info:function(b,c,d){return a({type:"info",iconClass:e().iconClasses.info,message:b,optionsOverride:d,title:c})},options:{},subscribe:function(a){k=a},success:function(b,c,d){return a({type:"success",iconClass:e().iconClasses.success,message:b,optionsOverride:d,title:c})},version:"2.1.1",warning:function(b,c,d){return a({type:"warning",iconClass:e().iconClasses.warning,message:b,optionsOverride:d,title:c})}},n;return m}()})})("function"===typeof define&&define.amd?define:function(c,
d){"undefined"!==typeof module&&module.exports?module.exports=d(require("jquery")):window.toastr=d(window.jQuery)});
function Toggle(c){function d(){0<h.length&&"INPUT"==h[0].tagName&&"checkbox"==h.attr("type")&&(l.bind("mousedown",function(){return!1}),m.bind("mousedown",function(){return!1}),"true"===n&&(h.bind("change",f),h.on("keydown",function(a){13===a.which&&(h.is(":disabled")||(h.prop("checked",!e()),f()))})))}function f(){e()?b():a();h.trigger(g.options.clientStateChangedEventName,[{toggleInstanceId:c}]);k.focus()}function b(){k.removeClass(p.toggleOff).addClass(p.toggleOn);m.removeClass(p.checkedLabel).addClass(p.uncheckedLabel);
l.removeClass(p.uncheckedLabel).addClass(p.checkedLabel);h.prop("checked",!0)}function a(){k.removeClass(p.toggleOn).addClass(p.toggleOff);l.removeClass(p.checkedLabel).addClass(p.uncheckedLabel);m.removeClass(p.uncheckedLabel).addClass(p.checkedLabel);h.prop("checked",!1)}function e(){return h.prop("checked")}window[c]=this;var g=this,h,k,l,m,n,p;g.initialize=function(){h=g.controls.checkbox;k=g.controls.toggleBox;l=g.controls.labelOn;l.attr("title");m=g.controls.labelOff;m.attr("title");n=g.options.enabled;
p=g.options.cssClassess;d()};g.revertState=function(){e()?a():b()};g.clone=function(a,b){b=new Toggle(b);b.controls={checkbox:a.find(g.controls.checkbox.selector),toggleBox:a.find(g.controls.toggleBox.selector),labelOn:a.find(g.controls.labelOn.selector),labelOff:a.find(g.controls.labelOff.selector)};b.options=g.options;b.initialize()};g.toggleOnOff=function(e){e?b():a()};g.isChecked=function(){return e()}}
function ToolTip(c,d){function f(a,e,c,d){A=a;!e&&c&&(clearTimeout(U),U=setTimeout(function(){clearTimeout(O);d&&k();b(A)},m.settings.showPopupTimeout))}function b(a){K=y.scrollLeft();J=y.scrollTop();n.offset();e();$(document).trigger("hideTooltips");F=p.outerHeight(!0);R=p.outerWidth(!0);r||(r=h(),r.insertAfter(p));Q=r.outerHeight(!0);G=r.outerWidth(!0);u=Q+1;v=y.width()+K;q=y.height()+J;n.height();if(0>=a.pageX&&0>=a.pageY){var b=$(a.target),c=b.offset();a.pageX=c.left+b.outerWidth()/2;a.pageY=
c.top+b.outerHeight()/2}B=a.pageX?a.pageX:a.originalEvent.touches[0].pageX;H=a.pageY?a.pageY:a.originalEvent.touches[0].pageY;I=H-J>F+u;P=q-H>F+u;ha=I&&!P;w||(w=$("<div></div>").appendTo(r));w.attr("class",ha?z.arrowDown:z.arrowUp);p.show();r.show();w.show();a=R/2;p.css({top:ha?H-F-u:H+u,left:B-a<K?K:B+a>v?v-R:B-a});D=p.offset();t=D.left+p.outerWidth();a=ha?D.top+F-1:D.top+1-Q;b=t-G;b=B>b?b:B-G/2;B<D.left+G/2&&(b=D.left);r.css({top:a,left:b})}function a(){p&&r&&(p.hide(),r.hide())}function e(){p||
(p=g(),ca?p.appendTo($("#"+ca)):p.appendTo("form"))}function g(){var b=$("<div></div>").addClass(z.tooltipPopup).hover(function(){clearTimeout(O)},function(){O=setTimeout(function(){a()},m.settings.hidePopupTimeout)});m.autoWidth&&$(b).addClass(z.tooltipAutoWidth);$("<div></div>").addClass(z.tooltipPath).appendTo(b).html(m.path);$("<div></div>").addClass(z.tooltipTitle).appendTo(b).html(m.title);$("<div></div>").addClass(z.tooltipDescription).appendTo(b).html(m.description);return b}function h(){return $("<div></div>").addClass(z.arrowContainer).hover(function(){clearTimeout(O)},
function(){O=setTimeout(function(){a()},m.settings.hidePopupTimeout)})}function k(){if(m.dataSource){var a=n.data(m.settings.attributes.idDataKey),b=m.dataSource[a];b?l(b.title,b.description,b.path):(l("",""),m.loadDataClientFunction&&m.loadDataClientFunction(a).done(function(){(b=m.dataSource[a])&&l(b.title,b.description,b.path)}))}else l(n.data(m.settings.attributes.titleDataKey),n.data(m.settings.attributes.descriptionDataKey))}function l(a,b,e){m.title=a;m.description=b;m.path=e;if(p)if(p.find("."+
z.tooltipTitle).html(m.title?m.title:""),p.find("."+z.tooltipDescription).html(m.title||m.description?m.description:m.settings.missingDataText),e&&0!==e.length){a=p.find("."+z.tooltipPath).html("");b=Math.round(100/e.length)+"%";for(var c=e.length-1;0<=c;c--)$("<div></div>").html(e[c]).css("max-width",b).appendTo(a);a.show()}else p.find("."+z.tooltipPath).hide()}window[c]=this;var m=this,n=d,p,r,w,u,v,q,t,B,H,y=$(window),K,J,z,D,Q,F,R,G,O,U,P,I,ha,A,ca;m.initialize=function(){m.dataSource&&(m.title=
m.dataSource[m.dataKey].title,m.description=m.dataSource[m.dataKey].description,m.autoWidth=m.dataSource[m.dataKey].autoWidth);z=m.settings.cssClasses;ca=m.settings.toolTipContainerId;$(document).bind("hideTooltips",function(){a()});n.is("a")||n.addClass(z.linkToTooltip);var c=!!document.ontouchstart;n.hover(function(a){f(a,c,!0,!1)},function(){c||(clearTimeout(U),O=setTimeout(function(){a()},m.settings.hidePopupTimeout))}).mousemove(function(a){f(a,c,p&&p.is(":visible"),!1)}).on("ensureTooltipExists",
function(){e()}).on("click",function(e){clearTimeout(O);clearTimeout(U);p&&p.is(":visible")?a():b(e)})};m.initializeUnobtrusive=function(){z=m.settings.cssClasses;ca=m.settings.toolTipContainerId;$(document).on("hideTooltips",function(){a()}).on("mouseenter","["+m.settings.attributes.id+"],["+m.settings.attributes.title+"], ["+m.settings.attributes.description+"]",function(c){n=$(this);var d=!!document.ontouchstart;n.data("tooltip_initialized")||(n.is("a")||n.addClass(z.linkToTooltip),n.mousemove(function(a){f(a,
d,p&&p.is(":visible"),!0)}).on("mouseleave",function(){clearTimeout(U);O=setTimeout(function(){clearTimeout(O);a()},m.settings.hidePopupTimeout)}).on("ensureTooltipExists",function(){e()}).on("click",function(e){clearTimeout(O);clearTimeout(U);p&&p.is(":visible")?a():(k(),b(e))}),n.data("tooltip_initialized",!0));f(c,d,!0,!0)});e()};return m}
function TwoControlsSynchronizationObject(c){var d={},f={};f.callback=c;d.onFirstControlInitialized=function(b){f.control1=b;"undefined"!=typeof f.control2&&f.callback(f.control1,f.control2)};d.onSecondControlInitialized=function(b){f.control2=b;"undefined"!=typeof f.control1&&f.callback(f.control1,f.control2)};return d}UploaderSenderOptionsConstants={fileRepoData:"fileRepoData"};
function TrackXiti(c,d,f,b,a,e,g,h,k){xt_multc="&x1="+c+"&x2="+d+"&x3="+f+"&x4="+b;window.xtparam=null!=window.xtparam?window.xtparam+xt_multc:xt_multc;xtidc=xt_at=a;xt_ac=d;window.xtparam=null!=window.xtparam?window.xtparam+("&ac="+xt_ac+"&at="+xt_at):"&ac="+xt_ac+"&at="+xt_at;xtnv=document;xtsd=k;xtsite=e;xtn2=g;xtpage=h;xtdi=""}
(function(c){c.fn.autogrow=function(d){this.filter("textarea").each(function(){var f=this,b=c(f),a=b.height(),e,g=14;d&&d.hasOwnProperty("additionalHeight")&&(g=d.additionalHeight);var h=c("<div></div>").css({position:"absolute",top:-1E4,left:-1E4,fontSize:b.css("fontSize"),fontFamily:b.css("fontFamily"),fontWeight:d&&d.hasOwnProperty("fontWeight")?d.fontWeight:b.css("fontWeight"),padding:b.css("padding"),border:b.css("border"),resize:"none"}).appendTo(document.body),k=function(){var e=b.css("word-wrap");
h.css({width:b.width(),lineHeight:b.css("lineHeight"),"word-wrap":e?e:"break-word"});e=(d&&d.whiteSpaceMatters?f.value:f.value.trim()).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){for(var b="",e=0;e<a.length-1;e++)b+="&nbsp;";return b+" "});h.html(e&&0<e.length?e:b.prop("placeholder"));b.css("height",Math.max(h.height()+g,a))};b.bind("change keyup keydown input paste",k);c(window).resize(function(){e&&
clearTimeout(e);e=setTimeout(function(){k.apply(f)},200)});k.apply(f)});return self}})(jQuery);
jQuery.cookie=function(c,d,f){if(1<arguments.length&&"[object Object]"!==String(d)){f=jQuery.extend({},f);if(null===d||void 0===d)f.expires=-1;if("number"===typeof f.expires){var b=f.expires,a=f.expires=new Date;a.setDate(a.getDate()+b)}d=String(d);return document.cookie=[encodeURIComponent(c),"=",f.raw?d:encodeURIComponent(d),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}f=d||{};a=f.raw?function(a){return a}:
decodeURIComponent;return(b=(new RegExp("(?:^|; )"+encodeURIComponent(c)+"=([^;]*)")).exec(document.cookie))?a(b[1]):null};
(function(){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return c&&"function"===typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};self.linkify={};(function(d){function f(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=Object.create(a.prototype),d;for(d in e)c[d]=
e[d];c.constructor=b;b.prototype=c;return b}function b(a){a=a||{};this.defaultProtocol=a.defaultProtocol||m.defaultProtocol;this.events=a.events||m.events;this.format=a.format||m.format;this.formatHref=a.formatHref||m.formatHref;this.nl2br=a.nl2br||m.nl2br;this.tagName=a.tagName||m.tagName;this.target=a.target||m.target;this.validate=a.validate||m.validate;this.ignoreTags=[];this.attributes=a.attributes||a.linkAttributes||m.attributes;this.className=a.className||a.linkClass||m.className;a=a.ignoreTags||
m.ignoreTags;for(var b=0;b<a.length;b++)this.ignoreTags.push(a[b].toUpperCase())}function a(a){return a}function e(){return function(a){this.j=[];this.T=a||null}}function g(a,b,e,c){for(var d=0,f=a.length,g=[],h=void 0;d<f&&(h=b.next(a[d]));)b=h,d++;if(d>=f)return[];for(;d<f-1;)h=new r(c),g.push(h),b.on(a[d],h),b=h,d++;h=new r(e);g.push(h);b.on(a[f-1],h);return g}function h(){return function(a){a&&(this.v=a)}}function k(a){a=a?{v:a}:{};return f(u,h(),a)}function l(a){return a instanceof v||a instanceof
P}var m={defaultProtocol:"http",events:null,format:a,formatHref:a,nl2br:!1,tagName:"a",target:function(a,b){return"url"===b?"_blank":null},validate:!0,ignoreTags:[],attributes:null,className:"linkified"};b.prototype={resolve:function(a){var b=a.toHref(this.defaultProtocol);return{formatted:this.get("format",a.toString(),a),formattedHref:this.get("formatHref",b,a),tagName:this.get("tagName",b,a),className:this.get("className",b,a),target:this.get("target",b,a),events:this.getObject("events",b,a),attributes:this.getObject("attributes",
b,a)}},check:function(a){return this.get("validate",a.toString(),a)},get:function(a,b,e){var d=this[a];if(!d)return d;switch("undefined"===typeof d?"undefined":c(d)){case "function":return d(b,e.type);case "object":return a=d[e.type]||m[a],"function"===typeof a?a(b,e.type):a}return d},getObject:function(a,b,e){a=this[a];return"function"===typeof a?a(b,e.type):a}};var n=Object.freeze({defaults:m,Options:b,contains:function(a,b){for(var e=0;e<a.length;e++)if(a[e]===b)return!0;return!1}}),p=e();p.prototype=
{defaultTransition:!1,on:function(a,b){if(a instanceof Array){for(var e=0;e<a.length;e++)this.j.push([a[e],b]);return this}this.j.push([a,b]);return this},next:function(a){for(var b=0;b<this.j.length;b++){var e=this.j[b],c=e[1];if(this.test(a,e[0]))return c}return this.defaultTransition},accepts:function(){return!!this.T},test:function(a,b){return a===b},emit:function(){return this.T}};var r=f(p,e(),{test:function(a,b){return a===b||b instanceof RegExp&&b.test(a)}}),w=f(p,e(),{jump:function(a){var b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=this.next(new a(""));e===this.defaultTransition?(e=new this.constructor(b),this.on(a,e)):b&&(e.T=b);return e},test:function(a,b){return a instanceof b}}),u=h();u.prototype={toString:function(){return this.v+""}};var v=k(),q=k("@"),t=k(":"),B=k("."),H=k(),y=k(),K=k("\n"),J=k(),z=k("+"),D=k("#"),Q=k(),F=k("mailto:"),R=k("?"),G=k("/"),O=k("_"),U=k(),P=k(),I=k(),ha=k("{"),A=k("["),ca=k("<"),da=k("("),ia=k("}"),sa=k("]"),ta=k(">"),Aa=k(")"),
Sa=k("&"),gb=Object.freeze({Base:u,DOMAIN:v,AT:q,COLON:t,DOT:B,PUNCTUATION:H,LOCALHOST:y,NL:K,NUM:J,PLUS:z,POUND:D,QUERY:R,PROTOCOL:Q,MAILTO:F,SLASH:G,UNDERSCORE:O,SYM:U,TLD:P,WS:I,OPENBRACE:ha,OPENBRACKET:A,OPENANGLEBRACKET:ca,OPENPAREN:da,CLOSEBRACE:ia,CLOSEBRACKET:sa,CLOSEANGLEBRACKET:ta,CLOSEPAREN:Aa,AMPERSAND:Sa}),Ta="aaa aarp abb abbott abogado ac academy accenture accountant accountants aco active actor ad adac ads adult ae aeg aero af afl ag agency ai aig airforce airtel al alibaba alipay allfinanz alsace am amica amsterdam an analytics android ao apartments app apple aq aquarelle ar aramco archi army arpa arte as asia associates at attorney au auction audi audio author auto autos avianca aw ax axa az azure ba baidu band bank bar barcelona barclaycard barclays bargains bauhaus bayern bb bbc bbva bcg bcn bd be beats beer bentley berlin best bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday bloomberg blue bm bms bmw bn bnl bnpparibas bo boats boehringer bom bond boo book boots bosch bostik bot boutique br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call camera camp cancerresearch canon capetown capital car caravan cards care career careers cars cartier casa cash casino cat catering cba cbn cc cd ceb center ceo cern cf cfa cfd cg ch chanel channel chase chat cheap chloe christmas chrome church ci cipriani circle cisco citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com commbank community company compare computer comsec condos construction consulting contact contractors cooking cool coop corsica country coupon coupons courses cr credit creditcard creditunion cricket crown crs cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance date dating datsun day dclk de dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev diamonds diet digital direct directory discount dj dk dm dnp do docs dog doha domains download drive dubai durban dvag dz earth eat ec edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er erni es esq estate et eu eurovision eus events everbank exchange expert exposed express fage fail fairwinds faith family fan fans farm fashion fast feedback ferrero fi film final finance financial firestone firmdale fish fishing fit fitness fj fk flickr flights florist flowers flsmidth fly fm fo foo football ford forex forsale forum foundation fox fr fresenius frl frogans frontier fund furniture futbol fyi ga gal gallery gallup game garden gb gbiz gd gdn ge gea gent genting gf gg ggee gh gi gift gifts gives giving gl glass gle global globo gm gmail gmbh gmo gmx gn gold goldpoint golf goo goog google gop got gov gp gq gr grainger graphics gratis green gripe group gs gt gu gucci guge guide guitars guru gw gy hamburg hangout haus hdfcbank health healthcare help helsinki here hermes hiphop hitachi hiv hk hm hn hockey holdings holiday homedepot homes honda horse host hosting hoteles hotmail house how hr hsbc ht hu hyundai ibm icbc ice icu id ie ifm iinet il im immo immobilien in industries infiniti info ing ink institute insurance insure int international investments io ipiranga iq ir irish is iselect ist istanbul it itau iwc jaguar java jcb je jetzt jewelry jlc jll jm jmp jo jobs joburg jot joy jp jpmorgan jprs juegos kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kitchen kiwi km kn koeln komatsu kp kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster land landrover lanxess lasalle lat latrobe law lawyer lb lc lds lease leclerc legal lexus lgbt li liaison lidl life lifeinsurance lifestyle lighting like limited limo lincoln linde link live living lixil lk loan loans local locus lol london lotte lotto love lr ls lt ltd ltda lu lupin luxe luxury lv ly ma madrid maif maison makeup man management mango market marketing markets marriott mba mc md me med media meet melbourne meme memorial men menu meo mg mh miami microsoft mil mini mk ml mm mma mn mo mobi mobily moda moe moi mom monash money montblanc mormon mortgage moscow motorcycles mov movie movistar mp mq mr ms mt mtn mtpc mtr mu museum mutuelle mv mw mx my mz na nadex nagoya name natura navy nc ne nec net netbank network neustar new news nexus nf ng ngo nhk ni nico nikon ninja nissan nl no nokia norton nowruz np nr nra nrw ntt nu nyc nz obi office okinawa om omega one ong onl online ooo oracle orange org organic origins osaka otsuka ovh pa page pamperedchef panerai paris pars partners parts party passagens pe pet pf pg ph pharmacy philips photo photography photos physio piaget pics pictet pictures pid pin ping pink pizza pk pl place play playstation plumbing plus pm pn pohl poker porn post pr praxi press pro prod productions prof promo properties property protection ps pt pub pw pwc py qa qpon quebec quest racing re read realtor realty recipes red redstone redumbrella rehab reise reisen reit ren rent rentals repair report republican rest restaurant review reviews rexroth rich ricoh rio rip ro rocher rocks rodeo room rs rsvp ru ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsung sandvik sandvikcoromant sanofi sap sapo sarl sas saxo sb sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scor scot sd se seat security seek select sener services seven sew sex sexy sfr sg sh sharp shell shia shiksha shoes show shriram si singles site sj sk ski skin sky skype sl sm smile sn sncf so soccer social softbank software sohu solar solutions song sony soy space spiegel spot spreadbetting sr srl st stada star starhub statefarm statoil stc stcgroup stockholm storage store studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiss sx sy sydney symantec systems sz tab taipei taobao tatamotors tatar tattoo tax taxi tc tci td team tech technology tel telecity telefonica temasek tennis tf tg th thd theater theatre tickets tienda tiffany tips tires tirol tj tk tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tp tr trade trading training travel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubs ug uk unicom university uno uol us uy uz va vacations vana vc ve vegas ventures verisign versicherung vet vg vi viajes video viking villas vin vip virgin vision vista vistaprint viva vlaanderen vn vodka volkswagen vote voting voto voyage vu vuelos wales walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weir wf whoswho wien wiki williamhill win windows wine wme wolterskluwer work works world ws wtc wtf xbox xerox xin xperia xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama youtube yt za zara zero zip zm zone zuerich zw".split(" "),
Ua="0123456789".split(""),Va="0123456789abcdefghijklmnopqrstuvwxyz".split(""),Da=" \f\r\t\x0B\u00a0\u1680\u180e".split(""),qa=[],T=function(a){return new r(a)},aa=T(),cb=T(J),Ha=T(v),Ka=T(),Xa=T(I);aa.on("@",T(q)).on(".",T(B)).on("+",T(z)).on("#",T(D)).on("?",T(R)).on("/",T(G)).on("_",T(O)).on(":",T(t)).on("{",T(ha)).on("[",T(A)).on("<",T(ca)).on("(",T(da)).on("}",T(ia)).on("]",T(sa)).on(">",T(ta)).on(")",T(Aa)).on("&",T(Sa)).on([",",";","!",'"',"'"],T(H));aa.on("\n",T(K)).on(Da,Xa);Xa.on(Da,Xa);
for(var Ya=0;Ya<Ta.length;Ya++){var Za=g(Ta[Ya],aa,P,v);qa.push.apply(qa,Za)}var xa=g("file",aa,v,v),ib=g("ftp",aa,v,v),ja=g("http",aa,v,v),wa=g("mailto",aa,v,v);qa.push.apply(qa,xa);qa.push.apply(qa,ib);qa.push.apply(qa,ja);var nb=xa.pop(),ob=ib.pop(),$a=ja.pop(),pb=wa.pop(),Ea=T(v),L=T(Q),M=T(F);ob.on("s",Ea).on(":",L);$a.on("s",Ea).on(":",L);qa.push(Ea);nb.on(":",L);Ea.on(":",L);pb.on(":",M);var C=g("localhost",aa,y,v);qa.push.apply(qa,C);aa.on(Ua,cb);cb.on("-",Ka).on(Ua,cb).on(Va,Ha);Ha.on("-",
Ka).on(Va,Ha);for(var Ia=0;Ia<qa.length;Ia++)qa[Ia].on("-",Ka).on(Va,Ha);Ka.on("-",Ka).on(Ua,Ha).on(Va,Ha);aa.defaultTransition=T(U);var db=function(a){for(var b=a.replace(/[A-Z]/g,function(a){return a.toLowerCase()}),e=a.length,c=[],d=0;d<e;){for(var f=aa,g=null,h=0,k=null,l=-1;d<e&&(g=f.next(b[d]));)f=g,f.accepts()?(l=0,k=f):0<=l&&l++,h++,d++;0>l||(d-=l,h-=l,f=k.emit(),c.push(new f(a.substr(d-h,h))))}return c},Ab=Object.freeze({State:r,TOKENS:gb,run:db,start:aa}),Qa=h();Qa.prototype={type:"token",
isLink:!1,toString:function(){for(var a=[],b=0;b<this.v.length;b++)a.push(this.v[b].toString());return a.join("")},toHref:function(){return this.toString()},toObject:function(){return{type:this.type,value:this.toString(),href:this.toHref(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"http")}}};var tb=f(Qa,h(),{type:"email",isLink:!0}),rb=f(Qa,h(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),sb=f(Qa,h(),{type:"text"}),ub=f(Qa,h(),{type:"nl"}),La=f(Qa,h(),{type:"url",
isLink:!0,toHref:function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"http",b=!1,e=!1,c=this.v,d=[],f=0;c[f]instanceof Q;)b=!0,d.push(c[f].toString().toLowerCase()),f++;for(;c[f]instanceof G;)e=!0,d.push(c[f].toString()),f++;for(;l(c[f]);)d.push(c[f].toString().toLowerCase()),f++;for(;f<c.length;f++)d.push(c[f].toString());d=d.join("");b||e||(d=a+"://"+d);return d},hasProtocol:function(){return this.v[0]instanceof Q}}),jb=Object.freeze({Base:Qa,MAILTOEMAIL:tb,EMAIL:rb,NL:ub,
TEXT:sb,URL:La}),W=function(a){return new w(a)},kb=W(),vb=W(),wb=W(),ab=W(),xb=W(),Ma=W(),S=W(),eb=W(La),yb=W(),zb=W(La),X=W(La),ra=W(),na=W(),fb=W(),E=W(),ea=W(),N=W(La),la=W(La),Y=W(La),V=W(La),ba=W(),Z=W(),Na=W(),fa=W(),ya=W(),ka=W(),Fa=W(rb),Ca=W(),Ja=W(rb),oa=W(tb),ua=W(),Ba=W(),va=W(),za=W(),lb=W(ub);kb.on(K,lb).on(Q,vb).on(F,wb).on(G,ab);vb.on(G,ab);ab.on(G,xb);kb.on(P,Ma).on(v,Ma).on(y,eb).on(J,Ma);xb.on(P,X).on(v,X).on(J,X).on(y,X);Ma.on(B,S);ya.on(B,ka);S.on(P,eb).on(v,Ma).on(J,Ma).on(y,
Ma);ka.on(P,Fa).on(v,ya).on(J,ya).on(y,ya);eb.on(B,S);Fa.on(B,ka);eb.on(t,yb).on(G,X);yb.on(J,zb);zb.on(G,X);Fa.on(t,Ca);Ca.on(J,Ja);var ma=[v,q,y,J,z,D,Q,G,P,O,U,Sa],pa=[t,B,R,H,ia,sa,ta,Aa,ha,A,ca,da];X.on(ha,na).on(A,fb).on(ca,E).on(da,ea);ra.on(ha,na).on(A,fb).on(ca,E).on(da,ea);na.on(ia,X);fb.on(sa,X);E.on(ta,X);ea.on(Aa,X);N.on(ia,X);la.on(sa,X);Y.on(ta,X);V.on(Aa,X);ba.on(ia,X);Z.on(sa,X);Na.on(ta,X);fa.on(Aa,X);na.on(ma,N);fb.on(ma,la);E.on(ma,Y);ea.on(ma,V);na.on(pa,ba);fb.on(pa,Z);E.on(pa,
Na);ea.on(pa,fa);N.on(ma,N);la.on(ma,la);Y.on(ma,Y);V.on(ma,V);N.on(pa,N);la.on(pa,la);Y.on(pa,Y);V.on(pa,V);ba.on(ma,N);Z.on(ma,la);Na.on(ma,Y);fa.on(ma,V);ba.on(pa,ba);Z.on(pa,Z);Na.on(pa,Na);fa.on(pa,fa);X.on(ma,X);ra.on(ma,X);X.on(pa,ra);ra.on(pa,ra);wb.on(P,oa).on(v,oa).on(J,oa).on(y,oa);oa.on(ma,oa).on(pa,ua);ua.on(ma,oa).on(pa,ua);var Oa=[v,J,z,D,R,O,U,Sa,P];Ma.on(Oa,Ba).on(q,va);eb.on(Oa,Ba).on(q,va);S.on(Oa,Ba);Ba.on(Oa,Ba).on(q,va).on(B,za);za.on(Oa,Ba);va.on(P,ya).on(v,ya).on(y,Fa);var bb=
function(a){for(var b=a.length,e=0,c=[],d=[];e<b;){for(var f=kb,g=null,h=null,k=0,l=null,m=-1;e<b&&!(g=f.next(a[e]));)d.push(a[e++]);for(;e<b&&(h=g||f.next(a[e]));)g=null,f=h,f.accepts()?(m=0,l=f):0<=m&&m++,e++,k++;if(0>m)for(k=e-k;k<e;k++)d.push(a[k]);else 0<d.length&&(c.push(new sb(d)),d=[]),e-=m,k-=m,f=l.emit(),c.push(new f(a.slice(e-k,e)))}0<d.length&&c.push(new sb(d));return c},Pa=Object.freeze({State:w,TOKENS:jb,run:bb,start:kb});Array.isArray||(Array.isArray=function(a){return"[object Array]"===
Object.prototype.toString.call(a)});var Ra=function(a){return bb(db(a))};d.find=function(a){for(var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=Ra(a),c=[],d=0;d<e.length;d++){var f=e[d];!f.isLink||b&&f.type!==b||c.push(f.toObject())}return c};d.inherits=f;d.options=n;d.parser=Pa;d.scanner=Ab;d.test=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=Ra(a);return 1===e.length&&e[0].isLink&&(!b||e[0].type===b)};d.tokenize=Ra})(self.linkify)})();"use strict";
(function(c,d){d=function(c){function b(a){this.named=a}function a(a,b){this.delegate=a;this.entityParser=b;this.input=this.state=null;this.tagColumn=this.tagLine=this.column=this.line=this.index=-1;this.reset()}function e(b,e){this.token=null;this.startLine=1;this.startColumn=0;this.options=e||{};this.tokenizer=new a(this,b)}var d={nbsp:"\u00a0"},f=/^#[xX]([A-Fa-f0-9]+)$/,k=/^#([0-9]+)$/,l=/^([A-Za-z0-9]+)$/;b.prototype.parse=function(a){if(a){var b=a.match(f);if(b)return"&#x"+b[1]+";";if(b=a.match(k))return"&#"+
b[1]+";";if(b=a.match(l))return this.named[b[1]]||"&"+b[1]+";"}};var m=/[\t\n\f ]/,n=/[A-Za-z]/,p=/\r\n?/g;a.prototype={reset:function(){this.state="beforeData";this.input="";this.index=0;this.line=1;this.column=0;this.tagColumn=this.tagLine=-1;this.delegate.reset()},tokenize:function(a){this.reset();this.tokenizePart(a);this.tokenizeEOF()},tokenizePart:function(a){for(this.input+=a.replace(p,"\n");this.index<this.input.length;)this.states[this.state].call(this)},tokenizeEOF:function(){this.flushData()},
flushData:function(){"data"===this.state&&(this.delegate.finishData(),this.state="beforeData")},peek:function(){return this.input.charAt(this.index)},consume:function(){var a=this.peek();this.index++;"\n"===a?(this.line++,this.column=0):this.column++;return a},consumeCharRef:function(){var a=this.input.indexOf(";",this.index);if(-1!==a){var b=this.input.slice(this.index,a);if(a=this.entityParser.parse(b)){for(b=b.length;b;)this.consume(),b--;this.consume();return a}}},markTagStart:function(){this.tagLine=
this.line;this.tagColumn=this.column;this.delegate.tagOpen&&this.delegate.tagOpen()},states:{beforeData:function(){"<"===this.peek()?(this.state="tagOpen",this.markTagStart(),this.consume()):(this.state="data",this.delegate.beginData())},data:function(){var a=this.peek();"<"===a?(this.delegate.finishData(),this.state="tagOpen",this.markTagStart(),this.consume()):"&"===a?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(a))},tagOpen:function(){var a=
this.consume();"!"===a?this.state="markupDeclaration":"/"===a?this.state="endTagOpen":n.test(a)&&(this.state="tagName",this.delegate.beginStartTag(),this.delegate.appendToTagName(a.toLowerCase()))},markupDeclaration:function(){"-"===this.consume()&&"-"===this.input.charAt(this.index)&&(this.consume(),this.state="commentStart",this.delegate.beginComment())},commentStart:function(){var a=this.consume();"-"===a?this.state="commentStartDash":">"===a?(this.delegate.finishComment(),this.state="beforeData"):
(this.delegate.appendToCommentData(a),this.state="comment")},commentStartDash:function(){var a=this.consume();"-"===a?this.state="commentEnd":">"===a?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("-"),this.state="comment")},comment:function(){var a=this.consume();"-"===a?this.state="commentEndDash":this.delegate.appendToCommentData(a)},commentEndDash:function(){var a=this.consume();"-"===a?this.state="commentEnd":(this.delegate.appendToCommentData("-"+
a),this.state="comment")},commentEnd:function(){var a=this.consume();">"===a?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("--"+a),this.state="comment")},tagName:function(){var a=this.consume();m.test(a)?this.state="beforeAttributeName":"/"===a?this.state="selfClosingStartTag":">"===a?(this.delegate.finishTag(),this.state="beforeData"):this.delegate.appendToTagName(a)},beforeAttributeName:function(){var a=this.peek();m.test(a)?this.consume():"/"===a?(this.state=
"selfClosingStartTag",this.consume()):">"===a?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeName",this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(a))},attributeName:function(){var a=this.peek();m.test(a)?(this.state="afterAttributeName",this.consume()):"/"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===a?(this.state="beforeAttributeValue",
this.consume()):">"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeName(a))},afterAttributeName:function(){var a=this.peek();m.test(a)?this.consume():"/"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===a?(this.consume(),this.state="beforeAttributeValue"):">"===a?(this.delegate.beginAttributeValue(!1),
this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="attributeName",this.delegate.beginAttribute(),this.delegate.appendToAttributeName(a))},beforeAttributeValue:function(){var a=this.peek();m.test(a)?this.consume():'"'===a?(this.state="attributeValueDoubleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):"'"===a?(this.state="attributeValueSingleQuoted",
this.delegate.beginAttributeValue(!0),this.consume()):">"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeValueUnquoted",this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(a))},attributeValueDoubleQuoted:function(){var a=this.consume();'"'===a?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===a?this.delegate.appendToAttributeValue(this.consumeCharRef('"')||
"&"):this.delegate.appendToAttributeValue(a)},attributeValueSingleQuoted:function(){var a=this.consume();"'"===a?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===a?this.delegate.appendToAttributeValue(this.consumeCharRef("'")||"&"):this.delegate.appendToAttributeValue(a)},attributeValueUnquoted:function(){var a=this.peek();m.test(a)?(this.delegate.finishAttributeValue(),this.consume(),this.state="beforeAttributeName"):"&"===a?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef(">")||
"&")):">"===a?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeValue(a))},afterAttributeValueQuoted:function(){var a=this.peek();m.test(a)?(this.consume(),this.state="beforeAttributeName"):"/"===a?(this.consume(),this.state="selfClosingStartTag"):">"===a?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},selfClosingStartTag:function(){">"===this.peek()?
(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},endTagOpen:function(){var a=this.consume();n.test(a)&&(this.state="tagName",this.delegate.beginEndTag(),this.delegate.appendToTagName(a.toLowerCase()))}}};e.prototype={tokenize:function(a){this.tokens=[];this.tokenizer.tokenize(a);return this.tokens},tokenizePart:function(a){this.tokens=[];this.tokenizer.tokenizePart(a);return this.tokens},tokenizeEOF:function(){this.tokens=
[];this.tokenizer.tokenizeEOF();return this.tokens[0]},reset:function(){this.token=null;this.startLine=1;this.startColumn=0},addLocInfo:function(){this.options.loc&&(this.token.loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}});this.startLine=this.tokenizer.line;this.startColumn=this.tokenizer.column},beginData:function(){this.token={type:"Chars",chars:""};this.tokens.push(this.token)},appendToData:function(a){this.token.chars+=a},
finishData:function(){this.addLocInfo()},beginComment:function(){this.token={type:"Comment",chars:""};this.tokens.push(this.token)},appendToCommentData:function(a){this.token.chars+=a},finishComment:function(){this.addLocInfo()},beginStartTag:function(){this.token={type:"StartTag",tagName:"",attributes:[],selfClosing:!1};this.tokens.push(this.token)},beginEndTag:function(){this.token={type:"EndTag",tagName:""};this.tokens.push(this.token)},finishTag:function(){this.addLocInfo()},markTagAsSelfClosing:function(){this.token.selfClosing=
!0},appendToTagName:function(a){this.token.tagName+=a},beginAttribute:function(){this._currentAttribute=["","",null];this.token.attributes.push(this._currentAttribute)},appendToAttributeName:function(a){this._currentAttribute[0]+=a},beginAttributeValue:function(a){this._currentAttribute[2]=a},appendToAttributeValue:function(a){this._currentAttribute[1]=this._currentAttribute[1]||"";this._currentAttribute[1]+=a},finishAttributeValue:function(){}};var r={HTML5NamedCharRefs:d,EntityParser:b,EventedTokenizer:a,
Tokenizer:e,tokenize:function(a,c){return(new e(new b(d),c)).tokenize(a)}},w=c.options,u=w.Options;return function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=r.tokenize(a),d=[],f=[],g;b=new u(b);for(g=0;g<e.length;g++){var h=e[g];if("StartTag"===h.type){if(d.push(h),h=h.tagName.toUpperCase(),"A"===h||w.contains(b.ignoreTags,h)){for(var k=d.length,l=e,m=++g,n=d,p=1;m<l.length&&0<p;){var v=l[m];"StartTag"===v.type&&v.tagName.toUpperCase()===h?p++:"EndTag"===v.type&&v.tagName.toUpperCase()===
h&&p--;n.push(v);m++}g+=d.length-k-1}}else if("Chars"!==h.type)d.push(h);else{k=b;h=c.tokenize(h.chars);l=[];for(m=0;m<h.length;m++)if(n=h[m],"nl"===n.type&&k.nl2br)l.push({type:"StartTag",tagName:"br",attributes:[],selfClosing:!0});else if(n.isLink&&k.check(n)){var G=k.resolve(n);n=G.formatted;p=G.tagName;v=G.className;var O=G.target,U=G.attributes;G=[["href",G.formattedHref]];v&&G.push(["class",v]);O&&G.push(["target",O]);for(var P in U)G.push([P,U[P]]);l.push({type:"StartTag",tagName:p,attributes:G,
selfClosing:!1});l.push({type:"Chars",chars:n});l.push({type:"EndTag",tagName:p})}else l.push({type:"Chars",chars:n.toString()});d.push.apply(d,l)}}for(g=0;g<d.length;g++)switch(e=d[g],e.type){case "StartTag":b="<"+e.tagName;if(0<e.attributes.length){e=e.attributes;P=[];for(k=0;k<e.length;k++)h=e[k],P.push(h[0]+'="'+h[1].replace(/"/g,"&quot;")+'"');b+=" "+P.join(" ")}b+=">";f.push(b);break;case "EndTag":f.push("</"+e.tagName+">");break;case "Chars":f.push(e.chars);break;case "Comment":f.push("\x3c!--"+
e.chars+"--\x3e")}return f.join("")}}(d);c.linkifyHtml=d})(window,linkify);
(function(c){function d(d){if("string"===typeof d.data){var b=d.handler,a=d.data.toLowerCase().split(" ");d.handler=function(e){if(this===e.target||!/textarea|select/i.test(e.target.nodeName)&&"text"!==e.target.type&&"password"!==e.target.type){var d="keypress"!==e.type&&c.hotkeys.specialKeys[e.which],f=String.fromCharCode(e.which).toLowerCase(),k="",l={};e.altKey&&"alt"!==d&&(k+="alt+");e.ctrlKey&&"ctrl"!==d&&(k+="ctrl+");e.metaKey&&!e.ctrlKey&&"meta"!==d&&(k+="meta+");e.shiftKey&&"shift"!==d&&(k+=
"shift+");d?l[k+d]=!0:(l[k+f]=!0,l[k+c.hotkeys.shiftNums[f]]=!0,"shift+"===k&&(l[c.hotkeys.shiftNums[f]]=!0));d=0;for(f=a.length;d<f;d++)if(l[a[d]])return b.apply(this,arguments)}}}}c.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",
105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};c.each(["keydown","keyup","keypress"],function(){c.event.special[this]={add:d}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var c=!1,d=!1,f=!1;(function(b){b.vakata={};b.vakata.css={get_css:function(a,b,e){a=a.toLowerCase();var c=e.cssRules||e.rules,d=0;do{if(c.length&&d>c.length+5)break;if(c[d].selectorText&&c[d].selectorText.toLowerCase()==a)return!0===b?(e.removeRule&&e.removeRule(d),e.deleteRule&&e.deleteRule(d),!0):c[d]}while(c[++d]);return!1},add_css:function(a,e){if(b.jstree.css.get_css(a,!1,e))return!1;e.insertRule?e.insertRule(a+" { }",0):e.addRule(a,null,0);return b.vakata.css.get_css(a)},
remove_css:function(a,e){return b.vakata.css.get_css(a,!0,e)},add_sheet:function(a){var e=!1,c=!0;if(a.str)return a.title&&(e=b("style[id='"+a.title+"-stylesheet']")[0]),e?c=!1:(e=document.createElement("style"),e.setAttribute("type","text/css"),a.title&&e.setAttribute("id",a.title+"-stylesheet")),e.styleSheet?c?(document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet.cssText=a.str):e.styleSheet.cssText=e.styleSheet.cssText+" "+a.str:(e.appendChild(document.createTextNode(a.str)),document.getElementsByTagName("head")[0].appendChild(e)),
e.sheet||e.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(n){}else return e=document.createElement("link"),e.rel="stylesheet",e.type="text/css",e.media="all",e.href=a.url,document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet}};var a=[],e=-1,g={},h={};b.fn.jstree=function(e){var c="string"==typeof e,d=Array.prototype.slice.call(arguments,1),f=this;if(c){if("_"==e.substring(0,1))return f;this.each(function(){var c=a[b.data(this,"jstree_instance_id")];
c=c&&b.isFunction(c[e])?c[e].apply(c,d):c;if("undefined"!==typeof c&&(0===e.indexOf("is_")||!0!==c&&!1!==c))return f=c,!1})}else this.each(function(){var c=b.data(this,"jstree_instance_id"),f=[],h=e?b.extend({},!0,e):{},k=b(this),l=!1,m=[];f=f.concat(d);k.data("jstree")&&f.push(k.data("jstree"));h=f.length?b.extend.apply(null,[!0,h].concat(f)):h;"undefined"!==typeof c&&a[c]&&a[c].destroy();c=parseInt(a.push({}),10)-1;b.data(this,"jstree_instance_id",c);h.plugins=b.isArray(h.plugins)?h.plugins:b.jstree.defaults.plugins.slice();
h.plugins.unshift("core");h.plugins=h.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");l=b.extend(!0,{},b.jstree.defaults,h);l.plugins=h.plugins;b.each(g,function(a,e){-1===b.inArray(a,l.plugins)?(l[a]=null,delete l[a]):m.push(a)});l.plugins=m;a[c]=new b.jstree._instance(c,b(this).addClass("jstree jstree-"+c),l);b.each(a[c]._get_settings().plugins,function(b,e){a[c].data[e]={}});b.each(a[c]._get_settings().plugins,function(b,e){g[e]&&
g[e].__init.apply(a[c])});setTimeout(function(){a[c]&&a[c].init()},0)});return f};b.jstree={defaults:{plugins:[]},_focused:function(){return a[e]||null},_reference:function(e){if(a[e])return a[e];var c=b(e);c.length||"string"!==typeof e||(c=b("#"+e));return c.length?a[c.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(a,e,c){this.data={core:{}};this.get_settings=function(){return b.extend(!0,{},c)};this._get_settings=function(){return c};this.get_index=function(){return a};
this.get_container=function(){return e};this.get_container_ul=function(){return e.children("ul:eq(0)")};this._set_settings=function(a){c=b.extend(!0,{},c,a)}},_fn:{},plugin:function(a,e){e=b.extend({},{__init:b.noop,__destroy:b.noop,_fn:{},defaults:!1},e);g[a]=e;b.jstree.defaults[a]=e.defaults;b.each(e._fn,function(e,c){c.plugin=a;c.old=b.jstree._fn[e];b.jstree._fn[e]=function(){var a=c,d=Array.prototype.slice.call(arguments);var f=new b.Event("before.jstree");var g=!1;if(!0!==this.data.core.locked||
"unlock"===e||"is_locked"===e){do{if(a&&a.plugin&&-1!==b.inArray(a.plugin,this._get_settings().plugins))break;a=a.old}while(a);if(a){if(0===e.indexOf("_"))f=a.apply(this,d);else{f=this.get_container().triggerHandler(f,{func:e,inst:this,args:d,plugin:a.plugin});if(!1===f)return;"undefined"!==typeof f&&(d=f);f=a.apply(b.extend({},this,{__callback:function(a){this.get_container().triggerHandler(e+".jstree",{inst:this,args:d,rslt:a,rlbk:g})},__rollback:function(){return g=this.get_rollback()},__call_old:function(b){return a.old.apply(this,
b?Array.prototype.slice.call(arguments,1):d)}}),d)}return f}}};b.jstree._fn[e].old=c.old;b.jstree._fn[e].plugin=a})},rollback:function(e){e&&(b.isArray(e)||(e=[e]),b.each(e,function(b,e){a[e.i].set_rollback(e.h,e.d)}))}};b.jstree._fn=b.jstree._instance.prototype={};b(function(){var a=navigator.userAgent.toLowerCase(),e=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],g=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(e,10)){c=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}g+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(e,10)&&(d=!0,g+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&/mozilla/.test(a)&&1.9>parseFloat(e,10)&&(f=!0,g+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");b.vakata.css.add_sheet({str:g,title:"jstree"})});b.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,set_focus_on_init:!0,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this._get_settings().core.set_focus_on_init&&this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction",
"rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",b.proxy(function(a){a=b(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",b.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",
function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();try{a.removeAllRanges(),a.collapse()}catch(l){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",b.proxy(function(a,e){a=this._get_node(e.rslt.obj);var c=this;-1===a&&(a=this.get_container_ul());a.length&&a.find("li").each(function(){var a=b(this);a.data("jstree")&&b.each(a.data("jstree"),function(e,d){c.data[e]&&b.isFunction(c["_"+
e+"_notify"])&&c["_"+e+"_notify"].call(c,a,d)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",b.proxy(function(a,e){a=this._get_node(e.rslt.obj);var c=this;-1===a&&(a=this.get_container_ul());a.length&&a.find("li.jstree-open:not(:has(ul))").each(function(){c.load_node(this,b.noop,b.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var c,d=this.get_index(),f=this._get_settings(),h=this;
b.each(f.plugins,function(a,b){try{g[b].__destroy.apply(h)}catch(w){}});this.__callback();if(this.is_focused())for(c in a)if(a.hasOwnProperty(c)&&c!=d){a[c].set_focus();break}d===e&&(e=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});b(document).unbind(".jstree-"+d).undelegate(".jstree-"+d);a[d]=null;delete a[d]},_core_notify:function(a,
b){b.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&
a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var e=this,c=!0,d=[],f=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=b.map(b.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,
".").replace(/\./g,"\\.").replace(/:/g,"\\:")}),this.data.core.to_load=b.map(b.makeArray(this.data.core.to_load),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(b.each(this.data.core.to_load,function(a,e){if("#"==e)return!0;b(e).length?d.push(e):f.push(e)}),
d.length&&(this.data.core.to_load=f,b.each(d,function(a,b){e._is_loaded(b)||(e.load_node(b,function(){e.reload_nodes(!0)},function(){e.reload_nodes(!0)}),c=!1)})));this.data.core.to_open.length&&b.each(this.data.core.to_open,function(a,b){e.open_node(b,!1,!0)});c&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){e.__callback({},e)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&b.each(this.data.core.to_open,
function(b,e){a.open_node(e,!1,!0)});this.__callback({})},refresh:function(a,b){var e=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){e.__callback({obj:a});e.reload_nodes();b&&"function"==typeof b&&b()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=b.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");e=this.get_index();
this.__callback()}},is_focused:function(){return e==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),e=-1);this.__callback()},_get_node:function(a){var e=b(a,this.get_container());if(e.is(".jstree")||-1==a)return-1;e=e.closest("li:not(.jstree-header)",this.get_container());return e.length?e:!1},_get_next:function(a,b){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:not(.jstree-header):first-child"):a.length?b?0<a.nextAll("li:not(.jstree-header)").size()?
a.nextAll("li:not(.jstree-header):eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:not(.jstree-header):eq(0)"):0<a.nextAll("li:not(.jstree-header)").size()?a.nextAll("li:not(.jstree-header):eq(0)"):a.parentsUntil(".jstree","li").next("li:not(.jstree-header)").eq(0):!1},_get_prev:function(a,b){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:not(.jstree-header):last-child");if(!a.length)return!1;if(b)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prevAll("li:not(.jstree-header)").length){for(a=
a.prevAll("li:not(.jstree-header)").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:not(.jstree-header):last");return a}a=a.parentsUntil(".jstree","li:not(.jstree-header):eq(0)");return a.length?a:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:not(.jstree-header):eq(0)");return a.length?a:-1},_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li:not(.jstree-header)"):
a.length?a.children("ul:eq(0)").children("li:not(.jstree-header)"):!1},get_path:function(a,b){var e=[],c=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){e.push(b?this.id:c.get_text(this))});e.reverse();e.push(b?a.attr("id"):this.get_text(a));return e},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&
-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,b,e){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return b&&b.call(),!1;var d=e||c?0:this._get_settings().core.animation,f=this;this._is_loaded(a)?
(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){f.open_node(this,!1,!0)}),d&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),d?a.children("ul").stop(!0,!0).slideDown(d,function(){this.style.display="";f.after_open(a)}):f.after_open(a),this.__callback({obj:a}),b&&b.call()):(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){f.open_node(a,
b,e)},b))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,b){a=this._get_node(a);b=b||c?0:this._get_settings().core.animation;var e=this;if(!a.length||!a.hasClass("jstree-open"))return!1;b&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");b?a.children("ul").stop(!0,!0).slideUp(b,function(){this.style.display="";e.after_close(a)}):e.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},
toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,b,e){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());e?a=a.find("li.jstree-closed"):(e=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var c=this;a.each(function(){var a=this;c._is_loaded(this)?c.open_node(this,!1,!b):c.open_node(this,function(){c.open_all(a,b,e)},
!b)});0===e.find("li.jstree-closed").length&&this.__callback({obj:e})},close_all:function(a,b){var e=this;(a=a?this._get_node(a):this.get_container())&&-1!==a||(a=this.get_container_ul());a.find("li.jstree-open").andSelf().each(function(){e.close_node(this,!b)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?b(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,b){this.get_container().empty().append(a);this.data=b;this.__callback()},load_node:function(a,b,e){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,e,c,d,f){a=this._get_node(a);e="undefined"===typeof e?
"last":e;var g=b("<li />"),h=this._get_settings().core;if(-1!==a&&!a.length)return!1;if(!f&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,e,c,d,!0)}),!1;this.__rollback();"string"===typeof c&&(c={data:c});c||(c={});c.attr&&g.attr(c.attr);c.metadata&&g.data(c.metadata);c.state&&g.addClass("jstree-"+c.state);c.data||(c.data=this._get_string("new_node"));if(!b.isArray(c.data)){var k=c.data;c.data=[];c.data.push(k)}b.each(c.data,function(a,e){k=b("<a />");b.isFunction(e)&&
(e=e.call(this,c));if("string"==typeof e)k.attr("href","#")[h.html_titles?"html":"text"](e);else e.attr||(e.attr={}),e.attr.href||(e.attr.href="#"),k.attr(e.attr)[h.html_titles?"html":"text"](e.title),e.language&&k.addClass(e.language);k.prepend("<ins class='jstree-icon'>&#160;</ins>");!e.icon&&c.icon&&(e.icon=c.icon);e.icon&&(-1===e.icon.indexOf("/")?k.children("ins").addClass(e.icon):k.children("ins").css("background","url('"+e.icon+"') center center no-repeat"));g.append(k)});g.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===a&&(a=this.get_container(),"before"===e&&(e="first"),"after"===e&&(e="last"));switch(e){case "before":a.before(g);k=this._get_parent(a);break;case "after":a.after(g);k=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(g);k=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(g);k=a;break;default:a.children("ul").length||a.append("<ul />"),e||(e=0),k=a.children("ul").children("li").eq(e),
k.length?k.before(g):a.children("ul").append(g),k=a}if(-1===k||k.get(0)===this.get_container().get(0))k=-1;this.clean_node(k);this.__callback({obj:g,parent:k});d&&d.call(this,g);return g},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var b=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(b)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,b){a=this._get_node(a);
if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var e=a.children("INS").clone();a.html(b).prepend(e);this.__callback({obj:a,name:b});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b});return a.nodeValue=b},rename_node:function(a,b){a=this._get_node(a);this.__rollback();a&&a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:a,name:b})},delete_node:function(a){a=this._get_node(a);
if(!a.length)return!1;this.__rollback();var e=this._get_parent(a),c=b([]),d=this;a.each(function(){c=c.add(d._get_prev(this))});a=a.detach();-1!==e&&0===e.find("> ul > li").length&&e.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(e);this.__callback({obj:a,prev:c,parent:e});return a},prepare_move:function(a,e,c,d,f){var g={};g.ot=b.jstree._reference(a)||this;g.o=g.ot._get_node(a);g.r=-1===e?-1:this._get_node(e);g.p="undefined"===typeof c||!1===c?"last":c;if(f||!h.o||
h.o[0]!==g.o[0]||h.r[0]!==g.r[0]||h.p!==g.p){g.ot=b.jstree._reference(g.o)||this;g.rt=b.jstree._reference(g.r)||this;if(-1!==g.r&&g.r){if(!/^(before|after)$/.test(g.p)&&!this._is_loaded(g.r))return this.load_node(g.r,function(){this.prepare_move(a,e,c,d,!0)});switch(g.p){case "before":g.cp=g.r.index();g.cr=g.rt._get_parent(g.r);break;case "after":g.cp=g.r.index()+1;g.cr=g.rt._get_parent(g.r);break;case "first":g.cp=0;g.cr=g.r;break;case "inside":case "last":g.cp=g.r.find(" > ul > li").length;g.cr=
g.r;break;default:g.cp=g.p,g.cr=g.r}}else switch(g.cr=-1,g.p){case "first":case "before":case "inside":g.cp=0;break;case "after":case "last":g.cp=g.rt.get_container().find(" > ul > li").length;break;default:g.cp=g.p}g.np=-1==g.cr?g.rt.get_container():g.cr;g.op=g.ot._get_parent(g.o);g.cop=g.o.index();-1===g.op&&(g.op=g.ot?g.ot.get_container():this.get_container());!/^(before|after)$/.test(g.p)&&g.op&&g.np&&g.op[0]===g.np[0]&&g.o.index()<g.cp&&g.cp++;g.or=g.np.find(" > ul > li:nth-child("+(g.cp+1)+
")");h=g}this.__callback(h);d&&d.call(this,h)},check_move:function(){var a=h,b=!0,e=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0]||a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==e.parentsUntil(".jstree","li").andSelf().index(this))return b=!1});return b},move_node:function(a,e,c,d,f,g){if(!f)return this.prepare_move(a,e,c,function(a){this.move_node(a,!1,!1,d,!0,g)});d&&(h.cy=!0);if(!g&&!this.check_move())return!1;this.__rollback();e=!1;d?
(e=a.o.clone(!0),e.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):e=a.o;a.or.length?a.or.before(e):(a.np.children("ul").length||b("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(e));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(w){}d&&(h.cy=!0,h.oc=e);this.__callback(h);return h},_get_move:function(){return h}}})})(jQuery);(function(b){var a,
e,c;b(function(){/msie/.test(navigator.userAgent.toLowerCase())?(e=b('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),c=b('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=e.width()-c.width(),e.add(c).remove()):(e=b("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),a=100-e.width(),e.parent().remove())});b.jstree.plugin("ui",{__init:function(){this.data.ui.selected=b();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",b.proxy(function(a){a.preventDefault();a.currentTarget.blur();b(a.currentTarget).hasClass("jstree-loading")||this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",b.proxy(function(a){b(a.currentTarget).hasClass("jstree-loading")||
this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",b.proxy(function(a){b(a.currentTarget).hasClass("jstree-loading")||this.dehover_node(a.target)},this)).bind("reopen.jstree",b.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",b.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",b.proxy(function(){this.reselect()},this)).bind("close_node.jstree",b.proxy(function(a,e){var c=this._get_settings().ui,d=this._get_node(e.rslt.obj);
a=d&&d.length?d.children("ul").find("a.jstree-clicked"):b();var f=this;!1!==c.selected_parent_close&&a.length&&a.each(function(){f.deselect_node(this);"select_parent"===c.selected_parent_close&&f.select_node(d)})},this)).bind("delete_node.jstree",b.proxy(function(a,b){a=this._get_settings().ui.select_prev_on_delete;var e=this._get_node(b.rslt.obj);e=e&&e.length?e.find("a.jstree-clicked"):[];var c=this;e.each(function(){c.deselect_node(this)});a&&e.length&&b.rslt.prev.each(function(){if(this.parentNode)return c.select_node(this),
!1})},this)).bind("move_node.jstree",b.proxy(function(a,b){b.rslt.cy&&b.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(a,e){if("undefined"===typeof a||null===a)return e?this.data.ui.selected:this.data.ui.last_selected;e=b(a,this.get_container());
if(e.is(".jstree")||-1==a)return-1;e=e.closest("li",this.get_container());return e.length?e:!1},_ui_notify:function(a,b){b.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var a=
this,e=this.data.ui.to_select;e=b.map(b.makeArray(e),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:")});b.each(e,function(b,e){e&&"#"!==e&&a.select_node(e)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);if(!a.length)return!1;
a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered;if(!a||!a.length)return!1;var b=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===b[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,b,e){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var c=this._get_settings().ui,
d="on"==c.select_multiple_modifier||!1!==c.select_multiple_modifier&&e&&e[c.select_multiple_modifier+"Key"],f=!1!==c.select_range_modifier&&e&&e[c.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],g=this.is_selected(a),h=!0,k=this;if(b){if(c.disable_selecting_children&&d&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
h=!1;switch(!0){case f:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();-1==c.select_limit||a.length<c.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==k.data.ui.last_selected[0]&&k.deselect_node(this)}),g=!1,h=!0):h=!1;break;case g&&!d:this.deselect_all();g=!1;h=!0;break;case !g&&!d:if(-1==c.select_limit||
0<c.select_limit)this.deselect_all(),h=!0;break;case g&&d:this.deselect_node(a);break;case !g&&d:if(-1==c.select_limit||this.data.ui.selected.length+1<=c.select_limit)h=!0}}h&&!g&&(f||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),c.selected_parent_open&&a.parents(".jstree-closed").each(function(){k.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:e}))},_fix_scroll:function(b){var e=this.get_container()[0];
e.scrollHeight>e.offsetHeight&&(b=this._get_node(b))&&-1!==b&&b.length&&b.is(":visible")&&(b=b.offset().top-this.get_container().offset().top,0>b&&(e.scrollTop=e.scrollTop+b-1),b+this.data.core.li_height+(e.scrollWidth>e.offsetWidth?a:0)>e.offsetHeight&&(e.scrollTop+=b-e.offsetHeight+this.data.core.li_height+1+(e.scrollWidth>e.offsetWidth?a:0)))},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(a){return a?b(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?b(a).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=b([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});b.jstree.defaults.plugins.push("ui")})(jQuery);(function(b){b.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",b.proxy(function(a,b){if(this._get_settings().crrm.move.open_onmove){var e=this;b.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){e.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(a,e){a=this._get_node(a);var c=this._get_settings().core.rtl,d=this._get_settings().crrm.input_width_limit,f=a.children("ins").width(),l=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,m=this.get_text(a),n=b("<div />",{css:{position:"absolute",top:"-200px",left:c?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
p=a.css("position","relative").append(b("<input />",{value:m,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:c?"auto":f+l+4+"px",right:c?f+l+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:b.proxy(function(){var b=a.children(".jstree-rename-input"),c=b.val();""===c&&(c=m);n.remove();b.remove();this.set_text(a,m);this.rename_node(a,c);e.call(this,a,c,m);a.css("position","")},
this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=m,this.blur()):13==a?this.blur():p.width(Math.min(n.text("pW"+this.value).width(),d))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");n.css({fontFamily:p.css("fontFamily")||"",fontSize:p.css("fontSize")||"",fontWeight:p.css("fontWeight")||"",fontStyle:p.css("fontStyle")||"",fontStretch:p.css("fontStretch")||"",fontVariant:p.css("fontVariant")||"",letterSpacing:p.css("letterSpacing")||
"",wordSpacing:p.css("wordSpacing")||""});p.width(Math.min(n.text("pW"+p[0].value).width(),d))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var b=this.__callback;this._show_input(a,function(a,e,c){b.call(this,{obj:a,new_name:e,old_name:c})})},create:function(a,e,c,d,f){var g=this;(a=this._get_node(a))||(a=-1);this.__rollback();return this.create_node(a,e,c,function(a){var e=this._get_parent(a),c=b(a).index();d&&d.call(this,a);e.length&&e.hasClass("jstree-closed")&&this.open_node(e,
!1,!0);f?g.__callback({obj:a,name:this.get_text(a),parent:e,position:c}):this._show_input(a,function(a,b,d){g.__callback({obj:a,name:b,parent:e,position:c})})})},remove:function(a){a=this._get_node(a,!0);var b=this._get_parent(a),c=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:c,parent:b})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,b,c,d,f,l){var e=
this._get_settings().crrm.move;if(!f)return"undefined"===typeof c&&(c=e.default_position),"inside"!==c||e.default_position.match(/^(before|after)$/)||(c=e.default_position),this.__call_old(!0,a,b,c,d,!1,l);if(!0===e.always_copy||"multitree"===e.always_copy&&a.rt.get_index()!==a.ot.get_index())d=!0;this.__call_old(!0,a,b,c,d,!0,l)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,
!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var b=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,
nodes:b})}}})})(jQuery);(function(b){var a=[];b.jstree._themes=!1;b.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",b.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",b.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(e,c){if(!e)return!1;c||(c=b.jstree._themes+e+"/style.css");-1==b.inArray(c,a)&&(b.vakata.css.add_sheet({url:c}),a.push(c));this.data.themes.theme!=e&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=e);this.get_container().addClass("jstree-"+e);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});b(function(){!1===b.jstree._themes&&b("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return b.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===b.jstree._themes&&(b.jstree._themes="themes/")});b.jstree.defaults.plugins.push("themes")})(jQuery);(function(b){var a=[];b.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof b.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";b.each(this._get_settings().hotkeys,function(e,c){!1!==c&&-1==b.inArray(e,a)&&(b(document).bind("keydown",e,function(a){a:{var c=b.jstree._focused(),d;if(c&&c.data&&c.data.hotkeys&&c.data.hotkeys.enabled&&(d=c._get_settings().hotkeys[e])){a=d.call(c,a);break a}a=void 0}return a}),a.push(e))});this.get_container().bind("lock.jstree",b.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",b.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?
this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled||(this.data.hotkeys.enabled=!0)},disable_hotkeys:function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1)}}})})(jQuery);(function(b){b.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,b){b.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,b,c){var e=this;this.load_node_json(a,function(){e.__callback({obj:e._get_node(a)});b.call(this)},c)},_is_loaded:function(a){var e=this._get_settings().json_data;
a=this._get_node(a);return-1==a||!a||!e.ajax&&!e.progressive_render&&!b.isFunction(e.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=this._get_node(a);var e=this._get_settings().json_data;a&&-1!==a&&e.progressive_unload&&(b.isFunction(e.data)||e.ajax)&&a.removeData("jstree_children");return this.__call_old()},load_node_json:function(a,e,c){var d=this.get_settings().json_data,f=function(){};var g=function(){};if((a=this._get_node(a))&&-1!==
a&&(d.progressive_render||d.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(g=this._parse_json(a.data("jstree_children"),a))a.append(g),d.progressive_unload||a.removeData("jstree_children");this.clean_node(a);e&&e.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !d.data&&!d.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(d.data):d.data.call(this,
a,b.proxy(function(b){(b=this._parse_json(b,a))?(-1!==a&&a?(a.append(b).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(b.children()),this.clean_node(a),e&&e.call(this)):(-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&this.correct_state(a)):d.correct_state&&this.get_container().children("ul").empty(),c&&c.call(this))},this));break;
case !!d.data&&!d.ajax||!!d.data&&!!d.ajax&&(!a||-1===a):a&&-1!=a||((g=this._parse_json(d.data,a))?(this.get_container().children("ul").empty().append(g.children()),this.clean_node()):d.correct_state&&this.get_container().children("ul").empty());e&&e.call(this);break;case !d.data&&!!d.ajax||!!d.data&&!!d.ajax&&a&&-1!==a:f=function(b,e,f){var g=this.get_settings().json_data.ajax.error;g&&g.call(this,b,e,f);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
"success"===e&&d.correct_state&&this.correct_state(a)):"success"===e&&d.correct_state&&this.get_container().children("ul").empty();c&&c.call(this)},g=function(c,g,h){var k=this.get_settings().json_data.ajax.success;k&&(c=k.call(this,c,g,h)||c);if(""===c||c&&c.toString&&""===c.toString().replace(/^[\s\n]+$/,"")||!b.isArray(c)&&!b.isPlainObject(c))return f.call(this,h,g,"");(c=this._parse_json(c,a))?(-1!==a&&a?(a.append(c).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):
this.get_container().children("ul").empty().append(c.children()),this.clean_node(a),e&&e.call(this)):-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),e&&e.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this))},d.ajax.context=this,d.ajax.error=f,d.ajax.success=g,d.ajax.dataType||(d.ajax.dataType="json"),b.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a)),
b.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a)),b.ajax(d.ajax)}}},_parse_json:function(a,e,c){var d=!1,f=this._get_settings(),g=f.json_data,m=f.core.html_titles;if(!a)return d;g.progressive_unload&&e&&-1!==e&&e.data("jstree_children",d);if(b.isArray(a)){d=b();if(!a.length)return!1;f=0;for(g=a.length;f<g;f++){var n=this._parse_json(a[f],e,!0);n.length&&(d=d.add(n))}}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return d;d=b("<li />");a.attr&&d.attr(a.attr);a.metadata&&
d.data(a.metadata);a.state&&d.addClass("jstree-"+a.state);b.isArray(a.data)||(n=a.data,a.data=[],a.data.push(n));b.each(a.data,function(e,c){n=b("<a />");b.isFunction(c)&&(c=c.call(this,a));if("string"==typeof c)n.attr("href","#")[m?"html":"text"](c);else c.attr||(c.attr={}),c.attr.href||(c.attr.href="#"),n.attr(c.attr)[m?"html":"text"](c.title),c.language&&n.addClass(c.language);n.prepend("<ins class='jstree-icon'>&#160;</ins>");!c.icon&&a.icon&&(c.icon=a.icon);c.icon&&(-1===c.icon.indexOf("/")?
n.children("ins").addClass(c.icon):n.children("ins").css("background","url('"+c.icon+"') center center no-repeat"));d.append(n)});d.prepend("<ins class='jstree-icon'>&#160;</ins>");a.children&&(g.progressive_render&&"open"!==a.state?d.addClass("jstree-closed").data("jstree_children",a.children):(g.progressive_unload&&d.data("jstree_children",a.children),b.isArray(a.children)&&a.children.length&&(n=this._parse_json(a.children,e,!0),n.length&&(e=b("<ul />"),e.append(n),d.append(e)))))}c||(c=b("<ul />"),
c.append(d),d=c);return d},get_json:function(a,e,c,d){var f=[],g=this._get_settings(),h=this,n,p,r,w,u,v;(a=this._get_node(a))&&-1!==a||(a=this.get_container().find("> ul > li"));e=b.isArray(e)?e:["id","class"];!d&&this.data.types&&e.push(g.types.type_attr);c=b.isArray(c)?c:[];a.each(function(){r=b(this);n={data:[]};e.length&&(n.attr={});b.each(e,function(a,b){(p=r.attr(b))&&p.length&&p.replace(/jstree[^ ]*/ig,"").length&&(n.attr[b]=(" "+p).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,
"").replace(/ $/,""))});r.hasClass("jstree-open")&&(n.state="open");r.hasClass("jstree-closed")&&(n.state="closed");r.data()&&(n.metadata=r.data());w=r.children("a");w.each(function(){u=b(this);c.length||-1!==b.inArray("languages",g.plugins)||u.children("ins").get(0).style.backgroundImage.length||u.children("ins").get(0).className&&u.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(v=!1,-1!==b.inArray("languages",g.plugins)&&b.isArray(g.languages)&&g.languages.length&&b.each(g.languages,
function(a,b){if(u.hasClass(b))return v=b,!1}),p={attr:{},title:h.get_text(u,v)},b.each(c,function(a,b){p.attr[b]=(" "+(u.attr(b)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==b.inArray("languages",g.plugins)&&b.isArray(g.languages)&&g.languages.length&&b.each(g.languages,function(a,b){if(u.hasClass(b))return p.language=b,!0}),u.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(p.icon=u.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),u.children("ins").get(0).style.backgroundImage.length&&(p.icon=u.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):p=h.get_text(u);1<w.length?n.data.push(p):n.data=p});r=r.find("> ul > li");r.length&&(n.children=h.get_json(r,e,c,!0));f.push(n)});return f}}})})(jQuery);(function(b){b.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(a){var e=this._get_settings().languages,
c=".jstree-"+this.get_index()+" a";if(!b.isArray(e)||0===e.length)return!1;if(-1==b.inArray(a,e))if(e[a])a=e[a];else return!1;if(a==this.data.languages.current_language)return!0;e=b.vakata.css.get_css(c+"."+this.data.languages.current_language,!1,this.data.languages.language_css);!1!==e&&(e.style.display="none");e=b.vakata.css.get_css(c+"."+a,!1,this.data.languages.language_css);!1!==e&&(e.style.display="");this.data.languages.current_language=a;this.__callback(a);return!0},get_lang:function(){return this.data.languages.current_language},
_get_string:function(a,e){var c=this._get_settings().languages,d=this._get_settings().core.strings;b.isArray(c)&&c.length&&(e=e&&-1!=b.inArray(e,c)?e:this.data.languages.current_language);return d[e]&&d[e][a]?d[e][a]:d[a]?d[a]:a},get_text:function(a,e){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var c=this._get_settings().languages,d=this._get_settings().core.html_titles;b.isArray(c)&&c.length?(e=e&&-1!=b.inArray(e,c)?e:this.data.languages.current_language,a=a.children("a."+
e)):a=a.children("a:eq(0)");if(d)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,e,c){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var d=this._get_settings().languages,f=this._get_settings().core.html_titles;b.isArray(d)&&d.length?(c=c&&-1!=b.inArray(c,d)?c:this.data.languages.current_language,a=a.children("a."+c)):a=a.children("a:eq(0)");if(f)return d=a.children("INS").clone(),
a.html(e).prepend(d),this.__callback({obj:a,name:e,lang:c}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:e,lang:c});return a.nodeValue=e},_load_css:function(){var a=this._get_settings().languages,e="/* languages css */",c=".jstree-"+this.get_index()+" a",d;if(b.isArray(a)&&a.length){this.data.languages.current_language=a[0];for(d=0;d<a.length;d++)e+=c+"."+a[d]+" {",a[d]!=this.data.languages.current_language&&(e+=" display:none; "),e+=" } ";this.data.languages.language_css=
b.vakata.css.add_sheet({str:e,title:"jstree-languages"})}},create_node:function(a,e,c,d){return this.__call_old(!0,a,e,c,function(a){var e=this._get_settings().languages,c=a.children("a"),f;if(b.isArray(e)&&e.length){for(f=0;f<e.length;f++)c.is("."+e[f])||a.append(c.eq(0).clone().removeClass(e.join(" ")).addClass(e[f]));c.not("."+e.join(", .")).remove()}d&&d.call(this,a)})}}})})(jQuery);(function(b){b.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof b.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var a=this._get_settings().cookies,e;a.save_loaded&&(e=b.cookie(a.save_loaded))&&e.length&&(this.data.core.to_load=e.split(","));a.save_opened&&(e=b.cookie(a.save_opened))&&e.length&&(this.data.core.to_open=e.split(","));a.save_selected&&(e=b.cookie(a.save_selected))&&e.length&&this.data.ui&&(this.data.ui.to_select=e.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",b.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
b.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var e=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":e.save_opened&&(this.save_opened(),b.cookie(e.save_opened,this.data.core.to_open.join(","),
e.cookie_options));e.save_loaded&&(this.save_loaded(),b.cookie(e.save_loaded,this.data.core.to_load.join(","),e.cookie_options));break;case "select_node":case "deselect_node":e.save_selected&&this.data.ui&&(this.save_selected(),b.cookie(e.save_selected,this.data.ui.to_select.join(","),e.cookie_options))}else e.save_loaded&&(this.save_loaded(),b.cookie(e.save_loaded,this.data.core.to_load.join(","),e.cookie_options)),e.save_opened&&(this.save_opened(),b.cookie(e.save_opened,this.data.core.to_open.join(","),
e.cookie_options)),e.save_selected&&this.data.ui&&(this.save_selected(),b.cookie(e.save_selected,this.data.ui.to_select.join(","),e.cookie_options))}}}})})(jQuery);(function(b){b.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",b.proxy(function(a,b){a=this._get_node(b.rslt.obj);a=-1===a?this.get_container().children("ul"):a.children("ul");this.sort(a)},this)).bind("rename_node.jstree create_node.jstree create.jstree",b.proxy(function(a,b){this.sort(b.rslt.obj.parent())},
this)).bind("move_node.jstree",b.proxy(function(a,b){a=-1==b.rslt.np?this.get_container():b.rslt.np;this.sort(a.children("ul"))},this))},defaults:function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},_fn:{sort:function(a){var e=this._get_settings().sort,c=this;a.append(b.makeArray(a.children("li")).sort(b.proxy(e,c)));a.find("> li > ul").each(function(){c.sort(b(this))});this.clean_node(a)}}})})(jQuery);(function(b){var a=!1,e=!1,c=!1,d=!1,f=!1,l=!1,m=!1,n=!1,p=!1;b.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,e,c){b.vakata.dnd.is_drag&&b.vakata.dnd.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(v){}b.vakata.dnd.init_x=a.pageX;b.vakata.dnd.init_y=a.pageY;b.vakata.dnd.user_data=e;b.vakata.dnd.is_down=!0;b.vakata.dnd.helper=b("<div id='vakata-dragged' />").html(c);
b(document).bind("mousemove",b.vakata.dnd.drag);b(document).bind("mouseup",b.vakata.dnd.drag_stop);return!1},drag:function(a){if(b.vakata.dnd.is_down){if(!b.vakata.dnd.is_drag)if(5<Math.abs(a.pageX-b.vakata.dnd.init_x)||5<Math.abs(a.pageY-b.vakata.dnd.init_y))b.vakata.dnd.helper.appendTo("body"),b.vakata.dnd.is_drag=!0,b(document).triggerHandler("drag_start.vakata",{event:a,data:b.vakata.dnd.user_data});else return;if("mousemove"===a.type){var e=b(document),c=b(window),d=e.scrollTop(),g=e.scrollLeft(),
h=b.jstree._focused();null!=h&&(h=h._get_settings().dnd.scroll_parent)&&(e=c=h,d=g=0);20>a.pageY-d?(l&&"down"===m&&(clearInterval(l),l=!1),l||(m="up",l=setInterval(function(){e.scrollTop(e.scrollTop()-b.vakata.dnd.scroll_spd)},150))):l&&"up"===m&&(clearInterval(l),l=!1);20>c.height()-(a.pageY-d)?(l&&"up"===m&&(clearInterval(l),l=!1),l||(m="down",l=setInterval(function(){e.scrollTop(e.scrollTop()+b.vakata.dnd.scroll_spd)},150))):l&&"down"===m&&(clearInterval(l),l=!1);20>a.pageX-g?(f&&"right"===n&&
(clearInterval(f),f=!1),f||(n="left",f=setInterval(function(){e.scrollLeft(e.scrollLeft()-b.vakata.dnd.scroll_spd)},150))):f&&"left"===n&&(clearInterval(f),f=!1);20>c.width()-(a.pageX-g)?(f&&"left"===n&&(clearInterval(f),f=!1),f||(n="right",f=setInterval(function(){e.scrollLeft(e.scrollLeft()+b.vakata.dnd.scroll_spd)},150))):f&&"right"===n&&(clearInterval(f),f=!1)}b.vakata.dnd.helper.css({left:a.pageX+b.vakata.dnd.helper_left+"px",top:a.pageY+b.vakata.dnd.helper_top+"px"});b(document).triggerHandler("drag.vakata",
{event:a,data:b.vakata.dnd.user_data})}},drag_stop:function(a){f&&clearInterval(f);l&&clearInterval(l);b(document).unbind("mousemove",b.vakata.dnd.drag);b(document).unbind("mouseup",b.vakata.dnd.drag_stop);b(document).triggerHandler("drag_stop.vakata",{event:a,data:b.vakata.dnd.user_data});b.vakata.dnd.helper.remove();b.vakata.dnd.init_x=0;b.vakata.dnd.init_y=0;b.vakata.dnd.user_data={};b.vakata.dnd.is_down=!1;b.vakata.dnd.is_drag=!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});b.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",b.proxy(function(e){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.themes&&(c.attr("class","jstree-"+this.data.themes.theme),d&&d.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
e.currentTarget===e.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target&&(e=b.jstree._reference(e.target),e.data.dnd.foreign?(e=e._get_settings().dnd.drag_check.call(this,{o:a,r:e.get_container(),is_root:!0}),!0!==e&&!0!==e.inside&&!0!==e.before&&!0!==e.after||b.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(e.prepare_move(a,e.get_container(),"last"),e.check_move()&&b.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",b.proxy(function(e){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&e.currentTarget===e.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var c=b.jstree._reference(e.currentTarget);c.data.dnd.foreign?(e=c._get_settings().dnd.drag_check.call(this,{o:a,r:c.get_container(),is_root:!0}),!0!==e&&!0!==e.inside&&!0!==e.before&&!0!==e.after||c._get_settings().dnd.drag_finish.call(this,
{o:a,r:c.get_container(),is_root:!0})):c.move_node(a,c.get_container(),"last",e[c._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",b.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",b.proxy(function(a){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){var e=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft+=b.vakata.dnd.scroll_spd},e),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft-=b.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop+=b.vakata.dnd.scroll_spd},e),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop-=
b.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&c&&d&&(c.hide(),d.hide(),b(document).triggerHandler("dnd_hide.vakata",{inst:this}))},this)).delegate("a","mousedown.jstree",b.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&
this.dnd_enter(a.currentTarget)},this)).delegate("a","mousemove.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(e&&e.length&&e.children("a")[0]===a.currentTarget||this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=b(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",
b.proxy(function(a){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;c&&c.hide();d&&d.hide();b(document).triggerHandler("dnd_hide.vakata",{inst:this});this.data.dnd.mto=setTimeout(function(b){return function(){b.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));b(document).bind("drag_stop.vakata",
b.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;c&&c.css({top:"-2000px"});
d&&d.css({top:"-2000px"})},this)).bind("drag_start.vakata",b.proxy(function(a,e){e.data.jstree&&(a=b(e.event.target),a.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(a))},this));var f=this._get_settings().dnd;f.drag_target&&b(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),b.proxy(function(e){a=e.target;b.vakata.dnd.drag_start(e,{jstree:!0,obj:e.target},"<ins class='jstree-icon'></ins>"+b(e.target).text());this.data.themes&&(c&&c.attr("class","jstree-"+
this.data.themes.theme),d&&d.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var f=this.get_container();this.data.dnd.cof=f.offset();this.data.dnd.cw=parseInt(f.width(),10);this.data.dnd.ch=parseInt(f.height(),10);this.data.dnd.foreign=!0;e.preventDefault()},this));f.drop_target&&b(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),
b.proxy(function(e){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:b(e.target),e:e})&&b.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),b.proxy(function(a){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),b.proxy(function(e){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&
this._get_settings().dnd.drop_finish.call(this,{o:a,r:b(e.target),e:e})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:b.noop,drag_target:".jstree-draggable",drag_finish:b.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}},scroll_parent:!1},_fn:{dnd_prepare:function(){if(e&&e.length){this.data.dnd.off=e.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+
e.width());if(this.data.dnd.foreign){var b=this._get_settings().dnd.drag_check.call(this,{o:a,r:e});this.data.dnd.after=b.after;this.data.dnd.before=b.before;this.data.dnd.inside=b.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,e,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,e,"after");this.data.dnd.after=this.check_move();this._is_loaded(e)?(this.prepare_move(a,e,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=
!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],e=!1,f=this._get_settings().core.rtl;a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];b.each(a,b.proxy(function(a,c){if(this.data.dnd[c])return b.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),
e=c,!1},this));!1===e&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=f?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(e){case "before":c.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();d&&d.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":c.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();d&&d.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":c.css({left:a+
(f?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();d&&d.hide();break;default:c.hide(),d&&d.hide()}b(document).triggerHandler("dnd_show.vakata",{data:this._get_move(),position:e,inst:this});return p=e}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(e,b.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(f){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:e,p:p}):
(this.dnd_prepare(),this.move_node(a,e,p,f[this._get_settings().dnd.copy_modifier+"Key"]));e=a=!1;c.hide();d&&d.hide();b(document).triggerHandler("dnd_hide.vakata",{inst:this})},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var c=this._get_settings().dnd;this.data.dnd.prepared=!1;e=this._get_node(a);c.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(b.proxy(this.dnd_prepare,this),c.check_timeout)):this.dnd_prepare();
c.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),e&&e.length&&e.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(b.proxy(this.dnd_open,this),c.open_timeout))):e&&e.length&&e.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");c.hide();d&&d.hide();b(document).triggerHandler("dnd_hide.vakata",{inst:this});e&&e[0]===a.target.parentNode&&
(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(e,f){a=this._get_node(e);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));e=1<a.length?this._get_string("multiple_selection"):this.get_text(a);var g=this.get_container();this._get_settings().core.html_titles||(e=e.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));b.vakata.dnd.drag_start(f,{jstree:!0,obj:a},"<ins class='jstree-icon'></ins>"+
e);this.data.themes&&(c&&c.attr("class","jstree-"+this.data.themes.theme),d&&d.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=parseInt(g.height(),10);this.data.dnd.active=!0}}});b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});c=b("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){c.hide();d.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");d=b("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(e&&e.length)return e.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var f=b(a.relatedTarget);if((f.is(".jstree")||0===f.closest(".jstree").length)&&
e&&e.length)return e.children("a").trigger(a),c.hide(),d.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");b(document).bind("drag_start.vakata",function(a,b){b.data.jstree&&(c.show(),d&&d.show())});b(document).bind("drag_stop.vakata",function(a,b){b.data.jstree&&(c.hide(),d&&d.hide())})})})(jQuery);(function(b){b.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=b.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",b.proxy(function(a,b){this._prepare_checkboxes(b.rslt.obj)},this)).bind("loaded.jstree",b.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",b.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,b){b.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");if(!1!==a){var e,c=this,d,f=this._get_settings().checkbox.two_state,l=this._get_settings().checkbox.real_checkboxes,m=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){d=b(this);e=d.is("li")&&(d.hasClass("jstree-checked")||l&&d.children(":checked").length)?"jstree-checked":"jstree-unchecked";d.find("li").andSelf().each(function(){var a=
b(this);a.children("a"+(c.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":e);if(l)if(a.children(":checkbox").length)a.children(":checkbox").addClass("jstree-real-checkbox");else{var d=m.call(c,a);a.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+d[0]+"' name='"+d[0]+"' value='"+d[1]+"' />")}f?(a.hasClass("jstree-checked")||a.children(":checked").length)&&
a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===e||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});f||a.find(".jstree-checked").parent().parent().each(function(){c._repair_state(this)})}},change_state:function(a,e){a=this._get_node(a);var c=!1,d=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;e=!1===e||!0===e?e:a.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)e?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),d&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),d&&a.children(":checkbox").prop("checked",!0));else{if(e){c=a.find("li").andSelf();if(!c.filter(".jstree-checked, .jstree-undetermined").length)return!1;c.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");d&&c.children(":checkbox").prop("checked",!1)}else{c=
a.find("li").andSelf();if(!c.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;c.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");d&&c.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=b(this);if(e){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
d&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");d&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),d&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");d&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var b=this;a.parents(".jstree-closed").each(function(){b.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var b=this._get_settings().checkbox.real_checkboxes,
c=a.find("> ul > .jstree-checked").length,d=a.find("> ul > .jstree-undetermined").length,f=a.find("> ul > li").length;0===f?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===c&&0===d?this.change_state(a,!0):c===f?this.change_state(a,!1):(a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),b&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=
this,e=this.data.ui.to_select;e=b.map(b.makeArray(e),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:")});this.deselect_all();b.each(e,function(b,e){a.check_node(e)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
b(function(){b.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(b){b.vakata.xslt=function(a,e,c){var d="";if(document.recalc){var f=document.createElement("xml");d=document.createElement("xml");f.innerHTML=a;d.innerHTML=e;b("body").append(f).append(d);setTimeout(function(a,e,c){return function(){c.call(null,a.transformNode(e.XMLDocument));setTimeout(function(a,e){return function(){b(a).remove();b(e).remove()}}(a,e),200)}}(f,d,c),100);
return!0}"undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"===typeof window.XSLTProcessor&&(a=(new DOMParser).parseFromString(a,"text/xml"),e=(new DOMParser).parseFromString(e,"text/xml"));if("undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"!==typeof window.XSLTProcessor){f=new XSLTProcessor;d=b.isFunction(f.transformDocument)?"undefined"!==typeof window.XMLSerializer:!0;if(!d)return!1;a=(new DOMParser).parseFromString(a,
"text/xml");e=(new DOMParser).parseFromString(e,"text/xml");b.isFunction(f.transformDocument)?(d=document.implementation.createDocument("","",null),f.transformDocument(a,e,d,null),c.call(null,(new XMLSerializer).serializeToString(d))):(f.importStylesheet(e),d=f.transformToFragment(a,document),c.call(null,b("<div />").append(d).html()));return!0}return!1};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
e=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};b.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,b,e){var c=this;this.load_node_xml(a,function(){c.__callback({obj:c._get_node(a)});b.call(this)},e)},_is_loaded:function(a){var e=this._get_settings().xml_data;a=this._get_node(a);return-1==a||
!a||!e.ajax&&!b.isFunction(e.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,e,c){var d=this.get_settings().xml_data,f=function(){},g=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !d.data&&!d.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(d.data):d.data.call(this,a,b.proxy(function(c){this.parse_xml(c,b.proxy(function(c){c&&(c=
c.replace(/ ?xmlns="[^"]*"/ig,""),10<c.length?(c=b(c),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(c),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),d.clean_node&&this.clean_node(a),e&&e.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),e&&e.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),
e&&e.call(this)))},this))},this));break;case !!d.data&&!d.ajax||!!d.data&&!!d.ajax&&(!a||-1===a):a&&-1!=a||this.parse_xml(d.data,b.proxy(function(c){c?(c=c.replace(/ ?xmlns="[^"]*"/ig,""),10<c.length&&(c=b(c),this.get_container().children("ul").empty().append(c.children()),d.clean_node&&this.clean_node(a),e&&e.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this))},this));break;case !d.data&&!!d.ajax||!!d.data&&!!d.ajax&&a&&-1!==a:f=function(b,e,f){var g=this.get_settings().xml_data.ajax.error;
g&&g.call(this,b,e,f);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===e&&d.correct_state&&this.correct_state(a)):"success"===e&&d.correct_state&&this.get_container().children("ul").empty();c&&c.call(this)},g=function(c,g,h){c=h.responseText;var k=this.get_settings().xml_data.ajax.success;k&&(c=k.call(this,c,g,h)||c);if(""===c||c&&c.toString&&""===c.toString().replace(/^[\s\n]+$/,""))return f.call(this,h,g,"");this.parse_xml(c,
b.proxy(function(c){c&&(c=c.replace(/ ?xmlns="[^"]*"/ig,""),10<c.length?(c=b(c),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(c),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),d.clean_node&&this.clean_node(a),e&&e.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),e&&e.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),
e&&e.call(this)))},this))},d.ajax.context=this,d.ajax.error=f,d.ajax.success=g,d.ajax.dataType||(d.ajax.dataType="xml"),b.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a)),b.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a)),b.ajax(d.ajax)}},parse_xml:function(e,c){var d=this._get_settings().xml_data;b.vakata.xslt(e,a[d.xsl],c)},get_xml:function(a,c,d,f,m){var g="",h=this._get_settings(),k=this,l,u,v,q,t;a||(a="flat");m||(m=0);(c=this._get_node(c))&&-1!==c||(c=this.get_container().find("> ul > li"));
d=b.isArray(d)?d:["id","class"];!m&&this.data.types&&-1===b.inArray(h.types.type_attr,d)&&d.push(h.types.type_attr);f=b.isArray(f)?f:[];m||(h.xml_data.get_include_preamble&&(g+='<?xml version="1.0" encoding="UTF-8"?>'),g+="<root>");c.each(function(){g+="<item";v=b(this);b.each(d,function(a,b){a=v.attr(b);h.xml_data.get_skip_empty&&"undefined"===typeof a||(g+=" "+b+'="'+e((" "+(a||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});v.hasClass("jstree-open")&&
(g+=' state="open"');v.hasClass("jstree-closed")&&(g+=' state="closed"');"flat"===a&&(g+=' parent_id="'+e(m)+'"');g+=">";g+="<content>";q=v.children("a");q.each(function(){l=b(this);t=!1;g+="<name";-1!==b.inArray("languages",h.plugins)&&b.each(h.languages,function(a,b){if(l.hasClass(b))return g+=' lang="'+e(b)+'"',t=b,!1});f.length&&b.each(f,function(a,b){a=l.attr(b);h.xml_data.get_skip_empty&&"undefined"===typeof a||(g+=" "+b+'="'+e((" "+a||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,
"").replace(/ $/,""))+'"')});l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(g+=' icon="'+e(l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');l.children("ins").get(0).style.backgroundImage.length&&(g+=' icon="'+e(l.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');g+=">";g+="<![CDATA["+k.get_text(l,t)+"]]\x3e";
g+="</name>"});g+="</content>";u=v[0].id||!0;v=v.find("> ul > li");u=v.length?k.get_xml(a,v,d,f,u):"";"nest"==a&&(g+=u);g+="</item>";"flat"==a&&(g+=u)});m||(g+="</root>");return g}}})})(jQuery);(function(b){b.expr[":"].jstree_contains=function(a,b,c){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(c[3].toLowerCase())};b.expr[":"].jstree_title_contains=function(a,b,c){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(c[3].toLowerCase())};b.jstree.plugin("search",{__init:function(){this.data.search.str=
"";this.data.search.result=b();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(a,e){b(this).children("ul").find("li").hide().removeClass("jstree-last");e.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){b(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){b(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",
show_only_matches:!1},_fn:{search:function(a,e){if(""===b.trim(a))this.clear_search();else{var c=this.get_settings().search,d=this,f=function(){};this.data.search.str=a;if(!e&&!1!==c.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;f=function(a,b,e){var c=this.get_settings().search.ajax.success;c&&(a=c.call(this,a,b,e)||a);this.data.search.to_open=a;this._search_open()};c.ajax.context=this;c.ajax.error=function(){};c.ajax.success=
f;b.isFunction(c.ajax.url)&&(c.ajax.url=c.ajax.url.call(this,a));b.isFunction(c.ajax.data)&&(c.ajax.data=c.ajax.data.call(this,a));c.ajax.data||(c.ajax.data={search_string:a});if(!c.ajax.dataType||/^json/.exec(c.ajax.dataType))c.ajax.dataType="json";b.ajax(c.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+c.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){d.open_node(this,
!1,!0)}),this.__callback({nodes:this.data.search.result,str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=b()},_search_open:function(a){var e=this;a=!0;var c=[],d=[];this.data.search.to_open.length&&(b.each(this.data.search.to_open,function(a,e){if("#"==e)return!0;b(e).length&&b(e).is(".jstree-closed")?c.push(e):d.push(e)}),c.length&&(this.data.search.to_open=d,b.each(c,function(a,b){e.open_node(b,
function(){e._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,!0)}}})})(jQuery);(function(b){b.vakata.context={hide_on_mouseleave:!1,cnt:b("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,e,c,d,f,l,m){b.vakata.context.rtl=!!m;if(a=b.vakata.context.parse(a)){b.vakata.context.vis=!0;b.vakata.context.tgt=e;b.vakata.context.par=l||e||null;b.vakata.context.data=f||null;b.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,
top:0});if(b.vakata.context.hide_on_mouseleave)b.vakata.context.cnt.one("mouseleave",function(a){b.vakata.context.hide()});f=b.vakata.context.cnt.height();l=b.vakata.context.cnt.width();c+l>b(document).width()&&(c=b(document).width()-(l+5),b.vakata.context.cnt.find("li > ul").addClass("right"));d+f>b(document).height()&&(d-=f+e[0].offsetHeight,b.vakata.context.cnt.find("li > ul").addClass("bottom"));b.vakata.context.cnt.css({left:c,top:d}).find("li:has(ul)").bind("mouseenter",function(a){a=b(document).width();
var e=b(document).height(),c=b(this).children("ul").show();a!==b(document).width()&&c.toggleClass("right");e!==b(document).height()&&c.toggleClass("bottom")}).bind("mouseleave",function(a){b(this).children("ul").hide()}).end().css({visibility:"visible"}).show();b(document).triggerHandler("context_show.vakata")}},hide:function(){b.vakata.context.vis=!1;b.vakata.context.cnt.attr("class","").css({visibility:"hidden"});b(document).triggerHandler("context_hide.vakata")},parse:function(a,e){if(!a)return!1;
var c="",d=!1,f=!0;e||(b.vakata.context.func={});c+="<ul>";b.each(a,function(a,e){if(!e)return!0;b.vakata.context.func[a]=e.action;!f&&e.separator_before&&(c+="<li class='vakata-separator vakata-separator-before'></li>");f=!1;c+="<li class='"+(e._class||"")+(e._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";e.icon&&-1===e.icon.indexOf("/")&&(c+=" class='"+e.icon+"' ");e.icon&&-1!==e.icon.indexOf("/")&&(c+=" style='background:url("+e.icon+") center center no-repeat;' ");c+=">&#160;</ins><a href='#' rel='"+
a+"'>";e.submenu&&(c+="<span style='float:"+(b.vakata.context.rtl?"left":"right")+";'>&raquo;</span>");c+=e.label+"</a>";e.submenu&&(d=b.vakata.context.parse(e.submenu,!0))&&(c+=d);c+="</li>";e.separator_after&&(c+="<li class='vakata-separator vakata-separator-after'></li>",f=!0)});c=c.replace(/<li class='vakata-separator vakata-separator-after'><\/li>$/,"");c+="</ul>";b(document).triggerHandler("context_parse.vakata");return 10<c.length?c:!1},exec:function(a){return b.isFunction(b.vakata.context.func[a])?
(b.vakata.context.func[a].call(b.vakata.context.data,b.vakata.context.par),!0):!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; } #vakata-contextmenu ul { min-width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});b.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!b(this).parent().hasClass("jstree-contextmenu-disabled")&&b.vakata.context.exec(b(this).attr("rel"))?b.vakata.context.hide():b(this).blur()}).delegate("a","mouseover",function(){b.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");b(document).bind("mousedown",function(a){b.vakata.context.vis&&!b.contains(b.vakata.context.cnt[0],a.target)&&
b.vakata.context.hide()});"undefined"!==typeof b.hotkeys&&b(document).bind("keydown","up",function(a){if(b.vakata.context.vis){var e=b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();e.length||(e=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());e.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(b.vakata.context.vis){var e=
b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();e.length||(e=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());e.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){b.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){("input"!==a.target.tagName.toLowerCase()||"checkbox"!==a.target.type.toLowerCase()&&"search"!==a.target.type.toLowerCase())&&
a.preventDefault()})});b.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",b.proxy(function(a){a.preventDefault();b(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",b.proxy(function(a){this.data.contextmenu&&b.vakata.context.hide()},this)).bind("destroy.jstree",b.proxy(function(){this.data.contextmenu&&b.vakata.context.hide()},this));b(document).bind("context_hide.vakata",
b.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",
action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,e,c){a=this._get_node(a);var d=this.get_settings().contextmenu,f=a.children("a:visible:eq(0)");d.select_node&&this.data.ui&&!this.is_selected(a)&&(this.deselect_all(),
this.select_node(a,!0));if(d.show_at_node||"undefined"===typeof e||"undefined"===typeof c)c=f.offset(),e=c.left,c=c.top+this.data.core.li_height;d=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:d.items;b.isFunction(d)&&(d=d.call(this,a));this.data.contextmenu=!0;b.vakata.context.show(d,f,e,c,this,a,this._get_settings().core.rtl);this.data.themes&&b.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(b){b.jstree.plugin("types",
{__init:function(){var a=this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",b.proxy(function(){var e=a.type_attr,c="",d=this;b.each(a.types,function(a,f){b.each(f,function(a,b){/^(max_depth|max_children|icon|valid_children)$/.test(a)||d.data.types.attach_to.push(a)});if(!f.icon)return!0;if(f.icon.image||f.icon.position)c="default"==a?c+(".jstree-"+d.get_index()+" a > .jstree-icon { "):c+(".jstree-"+d.get_index()+" li["+e+'="'+a+'"] > a > .jstree-icon { '),
f.icon.image&&(c+=" background-image:url("+f.icon.image+"); "),c=f.icon.position?c+(" background-position:"+f.icon.position+"; "):c+" background-position:0 0; ",c+="} "});""!==c&&b.vakata.css.add_sheet({str:c,title:"jstree-types"})},this)).bind("before.jstree",b.proxy(function(a,c){var e;if((e=(e=this._get_settings().types.use_data?this._get_node(c.args[0]):!1)&&-1!==e&&e.length?e.data("jstree"):!1)&&e.types&&!1===e.types[c.func])return a.stopImmediatePropagation(),!1;if(-1!==b.inArray(c.func,this.data.types.attach_to)&&
c.args[0]&&(c.args[0].tagName||c.args[0].jquery)){e=this._get_settings().types.types;var d=this._get_type(c.args[0]);if((e[d]&&"undefined"!==typeof e[d][c.func]||e["default"]&&"undefined"!==typeof e["default"][c.func])&&!1===this._check(c.func,c.args[0]))return a.stopImmediatePropagation(),!1}},this));c&&this.get_container().bind("load_node.jstree set_type.jstree",b.proxy(function(a,c){var e=c&&c.rslt&&c.rslt.obj&&-1!==c.rslt.obj?this._get_node(c.rslt.obj).parent():this.get_container_ul(),d=!1,f=
this._get_settings().types;b.each(f.types,function(a,b){b.icon&&(b.icon.image||b.icon.position)&&(d="default"===a?e.find("li > a > .jstree-icon"):e.find("li["+f.type_attr+"='"+a+"'] > a > .jstree-icon"),b.icon.image&&d.css("backgroundImage","url("+b.icon.image+")"),d.css("backgroundPosition",b.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,
b){b.type&&this._get_settings().types.use_data&&this.set_type(b.type,a)},_get_type:function(a){return(a=this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,b){b=this._get_node(b);var e=b.length&&a?b.attr(this._get_settings().types.type_attr,a):!1;e&&this.__callback({obj:b,type:a});return e},_check:function(a,e,c){e=this._get_node(e);var d=!1,f=this._get_type(e),g=0,m=this,n=this._get_settings().types,p=!1;if(-1===e)if(n[a])d=n[a];else return;
else{if(!1===f)return;(p=n.use_data?e.data("jstree"):!1)&&p.types&&"undefined"!==typeof p.types[a]?d=p.types[a]:n.types[f]&&"undefined"!==typeof n.types[f][a]?d=n.types[f][a]:n.types["default"]&&"undefined"!==typeof n.types["default"][a]&&(d=n.types["default"][a])}b.isFunction(d)&&(d=d.call(this,e));"max_depth"===a&&-1!==e&&!1!==c&&-2!==n.max_depth&&0!==d&&e.children("a:eq(0)").parentsUntil(".jstree","li").each(function(b){if(-1!==n.max_depth&&0>=n.max_depth-(b+1))return d=0,!1;g=0===b?d:m._check(a,
this,!1);if(-1!==g&&0>=g-(b+1))return d=0,!1;0<=g&&(g-(b+1)<d||0>d)&&(d=g-(b+1));0<=n.max_depth&&(n.max_depth-(b+1)<d||0>d)&&(d=n.max_depth-(b+1))});return d},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),e=a.rt._get_settings().types,c=a.rt._check("max_children",a.cr),d=a.rt._check("max_depth",a.cr),f=a.rt._check("valid_children",a.cr),l=0,m=1;if("none"===f||b.isArray(f)&&a.ot&&a.ot._get_type&&(a.o.each(function(){if(-1===b.inArray(a.ot._get_type(this),f))return m=!1}),
!1===m)||-2!==e.max_children&&-1!==c&&(l=-1===a.cr?this.get_container().find("> ul > li").not(a.o).length:a.cr.find("> ul > li").not(a.o).length,l+a.o.length>c))return!1;if(-2!==e.max_depth&&-1!==d){m=0;if(0===d)return!1;if("undefined"===typeof a.o.d){for(e=a.o;0<e.length;)e=e.find("> ul > li"),m++;a.o.d=m}if(0>d-a.o.d)return!1}return!0},create_node:function(a,e,c,d,f,l){if(!l&&(f||this._is_loaded(a))){var g="string"==typeof e&&e.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),
h=this._get_settings().types,k=this._check("max_children",g),r=this._check("max_depth",g),w=this._check("valid_children",g);"string"===typeof c&&(c={data:c});c||(c={});if("none"===w)return!1;if(b.isArray(w))if(!c.attr||!c.attr[h.type_attr])c.attr||(c.attr={}),c.attr[h.type_attr]=w[0];else if(-1===b.inArray(c.attr[h.type_attr],w))return!1;if(-2!==h.max_children&&-1!==k&&(g=-1===g?this.get_container().find("> ul > li").length:g.find("> ul > li").length,g+1>k)||-2!==h.max_depth&&-1!==r&&0>r-1)return!1}return this.__call_old(!0,
a,e,c,d,f,l)}}})})(jQuery);(function(b){b.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,b,c){var e=this;this.load_node_html(a,function(){e.__callback({obj:e._get_node(a)});b.call(this)},c)},_is_loaded:function(a){a=
this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&!b.isFunction(this._get_settings().html_data.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,e,c){var d=this.get_settings().html_data,f=function(){};var g=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case b.isFunction(d.data):d.data.call(this,a,b.proxy(function(c){c&&""!==c&&c.toString&&
""!==c.toString().replace(/^[\s\n]+$/,"")?(c=b(c),c.is("ul")||(c=b("<ul />").append(c)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(c).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()).find("li, a").filter(function(){return!this.firstChild||
!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),e&&e.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),e&&e.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this))},this));break;case !d.data&&
!d.ajax:a&&-1!=a||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());e&&e.call(this);break;case !!d.data&&!d.ajax||!!d.data&&!!d.ajax&&(!a||-1===a):a&&-1!=a||(g=b(d.data),g.is("ul")||
(g=b("<ul />").append(g)),this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());e&&e.call(this);break;case !d.data&&!!d.ajax||!!d.data&&!!d.ajax&&a&&-1!==a:a=this._get_node(a),f=function(b,e,f){var g=this.get_settings().html_data.ajax.error;
g&&g.call(this,b,e,f);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===e&&d.correct_state&&this.correct_state(a)):"success"===e&&d.correct_state&&this.get_container().children("ul").empty();c&&c.call(this)},g=function(c,g,h){var k=this.get_settings().html_data.ajax.success;k&&(c=k.call(this,c,g,h)||c);if(""===c||c&&c.toString&&""===c.toString().replace(/^[\s\n]+$/,"")||""===c.toString().replace(/["']/g,""))return f.call(this,
h,g,"");c?(c=b(c),c.is("ul")||(c=b("<ul />").append(c)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(c).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()).find("li, a").filter(function(){return!this.firstChild||
!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),e&&e.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),e&&e.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this))},d.ajax.context=this,d.ajax.error=
f,d.ajax.success=g,d.ajax.dataType||(d.ajax.dataType="html"),b.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a)),b.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a)),b.ajax(d.ajax)}}}});b.jstree.defaults.plugins.push("html_data")})(jQuery);(function(b){b.jstree.plugin("themeroller",{__init:function(){var a=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(e){b(e.currentTarget).hasClass("jstree-loading")||
b(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){b(this).removeClass(a.item_h)}).bind("init.jstree",b.proxy(function(a,b){b.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(b.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",b.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",
b.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("delete_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.parent)},this)).bind("correct_state.jstree",b.proxy(function(b,c){c.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||
"jstree-no-icon")},this)).bind("select_node.jstree",b.proxy(function(b,c){c.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",b.proxy(function(b,c){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",b.proxy(function(b,c){c.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",b.proxy(function(b,c){this.get_container().find("a."+a.item_h).not(c.rslt.obj).removeClass(a.item_h);
c.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.o);this._themeroller(b.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,e=["ui-icon"];b.each(a,function(a,b){b=b.split(" ");b.length&&(e=e.concat(b))});this.get_container().removeClass("ui-widget-content").find("."+e.join(", .")).removeClass(e.join(" "))},_fn:{_themeroller:function(a){var b=this._get_settings().themeroller;a=a&&-1!=a?this._get_node(a).parent():
this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(b.opened).addClass("ui-icon "+b.closed).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+" "+b.item_open).addClass(b.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(b.closed).addClass("ui-icon "+
b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+" "+b.item_clsd).addClass(b.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(b.closed+" ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===
this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_clsd+" "+b.item_open).addClass(b.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});b(function(){b.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",
title:"jstree"})})})(jQuery);(function(b){b.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",b.proxy(function(a,c){var e=[],d=!0;"move_node"==c.func&&!0===c.args[4]&&c.args[0].o&&c.args[0].o.length&&(c.args[0].o.children("a").each(function(){e.push(b(this).text().replace(/^\s+/g,""))}),d=this._check_unique(e,c.args[0].np.find("> ul > li").not(c.args[0].o),"move_node"));"create_node"==c.func&&(c.args[4]||this._is_loaded(c.args[0]))&&(d=this._get_node(c.args[0]),!c.args[1]||
"before"!==c.args[1]&&"after"!==c.args[1]||(d=this._get_parent(c.args[0]))&&-1!==d||(d=this.get_container()),"string"===typeof c.args[2]?e.push(c.args[2]):c.args[2]&&c.args[2].data?e.push(c.args[2].data):e.push(this._get_string("new_node")),d=this._check_unique(e,d.find("> ul > li"),"create_node"));"rename_node"==c.func&&(e.push(c.args[1]),c=this._get_node(c.args[0]),(d=this._get_parent(c))&&-1!==d||(d=this.get_container()),d=this._check_unique(e,d.find("> ul > li").not(c),"rename_node"));if(!d)return a.stopPropagation(),
!1},this))},defaults:{error_callback:b.noop},_fn:{_check_unique:function(a,c,d){var e=[];c.children("a").each(function(){e.push(b(this).text().replace(/^\s+/g,""))});if(!e.length||!a.length)return!0;e=e.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");return e.length+a.length!=e.concat(a).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,
a,c,d),!1):!0},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),c=[];return a.o&&a.o.length?(a.o.children("a").each(function(){c.push(b(this).text().replace(/^\s+/g,""))}),this._check_unique(c,a.np.find("> ul > li").not(a.o),"check_move")):!0}}})})(jQuery);(function(b){b.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",
b.proxy(function(a,b){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",b.proxy(function(a,b){this._prepare_wholerow_span(b&&b.rslt&&b.rslt.obj?b.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",b.proxy(function(a,b){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,b){return function(){a._prepare_wholerow_ul(b)}}(this,
b&&b.rslt&&b.rslt.obj?b.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",b.proxy(function(a,b){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",b.proxy(function(a,c){c.rslt.obj.each(function(){c.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((b(this).offset().top-c.inst.get_container().offset().top+c.inst.get_container()[0].scrollTop)/
c.inst.data.core.li_height,10)+")").children("a").attr("class",c.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",b.proxy(function(a,b){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((b.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/
this.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var c=b(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&c.closest("li").is(".jstree-open, .jstree-closed")||(c.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li","mouseover.jstree",b.proxy(function(a){a.stopImmediatePropagation();if(b(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;
this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",b.proxy(function(a){b(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(d||c)&&b.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=
a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");!1!==a&&a.each(function(){b(this).find("li").andSelf().each(function(){var a=b(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("<span class='jstree-wholerow-span' style='width:"+18*a.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),b=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==b&&(this.data.wholerow.last_html=
b,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",-1*(a.height()+(d?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});b(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
f&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(d||c)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";b.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(b){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],c=function(a,c){var e=!0;a=a||{};c=[].concat(c);b.each(c,function(c,d){if(!b.isFunction(a[d]))return e=!1});return e};b.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(e,d){e=-1==e?this._get_settings().model.object:e.data("jstree_model");if(!c(e,a))return d.call(null,!1);this._get_settings().model.async?e.getChildren(b.proxy(function(a){this.model_done(a,
d)},this)):this.model_done(e.getChildren(),d)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,c){var e=[],d=this._get_settings(),f=this;b.isArray(a)||(a=[a]);b.each(a,function(a,c){a=c.getProps()||{};a.attr=c.getAttr()||{};c.getChildrenCount()&&(a.state="closed");a.data=c.getName();b.isArray(a.data)||(a.data=[a.data]);f.data.types&&b.isFunction(c.getType)&&(a.attr[d.types.type_attr]=c.getType());a.attr.id&&d.model.id_prefix&&(a.attr.id=d.model.id_prefix+a.attr.id);a.metadata||
(a.metadata={});a.metadata.jstree_model=c;e.push(a)});c.call(null,e)}}})})(jQuery)}})();
(function(c,d){function f(f,k,l){function m(){f.addClass("fc");k.isRTL?f.addClass("fc-rtl"):f.addClass("fc-ltr");k.theme&&f.addClass("ui-widget");J=c("<div class='fc-content' style='position:relative'/>").prependTo(f);ra=new b(S,k);(na=ra.render())&&f.prepend(na);r(k.defaultView);k.handleWindowResize&&"listWeek"!=E.name&&(c(window).resize(v),fa=c(document).width(),setTimeout(function(){fa!=c(document).width()&&(fa=c(document).width(),v())},200));c("body").is(":visible")||p()}function p(){setTimeout(function(){!E.start&&
c("body").is(":visible")&&z()},0)}function L(){return f.is(":visible")}function r(a){E&&a==E.name||(Y++,E&&(I("viewDestroy",E,E,E.element),y(),E.triggerEventDestroy(),ab(),E.element.remove(),ra.deactivateButton(E.name)),ra.activateButton(a),E=new wa[a](c("<div class='fc-view fc-view-"+a+"' style='position:relative'/>").appendTo(J),S),z(),R(),Y--,I("viewChange",S,a))}function z(a){(!E.start||a||V<E.start||V>=E.end)&&L()&&M(a)}function M(a){Y++;E.start&&(I("viewDestroy",E,E,E.element),y(),G());ab();
E.render(V,a||0);u();R();(E.afterRender||F)();ra.updateTitle(E.title);a=new Date;(a=a>=E.start&&a<E.end)?ra.disableButton("today"):ra.enableButton("today");I("updateTodayButton",X,!a);I("viewRender",E,E,E.element);E.trigger("viewDisplay",X);Y--;!k.lazyFetching||A(E.visStart,E.visEnd)?K(E.visStart,E.visEnd):D()}function C(){L()&&(y(),G(),q(),u(),D())}function q(){N=k.contentHeight?k.contentHeight:k.height?k.height-(na?na.height():0)-Q(J):Math.round(J.width()/Math.max(k.aspectRatio,.5))}function u(){N===
d&&q();Y++;E.setHeight(N);E.setWidth(J.width());Y--;ea=f.outerWidth()}function v(){if(!Y)if(E.start){var a=++la;setTimeout(function(){a==la&&!Y&&L()&&ea!=(ea=f.outerWidth())&&(Y++,C(),E.trigger("windowResize",X),Y--)},200)}else p()}function t(a){G();D(a)}function D(a){var b=[];if(L()){var e=c(document).height()>c(window).height();E.setEventData(P);b=E.renderEvents(P,a);null!=navigator.userAgent.match(/iPod|iPhone|iPad/i)&&c("div.fc-event").trigger("mouseover");E.trigger("eventAfterAllRender");c(document).height()>
c(window).height()!=e&&C()}return b}function G(){E.triggerEventDestroy();E.clearEvents();E.clearEventData()}function y(){E&&E.unselect()}function ab(){J.css({width:"100%",height:J.height(),overflow:"hidden"})}function R(){J.css({width:"",height:"",overflow:""})}function I(a,b){if(k[a])return k[a].apply(b||X,Array.prototype.slice.call(arguments,2))}var S=this;S.options=k;S.render=function(a){J?L()&&(q(),M(a)):m()};S.destroy=function(){E&&(I("viewDestroy",E,E,E.element),E.triggerEventDestroy());c(window).unbind("resize",
v);ra.destroy();J.remove();f.removeClass("fc fc-rtl ui-widget")};S.refetchEvents=function(){G();K(E.visStart,E.visEnd)};S.reportEvents=function(a){P=a;Z=D()};S.reportEventChange=function(a){t(a)};S.rerenderEvents=t;S.changeView=r;S.select=function(a,b,c){E.select(a,b,c===d?!0:c)};S.unselect=y;S.prev=function(){z(-1)};S.next=function(){z(1)};S.prevYear=function(){e(V,-1);z()};S.nextYear=function(){e(V,1);z()};S.today=function(){V=new Date;z()};S.gotoDate=function(a,b,c){a instanceof Date?V=n(a):w(V,
a,b,c);z()};S.incrementDate=function(a,b,c){a!==d&&e(V,a);b!==d&&g(V,b);c!==d&&h(V,c);z()};S.formatDate=function(a,b){return B(a,b,k)};S.formatDates=function(a,b,c){return H(a,b,c,k)};S.getDate=function(){return n(V)};S.getView=function(){return E};S.option=function(a,b){if(b===d)return k[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)k[a]=b,C()};S.trigger=I;S.calcSize=q;S.setSize=u;S.refetchSource=function(a){O(E.visStart,E.visEnd,a)};S.getSegmentsByRowAndColumn=function(a,b){for(var c=
[],e=0;e<Z.length;e++)Z[e].row==a&&Z[e].leftCol<=b&&b<=Z[e].rightCol&&c.push(Z[e]);return c};a.call(S,k,l);var A=S.isFetchNeeded,K=S.fetchEvents,O=S.refetchEventSource,X=f[0],ra,na,J,E,ea,N,la=0,Y=0,V=new Date,P=[],Z=[],U,fa;w(V,k.year,k.month,k.date);k.droppable&&c(document).bind("dragstart",function(a,b){var e=a.target,d=c(e);if(!d.parents(".fc").length){var f=k.dropAccept;if(c.isFunction(f)?f.call(e,d):d.is(f))U=e,E.dragStart(U,a,b)}}).bind("dragstop",function(a,b){U&&(E.dragStop(U,a,b),U=null)})}
function b(a,b){function e(e){var d=c("<td class='fc-header-"+e+"'/>");(e=b.header[e])&&c.each(e.split(" "),function(e){0<e&&d.append("<span class='fc-header-space'/>");var g;c.each(this.split(","),function(e,h){if("title"==h)d.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),g&&g.addClass(f+"-corner-right"),g=null;else{var k;a[h]?k=a[h]:wa[h]&&(k=function(){m.removeClass(f+"-state-hover");a.changeView(h)});if(k){e=b.theme?O(b.buttonIcons,h):null;var l=O(b.buttonText,h),m=c("<span class='fc-button fc-button-"+
h+" "+f+"-state-default'>"+(e?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+e+"'/></span>":l)+"</span>").click(function(){m.hasClass(f+"-state-disabled")||k()}).mousedown(function(){m.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){m.removeClass(f+"-state-down")}).hover(function(){m.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){m.removeClass(f+"-state-hover").removeClass(f+"-state-down")}).appendTo(d);
P(m);g||m.addClass(f+"-corner-left");g=m}}});g&&g.addClass(f+"-corner-right")});return d}this.render=function(){f=b.theme?"ui":"fc";if(b.header)return d=c("<table class='fc-header' style='width:100%'/>").append(c("<tr/>").append(e("left")).append(e("center")).append(e("right")))};this.destroy=function(){d.remove()};this.updateTitle=function(a){c("#current-date-title").html(a)};this.activateButton=function(a){d.find("span.fc-button-"+a).addClass(f+"-state-active")};this.deactivateButton=function(a){d.find("span.fc-button-"+
a).removeClass(f+"-state-active")};this.disableButton=function(a){d.find("span.fc-button-"+a).addClass(f+"-state-disabled")};this.enableButton=function(a){d.find("span.fc-button-"+a).removeClass(f+"-state-disabled")};var d=c([]),f}function a(a,b){function e(b,e){f(b,function(d){if(e==Q){if(d){a.eventDataTransform&&(d=c.map(d,a.eventDataTransform));b.eventDataTransform&&(d=c.map(d,b.eventDataTransform));for(var f=0;f<d.length;f++)d[f].source=b,l(d[f]);F=F.concat(d)}G--;G||M(F)}})}function f(b,e){var d,
g=ja.sourceFetchers;for(d=0;d<g.length;d++){var l=g[d](b,t,B,e);if(!0===l)return;if("object"==typeof l){f(l,e);return}}if(d=b.events)c.isFunction(d)?(h(),d(n(t),n(B),function(a){e(a);k()})):c.isArray(d)?e(d):e();else if(b.url){var m=b.success,p=b.error,L=b.complete;d=c.isFunction(b.data)?b.data():b.data;d=c.extend({},d||{});g=ca(b.startParam,a.startParam);l=ca(b.endParam,a.endParam);g&&(d[g]=v(t));l&&(d[l]=v(B));b.type&&"get"!=b.type.toLowerCase()&&b.contentType&&b.contentType.startsWith("application/json")&&
(d=JSON.stringify(d));h();c.ajax(c.extend({},nb,b,{data:d,success:function(a){a=a||[];var b=A(m,this,arguments);c.isArray(b)&&(a=b);e(a)},error:function(){A(p,this,arguments);e()},complete:function(){A(L,this,arguments);k()}}))}else e()}function g(a){c.isFunction(a)||c.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a)return m(a),D.push(a),a}function h(){y++||z("loading",null,!0,w())}function k(){--y||z("loading",null,!1,w())}function l(b){var c=b.source||{},e=ca(c.ignoreTimezone,
a.ignoreTimezone);b._id=b._id||(b.id===d?"_fc"+ob++:b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=n(b.start=u(b.start,e));b.end=u(b.end,e);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?n(b.end):null;b.allDay===d&&(b.allDay=ca(c.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function m(a){a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):a.className=[];for(var b=
ja.sourceNormalizers,c=0;c<b.length;c++)b[c](a)}function p(a){c.isFunction(a)||c.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a)return m(a),a}function L(a,b){return a&&b&&r(a)==r(b)}function r(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!t||a<t||b>B};this.fetchEvents=function(a,b){t=a;B=b;F=[];a=++Q;G=b=D.length;for(var c=0;c<b;c++)e(D[c],a)};this.addEventSource=function(a){if(a=g(a))G++,e(a,Q)};this.removeEventSource=function(a){D=
c.grep(D,function(b){return!L(b,a)});F=c.grep(F,function(b){return!L(b.source,a)});M(F)};this.updateEvent=function(a){var b,c=F.length,e=w().defaultEventEnd,d=a.start-a._start,f=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++){var g=F[b];g._id==a._id&&g!=a&&(g.start=new Date(+g.start+d),g.end=a.end?g.end?new Date(+g.end+f):new Date(+e(g)+f):null,g.title=a.title,g.url=a.url,g.allDay=a.allDay,g.className=a.className,g.editable=a.editable,g.color=a.color,g.backgroundColor=a.backgroundColor,g.borderColor=
a.borderColor,g.textColor=a.textColor,l(g))}l(a);M(F)};this.renderEvent=function(a,b){l(a);a.source||(b&&(q.events.push(a),a.source=q),F.push(a));M(F)};this.removeEvents=function(a){if(a){if(!c.isFunction(a)){var b=a+"";a=function(a){return a._id==b}}F=c.grep(F,a,!0);for(e=0;e<D.length;e++)c.isArray(D[e].events)&&(D[e].events=c.grep(D[e].events,a,!0))}else{F=[];for(var e=0;e<D.length;e++)c.isArray(D[e].events)&&(D[e].events=[])}M(F)};this.clientEvents=function(a){return c.isFunction(a)?c.grep(F,a):
a?(a+="",c.grep(F,function(b){return b._id==a})):F};this.normalizeEvent=l;this.refetchEventSource=function(a,b,d){if(d=p(d))t=a,B=b,F=c.grep(F,function(a){return!L(a.source,d)}),M(F),G++,e(d,Q)};this.renderEventForSource=function(a,b){if(b=p(b))l(a),a.source=b,F.push(a);M(F)};for(var z=this.trigger,w=this.getView,M=this.reportEvents,q={events:[]},D=[q],t,B,Q=0,G=0,y=0,F=[],R=0;R<b.length;R++)g(b[R])}function e(a,b,c){a.setFullYear(a.getFullYear()+b);c||m(a);return a}function g(a,b,c){if(+a){b=a.getMonth()+
b;var e=n(a);e.setDate(1);e.setMonth(b);a.setMonth(b);for(c||m(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(a<e?1:-1))}return a}function h(a,b,c){if(+a){b=a.getDate()+b;var e=n(a);e.setHours(9);e.setDate(b);a.setDate(b);c||m(a);k(a,e)}return a}function k(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*pb)}function l(a,b){a.setMinutes(a.getMinutes()+b);return a}function m(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function n(a,b){return b?
m(new Date(+a)):new Date(+a)}function p(){var a=0;do var b=new Date(1970,a++,1);while(b.getHours());return b}function r(a,b){return Math.round((n(a,!0)-n(b,!0))/864E5)}function w(a,b,c,e){b!==d&&b!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(b));c!==d&&c!=a.getMonth()&&(a.setDate(1),a.setMonth(c));e!==d&&a.setDate(e)}function u(a,b){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));
b===d&&(b=!0);return q(a,b)||(a?new Date(a):null)}return null}function v(a){a=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());return Math.round(+a/1E3)}function q(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!a)return null;var c=new Date(a[1],0,1);b||!a[13]?(b=new Date(a[1],0,1,9,0),a[3]&&(c.setMonth(a[3]-1),b.setMonth(a[3]-1)),a[5]&&(c.setDate(a[5]),b.setDate(a[5])),k(c,b),a[7]&&c.setHours(a[7]),
a[8]&&c.setMinutes(a[8]),a[10]&&c.setSeconds(a[10]),a[12]&&c.setMilliseconds(1E3*Number("0."+a[12])),k(c,b)):(c.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1),c.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?1E3*Number("0."+a[12]):0),a[14]&&(b=60*Number(a[16])+(a[18]?Number(a[18]):0),b*="-"==a[15]?1:-1,c=new Date(+c+6E4*b)));return c}function t(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);
a[3]&&(b%=12,"p"==a[3].toLowerCase().charAt(0)&&(b+=12));return 60*b+(a[2]?parseInt(a[2],10):0)}}function B(a,b,c){return H(a,null,b,c)}function H(a,b,c,e){e=e||xa;var d=a,f=b,g,h=c.length,k,l,m="";for(g=0;g<h;g++){var n=c.charAt(g);if("'"==n)for(k=g+1;k<h;k++){if("'"==c.charAt(k)){d&&(m=k==g+1?m+"'":m+c.substring(g+1,k),g=k);break}}else if("("==n)for(k=g+1;k<h;k++){if(")"==c.charAt(k)){g=B(d,c.substring(g+1,k),e);parseInt(g.replace(/\D/,""),10)&&(m+=g);g=k;break}}else if("["==n)for(k=g+1;k<h;k++){if("]"==
c.charAt(k)){n=c.substring(g+1,k);g=B(d,n,e);g!=B(f,n,e)&&(m+=g);g=k;break}}else if("{"==n)d=b,f=a;else if("}"==n)d=a,f=b;else{for(k=h;k>g;k--)if(l=Ea[c.substring(g,k)]){d&&(m+=l(d,e));g=k-1;break}k==g&&d&&(m+=n)}}return m}function y(a){if(a.end){var b=a.end;a=a.allDay;b=n(b);return a||b.getHours()||b.getMinutes()?h(b,1):m(b)}return h(n(a.start),1)}function K(a,b,e){a.unbind("mouseover").mouseover(function(a){for(var f=a.target,g;f!=this;)g=f,f=f.parentNode;(f=g._fci)!==d&&(g._fci=d,g=b[f],e(g.event,
g.element,g),c(a.target).trigger(a));a.stopPropagation()})}function J(a,b,e){for(var d=0,f;d<a.length;d++)f=c(a[d]),f.width(Math.max(0,b-D(f,e)))}function z(a,b,e){for(var d=0,f;d<a.length;d++)f=c(a[d]),f.height(Math.max(0,b-Q(f,e)))}function D(a,b){var e=(parseFloat(c.css(a[0],"paddingLeft",!0))||0)+(parseFloat(c.css(a[0],"paddingRight",!0))||0);var d=(parseFloat(c.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(c.css(a[0],"borderRightWidth",!0))||0);e+=d;a=b?(parseFloat(c.css(a[0],"marginLeft",
!0))||0)+(parseFloat(c.css(a[0],"marginRight",!0))||0):0;return e+a}function Q(a,b){var e=(parseFloat(c.css(a[0],"paddingTop",!0))||0)+(parseFloat(c.css(a[0],"paddingBottom",!0))||0);var d=(parseFloat(c.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(c.css(a[0],"borderBottomWidth",!0))||0);e+=d;a=b?(parseFloat(c.css(a[0],"marginTop",!0))||0)+(parseFloat(c.css(a[0],"marginBottom",!0))||0):0;return e+a}function F(){}function R(a,b){return a-b}function G(a){return(10>a?"0":"")+a}function O(a,b){if(a[b]!==
d)return a[b];b=b.split(/(?=[A-Z])/);for(var c=b.length-1,e;0<=c;c--)if(e=a[b[c].toLowerCase()],e!==d)return e;return a[""]}function U(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function P(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function I(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function ha(a,b){var c=a.source||{},e=a.color,d=c.color,f=b("eventColor"),g=a.backgroundColor||e||c.backgroundColor||d||b("eventBackgroundColor")||f;e=a.borderColor||e||c.borderColor||d||b("eventBorderColor")||f;a=a.textColor||c.textColor||b("eventTextColor");b=[];g&&b.push("background-color:"+g);e&&b.push("border-color:"+e);a&&b.push("color:"+a);return b.join(";")}function A(a,b,e){c.isFunction(a)&&(a=[a]);if(a){var d;for(d=0;d<a.length;d++)var f=a[d].apply(b,e)||f;return f}}function ca(){for(var a=
0;a<arguments.length;a++)if(arguments[a]!==d)return arguments[a]}function da(a,b,e){var d=this;d.renderList=function(b,e,n){l=b;p=e;f("theme");f("columnFormat");f("weekNumbers");f("weekNumberShortTitle");f("weekNumberTitle");f("weekNumberCalculation");r=[];a.find(".fc-list-day").remove();b=c("<ul class='fc-list-day'></ul>").appendTo(a);e=m(new Date);for(n=0;n<p;n++){var z=h(0,n),w=c("<li class='fc-list-day-item' data-date='"+k(z,"yyyy-MM-dd")+"'></li>").appendTo(b);+z==+e?w.addClass("fc-today"):+z<
+e&&w.addClass("fc-past");w=c("<div class='fc-day-content'></div>").appendTo(w);g("dayRender",d,z,w);r.push(w)}};d.setHeight=function(a){};d.setWidth=function(a){};d.renderDayOverlay=function(a,b,c){};d.defaultSelectionEnd=function(a,b){};d.renderSelection=function(a,b,c){};d.clearSelection=function(){};d.reportDayClick=function(a,b,c){};d.dragStart=function(a,b,c){};d.dragStop=function(a,b,c){};d.defaultEventEnd=function(a){return n(a.start)};d.getHoverListener=function(){return hoverListener};d.colLeft=
function(a){return null};d.colRight=function(a){return null};d.colContentLeft=function(a){return null};d.colContentRight=function(a){return null};d.getIsCellAllDay=function(){return!0};d.allDayRow=function(a){return null};d.getRowCnt=function(){return l};d.getColCnt=function(){return p};d.getColWidth=function(){return colWidth};d.getDayItems=function(){return r};qa.call(d,a,b,e);Ha.call(d);ia.call(d);var f=d.opt,g=d.trigger,h=d.cellToDate,k=b.formatDate,l,p,r=[]}function ia(){var a=this;a.renderEvents=
function(b,e){e=a.getColCnt();for(var d=a.getDayItems(),f=0;f<e;f++){for(var g=a.cellToDate(0,f),h=[],k=[],l=0;l<b.length;l++){var m=b[l];m.allDay||0!==r(g,m.start)||h.push(m);m.allDay&&(m.start<=g&&m.end>=g||0===r(g,m.start))&&k.push(m)}k.sort(Da);h.sort(Da);g=k.concat(h);h=d[f];h.find(".fc-list-event").remove();if(0<g.length)for(k=c("<ul class='fc-list-event'></ul>").appendTo(h),l=0;l<g.length;l++)m=c("<li/>").addClass("fc-list-event-item").append(c("<div class='fc-event-inner'></div>")),a.trigger("eventRender",
g[l],g[l],m),k.append(m),CommonFunctions.executeScripts(g[l].description),CommonFunctions.executeScripts(g[l].extraDescription);h.parents(".fc-list-day-item:first").toggleClass("fc-day-empty",0===g.length)}};a.clearEvents=function(){}}function sa(a,b,e){function d(){var b=f(),e;F&&F.remove();F=c(b).appendTo(a);G=F.find("thead");y=G.find(".fc-day-header");R=F.find("tbody");A=R.find("tr");H=R.find(".fc-day");K=A.find("td:first-child");Ja=R.find(".fc-week-number-link");O=A.eq(0).find(".fc-day > div");
E=A.eq(0).find(".fc-day-content > div");I(G.add(G.find("tr")));I(A);A.eq(0).addClass("fc-first");A.filter(":last").addClass("fc-last");H.each(function(a,b){a=v(Math.floor(a/Z),a%Z);e=c(b);u("dayRender",z,a,e);e.find(".fc-day-number:first").mousedown(k)});Ja.click(l);H.click(g).mousedown(t)}function f(){var a=fa+"-widget-header",b;var c="<thead><tr>";ka&&(c+="<th class='fc-week-number "+a+"'>"+U(Fa)+"</th>");for(b=0;b<Z;b++){var e=v(0,b);c+="<th class='fc-day-header fc-"+$a[e.getDay()]+" "+a+"'>"+
U(B(e,ya))+"</th>"}a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+(c+"</tr></thead>");c=fa+"-widget-content";var d;var f="<tbody>";for(b=0;b<ba;b++){f+="<tr class='fc-week'>";ka&&(e=d=v(b,0),e.getFullYear()<z.start.getFullYear()&&(e=new Date(z.start.getFullYear(),0,1)),e.getMonth()<z.start.getMonth()&&(e=new Date(z.start.getFullYear(),z.start.getMonth(),1)),f+="<td class='fc-week-number "+c+"'><div><a class='fc-week-number-link' href='javascript:void(0);' data-date='"+B(e,
"yyyy-MM-dd")+"'>"+U(B(d,Ca))+"</a></div></td>");for(e=0;e<Z;e++){d=v(b,e);var g=fa+"-widget-content",h=z.start.getMonth(),k=m(new Date),l="";g=["fc-day","fc-"+$a[d.getDay()],g];d.getMonth()!=h&&g.push("fc-other-month");+d==+k?g.push("fc-today",fa+"-state-highlight"):d<k?g.push("fc-past"):g.push("fc-future");l+="<td class='"+g.join(" ")+"' data-date='"+B(d,"yyyy-MM-dd")+"'><div>";T&&(l+="<a class='fc-day-number' href='javascript:void(0);'>"+d.getDate()+"</a>");f+=l+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}f+=
"</tr>"}return a+(f+"</tbody>")+"</table>"}function g(a){if(!w("selectable")){var b=q(c(this).data("date"));u("dayClick",this,b,!0,a)}}function k(){var a=c(this).parents(".fc-day:first").data("date");b.gotoDate(q(a));b.changeView("agendaDay")}function l(){var a=c(this).data("date");b.gotoDate(q(a));b.changeView("agendaWeek")}function p(a,b,c){c&&oa.build();a=M(a,b);for(b=0;b<a.length;b++)c=a[b],r(c.row,c.leftCol,c.row,c.rightCol).click(g).mousedown(t)}function r(b,c,e,d){b=oa.rect(b,c,e,d,a);return L(b,
a)}var z=this;z.renderBasic=function(b,e,f){ba=b;Z=e;T=f;fa=w("theme")?"ui":"fc";ya=w("columnFormat");ka=w("weekNumbers");Fa=w("weekNumberShortTitle");w("weekNumberTitle");Ca="iso"!=w("weekNumberCalculation")?"w":"W";R||(ea=c("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a));d()};z.setHeight=function(a){la=a;a=la-G.height();var b,e;if("variable"==w("weekMode"))var d=b=Math.floor(a/(1==ba?2:6));else d=Math.floor(a/ba),b=a-d*(ba-1);K.each(function(a,
f){a<ba&&(e=c(f),e.find("> div").css("min-height",(a==ba-1?b:d)-Q(e)))})};z.setWidth=function(a){N=a;Ba.clear();va.clear();V=0;ka&&(V=G.find("th.fc-week-number").outerWidth());Y=Math.floor((N-V)/Z);J(y.slice(0,-1),Y)};z.renderDayOverlay=p;z.defaultSelectionEnd=function(a,b){return n(a)};z.renderSelection=function(a,b,c){p(a,h(n(b),1),!0)};z.clearSelection=function(){D()};z.reportDayClick=function(a,b,c){var e=C(a);u("dayClick",H[e.row*Z+e.col],a,b,c)};z.dragStart=function(a,b,c){ua.start(function(a){D();
a&&r(a.row,a.col,a.row,a.col)},b)};z.dragStop=function(a,b,c){var e=ua.stop();D();e&&(e=v(e),u("drop",a,e,!0,b,c))};z.defaultEventEnd=function(a){return n(a.start)};z.getHoverListener=function(){return ua};z.colLeft=function(a){return Ba.left(a)};z.colRight=function(a){return Ba.right(a)};z.colContentLeft=function(a){return va.left(a)};z.colContentRight=function(a){return va.right(a)};z.getIsCellAllDay=function(){return!0};z.allDayRow=function(a){return A.eq(a)};z.getRowCnt=function(){return ba};
z.getColCnt=function(){return Z};z.getColWidth=function(){return Y};z.getDaySegmentContainer=function(){return ea};qa.call(z,a,b,e);Ka.call(z);Ha.call(z);ta.call(z);var w=z.opt,u=z.trigger,L=z.renderOverlay,D=z.clearOverlays,t=z.daySelectionMousedown,v=z.cellToDate,C=z.dateToCell,M=z.rangeToSegments,B=b.formatDate,F,G,y,R,A,H,K,O,E,ea,N,la,Y,V,ba,Z,T,fa,ya,ka,Fa,Ca,Ja;P(a.addClass("fc-grid"));var oa=new Xa(function(a,b){var e,d,f;y.each(function(a,g){e=c(g);d=e.offset().left;a&&(f[1]=d);f=[d];b[a]=
f});f[1]=d+e.outerWidth();A.each(function(b,g){b<ba&&(e=c(g),d=e.offset().top,b&&(f[1]=d),f=[d],a[b]=f)});f[1]=d+e.outerHeight()});var ua=new Ya(oa);var Ba=new Za(function(a){return O.eq(a)});var va=new Za(function(a){return E.eq(a)})}function ta(){var a=this;a.renderEvents=function(b,c){return a.renderDayEvents(b,c)};a.clearEvents=function(){a.getDaySegmentContainer().empty()};T.call(a)}function Aa(a,b,e){function f(){var b=ha+"-widget-header";var e="",d,f=m(new Date);e+="<thead><tr>";if(sa){var g=
na(0,0);g=ea(g,Aa);g=ia?g+wa:wa+" "+g;e+="<th class='fc-agenda-axis fc-week-number "+b+"'>"+U(g)+"</th>"}else e+="<th class='fc-agenda-axis "+b+"'>&nbsp;</th>";var h=1<Ga;for(d=0;d<Ga;d++){g=na(0,d);var k=+g==+f;k&&h&&(e+="<th style='width: 1px; position: relative; z-index: 3;' class='fc-state-hightlight-border'></th>");e+="<th class='fc-"+$a[g.getDay()]+" fc-col"+d+" "+b;k&&h&&(e+=" "+ha+"-state-highlight fc-today");e+="'>";e=h?e+("<a class='fc-day-number' href='javascript:void(0);' data-date='"+
ea(g,"yyyy-MM-dd")+"'>"+U(ea(g,qb))+"</a>"):e+U(ea(g,qb));e+="</th>";k&&h&&(e+="<th style='width: 1px; position: relative; z-index: 3;' class='fc-state-hightlight-border'></th>")}b="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+(e+("<th class='fc-agenda-gutter "+b+"'>&nbsp;</th></tr></thead>"));g=ha+"-widget-header";e=ha+"-widget-content";f=m(new Date);h="<tbody><tr><th class='fc-agenda-axis "+g+"'>&nbsp;</th>";d="";k=1<Ga;for(g=0;g<Ga;g++){var l=na(0,g);var n=
+l==+f;var p=["fc-col"+g,"fc-"+$a[l.getDay()],e];n&&k?p.push(ha+"-state-highlight","fc-today"):l<f?p.push("fc-past"):p.push("fc-future");l="<td class='"+p.join(" ")+"'";n&&k&&(l+="style='border-width: 0px !important; border-bottom-width: 1px !important;'");l+=" ><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";n&&k&&(l="<td style='position: relative; z-index: 3; width: 1px;' class='fc-state-hightlight-border'></td>"+l+"<td style='position: relative; z-index: 3; width: 1px;' class='fc-state-hightlight-border'></td>");
d+=l}b=b+(h+d+("<td class='fc-agenda-gutter "+e+"'>&nbsp;</td></tr></tbody>"))+"</table>";N&&N.remove();N=c(b).prependTo(a);la=N.find("thead");Y=la.find("th:not(.fc-state-hightlight-border)").slice(1,-1);V=N.find("tbody");ba=V.find("td:not(.fc-state-hightlight-border)").slice(0,-1);Z=ba.find("> div");Na=ba.find(".fc-day-content > div");fa=ba.eq(0);ya=Z.eq(0);I(la.add(la.find("tr")));I(V.add(V.find("tr")));Y.find(".fc-day-number").click(r)}function g(){function a(){oa.scrollTop(e)}var b=p(),c=n(b);
c.setHours(A("firstHour"));var e=C(b,c)+1;a();setTimeout(a,0)}function k(a){if(!A("selectable")){var b=Math.min(Ga-1,Math.floor((a.pageX-N.offset().left-ma)/pa)),c=na(0,b),e=this.parentNode.className.match(/fc-slot(\d+)/);e?(e=parseInt(e[1])*A("slotMinutes"),c.setHours(Math.floor(e/60)),c.setMinutes(e%60+Wa),H("dayClick",ba[b],c,!1,a)):H("dayClick",ba[b],c,!0,a)}}function r(){var a=c(this).data("date");b.gotoDate(q(a));b.changeView("agendaDay")}function w(a,b,c){c&&ta.build();a=E(a,b);for(b=0;b<a.length;b++)c=
a[b],u(c.row,c.leftCol,c.row,c.rightCol).click(k).mousedown(X)}function u(a,b,c,e){a=ta.rect(a,b,c,e,ka);return K(a,ka)}function D(a,b){for(var c=0;c<Ga;c++){var e=na(0,c),d=h(n(e),1),f=new Date(Math.max(e,a)),g=new Date(Math.min(d,b));f<g&&(d=ta.rect(0,c,0,c,ua),f=C(e,f),e=C(e,g),d.top=f,d.height=e-f,K(d,ua).click(k).mousedown(F))}}function v(a){return A("allDaySlot")&&!a.row}function L(a){var b=na(0,a.col);a=a.row;A("allDaySlot")&&a--;l(b,60*y.minVisibleHour);0<=a&&l(b,a*Pa);return b}function C(a,
b){a=n(a,!0);if(b<l(n(a),Wa))return 0;if(b>=l(n(a),60*(y.maxVisibleHour+1)))return va.height();a=A("slotMinutes");b=60*b.getHours()+b.getMinutes()-Wa;var c=Math.floor(b/a),e=aa[c];e===d&&(e=aa[c]=va.find("tr").eq(c).find("td div")[0].offsetTop);return Math.max(0,Math.round(e-1+b%a/a*bb))}function M(a,b){var e=A("selectHelper");ta.build();if(e){var d=ca(a).col;if(0<=d&&d<Ga){d=ta.rect(0,d,0,d,ua);var f=C(a,a),g=C(a,b);if(g>f){d.top=f;d.height=g-f;d.left+=2;d.width-=5;if(c.isFunction(e)){if(a=e(a,b))d.position=
"absolute",za=c(a).css(d).appendTo(ua)}else d.isStart=!0,d.isEnd=!0,za=c(ra({title:"",start:a,end:b,className:["fc-select-helper"],editable:!1},d)),za.css("opacity",A("dragOpacity"));za&&(za.click(k).mousedown(F),ua.append(za),J(za,d.width,!0),z(za,d.height,!0))}}}else D(a,b)}function B(){O();za&&(za.remove(),za=null)}function F(a){if(1==a.which&&A("selectable")){da(a);var b;xa.start(function(a,c){B();a&&a.col==c.col&&!v(a)?(c=L(c),a=L(a),b=[c,l(n(c),Pa),a,l(n(a),Pa)].sort(R),M(b[0],b[3])):b=null},
a);c(document).one("mouseup",function(a){xa.stop();b&&(+b[0]==+b[1]&&G(b[0],!1,a),T(b[0],b[3],!1,a))})}}function G(a,b,c){H("dayClick",ba[ca(a).col],a,b,c)}var y=this;y.renderAgenda=function(b){Ga=b;ha=A("theme")?"ui":"fc";ia=A("isRTL");Wa=t(A("minTime"));ja=t(A("maxTime"));qb=A("columnFormat");sa=A("weekNumbers");wa=A("weekNumberTitle");A("weekNumberShortTitle");Aa="iso"!=A("weekNumberCalculation")?"w":"W";Pa=A("snapMinutes")||A("slotMinutes");if(N)f();else{b=ha+"-widget-header";var e=ha+"-widget-content",
d,g=0==A("slotMinutes")%15;f();ka=c("<div style='position:absolute; left:0; width:100%'/>").appendTo(a);if(A("allDaySlot")){Fa=c("<div class='fc-event-container' style='position:absolute; z-index:8; top:0; left:0'/>").appendTo(ka);var h="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+A("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>";
Ca=c(h).appendTo(ka);Ja=Ca.find("tr");Ja.find("td").click(k).mousedown(X);ka.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")}else Fa=c([]);oa=c("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ka);ua=c("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(oa);Ba=c("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ua);h="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";
var m=p();var r=l(n(m),ja);l(m,Wa);for(d=mb=0;m<r;d++){var z=m.getMinutes();h+="<tr class='fc-slot"+d+" "+(z?"fc-minor":"")+"'><th class='fc-agenda-axis "+b+"'>"+(g&&z?"&nbsp;":ea(m,A("axisFormat")))+"</th><td class='"+e+"'><div style='position:relative'>&nbsp;</div></td></tr>";l(m,A("slotMinutes"));mb++}va=c(h+"</tbody></table>").appendTo(ua);va.find("td").click(k).mousedown(F)}};y.setWidth=function(a){Da.clear();Ea.clear();a=la.find("th:first");Ca&&(a=a.add(Ca.find("th:first")));a=a.add(va.find("th").filter(":visible:first"));
ma=0;J(a.width("").each(function(a,b){ma=Math.max(ma,c(b).outerWidth())}),ma);a=N.find(".fc-agenda-gutter");Ca&&(a=a.add(Ca.find("th.fc-agenda-gutter")));var b=oa[0].clientWidth;(Oa=oa.width()-b)?(J(a,Oa),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last");pa=Math.floor((b-ma)/Ga);J(Y.slice(0,-1),pa)};y.setHeight=function(a){a===d&&(a=lb);lb=a;aa={};var b=V.position().top,c=oa.position().top;a=Math.min(a-b,va.height()+c+1);ya.height(a-Q(fa));ka.css("top",b);oa.height(a-c-1);
bb=va.find("tr:visible:first").height();Ra=A("slotMinutes")/Pa;hb=bb/Ra};y.afterRender=function(){g()};y.defaultEventEnd=function(a){var b=n(a.start);return a.allDay?b:l(b,A("defaultEventMinutes"))};y.timePosition=C;y.getIsCellAllDay=v;y.allDayRow=function(a){return Ja};y.getCoordinateGrid=function(){return ta};y.getHoverListener=function(){return xa};y.colLeft=function(a){return Da.left(a)};y.colRight=function(a){return Da.right(a)};y.colContentLeft=function(a){return Ea.left(a)};y.colContentRight=
function(a){return Ea.right(a)};y.getDaySegmentContainer=function(){return Fa};y.getSlotSegmentContainer=function(){return Ba};y.getMinMinute=function(){return Wa};y.getMaxMinute=function(){return ja};y.getSlotContainer=function(){return ua};y.getRowCnt=function(){return 1};y.getColCnt=function(){return Ga};y.getColWidth=function(){return pa};y.getSnapHeight=function(){return hb};y.getSnapMinutes=function(){return Pa};y.defaultSelectionEnd=function(a,b){return b?n(a):l(n(a),A("slotMinutes"))};y.renderDayOverlay=
w;y.renderSelection=function(a,b,c){c?A("allDaySlot")&&w(a,h(n(b),1),!0):M(a,b)};y.clearSelection=B;y.reportDayClick=G;y.dragStart=function(a,b,c){xa.start(function(a){O();if(a)if(v(a))u(a.row,a.col,a.row,a.col);else{a=L(a);var b=l(n(a),A("defaultEventMinutes"));D(a,b)}},b)};y.dragStop=function(a,b,c){var e=xa.stop();O();e&&H("drop",a,L(e),v(e),b,c)};qa.call(y,a,b,e);Ka.call(y);Ha.call(y);Sa.call(y);var A=y.opt,H=y.trigger,K=y.renderOverlay,O=y.clearOverlays,T=y.reportSelection,da=y.unselect,X=y.daySelectionMousedown,
ra=y.slotSegHtml,na=y.cellToDate,ca=y.dateToCell,E=y.rangeToSegments,ea=b.formatDate,N,la,Y,V,ba,Z,Na,fa,ya,ka,Fa,Ca,Ja,oa,ua,Ba,va,za,lb,ma,pa,Oa,bb,Pa,Ra,hb,Ga,mb,aa={},ha,ia,Wa,ja,qb,sa,wa,Aa;P(a.addClass("fc-agenda"));var ta=new Xa(function(a,b){var e;Y.each(function(a,g){d=c(g);f=d.offset().left;a&&(e[1]=f);e=[f];b[a]=e});e[1]=f+d.outerWidth();if(A("allDaySlot")){var d=Ja;var f=d.offset().top;a[0]=[f,f+d.outerHeight()]}for(var g=ua.offset().top,h=oa.offset().top,k=h+oa.outerHeight(),l=0;l<mb*
Ra;l++)a.push([Math.max(h,Math.min(k,g+hb*l)),Math.max(h,Math.min(k,g+hb*(l+1)))])});var xa=new Ya(ta);var Da=new Za(function(a){return Z.eq(a)});var Ea=new Za(function(a){return Na.eq(a)})}function Sa(){function a(a){var b=p("minDefaultDayStartHour"),e=p("maxDefaultDayEndHour");a&&c.each(a,function(a,c){a=c.start.getHours();c=c.end.getHours();b>a&&(b=a);e<c&&(e=c)});m.minVisibleHour=b;m.maxVisibleHour=e;a="";for(var d=0;d<2*b;d++)a.length&&(a+=", "),a+="tr.fc-slot"+d;for(d=2*e+2;48>d;d++)a.length&&
(a+=", "),a+="tr.fc-slot"+d;c(".fc-agenda-slots tr").show();c(a).hide();fa.calcSize();fa.setSize()}function b(a){return a.end?n(a.end):l(n(a.start),p("defaultEventMinutes"))}function e(a,b){var c="<",e=a.url,d=ha(a,p),f=["fc-event","fc-event-vert"];q(a)&&f.push("fc-event-draggable");b.isStart&&f.push("fc-event-start");b.isEnd&&f.push("fc-event-end");f=f.concat(a.className);a.source&&(f=f.concat(a.source.className||[]));c=e?c+("a href='"+U(a.url)+"'"):c+"div";var g=p("timeFormat");"agendaWeek"===fa.getView().name&&
(g=fa.option("timeFormat")[""]);c+=" class='"+f.join(" ")+"' style='position:absolute;top:"+b.top+"px;left:"+b.left+"px;"+d+"'><div class='fc-event-inner'><span class='fc-event-time'>"+U(ka(a.start,a.end,g))+"</span><span class='fc-event-title'>"+U(a.title||"")+"</span></div><div class='fc-event-bg'></div>";b.isEnd&&u(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return c+("</"+(e?"a":"div")+">")}function f(a,b,c){var e=b.find("div.fc-event-time");q(a)&&g(a,b,e);c.isEnd&&u(a)&&
k(a,b,e);t(a,b)}function g(a,b,c){function e(){Z();if(D)if(Q&&t)c.hide(),b.draggable("option","grid",null),ba(h(n(a.start),ea),h(y(a),ea));else{var e=B,d=l(n(a.start),e),f;a.end&&(f=l(n(a.end),e));c.text(ka(d,f,p("timeFormat")));c.css("display","");b.draggable("option","grid",[g,k])}}var d=m.getCoordinateGrid(),f=X(),g=ra(),k=na(),z=ca(),q,u,D,v,t,L,C,M,ea,B,F,Q=p("dragBetweenAllDayAndSlots");b.draggable({scroll:!1,grid:[g,k],axis:1==f?"y":!1,opacity:p("dragOpacity"),revertDuration:p("dragRevertDuration"),
start:function(c,e){w("eventDragStart",b,a,c,e);la(a,b);d.build();q=b.position();u=d.cell(c.pageX,c.pageY);D=v=!0;t=L=J(u);B=F=ea=C=M=0},drag:function(a,c){a=d.cell(a.pageX,a.pageY);if(D=!!a){t=J(a);if(Q||!t){if(C=Math.round((c.position.left-q.left)/g),C!=M){a=aa(0,u.col);var h=u.col+C;h=Math.max(0,h);h=Math.min(f-1,h);h=aa(0,h);ea=r(h,a)}}else D=!1;t||(B=Math.round((c.position.top-q.top)/k)*z)}if(D!=v||t!=L||C!=M||B!=F)e(),v=D,L=t,M=C,F=B;b.draggable("option","revert",!D)},stop:function(c,d){Z();
w("eventDragStop",b,a,c,d);D&&(t||ea||B)?Y(this,a,ea,t?0:B,t,c,d):(D=!0,t=!1,B=ea=C=0,e(),b.css("filter",""),b.css(q),N(a,b))}})}function k(a,b,c){var e,d,f=na(),g=ca();b.resizable({minHeight:f*p("minHeightInSlots"),handles:{s:".ui-resizable-handle"},grid:f,start:function(c,f){e=d=0;la(a,b);w("eventResizeStart",this,a,c,f)},resize:function(h,k){e=Math.round((Math.max(f,b.height())-k.originalSize.height)/f);e!=d&&(c.text(ka(a.start,e||a.end?l(v(a),g*e):null,p("timeFormat"))),d=e)},stop:function(c,
d){w("eventResizeStop",this,a,c,d);e?V(this,a,0,g*e,c,d):N(a,b)}})}var m=this;m.renderEvents=function(g,h){var k,r=g.length,z=[],q=[],u=c(".fc-agenda-allday, .fc-agenda-divider.fc-widget-header");for(k=0;k<r;k++){var t=g[k];t.allDay?(t.start>=m.start&&t.start<=m.end||t.end>=m.start&&t.end<=m.end||t.start<m.start&&t.end>m.end)&&z.push(t):q.push(t)}p("allDaySlot")&&(0<z.length?(u.show(),da(z,h)):(da(z,h),u.hide()),B());k=X();r=H();z=R();u=c.map(q,b);g=[];for(t=0;t<k;t++){var v=aa(0,t);l(v,r);var L;
var C=q;var M=u;var y=v;var F=l(n(v),z-r),N=[],A=C.length;for(L=0;L<A;L++){v=C[L];var Ia=v.start;var E=M[L];if(E>y&&Ia<F){if(Ia<y){var db=n(y);Ia=!1}else db=Ia,Ia=!0;if(E>F){var jb=n(F);E=!1}else jb=E,E=!0;N.push({event:v,start:db,end:jb,isStart:Ia,isEnd:E,title:v.title,sortKey:v.sortKey})}}v=y=N.sort(Da);L=[];for(y=0;y<v.length;y++){M=v[y];for(C=0;C<L.length&&Ua(M,L[C]).length;C++);(L[C]||(L[C]=[])).push(M)}C=L;M=C[0];for(N=0;N<C.length;N++)for(F=C[N],L=0;L<F.length;L++)for(v=F[L],v.forwardSegs=
[],y=N+1;y<C.length;y++)Ua(v,C[y],v.forwardSegs);if(M){for(y=0;y<M.length;y++)gb(M[y]);for(y=0;y<M.length;y++)Ta(M[y],0,0)}L=[];for(v=0;v<C.length;v++)for(y=C[v],M=0;M<y.length;M++)L.push(y[M]);y=L;for(C=0;C<y.length;C++)M=y[C],M.col=t,g.push(M)}a(g);k=g.length;t="";u=G();C=p("isRTL");for(q=0;q<k;q++)r=g[q],z=r.event,M=l(n(r.start),p("minHeightInSlots")*p("slotMinutes")),r.end<M&&(r.end=M),M=I(r.start,r.start),y=I(r.start,r.end),v=O(r.col),L=P(r.col),N=L-v,L-=.025*N,N=L-v,F=N*(r.forwardCoord-r.backwardCoord),
p("slotEventOverlap")&&(F=Math.max(2*(F-10),F)),C?(A=L-r.backwardCoord*N,N=A-F):(N=v+r.backwardCoord*N,A=N+F),N=Math.max(N,v),A=Math.min(A,L),F=A-N,r.top=M,r.left=N,r.outerWidth=F,r.outerHeight=y-M,t+=e(z,r);u[0].innerHTML=t;C=u.children();for(q=0;q<k;q++)r=g[q],z=r.event,t=c(C[q]),M=w("eventRender",z,z,t),!1===M?t.remove():(M&&!0!==M&&(t.remove(),t=c(M).css({position:"absolute",top:r.top,left:r.left}).appendTo(u)),r.element=t,z._id===h?f(z,t,r):t[0]._fci=q,ea(z,t));K(u,g,f);for(q=0;q<k;q++)if(r=
g[q],t=r.element)r.vsides=Q(t,!0),r.hsides=D(t,!0),h=t.find(".fc-event-title"),h.length&&(r.contentTop=h[0].offsetTop);for(q=0;q<k;q++)if(r=g[q],t=r.element)t[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",h=Math.max(0,r.outerHeight-r.vsides),t[0].style.height=h+"px",z=r.event,r.contentTop!==d&&10>h-r.contentTop&&(t.find("div.fc-event-time").text(ya(z.start,p("timeFormat"))+" - "+z.title),t.find("div.fc-event-title").remove()),w("eventAfterRender",z,z,t)};m.clearEvents=function(){F().empty();
G().empty()};m.slotSegHtml=e;T.call(m);var p=m.opt,w=m.trigger,q=m.isEventDraggable,u=m.isEventResizable,v=m.eventEnd,t=m.eventElementHandlers,B=m.setHeight,F=m.getDaySegmentContainer,G=m.getSlotSegmentContainer,A=m.getHoverListener,R=m.getMaxMinute,H=m.getMinMinute,I=m.timePosition,J=m.getIsCellAllDay,O=m.colContentLeft,P=m.colContentRight,aa=m.cellToDate,X=m.getColCnt,ra=m.getColWidth,na=m.getSnapHeight,ca=m.getSnapMinutes,E=m.getSlotContainer,ea=m.reportEventElement,N=m.showEvents,la=m.hideEvents,
Y=m.eventDrop,V=m.eventResize,ba=m.renderDayOverlay,Z=m.clearOverlays,da=m.renderDayEvents,fa=m.calendar,ya=fa.formatDate,ka=fa.formatDates;m.draggableDayEvent=function(a,b,c){function e(){k||(b.width(f).height("").draggable("option","grid",null),k=!0)}var d=c.isStart,f,g,k=!0,m,l=A(),q=ra(),u=na(),t=ca(),v=H(),L=p("dragBetweenAllDayAndSlots");b.draggable({opacity:p("dragOpacity","month"),revertDuration:p("dragRevertDuration"),start:function(c,v){w("eventDragStart",b,a,c,v);la(a,b);f=b.width();l.start(function(c,
f){Z();if(c){g=!1;f=aa(0,f.col);var l=aa(0,c.col);m=r(l,f);c.row?L&&d?k&&(b.width(q-10),z(b,u*Math.round((a.end?(a.end-a.start)/6E4:p("defaultEventMinutes"))/t)),b.draggable("option","grid",[q,1]),k=!1):g=!0:(ba(h(n(a.start),m),h(y(a),m)),e());g=g||k&&!m}else e(),g=!0;b.draggable("option","revert",g)},c,"drag")},stop:function(c,d){l.stop();Z();w("eventDragStop",b,a,c,d);if(g)e(),b.css("filter",""),N(a,b);else{var f=0;L&&!k&&(f=Math.round((b.offset().top-E().offset().top)/u)*t+v-(60*a.start.getHours()+
a.start.getMinutes()));Y(this,a,m,f,k,c,d)}}})}}function gb(a){var b=a.forwardSegs,c=0,e;if(a.forwardPressure===d){for(e=0;e<b.length;e++){var f=b[e];gb(f);c=Math.max(c,1+f.forwardPressure)}a.forwardPressure=c}}function Ta(a,b,c){var e=a.forwardSegs;if(a.forwardCoord===d)for(e.length?(e.sort(Va),Ta(e[0],b+1,c),a.forwardCoord=e[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),b=0;b<e.length;b++)Ta(e[b],0,a.forwardCoord)}function Ua(a,b,c){c=c||[];for(var e=
0;e<b.length;e++){var d=b[e];a.end>d.start&&a.start<d.end&&c.push(b[e])}return c}function Va(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||Da(a,b)}function Da(a,b){return a.start-b.start||(a.sortKey||0)-(b.sortKey||0)||b.end-b.start-(a.end-a.start)||(a.title||"").localeCompare(b.title)}function qa(a,b,e){function f(a,b){a=A[a];return c.isPlainObject(a)?O(a,b||e):a}function g(a,c){return b.trigger.apply(b,[a,c||C].concat(Array.prototype.slice.call(arguments,
2),[C]))}function k(a){return a.end?n(a.end):L(a)}function m(a,b,c){a=M[a._id];var e,d=a.length;for(e=0;e<d;e++)if(!b||a[e][0]!=b[0])a[e][c]()}function p(a,b,c,e){c=c||0;for(var f,g=a.length,k=0;k<g;k++)f=a[k],e!==d&&(f.allDay=e),l(h(f.start,b,!0),c),f.end&&(f.end=l(h(f.end,b,!0),c)),y(f,A)}function z(a,b,c){c=c||0;for(var e,d=a.length,f=0;f<d;f++)e=a[f],e.end=l(h(k(e),b,!0),c),y(e,A)}function w(a,b){var c=C.getColCnt(),e=E?-1:1,d=E?c-1:0;"object"==typeof a&&(b=a.col,a=a.row);return a*c+(b*e+d)}function q(a){var b=
C.visStart.getDay();a+=I[b];return 7*Math.floor(a/H)+J[(a%H+H)%H]-b}function u(a){var b=n(C.visStart);h(b,a);return b}function t(a){return r(a,C.visStart)}function v(a){var b=C.visStart.getDay();a+=b;return Math.floor(a/7)*H+I[(a%7+7)%7]-I[b]}function D(a){var b=C.getColCnt();return{row:Math.floor(a/b),col:(a%b+b)%b*(E?-1:1)+(E?b-1:0)}}var C=this;C.element=a;C.calendar=b;C.name=e;C.opt=f;C.trigger=g;C.isEventDraggable=function(a){var b=a.source||{};return ca(a.startEditable,b.startEditable,f("eventStartEditable"),
a.editable,b.editable,f("editable"))&&!f("disableDragging")};C.isEventResizable=function(a){var b=a.source||{};return ca(a.durationEditable,b.durationEditable,f("eventDurationEditable"),a.editable,b.editable,f("editable"))&&!f("disableResizing")};C.setEventData=function(a){B={};var b,c=a.length;for(b=0;b<c;b++){var e=a[b];B[e._id]?B[e._id].push(e):B[e._id]=[e]}};C.clearEventData=function(){B={};M={};Q=[]};C.eventEnd=k;C.reportEventElement=function(a,b){Q.push({event:a,element:b});M[a._id]?M[a._id].push(b):
M[a._id]=[b]};C.triggerEventDestroy=function(){c.each(Q,function(a,b){C.trigger("eventDestroy",b.event,b.event,b.element)})};C.eventElementHandlers=function(a,b){b.on("click",function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return g("eventClick",this,a,c)}).hover(function(b){g("eventMouseover",this,a,b)},function(b){g("eventMouseout",this,a,b)})};C.showEvents=function(a,b){m(a,b,"show")};C.hideEvents=function(a,b){m(a,b,"hide")};C.eventDrop=function(a,b,c,
e,d,f,h){var k=b.allDay,m=b._id;p(B[m],c,e,d);g("eventDrop",a,b,c,e,d,function(){p(B[m],-c,-e,k);F(m)},f,h);F(m)};C.eventResize=function(a,b,c,e,d,f){var h=b._id,k=b._start,m=b._end;z(B[h],c,e);g("eventResize",a,b,c,e,function(){b.start=k;b.end=m;y(b);F(h)},d,f);F(h)};var L=C.defaultEventEnd,y=b.normalizeEvent,F=b.reportEventChange,B={},M={},Q=[],A=b.options;C.isHiddenDay=function(a){"object"==typeof a&&(a=a.getDay());return R[a]};C.skipHiddenDays=function(a,b,c){for(b=b||1;R[(a.getDay()+(c?b:0)+
7)%7];)h(a,b)};C.getCellsPerWeek=function(){return H};C.dateToCell=function(a){a=t(a);a=v(a);return D(a)};C.dateToDayOffset=t;C.dayOffsetToCellOffset=v;C.cellOffsetToCell=D;C.cellToDate=function(){var a=w.apply(null,arguments);a=q(a);return u(a)};C.cellToCellOffset=w;C.cellOffsetToDayOffset=q;C.dayOffsetToDate=u;C.rangeToSegments=function(a,b){var c=C.getRowCnt(),e=C.getColCnt(),d=[];a=t(a);b=t(b);for(var f=v(a),g=v(b)-1,h=0;h<c;h++){var k=h*e,m=Math.max(f,k);k=Math.min(g,k+e-1);if(m<=k){var l=D(m),
n=D(k);l=[l.col,n.col].sort();m=q(m)==a;k=q(k)+1==b;d.push({row:h,leftCol:l[0],rightCol:l[1],isStart:m,isEnd:k})}}return d};var G=f("hiddenDays")||[],R=[],H,I=[],J=[],E=f("isRTL");(function(){!1===f("weekends")&&G.push(0,6);for(var a=0,b=0;7>a;a++)I[a]=b,R[a]=-1!=c.inArray(a,G),R[a]||(J[b]=a,b++);H=b;if(!H)throw"invalid hiddenDays";})()}function T(){function a(a,c,e){a=b([a],!0,!1);var d=[];aa(a,function(a,b){a.row===c&&b.css("top",e);d.push(b[0])});return d}function b(a,b,h){var m=da(),l=b?c("<div/>"):
m;a=e(a);d(a);var n=f(a);l[0].innerHTML=n;l=l.children();b&&m.append(l);g(a,l);aa(a,function(a,b){a.hsides=D(b,!0)});aa(a,function(a,b){b.width(Math.max(0,a.outerWidth-a.hsides))});aa(a,function(a,b){a.outerHeight=b.outerHeight(!0)});k(a,h);return a}function e(a){for(var b=[],c=0;c<a.length;c++){var e=a[c],d=e.start,f=y(e);d=fa(d,f);for(f=0;f<d.length;f++)d[f].event=e;b.push.apply(b,d)}return b}function d(a){for(var b=u("isRTL"),c=0;c<a.length;c++){var e=a[c],d=(b?e.isStart:e.isEnd)?N:E,f=((b?e.isEnd:
e.isStart)?ea:ca)(e.leftCol);d=d(e.rightCol);e.left=f;e.outerWidth=d-f}}function f(a){for(var b="",c=0;c<a.length;c++){var e=a[c],d="",f=u("isRTL"),g=e.event,h=g.url,k=["fc-event","fc-event-hori"];v(g)&&k.push("fc-event-draggable");e.isStart&&k.push("fc-event-start");e.isEnd&&k.push("fc-event-end");k=k.concat(g.className);g.source&&(k=k.concat(g.source.className||[]));var m=ha(g,u);d=h?d+("<a href='"+U(h)+"'"):d+"<div";d+=" class='"+k.join(" ")+"' style='position:absolute;left:"+e.left+"px;"+m+"'><div class='fc-event-inner'>";
if(g.allDay||e.isStart)d+="<span class='fc-event-time'>"+U(Y(g.start,g.end,g.allDay&&"month"!=q.name?u("timeFormat","allDay"):u("timeFormat")))+"</span>";d+="<span class='fc-event-title'>"+U(g.title||"")+"</span></div>";e.isEnd&&B(g)&&(d+="<div class='ui-resizable-handle ui-resizable-"+(f?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>");b+=d+("</"+(h?"a":"div")+">")}return b}function g(a,b){for(var e=0;e<a.length;e++){var d=a[e],f=d.event,g=b.eq(e);f=t("eventRender",f,f,g);!1===f?g.remove():(f&&!0!==f&&(f=
c(f).css({position:"absolute",left:d.left}),g.replaceWith(f),g=f),d.element=g)}}function k(a,b){var e=m(a),d=p(),f=[],g=O();if(b)for(b=0;b<d.length;b++){d[b].height(Math.max.apply(Math,e[b].map(function(a){return a.columnHeight})));for(var h=0;h<g;h++)if(c(d[b][h]).nextAll().remove(),0<e[b][h].hiddenSegmentsCount){var k=c("<a class='fc-show-more-link' href='#'>+"+e[b][h].hiddenSegmentsCount+" "+q.calendar.options.eventLimitText+"</a>");k.data("row",b);k.data("column",h);c(d[b][h]).after(k);k.mousedown(function(a){var b=
k.data("row"),c=k.data("column");b=q.calendar.getSegmentsByRowAndColumn(b,c);t("showMoreMousedown",a,a,b)})}}for(b=0;b<d.length;b++)f.push(d[b].position().top);aa(a,function(a,b){b.css("top",f[a.row]+a.top)})}function m(a){var b=q.calendar.options.eventLimit&&"number"!==typeof q.calendar.options.eventLimitt?q.calendar.options.eventLimit:!1;q.calendar.options.hiddenElements=[];var e=J(),d=O(),f=[];a=l(a);for(var g=0;g<e;g++){var h=a[g];f[g]=[];for(p=0;p<d;p++)f[g][p]={columnHeight:0,popupHeight:0,
segmentsCount:0,hiddenSegmentsCount:0};for(p=0;p<h.length;p++){var k=h[p];k.top=Math.max.apply(Math,f[g].map(function(a){return a.popupHeight}).slice(k.leftCol,k.rightCol+1));for(var m=k.top+k.outerHeight,n=k.leftCol;n<=k.rightCol;n++)f[g][n].popupHeight=m,f[g][n].segmentsCount++,b&&f[g][k.leftCol].segmentsCount>=b||(f[g][n].columnHeight=m);b&&f[g][k.leftCol].segmentsCount>=b&&(k.element.hide(),f[g][k.leftCol].hiddenSegmentsCount++,q.calendar.options.hiddenElements[g]||(q.calendar.options.hiddenElements[g]=
[]),q.calendar.options.hiddenElements[g][k.leftCol]||(q.calendar.options.hiddenElements[g][k.leftCol]=[]),q.calendar.options.hiddenElements[g][k.leftCol].push(k.element.get(0)))}}for(g=0;g<e;g++)for(var p=0;p<d;p++)b&&f[g][p].segmentsCount==b&&c(q.calendar.options.hiddenElements[g][p]).show();return f}function l(a){var b=J(),c=[],e;for(e=0;e<a.length;e++){var d=a[e];var f=d.row;d.element&&(c[f]?c[f].push(d):c[f]=[d])}for(f=0;f<b;f++){a=f;var g=c[f]||[];e=[];g.sort(cb);d=[];for(var h=0;h<g.length;h++){for(var k=
g[h],m=0;m<d.length;m++){a:{var l=d[m];for(var n=0;n<l.length;n++){var p=l[n];if(p.leftCol<=k.rightCol&&p.rightCol>=k.leftCol){l=!0;break a}}l=!1}if(!l)break}d[m]?d[m].push(k):d[m]=[k]}for(g=0;g<d.length;g++)e.push.apply(e,d[g]);c[a]=e}return c}function p(){var a,b=J(),c=[];for(a=0;a<b;a++)c[a]=T(a).find("div.fc-day-content > div");return c}function z(a,b){var c=da();aa(a,function(a,c,e){var d=a.event;d._id===b?w(d,c,a):c[0]._fci=e});K(c,a,w)}function w(a,b,c){v(a)&&q.draggableDayEvent(a,b,c);c.isEnd&&
B(a)&&q.resizableDayEvent(a,b,c);A(a,b)}var q=this;q.renderDayEvents=function(a,c){a=b(a,!1,!0);aa(a,function(a,b){Q(a.event,b)});z(a,c);aa(a,function(a,b){t("eventAfterRender",a.event,a.event,b)});return a};q.draggableDayEvent=function(a,b){var c=ia(),e;b.draggable({delay:50,opacity:u("dragOpacity"),revertDuration:u("dragRevertDuration"),start:function(d,f){t("eventDragStart",b,a,d,f);R(a,b);c.start(function(c,d,f,g){b.draggable("option","revert",!c||!f&&!g);ba();c?(d=ja(d),c=ja(c),e=r(c,d),V(h(n(a.start),
e),h(y(a),e))):e=0},d,"drag")},stop:function(d,f){c.stop();ba();t("eventDragStop",b,a,d,f);e?H(this,a,e,0,a.allDay,d,f):(b.css("filter",""),G(a,b))}})};q.resizableDayEvent=function(b,e,d){var f=u("isRTL")?"w":"e",g=e.find(".ui-resizable-"+f),k=!1;P(e);e.mousedown(function(a){a.preventDefault()}).click(function(a){k&&(a.preventDefault(),a.stopImmediatePropagation())});g.mousedown(function(g){if(1==g.which){k=!0;var m=ia();J();O();var l=e.css("top"),n,p,r=c.extend({},b),z=ta(sa(b.start));Z();c("body").css("cursor",
f+"-resize").one("mouseup",function(a){t("eventResizeStop",this,b,a);c("body").css("cursor","");m.stop();ba();n&&I(this,b,n,0,a);setTimeout(function(){k=!1},0)});t("eventResizeStart",this,b,g);m.start(function(e,g){e&&(g=ka(g),e=ka(e),e=Math.max(e,z),(n=qa(e)-qa(g))?(r.end=h(F(b),n,!0),e=p,p=a(r,d.row,l),p=c(p),p.find("*").css("cursor",f+"-resize"),e&&e.remove(),R(b)):p&&(G(b),p.remove(),p=null),ba(),V(b.start,h(y(b),n)))},g)}})};var u=q.opt,t=q.trigger,v=q.isEventDraggable,B=q.isEventResizable,F=
q.eventEnd,Q=q.reportEventElement,A=q.eventElementHandlers,G=q.showEvents,R=q.hideEvents,H=q.eventDrop,I=q.eventResize,J=q.getRowCnt,O=q.getColCnt,T=q.allDayRow,ca=q.colLeft,E=q.colRight,ea=q.colContentLeft,N=q.colContentRight,da=q.getDaySegmentContainer,Y=q.calendar.formatDates,V=q.renderDayOverlay,ba=q.clearOverlays,Z=q.clearSelection,ia=q.getHoverListener,fa=q.rangeToSegments,ja=q.cellToDate,ka=q.cellToCellOffset,qa=q.cellOffsetToDayOffset,sa=q.dateToDayOffset,ta=q.dayOffsetToCellOffset}function aa(a,
b){for(var c=0;c<a.length;c++){var e=a[c],d=e.element;d&&b(e,d,c)}}function cb(a,b){return b.rightCol-b.leftCol-(a.rightCol-a.leftCol)||b.event.allDay-a.event.allDay||a.event.start-b.event.start||(a.event.sortKey||0)-(b.event.sortKey||0)||(a.event.title||"").localeCompare(b.event.title)}function Ha(){function a(a){m&&(m=!1,k(),f("unselect",null,a))}function b(a,b,c,e){m=!0;f("select",null,a,b,c,e)}var e=this;e.select=function(c,e,d){a();e||(e=g(c,d));h(c,e,d);b(c,e,d)};e.unselect=a;e.reportSelection=
b;e.daySelectionMousedown=function(f){var g=e.cellToDate,m=e.getIsCellAllDay,l=e.getHoverListener(),n=e.reportDayClick;if(1==f.which&&d("selectable")){a(f);var p;l.start(function(a,b){k();a&&m(a)?(p=[g(b),g(a)].sort(R),h(p[0],p[1],!0)):p=null},f);c(document).one("mouseup",function(a){l.stop();p&&(+p[0]==+p[1]&&n(p[0],!0,a),b(p[0],p[1],!0,a))})}};var d=e.opt,f=e.trigger,g=e.defaultSelectionEnd,h=e.renderSelection,k=e.clearSelection,m=!1;d("selectable")&&d("unselectAuto")&&c(document).mousedown(function(b){var e=
d("unselectCancel");e&&c(b.target).closest(e).length||a(b)})}function Ka(){this.renderOverlay=function(e,d){var f=b.shift();f||(f=c("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));f[0].parentNode!=d[0]&&f.appendTo(d);a.push(f.css(e).show());return f};this.clearOverlays=function(){for(var c;c=a.shift();)b.push(c.hide().unbind())};var a=[],b=[]}function Xa(a){var b,c;this.build=function(){b=[];c=[];a(b,c)};this.cell=function(a,e){var d=b.length,f=c.length,g,h=-1,k=-1;for(g=0;g<
d;g++)if(e>=b[g][0]&&e<b[g][1]){h=g;break}for(g=0;g<f;g++)if(a>=c[g][0]&&a<c[g][1]){k=g;break}return 0<=h&&0<=k?{row:h,col:k}:null};this.rect=function(a,e,d,f,g){g=g.offset();return{top:b[a][0]-g.top,left:c[e][0]-g.left,width:c[f][1]-c[e][0],height:b[d][1]-b[a][0]}}}function Ya(a){function b(b){b.pageX===d&&(b.pageX=b.originalEvent.pageX,b.pageY=b.originalEvent.pageY);b=a.cell(b.pageX,b.pageY);if(!b!=!h||b&&(b.row!=h.row||b.col!=h.col))b?(g||(g=b),f(b,g,b.row-g.row,b.col-g.col)):f(b,g),h=b}var e,
f,g,h;this.start=function(d,k,m){f=d;g=h=null;a.build();b(k);e=m||"mousemove";c(document).bind(e,b)};this.stop=function(){c(document).unbind(e,b);return h}}function Za(a){var b=this,c={},e={},f={};b.left=function(b){return e[b]=e[b]===d?(c[b]=c[b]||a(b)).position().left:e[b]};b.right=function(e){return f[e]=f[e]===d?b.left(e)+(c[e]=c[e]||a(e)).width():f[e]};b.clear=function(){c={};e={};f={}}}var xa={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,
weekNumbers:!1,weekNumberCalculation:"iso",weekNumberShortTitle:"W",weekNumberTitle:"Week",allDayDefault:!0,ignoreTimezone:!0,dragBetweenAllDayAndSlots:!0,minHeightInSlots:1,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",
next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0,eventLimit:!1,eventLimitText:"more"},ib={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},ja=c.fullCalendar={version:"1.6.4"},wa=
ja.views={};c.fn.fullCalendar=function(a){if("string"==typeof a){var b=Array.prototype.slice.call(arguments,1),e;this.each(function(){var f=c.data(this,"fullCalendar");f&&c.isFunction(f[a])&&(f=f[a].apply(f,b),e===d&&(e=f),"destroy"==a&&c.removeData(this,"fullCalendar"))});return e!==d?e:this}a=a||{};var g=a.eventSources||[];delete a.eventSources;a.events&&(g.push(a.events),delete a.events);a=c.extend(!0,{},xa,a.isRTL||a.isRTL===d&&xa.isRTL?ib:{},a);this.each(function(b,e){b=c(e);e=new f(b,a,g);b.data("fullCalendar",
e);e.render()});return this};ja.sourceNormalizers=[];ja.sourceFetchers=[];var nb={dataType:"json",cache:!1},ob=1;ja.addDays=h;ja.cloneDate=n;ja.parseDate=u;ja.parseISO8601=q;ja.parseTime=t;ja.formatDate=B;ja.formatDates=H;ja.clearTime=m;var $a="sun mon tue wed thu fri sat".split(" "),pb=36E5,Ea={s:function(a){return a.getSeconds()},ss:function(a){return G(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return G(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return G(a.getHours()%
12||12)},H:function(a){return a.getHours()},HH:function(a){return G(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return G(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return G(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},
yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a,b){return 12>a.getHours()?b.amDesignator||"am":b.pmDesignator||"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a,b){return 12>a.getHours()?b.amDesignator||"AM":b.pmDesignator||"PM"},u:function(a){return B(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,b){return b.weekNumberCalculation(a)},W:function(a){var b=
new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-b)/864E5)/7)+1}};ja.dateFormatters=Ea;ja.applyAll=A;wa.month=function(a,b){var c=this;c.render=function(a,b){b&&(g(a,b),a.setDate(1));var l=e("firstDay");a=n(a,!0);a.setDate(1);b=g(n(a),1);var p=n(a);h(p,-((p.getDay()-l+7)%7));f(p);var z=n(b);h(z,(7-z.getDay()+l)%7);f(z,-1,!0);l=k();var q=Math.round(r(z,p)/7);"fixed"==e("weekMode")&&(h(z,7*(6-q)),q=6);c.title=m(a,
e("titleFormat"));c.start=a;c.end=b;c.visStart=p;c.visEnd=z;d(q,l,!0)};sa.call(c,a,b,"month");var e=c.opt,d=c.renderBasic,f=c.skipHiddenDays,k=c.getCellsPerWeek,m=b.formatDate};wa.basicWeek=function(a,b){var c=this;c.render=function(a,b){b&&h(a,7*b);a=h(n(a),-((a.getDay()-e("firstDay")+7)%7));b=h(n(a),7);var m=n(a);f(m);var l=n(b);f(l,-1,!0);var p=g();c.start=a;c.end=b;c.visStart=m;c.visEnd=l;c.title=k(m,h(n(l),-1),e("titleFormat"));d(1,p,!1)};sa.call(c,a,b,"basicWeek");var e=c.opt,d=c.renderBasic,
f=c.skipHiddenDays,g=c.getCellsPerWeek,k=b.formatDates};wa.listWeek=function(a,b){var c=this;c.render=function(a,b){b&&h(a,7*b);a=h(n(a),-((a.getDay()-e("firstDay")+7)%7));b=h(n(a),7);var m=n(a);f(m);var l=n(b);f(l,-1,!0);var p=g();c.start=a;c.end=b;c.visStart=m;c.visEnd=l;c.title=k(m,h(n(l),-1),e("titleFormat"));d(1,p,!1)};da.call(c,a,b,"listWeek");var e=c.opt,d=c.renderList,f=c.skipHiddenDays,g=c.getCellsPerWeek,k=b.formatDates};wa.basicDay=function(a,b){var c=this;c.render=function(a,b){b&&h(a,
b);f(a,0>b?-1:1);b=n(a,!0);var k=h(n(b),1);c.title=g(a,e("titleFormat"));c.start=c.visStart=b;c.end=c.visEnd=k;d(1,1,!1)};sa.call(c,a,b,"basicDay");var e=c.opt,d=c.renderBasic,f=c.skipHiddenDays,g=b.formatDate};c.extend(!0,xa,{weekMode:"fixed"});wa.agendaWeek=function(a,b){var c=this;c.render=function(a,b){b&&h(a,7*b);a=h(n(a),-((a.getDay()-e("firstDay")+7)%7));b=h(n(a),7);var m=n(a);f(m);var l=n(b);f(l,-1,!0);var p=g();c.title=k(m,h(n(l),-1),e("titleFormat"));c.start=a;c.end=b;c.visStart=m;c.visEnd=
l;d(p)};Aa.call(c,a,b,"agendaWeek");var e=c.opt,d=c.renderAgenda,f=c.skipHiddenDays,g=c.getCellsPerWeek,k=b.formatDates};wa.agendaWeekFive=function(a,b){var c=this;c.render=function(a,b){b&&h(a,7*b);a=h(n(a),-((a.getDay()-e("firstDay")+7)%7));b=h(n(a),7);var k=n(a);f(k);var m=n(b);f(m,-1,!0);c.title=g(k,h(n(m),-1),e("titleFormat"));c.start=a;c.end=b;c.visStart=k;c.visEnd=m;d(5)};Aa.call(c,a,b,"agendaWeekFive");var e=c.opt,d=c.renderAgenda,f=c.skipHiddenDays,g=b.formatDates};wa.agendaDay=function(a,
b){var c=this;c.render=function(a,b){b&&h(a,b);f(a,0>b?-1:1);b=n(a,!0);var k=h(n(b),1);c.title=g(a,e("titleFormat"));c.start=c.visStart=b;c.end=c.visEnd=k;d(1)};Aa.call(c,a,b,"agendaDay");var e=c.opt,d=c.renderAgenda,f=c.skipHiddenDays,g=b.formatDate};c.extend(!0,xa,{allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,minDefaultDayStartHour:0,maxDefaultDayStartHour:24,
slotEventOverlap:!0})})(jQuery);
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).SmartBanner=c()})(function(){return function a(d,f,b){function e(h,l){if(!f[h]){if(!d[h]){var k="function"==typeof require&&require;if(!l&&k)return k(h,!0);if(g)return g(h,!0);k=Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k;}k=f[h]=
{exports:{}};d[h][0].call(k.exports,function(a){var b=d[h][1][a];return e(b?b:a)},k,k.exports,a,d,f,b)}return f[h].exports}for(var g="function"==typeof require&&require,h=0;h<b.length;h++)e(b[h]);return e}({1:[function(d,f,b){var a=d("xtend/mutable"),e=d("component-query"),g=d("get-doc"),h=d("cookie-cutter"),k=d("ua-parser-js"),l=(navigator.language||navigator.userLanguage||navigator.browserLanguage).slice(-2)||"us",m=g&&g.documentElement,n={ios:{appMeta:"apple-itunes-app",iconRels:["apple-touch-icon-precomposed",
"apple-touch-icon"],getStoreLink:function(){return"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"+this.appId}},android:{appMeta:"google-play-app",iconRels:["android-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"http://play.google.com/store/apps/details?id="+this.appId}},windows:{appMeta:"msApplication-ID",iconRels:["windows-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"http://www.windowsphone.com/s?appid="+
this.appId}}};d=function(b){var e=k(navigator.userAgent);this.options=a({},{daysHidden:15,daysReminder:90,appStoreLanguage:l,button:"OPEN",store:{ios:"On the App Store",android:"In Google Play",windows:"In the Windows Store"},price:{ios:"FREE",android:"FREE",windows:"FREE"},theme:"",icon:"",force:""},b||{});this.options.force?this.type=this.options.force:"Windows Phone"===e.os.name||"Windows Mobile"===e.os.name?this.type="windows":"iOS"===e.os.name?this.type="ios":"Android"===e.os.name&&(this.type=
"android");b=!this.type;e="ios"===this.type&&"Mobile Safari"===e.browser.name&&6<=parseInt(e.os.version);var d=navigator.standalone,f=h.get("smartbanner-closed"),g=h.get("smartbanner-installed");b||e||d||f||g||(a(this,n[this.type]),this.parseAppId()&&(this.create(),this.show()))};d.prototype={constructor:d,create:function(){var a=this.getStoreLink(),b=this.options.price[this.type]+" - "+this.options.store[this.type];if(this.options.icon)var d=this.options.icon;else for(var f=0;f<this.iconRels.length;f++){var h=
e('link[rel="'+this.iconRels[f]+'"]');if(h){d=h.getAttribute("href");break}}var k=g.createElement("div");k.className="smartbanner smartbanner-"+(this.options.theme||this.type);k.innerHTML='<div class="smartbanner-container"><a href="javascript:void(0);" class="smartbanner-close">&times;</a><span class="smartbanner-icon" style="background-image: url('+d+')"></span><div class="smartbanner-info"><div class="smartbanner-title">'+this.options.title+"</div><div>"+this.options.author+"</div><span>"+b+'</span></div><a href="'+
a+'" class="smartbanner-button"><span class="smartbanner-button-text">'+this.options.button+"</span></a></div>";g.body?g.body.appendChild(k):g&&g.addEventListener("DOMContentLoaded",function(){g.body.appendChild(k)});e(".smartbanner-button",k).addEventListener("click",this.install.bind(this),!1);e(".smartbanner-close",k).addEventListener("click",this.close.bind(this),!1)},hide:function(){m.classList.remove("smartbanner-show")},show:function(){m.classList.add("smartbanner-show")},close:function(){this.hide();
h.set("smartbanner-closed","true",{path:"/",expires:new Date(Number(new Date)+864E5*this.options.daysHidden)})},install:function(){this.hide();h.set("smartbanner-installed","true",{path:"/",expires:new Date(Number(new Date)+864E5*this.options.daysReminder)})},parseAppId:function(){var a=e('meta[name="'+this.appMeta+'"]');if(a)return this.appId="windows"===this.type?a.getAttribute("content"):/app-id=([^\s,]+)/.exec(a.getAttribute("content"))[1]}};f.exports=d},{"component-query":2,"cookie-cutter":3,
"get-doc":4,"ua-parser-js":6,"xtend/mutable":7}],2:[function(d,f,b){function a(a,b){return b.querySelector(a)}b=f.exports=function(b,d){d=d||document;return a(b,d)};b.all=function(a,b){b=b||document;return b.querySelectorAll(a)};b.engine=function(e){if(!e.one)throw Error(".one callback required");if(!e.all)throw Error(".all callback required");a=e.one;b.all=e.all;return b}},{}],3:[function(d,f,b){b=f.exports=function(a){a||(a={});"string"===typeof a&&(a={cookie:a});void 0===a.cookie&&(a.cookie="");
return{get:function(b){for(var e=a.cookie.split(/;\s*/),d=0;d<e.length;d++){var f=e[d].split("=");if(unescape(f[0])===b)return unescape(f[1])}},set:function(b,d,f){f||(f={});b=escape(b)+"="+escape(d);f.expires&&(b+="; expires="+f.expires);f.path&&(b+="; path="+escape(f.path));return a.cookie=b}}};"undefined"!==typeof document&&(d=b(document),b.get=d.get,b.set=d.set)},{}],4:[function(d,f,b){d=d("has-dom");f.exports=d()?document:null},{"has-dom":5}],5:[function(d,f,b){f.exports=function(){return"undefined"!==
typeof window&&"undefined"!==typeof document&&"function"===typeof document.createElement}},{}],6:[function(d,f,b){(function(a,e){var d={extend:function(a,b){var e={},d;for(d in a)e[d]=b[d]&&0===b[d].length%2?b[d].concat(a[d]):a[d];return e},has:function(a,b){return"string"===typeof a?-1!==b.toLowerCase().indexOf(a.toLowerCase()):!1},lowerize:function(a){return a.toLowerCase()},major:function(a){return"string"===typeof a?a.split(".")[0]:e},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
"")}},h=function(){for(var a,b=0,d,f,g,h,k,m,l=arguments;b<l.length&&!k;){var n=l[b],p=l[b+1];if("undefined"===typeof a)for(g in a={},p)p.hasOwnProperty(g)&&(h=p[g],"object"===typeof h?a[h[0]]=e:a[h]=e);for(d=f=0;d<n.length&&!k;)if(k=n[d++].exec(this.getUA()))for(g=0;g<p.length;g++)m=k[++f],h=p[g],"object"===typeof h&&0<h.length?2==h.length?a[h[0]]="function"==typeof h[1]?h[1].call(this,m):h[1]:3==h.length?a[h[0]]="function"!==typeof h[1]||h[1].exec&&h[1].test?m?m.replace(h[1],h[2]):e:m?h[1].call(this,
m,h[2]):e:4==h.length&&(a[h[0]]=m?h[3].call(this,m.replace(h[1],h[2])):e):a[h]=m?m:e;b+=2}return a},k=function(a,b){for(var f in b)if("object"===typeof b[f]&&0<b[f].length)for(var g=0;g<b[f].length;g++){if(d.has(b[f][g],a))return"?"===f?e:f}else if(d.has(b[f],a))return"?"===f?e:f;return a},l={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2E3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,
/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/(OPiOS)[\/\s]+([\w\.]+)/i],[["name","Opera Mini"],"version"],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],
["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name","version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],["name","version"],[/(MicroMessenger)\/([\w\.]+)/i],[["name","WeChat"],"version"],[/(qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,
/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[["name","UCBrowser"],"version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],["version",["name","Android Browser"]],[/FBAV\/([\w\.]+);/i],["version",["name","Facebook"]],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],
["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",k,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,
/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],
[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[["vendor",d.trim],["model",d.trim],["type","smarttv"]],[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],["model",
"vendor",["type","tablet"]],[/applecoremedia\/[\w\.]+ \((ipad)/],["model",["vendor","Apple"],["type","tablet"]],[/(apple\s{0,1}tv)/i],[["model","Apple TV"],["vendor","Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],["vendor","model",["type","tablet"]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],
[["model",k,{"Fire Phone":["SD","KF"]}],["vendor","Amazon"],["type","mobile"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],["model","vendor",["type","mobile"]],[/\((ip[honed|\s\w*]+);/i],["model",["vendor","Apple"],["type","mobile"]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],["vendor","model",["type","mobile"]],[/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],
[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],["model",["vendor","Asus"],["type","tablet"]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[["vendor","Sony"],["model","Xperia Tablet"],["type","tablet"]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[["vendor","Sony"],["model","Xperia Phone"],["type","mobile"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],["vendor","model",["type","console"]],[/android.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],
["type","console"]],[/(playstation\s[34portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/(sprint\s(\w+))/i],[["vendor",k,{HTC:"APA",Sprint:"Sprint"}],["model",k,{"Evo Shift 4G":"7373KT"}],["type","mobile"]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],["vendor","model",["type","tablet"]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],["vendor",["model",/_/g," "],["type","mobile"]],[/(nexus\s9)/i],
["model",["vendor","HTC"],["type","tablet"]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],["model",["vendor","Motorola"],["type","mobile"]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],
[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[["vendor","Samsung"],"model",["type","tablet"]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[["vendor","Samsung"],"model",["type","mobile"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/sie-(\w+)*/i],["model",["vendor",
"Siemens"],["type","mobile"]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[["vendor","Nokia"],"model",["type","mobile"]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],["model",["vendor","Acer"],["type","tablet"]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[["vendor","LG"],"model",["type","tablet"]],[/(lg) netcast\.tv/i],["vendor","model",["type","smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],["model",["vendor","LG"],["type","mobile"]],[/android.+(ideatab[a-z0-9\-\s]+)/i],
["model",["vendor","Lenovo"],["type","tablet"]],[/linux;.+((jolla));/i],["vendor","model",["type","mobile"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/android.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\s(tablet)[;\/]/i,/\s(mobile)[;\/]/i],
[["type",d.lowerize],"vendor","model"]],engine:[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv:([\w\.]+).*(gecko)/i],["version","name"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],
["name",["version",k,l]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",k,l]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name",
"Firefox OS"],"version"],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],
["name","version"],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]]},n=function(b,e){if(!(this instanceof n))return(new n(b,e)).getResult();var f=
b||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),g=e?d.extend(m,e):m;this.getBrowser=function(){var a=h.apply(this,g.browser);a.major=d.major(a.version);return a};this.getCPU=function(){return h.apply(this,g.cpu)};this.getDevice=function(){return h.apply(this,g.device)};this.getEngine=function(){return h.apply(this,g.engine)};this.getOS=function(){return h.apply(this,g.os)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),
device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return f};this.setUA=function(a){f=a;return this};return this};n.VERSION="0.7.11";n.BROWSER={NAME:"name",MAJOR:"major",VERSION:"version"};n.CPU={ARCHITECTURE:"architecture"};n.DEVICE={MODEL:"model",VENDOR:"vendor",TYPE:"type",CONSOLE:"console",MOBILE:"mobile",SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",EMBEDDED:"embedded"};n.ENGINE={NAME:"name",VERSION:"version"};n.OS={NAME:"name",VERSION:"version"};"undefined"!==typeof b?
("undefined"!==typeof f&&f.exports&&(b=f.exports=n),b.UAParser=n):a.UAParser=n;var p=a.jQuery||a.Zepto;if("undefined"!==typeof p){var r=new n;p.ua=r.getResult();p.ua.get=function(){return r.getUA()};p.ua.set=function(a){r.setUA(a);a=r.getResult();for(var b in a)p.ua[b]=a[b]}}})("object"===typeof window?window:this)},{}],7:[function(d,f,b){f.exports=function(b){for(var e=1;e<arguments.length;e++){var d=arguments[e],f;for(f in d)a.call(d,f)&&(b[f]=d[f])}return b};var a=Object.prototype.hasOwnProperty},
{}]},{},[1])(1)});var __extends=this&&this.__extends||function(c,d){function f(){this.constructor=c}for(var b in d)d.hasOwnProperty(b)&&(c[b]=d[b]);c.prototype=null===d?Object.create(d):(f.prototype=d.prototype,new f)};
(function(c){var d=function(){function d(b){var a=this;this.settings=b;c.CommonFunctions.isMobileDevice()||window[d.clientInstanceName]||(window[d.clientInstanceName]=this,this.settings=b,this.$tooltipContent=$("#"+this.settings.TooltipContentId),this.tooltip=new c.CustomTooltip("customTooltip",{contentContainer:this.$tooltipContent,zIndex:this.settings.ZIndex},this.settings.CssClasses),this.$tooltipContent.show(),$(function(){$("body").on("mouseover",c.CommonFunctions.getDataSelector(a.settings.DataAttributes.Content),
function(b){b=$(b.currentTarget);if(!d.isTooltipOnTargetDisabled(b)){var c=b.attr(a.settings.DataAttributes.Content);if(0!==c.length){var e=b.attr(a.settings.DataAttributes.PositionSettings);e=e?JSON.parse(e):{My:"center bottom",At:"center top-10",Arrow:"top"};a.openTooltipFunction(b,c,e,a.settings.Timeout)}}});$("body").on("mouseleave",c.CommonFunctions.getDataSelector(a.settings.DataAttributes.Content),function(){a.closeTooltipFunction(a.settings.Timeout)})}))}d.prototype.closeTooltipFunction=function(b){var a=
this;clearTimeout(this.closeTimeout);clearTimeout(this.openTimeout);this.closeTimeout=setTimeout(function(){return a.tooltip.closeTooltip()},b)};d.prototype.openTooltipFunction=function(b,a,c,d){var e=this;clearTimeout(this.closeTimeout);clearTimeout(this.openTimeout);this.openTimeout=setTimeout(function(){e.tooltip.isTooltipOpened()||(e.$tooltipContent.empty(),e.$tooltipContent.html(a));e.tooltip.openTooltip(b,c)},d)};d.enableTooltipOnTarget=function(b,a){c.CommonFunctions.isMobileDevice()||(a?b.removeAttr(d.getInstance().settings.DataAttributes.Disabled):
d.isTooltipOnTargetDisabled(b)||b.attr(d.getInstance().settings.DataAttributes.Disabled,""))};d.closeTooltip=function(){c.CommonFunctions.isMobileDevice()||d.getInstance().tooltip.closeTooltip()};d.setTooltipContentOnTarget=function(b,a){c.CommonFunctions.isMobileDevice()||b.attr(d.getInstance().settings.DataAttributes.Content,a)};d.getInstance=function(){return window[d.clientInstanceName]};d.isTooltipOnTargetDisabled=function(b){return void 0!==b.attr(d.getInstance().settings.DataAttributes.Disabled)};
d.clientInstanceName="UnobtrusiveCustomTooltipManager";return d}();c.UnobtrusiveCustomTooltipManager=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(){this.datePickerDiv=$("#ui-datepicker-div");this.initDatePickerOpeningObserverForFocus();this.initKeyboardNavigation();this.initChangeMonthLinksClickWrapping()}d.createAdapterIfNeed=function(){d.currentAdapter||(d.currentAdapter=new d)};d.setCurrentDatePicker=function(b){this.createAdapterIfNeed();d.currentAdapter&&(d.currentAdapter.currentDatePicker=b)};d.prototype.initDatePickerOpeningObserverForFocus=function(){var b=this,a=new c.CallbackDebouncer(function(){b.isDebouncedFocusLockedOnTarget&&
b.datePickerDiv.is(":visible")&&(b.patchChangeMonthLinks(),(b.getDefaultDateLink()||b.getCloseButton()).focus());b.isDebouncedFocusLockedOnTarget=!1});(new MutationObserver(function(c){0<c.length&&(a.invokeCallback(void 0,100),b.isDebouncedFocusLockedOnTarget=!0)})).observe(this.datePickerDiv.get(0),{attributes:!0,attributeFilter:["style"]})};d.prototype.initKeyboardNavigation=function(){var b=this;this.datePickerDiv.on("keydown",function(a){var e=$(a.target);switch(a.which){case c.CommonConstants.keyCodes.tab:a.preventDefault();
(a.shiftKey?e.hasClass("ui-datepicker-close")?b.getCurrentButton()[0]||b.getPreviousMonthButton():e.hasClass("ui-datepicker-current")?b.getPreviousMonthButton():e.hasClass("ui-datepicker-prev")?b.getNextMonthButton():e.hasClass("ui-datepicker-next")?b.getDefaultDateLink()||b.getCloseButton():b.getCloseButton():e.hasClass("ui-datepicker-close")?b.getDefaultDateLink()||b.getNextMonthButton():e.hasClass("ui-datepicker-current")?b.getCloseButton():e.hasClass("ui-datepicker-prev")?b.getCurrentButton()[0]||
b.getCloseButton():e.hasClass("ui-datepicker-next")?b.getPreviousMonthButton():b.getNextMonthButton()).focus();break;case c.CommonConstants.keyCodes.escape:a.stopPropagation();b.currentDatePicker.closePicker();break;case c.CommonConstants.keyCodes.backspace:case c.CommonConstants.keyCodes.del:a.preventDefault();b.currentDatePicker.clearDateAndTime(!1);b.currentDatePicker.closePicker();break;case c.CommonConstants.keyCodes.arrowLeft:a.preventDefault();b.previousDay(e.closest("td"));break;case c.CommonConstants.keyCodes.arrowRight:a.preventDefault(),
b.nextDay(e.closest("td"))}})};d.prototype.initChangeMonthLinksClickWrapping=function(){var b=this,a=$(document);a.on("click",".ui-datepicker-next",function(){setTimeout(function(){b.patchChangeMonthLinks();b.getNextMonthButton().focus()})});a.on("click",".ui-datepicker-prev",function(){setTimeout(function(){b.patchChangeMonthLinks();b.getPreviousMonthButton().focus()})});a.on("click",".ui-datepicker-current",function(){setTimeout(function(){b.patchChangeMonthLinks();b.getCurrentButton().focus()})})};
d.prototype.patchChangeMonthLinks=function(){this.datePickerDiv.find(".ui-datepicker-next, .ui-datepicker-prev").prop("href","javascript:void(0);").attr("role","button")};d.prototype.nextDay=function(b){this.stepDay(b,function(a){return a.next()})||this.stepRow(b,function(a){return a.next()},function(a){return a.first()})||this.stepMonth(this.getNextMonthButton(),function(a){return a.first()})};d.prototype.previousDay=function(b){this.stepDay(b,function(a){return a.prev()})||this.stepRow(b,function(a){return a.prev()},
function(a){return a.last()})||this.stepMonth(this.getPreviousMonthButton(),function(a){return a.last()})};d.prototype.stepDay=function(b,a){do{b=a(b);var c=this.getDateLinks(b)}while(0<b.length&&0===c.length);c.focus();return 0<c.length};d.prototype.stepRow=function(b,a,c){b=b.closest("tr");do{b=a(b);var e=this.getDateLinks(b)}while(0<b.length&&0===e.length);c(e).focus();return 0<e.length};d.prototype.stepMonth=function(b,a){var c=this;b.click();setTimeout(function(){c.isDebouncedFocusLockedOnTarget=
!1;a(c.getDateLinks(c.datePickerDiv)).focus()})};d.prototype.getDefaultDateLink=function(){return this.datePickerDiv.find("a.ui-state-active")[0]||this.datePickerDiv.find(".ui-datepicker-today a")[0]||this.datePickerDiv.find("a.ui-state-default")[0]};d.prototype.getCloseButton=function(){return this.datePickerDiv.find(".ui-datepicker-close")};d.prototype.getNextMonthButton=function(){return this.datePickerDiv.find(".ui-datepicker-next")};d.prototype.getPreviousMonthButton=function(){return this.datePickerDiv.find(".ui-datepicker-prev")};
d.prototype.getCurrentButton=function(){return this.datePickerDiv.find(".ui-datepicker-current")};d.prototype.getDateLinks=function(b){return b.find("a.ui-state-default")};return d}();c.DatePickerAccessibilityAdapter=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(b,a){var e=this;this.clientInstanceName=b;this.settings=a;this.yOffset=0;this.maskId="alternativeChoiceMask";this.dialogMargin=this.triangleSize=10;window[b]=this;$(function(){e.$dialog=$("#"+e.settings.DialogId);e.$triangle=e.$dialog.find("."+e.settings.Css.Triangle);var a=e.$dialog.find("."+e.settings.Css.Column);e.$firstColumn=a.first();e.$secondColumn=a.eq(1);a=e.$dialog.find("."+e.settings.Css.MobileHeaderLink);e.$firstColumnTitleLink=a.first();e.$secondColumnTitleLink=
a.eq(1);e.$firstColumnTitleLink.click(function(){return e.toggleMobileColumnVisibility(!0)});e.$secondColumnTitleLink.click(function(){return e.toggleMobileColumnVisibility(!1)});e.$closeButton=e.$dialog.find("."+e.settings.Css.CloseButton);e.$mobileCancelButton=e.$dialog.find("."+e.settings.Css.CancelButton);e.$closeButton.click(function(){return e.closeDialog()});e.$mobileCancelButton.click(function(){return e.closeDialog()});if(c.CommonFunctions.isIe())e.$dialog.on("click","a",function(){return setTimeout(function(){return e.closeDialog()},
100)});e.$dialog.get(0).addEventListener("blur",function(a){a=c.CommonFunctions.isIe()?$(document.activeElement):$(a.relatedTarget);e.isOpened&&0===a.closest(e.$dialog).length&&e.closeDialog()},!0);var b=new c.CallbackDebouncer(function(){e.isOpened&&e.updatePositionAgainstTriggerElementOnResize()});$(window).resize(function(){b.invokeCallback(void 0,100)});a=new c.WindowResizeHandler;$(a).on(c.WindowResizeHandler.mediaChangedEventName,function(a,b){e.isOpened&&(e.toggleMobileDesktopView(b),e.updatePositionAgainstTriggerElementOnResize())})})}
Object.defineProperty(d.prototype,"triggerElementCenterX",{get:function(){return this.$triggerElement?this.$triggerElement.offset().left+this.$triggerElement.outerWidth()/2:0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"triggerElementCenterY",{get:function(){return this.$triggerElement?this.$triggerElement.offset().top+this.$triggerElement.outerHeight()/2:0},enumerable:!0,configurable:!0});d.prototype.isDialogOpened=function(){return this.isOpened};d.prototype.openDialog=function(b,
a){void 0===a&&(a=0);this.$triggerElement=b;this.openDialogWithOffsetAt(this.triggerElementCenterX,this.triggerElementCenterY,a)};d.prototype.openDialogAt=function(b,a){this.$triggerElement=null;this.openDialogWithOffsetAt(b,a,0)};d.prototype.closeDialog=function(){this.isOpened=!1;this.$dialog.toggle(!1);$("#"+this.maskId).remove();this.removeFocus();c.AlternativeChoiceManager.setOpenedDialogClientInstanceName("");return!1};d.prototype.getFirstColumn=function(){return this.$firstColumn};d.prototype.getSecondColumn=
function(){return this.$secondColumn};d.prototype.getMask=function(){return $("#"+this.maskId)};d.prototype.toggleMobileColumnVisibility=function(b){this.$firstColumnTitleLink.toggleClass(this.settings.Css.MobileHeaderLinkActive,b);this.$secondColumnTitleLink.toggleClass(this.settings.Css.MobileHeaderLinkActive,!b);this.$firstColumn.toggle(b);this.$secondColumn.toggle(!b)};d.prototype.updatePosition=function(b,a){if(this.isOpened&&b&&a){if(c.CommonFunctions.isPhoneScreenSize()){$("#"+this.maskId).remove();
var e=parseInt(this.$dialog.css("z-index"),10);$(c.CommonFunctions.formatString("<div id='{0}' class='{1}'></div>",this.maskId,this.settings.Css.Mask)).css({opacity:"0.5",filter:"alpha(opacity=0)","z-index":e-1}).appendTo("body")}var d=b-this.$dialog.outerWidth()/2;d+this.$dialog.outerWidth()>$(window).width()?d=$(window).width()-this.$dialog.outerWidth()-this.dialogMargin:0>d&&(d=this.dialogMargin);this.settings.OpenDirection===c.AlternativeChoiceOpenDirection.AboveTargetElement?(e=a-this.triangleSize+
this.yOffset-this.$dialog.outerHeight(),0>e?(e=a+this.triangleSize-this.yOffset,this.setOpenDirection(!1)):this.setOpenDirection(!0)):(e=a+this.triangleSize+this.yOffset,this.setOpenDirection(!1));this.$triangle.css({left:b-d-this.triangleSize});this.$dialog.css({top:e,left:d})}};d.prototype.updatePositionAgainstTriggerElementOnResize=function(){this.updatePosition(this.triggerElementCenterX,this.triggerElementCenterY)};d.prototype.openDialogWithOffsetAt=function(b,a,e){void 0===e&&(e=0);this.yOffset=
e;this.isOpened=!0;this.$dialog.toggle(!0);this.toggleMobileDesktopView(c.CommonFunctions.isPhoneScreenSize());b&&a&&this.updatePosition(b,a);b=$(window).scrollTop();this.$activeElement=this.$closeButton;this.setFocus();b>this.$closeButton.offset().top&&this.$closeButton.get(0).scrollIntoView();c.AlternativeChoiceManager.setOpenedDialogClientInstanceName(this.clientInstanceName)};d.prototype.setOpenDirection=function(b){this.$dialog.toggleClass(this.settings.Css.AboveTargetElement,b).toggleClass(this.settings.Css.BelowTargetElement,
!b)};d.prototype.toggleMobileDesktopView=function(b){b?this.toggleMobileColumnVisibility(!0):(this.$firstColumn.toggle(!0),this.$secondColumn.toggle(!0))};d.prototype.setFocus=function(){this.$activeElement&&(this.$lastActiveElement=$(document.activeElement),this.$activeElement.focus())};d.prototype.removeFocus=function(){this.$lastActiveElement&&this.$lastActiveElement.focus()};d.prototype.updateOffsetAccordingToContainerHeight=function(b){var a=this.$dialog.offset().top;b=b.height()-this.$dialog.height()-
a;0>b&&(this.yOffset=a+b,this.$dialog.css("top",this.yOffset))};return d}();c.AlternativeChoice=d})(CCL||(CCL={}));
(function(c){var d=function(){function c(){}c.setOpenedDialogClientInstanceName=function(b){b&&0!==b.length?(c.openedDialogClientInstanceName&&c.openedDialogClientInstanceName!==b&&c.closeOpenedDialog(),c.openedDialogClientInstanceName=b):c.openedDialogClientInstanceName=void 0};c.closeOpenedDialog=function(){var b=window[c.openedDialogClientInstanceName];b&&b.closeDialog()};return c}();c.AlternativeChoiceManager=d})(CCL||(CCL={}));
(function(c){var d;(function(b){var a=function(){function a(){}a.backspace=8;a.tab=9;a.enter=13;a.escape=27;a.space=32;a.end=35;a.home=36;a.arrowLeft=37;a.arrowUp=38;a.arrowRight=39;a.arrowDown=40;a.del=46;a.key0=48;a.key9=57;a.keyA=65;a.keyZ=90;a.numpad0=96;a.numpad9=105;a.decimalPoint=110;a.comma=188;a.period=190;a.f5=116;return a}();b.keyCodes=a;a=function(){function a(){}a.mobile=568;a.iPadPortraitMode=768;a.iPadLandscapeMode=1024;return a}();b.mediaScreenSizes=a;a=function(){function a(){}a.ok=
200;a.badRequest=400;a.unauthorized=401;a.forbidden=403;a.notFound=404;a.methodNotAllowed=405;a.internalServerError=500;return a}();b.httpStatusCodes=a;b.onePixelTransparentImageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCB1jYAAAAAIAAc/INeUAAAAASUVORK5CYII="})(d=c.CommonConstants||(c.CommonConstants={}));(function(b){function a(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var e=Array.prototype.slice.call(b,
0);return a.replace(q,function(a,b){return b in e?e[b]:a})}function c(){return/(iPod|iPhone|iPad)/i.test(navigator.userAgent)}function f(){return/(Android)/i.test(navigator.userAgent)}function h(){return-1!==navigator.userAgent.indexOf("Chrome")}function k(a,b){a.postMessage(JSON.stringify(b),"*")}function l(a,b){k(a,b);a!==a.top&&l(a.parent,b)}function m(){return b.checkScreenSize(d.mediaScreenSizes.mobile,!1)}function n(){return b.checkScreenSize(d.mediaScreenSizes.iPadPortraitMode+1,!0)}function p(a,
b){a=parseInt(a.css(b));return isNaN(a)?0:a}function r(a,b,c,e){void 0===e&&(e=null);$.alerts.okButton=c;jAlert(a,b,e)}function w(a,b,c){b=c+b.height();var e=a.offset().top;return e+a.height()<=b&&e>=c}function u(a){a=$.extend({},a,{contentType:"application/json",data:JSON.stringify(void 0!==a.data&&null!==a.data?a.data:{})});return $.ajax(a)}function v(a){a=$.extend({},a,{type:"POST"});return u(a)}var q=/\{(\d+)\}/g,t=/\r?\n/g,B=/<br\s*\/?>/g,H=/<p>\s*<\/p>/g,y=/\r/g,K=/\n/g,J=/\r\n/g;b.base64Encode=
function(a){var b="",c,e=0;a=a.replace(J,"\n");var d="";for(c=0;c<a.length;c++){var f=a.charCodeAt(c);128>f?d+=String.fromCharCode(f):(127<f&&2048>f?d+=String.fromCharCode(f>>6|192):(d+=String.fromCharCode(f>>12|224),d+=String.fromCharCode(f>>6&63|128)),d+=String.fromCharCode(f&63|128))}for(a=d;e<a.length;){var g=a.charCodeAt(e++);d=a.charCodeAt(e++);c=a.charCodeAt(e++);f=g>>2;g=(g&3)<<4|d>>4;var h=(d&15)<<2|c>>6;var k=c&63;isNaN(d)?h=k=64:isNaN(c)&&(k=64);b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)}return b};b.formatString=a;b.replaceLineBreaksWithBrTags=function(a){return a.replace(t,"<br />")};b.replaceLineBreaksWithPTags=function(a){return a?"<p>"+a.replace(t,"</p><p>").replace(H,"<p>&nbsp;</p>")+"</p>":a};b.replaceBrTagsWithPTags=function(a){return a?"<p>"+
a.replace(B,"</p><p>").replace(H,"<p>&nbsp;</p>")+"</p>":a};b.replaceBrTagsWithLineBreaks=function(a){return a.replace(B,"\n")};b.encodeLineBreaks=function(a){a=a.replace(y,"&#13;");return a=a.replace(K,"&#10;")};b.decodeLineBreaks=function(a){a=a.replace("&#13;","\r");return a=a.replace("&#10;","\n")};b.htmlEncode=function(a){return void 0===a?"":$("<div/>").text(a).html()};b.htmlDecode=function(a){return void 0===a?"":$("<div/>").html(a).text()};b.getIdsFromHidden=function(a,b){void 0===b&&(b=",");
if(!a.length)return[];a=a.val().split(b);a.splice($.inArray("",a),1);return a};b.addIdToHidden=function(a,b,c){void 0===c&&(c=",");0<a.length&&b&&(a=a.get(0),0<=a.value.split(c).indexOf(b)||(0<a.value.length&&-1===a.value.indexOf(c,a.value.length-c.length)&&(a.value+=c),a.value+=b+c))};b.removeIdFromHidden=function(a,b,c){void 0===c&&(c=",");if(0<a.length&&b&&(a=a.get(0))&&a.value){for(var e=a.value.split(c),d="",f=0;f<e.length;f++)b!==e[f]&&0<e[f].length&&(d+=e[f]+c);a.value=d}};b.setQueryStringParameter=
function(a,b,c){if(c="string"===typeof c?c:c.toString()){if(-1<a.indexOf(b+"="))return a.replace(new RegExp(b+"=[^&]*(&|$)"),b+"="+encodeURIComponent(c)+"&");-1===a.indexOf("?")&&(a+="?");return a.slice(0,a.indexOf("?")+1)+b+"="+encodeURIComponent(c)+"&"+a.slice(a.indexOf("?")+1)}return-1<a.indexOf(b+"=")?a.replace(new RegExp(b+"=[^&]*(&|$)"),""):a};b.isIosDevice=c;b.isIphone=function(){return/iPhone/i.test(navigator.userAgent)};b.isAndroidDevice=f;b.isMobileDevice=function(){return c()||f()};b.isMobileSizedDevice=
function(){return 768>window.innerWidth};b.isChrome=h;b.isIe=function(){return-1!==navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)};b.isEdge=function(){return-1!==navigator.userAgent.indexOf("Edge")};b.isFirefox=function(){return-1!==navigator.userAgent.indexOf("Firefox")};b.isSafari=function(){return!h()&&-1!==navigator.userAgent.indexOf("Safari")};b.getIosVersion=function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(void 0===a||null===a)return Number.NaN;
a=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)];return parseFloat(a.join("."))};b.iPhoneVersion=function(){var a=window.screen.height,b=window.screen.width;return 320===b&&480===a?"4":375===b&&667===a?"6":414===b&&736===a?"6+":320===b&&568===a?"5":480>=a?"2-3":"none"};b.makePostMessageCall=k;b.makePostMessageCallRecursivelyToTopmostFrame=l;b.makePostMessageCallWithData=function(a,b,c){a.postMessage(JSON.stringify($.extend(b,c)),"*")};b.attachPostMessageEventListener=function(a,b,c){a.on("message",
function(a){var e,d=a.originalEvent.source;try{a.originalEvent.data&&(e=JSON.parse(a.originalEvent.data))&&e.messageName&&("string"===typeof b?e.messageName===b:-1!=b.indexOf(e.messageName))&&c(e,d)}catch(O){}})};b.checkScreenSize=function(b,c){return window.matchMedia&&window.matchMedia(a("({0}-width: {1}px)",c?"min":"max",b)).matches};b.isPhoneScreenSize=m;b.isDesktopScreenSize=n;b.isTabletScreenSize=function(){return!n()&&!m()};b.executeScripts=function(a){if(null!==a){var b=[],c=a.match(/<script[^>]*?>/g);
if(null!==c){var e=0,d,f=a.toLowerCase();for(d=0;d<c.length;d++){var g=a.indexOf(c[d],e)+c[d].length;e=f.indexOf("\x3c/script>",g);g=a.substring(g,e);b.push(g)}for(d=0;d<b.length;d++)(new Function(b[d]))()}}};b.safeParseCssValue=p;b.calculateRightAndBottomOffset=function(a){var b=0,c=0;a.parentsUntil("html").each(function(a,e){a=$(e);b+=p(a,"padding-right")+p(a,"margin-right")+p(a,"border-right-width");c+=p(a,"padding-bottom")+p(a,"margin-bottom")+p(a,"border-bottom-width")});return{right:b,bottom:c}};
b.alertAjaxError=function(a,c,e){a.status>=d.httpStatusCodes.badRequest&&a.responseText&&alert(b.htmlDecode(a.responseText))};b.jAlertAjaxError=function(a,c,e,d){r(b.htmlDecode(a),b.htmlDecode(c),e,d?function(){window.location=window.location}:null)};b.jAjaxAlert=r;b.jAjaxConfirm=function(a,b,c,e,d){$.alerts.okButton=c;$.alerts.cancelButton=e;jConfirm(a,b,d)};b.jAjaxPrompt=function(a,b,c,e,d,f){$.alerts.okButton=e;$.alerts.cancelButton=d;jPrompt(a,c,b,f)};b.jAjaxMultiButtonConfirm=function(a,b,c,
e){jMultiButtonConfirm(a,b,c,e)};b.printAndCloseCurrentPage=function(){function a(){c--;setTimeout(function(){0===b||0===c?(window.print(),window.close()):a()},1E3)}var b=$("iframe").length,c=b+1;$("iframe").load(function(){b--});a()};b.safeParseJson=function(a){try{return JSON.parse(a)}catch(D){return!1}};b.isOnScreen=function(a,b,e,d){void 0===b&&(b=1);void 0===e&&(e=1);void 0===d&&(d=null);var f=a.outerHeight(),g=a.outerWidth();if(!g||!f)return!1;var h=d?$(d):c()?$(window.parent):$(window),k=h.scrollTop();
d=h.scrollLeft();var m=d+h.width();h=k+h.height();a=a.offset();var l=a.left+g,n=a.top+f;if(m<a.left||d>l||h<a.top||k>n)return!1;k=Math.min(1,(n-k)/f);f=Math.min(1,(h-a.top)/f);return Math.min(1,(l-d)/g)*Math.min(1,(m-a.left)/g)>=b&&k*f>=e};b.measureKpi=function(a,b,c,e){void 0===e&&(e=null);try{v({url:a,data:{measureSection:b,measurement:c,measureContext:e}})}catch(R){}};b.kpiAjax=function(a,c,e){c||(c={});if(e&&!c.crossDomain){var d=c.beforeSend;c.beforeSend=function(a,b){d&&d(a,b);$.each(e,function(b,
c){a.setRequestHeader("X-Kpi-"+b,c)})}}if(e&&c.crossDomain){var f="";$.each(e,function(a,c){f+=b.formatString("&{0}{1}={2}","X-Kpi-",a,c)});f=f.substring(1);a+=-1<a.indexOf("?")?"&":"?";a+=f}return $.ajax(a,c)};b.getDataSelector=function(a,c){5<a.length&&"data-"===a.substring(0,5)&&(a=a.substring(5));return null!=c?b.formatString("[{0}{1}={2}]","data-",a,c):b.formatString("[{0}{1}]","data-",a)};b.isElementFullyShownInContainer=function(a,b){return w(a,b,b.offset().top)};b.isElementFullyShownInWindow=
function(a){var b=$(window);return w(a,b,b.scrollTop())};b.preventInputIncorrectCharacters=function(a,b){-1!==$.inArray(a.which,b)||a.which===d.keyCodes.keyA&&(a.ctrlKey||a.metaKey)||a.which>=d.keyCodes.end&&a.which<=d.keyCodes.arrowDown||(a.shiftKey||a.which<d.keyCodes.key0||a.which>d.keyCodes.key9)&&(a.which<d.keyCodes.numpad0||a.which>d.keyCodes.numpad9)&&a.preventDefault()};b.safeAjax=u;b.safeAjaxPost=v;b.getAntiForgeryAjaxHeader=function(a){var b={};a&&a.headerName&&a.headerValue&&(b[a.headerName]=
a.headerValue);return b};b.preventSubmitOnEnter=function(a){a.on("keypress",function(a){return a.which===d.keyCodes.enter?(a.preventDefault(),!1):!0})};b.checkAndAddRole=function(a,b,c,e){b=$("#"+b);a&&b.length&&!b.is(":checked")&&e.push(c)};b.safeExecuteFunction=function(a){if(a)try{return a()}catch(D){}return!0}})(c.CommonFunctions||(c.CommonFunctions={}));(function(b){function a(a){return 621355968E9+1E4*a.getTime()}function c(a){return new Date(1970,0,1,0,0,0,(a-621355968E9)/1E4)}function d(a,
b){a=c(a+6E8*b);return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)}b.convertToTicks=a;b.convertTicksStringToDate=function(a,b){a=parseInt(a);return d(a,b)};b.convertTicksToDateExact=c;b.convertUtcTicksToLocalClientDate=function(a){return new Date((a-621355968E9)/1E4)};b.convertLocalProfileDateToEndOfDayUtcTicks=function(b,c){b=new Date(Date.UTC(b.getFullYear(),b.getMonth(),b.getDate(),23,59,59));return a(b)+-6E8*c};b.convertUtcTicksToLocalProfileDate=d;b.getItslNow=function(a){var b=
new Date,c=6E4*b.getTimezoneOffset();return new Date(b.getTime()+c+1E3*a)}})(c.DateFunctions||(c.DateFunctions={}));(function(b){var a=function(){function a(){}a.maskNavigationBar="maskNavigationBar";a.unmaskNavigationBar="unmaskNavigationBar";a.registerExtraNavBar="registerExtraNavBar";a.unregisterExtraNavBar="unregisterExtraNavBar";a.collapseContentAreaFrame="collapseContentAreaFrame";a.expandContentAreaFrame="expandContentAreaFrame";a.contentAreaFrameHasCollapsed="contentAreaFrameHasCollapsed";
a.contentAreaFrameHasExpanded="contentAreaFrameHasExpanded";a.collapseExtensionIframe="collapseExtensionIframe";a.expandExtensionIframe="expandExtensionIframe";a.collapseLeftMenu="collapseLeftMenu";a.extensionContentSaved="extensionContentSaved";a.unreadNotificationCounterChanged="unreadNotificationCounterChanged";a.extensionContentChanged="extensionContentChanged";a.extensionAssignmentAnswerOpened="extensionAssignmentAnswerOpened";a.textEditorInteraction="textEditorInteraction";a.extensionCancelActionPerformed=
"extensionCancelActionPerformed";a.extensionContentViewed="extensionContentViewed";a.extensionContentOpened="extensionContentOpened";a.nestedCssModalDialogExpanded="nestedCssModalDialogExpanded";a.nestedCssModalDialogCollapsed="nestedCssModalDialogCollapsed";a.studentWasAssessed="studentWasAssessed";a.submitIframe="submitIframe";a.closeCssModalDialog="closeCssModalDialog";a.editEmbededContent="editEmbededContent";a.extensionPrintContentFrame="extensionPrintContentFrame";a.getEmbeddedContentData="getEmbeddedContentData";
a.getEmbeddedContentSize="getEmbeddedContentSize";a.openPersonProfileCard="openPersonProfileCard";a.changePrintFeatureVisibility="changePrintFeatureVisibility";a.hideSettings="hideSettings";a.showSettings="showSettings";a.toggleBreadcrumbs="toggleBreadcrumbs";a.suspendUpdateBreadCrumbsAndNavigation="suspendUpdateBreadCrumbsAndNavigation";a.suspendExpandCollaplseContentAreaFrame="suspendExpandCollaplseContentAreaFrame";a.extensionSettingsChanged="extensionSettingsChanged";a.showBottomNavigationBar=
"showBottomNavigationBar";a.hideBottomNavigationBar="hideBottomNavigationBar";a.iframeAutoHeight="iframeAutoHeight";a.reloadParentIframe="reloadParentIframe";a.assignmentShowManageRubric="showManageRubricDialog";a.extensionOnboarding="extensionOnboarding";a.extensionReadyForTelemetryRequests="extensionReadyForTelemetryRequests";a.initialiseTelemetryCampaign="initialiseTelemetryCampaign";a.extensionTelemetryResultAnswer="extensionTelemetryResultAnswer";a.extensionTelemetryResultComment="extensionTelemetryResultComment";
a.unreadMessagesCounterChanged="unreadMessagesCounterChanged";a.enableFullScreen="enableFullScreen";a.disableFullScreen="disableFullScreen";a.extensionTitleUpdated="extensionTitleUpdated";a.elementAddedToYourCollection="elementAddedToYourCollection";a.fullScreenDialogOpening="fullScreenDialogOpening";a.fullScreenDialogCollapseTitle="fullScreenDialogCollapseTitle";a.backToPreviousPage="backToPreviousPage";a.mediaRecorderContentSaved="mediaRecorderContentSaved";a.mediaRecorderClosed="mediaRecorderClosed";
a.cloudFilePermissionError="cloudFilePermissionError";a.setIFrameTitle="setIFrameTitle";a.openGroupChat="openGroupChat";a.adminConsentTenant="adminConsentTenant";a.askExtensionParentFrameWhetherTopFrameExists="askExtensionParentFrameWhetherTopFrameExists";a.replyToExtensionFrameWhenTopFrameExists="replyToExtensionFrameWhenTopFrameExists";a.scrollToTop="scrollToTop";return a}();b.MessageNames=a;var c=function(){return function(a){this.messageName=a}}();b.GenericMessage=c;var d=function(a){function b(b,
c){a.call(this,b);this.extendedData=c}__extends(b,a);return b}(c);b.GenericMessageWithData=d;d=function(b){function c(c,e,d){void 0===e&&(e=!1);void 0===d&&(d="");b.call(this,a.textEditorInteraction);this.interactionType=c;this.closeDialogAfterPerformingOperation=e;this.editorInstanceId=d}__extends(c,b);return c}(c);b.TextEditorBaseInteractionMessage=d;var f=function(a){function b(b,c,e,d){void 0===e&&(e=!1);void 0===d&&(d="");a.call(this,b,e,d);this.extendedData=c}__extends(b,a);return b}(d);b.TextEditorBaseInteractionWithDataMessage=
f;var k=function(a){function b(){a.call(this,l.CloseDialog,!0)}__extends(b,a);return b}(d);b.TextEditorCloseDialogMessage=k;k=function(a){function b(b,c,e,d){void 0===c&&(c=!1);void 0===e&&(e="");void 0===d&&(d=!1);a.call(this,l.InsertHtml,c);this.htmlContent=b;this.editorInstanceId=e;this.isEmbeddedImage=d}__extends(b,a);return b}(d);b.TextEditorInsertHtmlMessage=k;k=function(a){function b(b,c,e){void 0===e&&(e=!1);a.call(this,l.InsertLinkToFile,e);this.linkUrl=b;this.linkName=c}__extends(b,a);return b}(d);
b.TextEditorInsertLinkToFileMessage=k;k=function(a){function b(b){a.call(this,l.UpdateItslPluginsList,!0);this.pluginId=b}__extends(b,a);return b}(d);b.TextEditorUpdateItslPluginListMessage=k;k=function(a){function b(b){a.call(this,l.SendImageSettingsToImagePropertiesDialog,b)}__extends(b,a);return b}(f);b.TextEditorSendImageSettingsMessage=k;f=function(a){function b(b){a.call(this,l.InsertImageToSlideshow,b,!0)}__extends(b,a);return b}(f);b.TextEditorInsertImageToSlideshow=f;d=function(a){function b(b,
c,e,d,f){void 0===f&&(f=!1);a.call(this,l.InsertTextLink,f);this.linkUrl=b;this.linkText=c;this.linkTarget=e;this.linkAdditionalAttributes=d}__extends(b,a);return b}(d);b.TextEditorInsertTextLink=d;c=function(a){function b(b){a.call(this,b)}__extends(b,a);return b}(c);b.EmbedContentBaseMessage=c;d=function(b){function c(){b.call(this,a.getEmbeddedContentData)}__extends(c,b);return c}(c);b.EmbeddedContentDataMessage=d;c=function(b){function c(){b.call(this,a.getEmbeddedContentSize)}__extends(c,b);
return c}(c);b.EmbeddedContentSizeMessage=c;(function(a){a[a.CloseDialog=0]="CloseDialog";a[a.InsertHtml=1]="InsertHtml";a[a.InsertLinkToFile=2]="InsertLinkToFile";a[a.UpdateItslPluginsList=3]="UpdateItslPluginsList";a[a.SendImageSettingsToImagePropertiesDialog=4]="SendImageSettingsToImagePropertiesDialog";a[a.InsertImageToSlideshow=5]="InsertImageToSlideshow";a[a.InsertTextLink=6]="InsertTextLink"})(b.TextEditorInteractionType||(b.TextEditorInteractionType={}));var l=b.TextEditorInteractionType})(c.CommonWindowMessages||
(c.CommonWindowMessages={}));(function(b){b.clickInInnerFrame="clickInInnerFrame";b.touchstartInInnerFrame="touchstartInInnerFrame"})(c.CommonTriggers||(c.CommonTriggers={}));var f=function(){function b(a){var b=this;this.trackFocusHandler=function(a){if(a.keyCode===$.ui.keyCode.TAB&&!a.isDefaultPrevented()){var c=b.$container.find(":tabbable"),e=c.filter(":first"),d=c.filter(":last");a.target!==d[0]&&a.target!==b.$container||a.shiftKey?a.target!==e[0]&&a.target!==b.$container||!a.shiftKey||(setTimeout(function(){d.trigger("focus")},
100),a.preventDefault()):(setTimeout(function(){e.trigger("focus")},100),a.preventDefault())}};this.$container=a}b.prototype.startTrackFocus=function(){this.isFocusTracked()||this.$container.keydown(this.trackFocusHandler)};b.prototype.stopTrackFocus=function(){this.isFocusTracked()&&this.$container.off("keydown",this.trackFocusHandler)};b.prototype.isFocusTracked=function(){var a=this;if(!this.$container.data("events"))return!1;var b=this.$container.data("events").keydown;if(!b)return!1;var c=!1;
$.each(b,function(b,e){if(e.handler===a.trackFocusHandler)return c=!0,!1});return c};return b}();c.FocusTracker=f;f=function(){return function(b,a,c){void 0===c&&(c="");this.text=b;this.css=a;this.customId=c}}();c.ConfirmButtonMetaData=f;f=function(){return function(){}}();c.MultiButtonConfirmResult=f})(CCL||(CCL={}));
(function(c){var d=function(){function d(b){var a=this;this.settings=b;this.autoResizeIframe=function(){var b=c.CommonFunctions.calculateRightAndBottomOffset(a.extensionIframe);b=IframeResizer.getFixedIframeDefaultWidthAndHeight($(window),a.extensionIframe,b);c.CommonFunctions.isMobileDevice()&&(b.height<d.iframeMobileMinSize&&(b.height=d.iframeMobileMinSize),a.settings.resizeIframeWidth&&b.width<d.iframeMobileMinSize&&(b.width=d.iframeMobileMinSize));a.settings.resizeIframeWidth&&a.extensionIframe.width(b.width);
a.extensionIframe.height(b.height);c.CommonFunctions.isIosDevice()&&(a.settings.resizeIframeWidth&&a.extensionContent.width(b.width),a.extensionContent.height(b.height))};this.extensionIframe=$("#"+this.settings.extensionIframeId);this.extensionContent=$("#"+this.settings.extensionContentId)}d.prototype.init=function(){var b=this;c.CommonFunctions.attachPostMessageEventListener($(window),c.CommonWindowMessages.MessageNames.iframeAutoHeight,function(a){if(!0===a.extendedData.enabled)$(window).on("resize",
b.autoResizeIframe);else $(window).off("resize",b.autoResizeIframe);c.CommonFunctions.isIosDevice()&&b.iosScrollFix(a.extendedData.enabled)})};d.prototype.iosScrollFix=function(b){this.autoResizeIframe();this.settings.iosScrollFixClass&&this.extensionContent.toggleClass(this.settings.iosScrollFixClass,b)};d.iframeMobileMinSize=200;return d}();c.AutoIframeResizer=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(b,a,c,d,f){this.initByCustumSettingsOrDefault(b,a,c,d,f)}d.prototype.initByCustumSettingsOrDefault=function(b,a,e,d,f){this.HorizontalPosition=b?b:c.ActionMenuHorizontalPosition.Left;this.OpeningMode=a?a:c.ActionMenuOpeningMode.Click;this.MenuZIndex=e?e:1;this.AutoCloseWindowResize=d?d:!0;this.OpenUnderBoundContainer=f?f:!1};return d}();c.ActionMenuSettings=d})(CCL||(CCL={}));
(function(c){var d=function(){function c(b){this.timeoutId=0;this.throttledCallback=b}c.prototype.invokeCallback=function(b,a){var c=this;0===this.timeoutId&&(this.timeoutId=setTimeout(function(){c.timeoutId=0;c.throttledCallback(b)},a))};return c}();c.CallbackThrottler=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(b){var a=this;this.$container=$("#"+b.Controls.Container);this.$selectionList=$("#"+b.Controls.SelectionList);this.$switcher=$("#"+b.Controls.Switcher);this.$values=$("#"+b.Controls.ValuesHidden);this.$checkboxes=this.$selectionList.find("input:checkbox");this.$selectAll=this.$selectionList.find("input:checkbox[value='"+d.commonSettings.SelectAllValue+"']");this.intitalValues=this.$values.val();this.autoPostback=b.AutoPostback;$(document).on(c.CommonFunctions.isIosDevice()?
"touchend":"click",function(b){a.showHideSelectionList(b)});this.$checkboxes.change(function(b){a.onCheckBoxChanged(b)});this.$container.on("keydown ",function(b){a.checkKeyPress(b)})}d.prototype.onCheckBoxChanged=function(b){var a=this;b=$(b.target);var c=b.prop("checked");b=b.val();b===d.commonSettings.SelectAllValue?(b=c,this.$checkboxes.each(function(b,e){$(e).val()!==d.commonSettings.SelectAllValue&&($(e).prop("checked",c),a.addRemoveSelectedValue($(e).val(),c))})):(this.addRemoveSelectedValue(b,
c),b=this.isAllChecked(),this.$selectAll.prop("checked",b));this.$container.toggleClass(d.commonSettings.CssClasses.FilterApplied,!b)};d.prototype.addRemoveSelectedValue=function(b,a){a?c.CommonFunctions.addIdToHidden(this.$values,b):c.CommonFunctions.removeIdFromHidden(this.$values,b)};d.prototype.ajustListPosition=function(){var b=this.$switcher.position().left;this.$selectionList.css({left:(0>b?0:b+5)+"px",top:this.$switcher.position().top+this.$switcher.outerHeight()+"px"})};d.prototype.showHideSelectionList=
function(b){b.target===this.$switcher[0]||1===this.$switcher.find(b.target).length?this.$selectionList.is(":visible")?this.hideSelectionList():this.showSelectionList():b.target!==this.$selectionList[0]&&1!==this.$selectionList.find(b.target).length&&this.$selectionList.is(":visible")&&this.hideSelectionList()};d.prototype.showSelectionList=function(){this.$switcher[0].setAttribute("aria-expanded","true");this.ajustListPosition();this.$selectionList.show();this.setInitialFocus()};d.prototype.hideSelectionList=
function(){this.$selectionList.hide();this.intitalValues!==this.$values.val()&&(this.autoPostback?this.raisePostback():(this.$container.trigger(d.commonSettings.SelectionChangedEventName,[this.getSelectedValues()]),this.intitalValues=this.$values.val()));this.$switcher[0].removeAttribute("aria-expanded");this.$switcher.focus()};d.prototype.isAllChecked=function(){var b=0===this.$selectAll.length||this.$selectAll.is(":checked");return this.$selectionList.find("input:checked").length===this.$checkboxes.length-
(b?0:1)};d.prototype.getSelectedValues=function(){return this.$values.val().split(d.commonSettings.Separator)};d.prototype.raisePostback=function(){alert("raisePostback is not defined (method should be overridden).")};d.prototype.setInitialFocus=function(){this.intitalValues?this.$selectionList.find(":checkbox:checked").first().focus():this.$selectionList.find(":checkbox").first().focus()};d.prototype.checkKeyPress=function(b){switch(b.which||b.keyCode){case c.CommonConstants.keyCodes.escape:case c.CommonConstants.keyCodes.del:case c.CommonConstants.keyCodes.backspace:b.preventDefault(),
this.hideSelectionList()}};return d}();c.CheckBoxSelector=d})(CCL||(CCL={}));
(function(c){var d=function(){function b(a){var b=this;this.settings=a;this.dialogResultDeferred=null;this.isInMobileMode=!1;this.maskNavigationBarMessage=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.maskNavigationBar);this.unmaskNavigationBarMessage=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.unmaskNavigationBar);this.expandContentIframeMessage=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.expandContentAreaFrame);this.shrinkContentIframeMessage=
new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.collapseContentAreaFrame);this.isDialogVisible=function(){return null!==b.dialogResultDeferred};this.enterMobileModeIfNeeded=function(){window.matchMedia("only screen and (max-width: 568px)").matches&&b.enterMobileMode()};this.leaveMobileModeIfNeeded=function(){b.isInMobileMode&&b.leaveMobileMode()};this.enterMobileMode=function(){c.CommonFunctions.makePostMessageCall(window.parent,b.expandContentIframeMessage);IframeResizer.reportSetIframeDefaultHeight();
b.isInMobileMode=!0};this.leaveMobileMode=function(){c.CommonFunctions.makePostMessageCall(window.parent,b.shrinkContentIframeMessage);IframeResizer.reportSetIframeDefaultHeight();b.isInMobileMode=!1};window[a.ConfirmDialogId]=this;this.$confirmDialog=$("#"+a.ConfirmDialogId);this.attachClickHandlers(a);this.cleanupEnvironmentOnUnload()}b.prototype.attachClickHandlers=function(a){var b=this;if(a.ConfirmButtonId)$("#"+a.ConfirmButtonId).on("click",function(){return b.onButtonClick(f.Confirm)});if(a.CancelButtonId)$("#"+
a.CancelButtonId).on("click",function(){return b.onButtonClick(f.Cancel)});if(a.AlternativeButtonId)$("#"+a.AlternativeButtonId).on("click",function(){return b.onButtonClick(f.Alternative)})};b.prototype.cleanupEnvironmentOnUnload=function(){var a=this;$(window).on("unload",function(){a.isDialogVisible()&&(c.CommonFunctions.makePostMessageCall(window.parent,a.unmaskNavigationBarMessage),a.leaveMobileModeIfNeeded())})};b.prototype.onButtonClick=function(a){if(!this.isDialogVisible())return!1;this.leaveMobileModeIfNeeded();
c.CommonFunctions.makePostMessageCall(window.parent,this.unmaskNavigationBarMessage);this.$confirmDialog.hide();this.markDialogAsClosed();this.dialogResultDeferred.resolve(a);this.dialogResultDeferred=null;return!1};b.prototype.show=function(){this.dialogResultDeferred=$.Deferred();c.CommonFunctions.makePostMessageCall(window.parent,this.maskNavigationBarMessage);this.enterMobileModeIfNeeded();this.markDialogAsOpen();this.$confirmDialog.show();return this.dialogResultDeferred.promise()};b.prototype.showMessage=
function(a,b){this.$confirmDialog.find(".ccl-confirm-dialog-header-and-content > h2")[0].innerHTML=a;this.$confirmDialog.find(".ccl-confirm-dialog-header-and-content > p")[0].innerHTML=b;return this.show()};b.prototype.markDialogAsClosed=function(){$("html").removeClass("ccl-confirm-dialog-open")};b.prototype.markDialogAsOpen=function(){$("html").addClass("ccl-confirm-dialog-open")};return b}();c.ConfirmDialog=d;(function(b){b[b.Confirm=0]="Confirm";b[b.Cancel=1]="Cancel";b[b.Alternative=2]="Alternative"})(c.ConfirmDialogResult||
(c.ConfirmDialogResult={}));var f=c.ConfirmDialogResult})(CCL||(CCL={}));
(function(c){var d=function(){function c(b,a,c){this.privateIsVisible=this.privateIsEnabled=!0;this.privateValue=b;this.privateId=a;"function"===typeof c&&(this.privateCallback=c)}Object.defineProperty(c.prototype,"Id",{get:function(){return this.privateId},set:function(b){this.privateId=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"Value",{get:function(){return this.privateValue},set:function(b){this.contentSpan&&this.contentSpan.html(b);this.privateValue=b},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"title",{get:function(){return this.privateValue},set:function(b){this.content&&this.content[0]&&(this.content[0].title=b);this.privateTitle=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"callback",{get:function(){return this.privateCallback},set:function(b){this.privateCallback=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isEnabled",{get:function(){return this.privateIsEnabled},set:function(b){this.content&&
(b?(this.content.removeAttr("disabled"),this.content.removeClass("ccl-actionmenu-dialog-content-item-disabled")):(this.content.attr("disabled","true"),this.content.addClass("ccl-actionmenu-dialog-content-item-disabled")));this.privateIsEnabled=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isVisible",{get:function(){return this.privateIsVisible},set:function(b){this.content&&(b?this.content.toggle(!0):this.content.toggle(!1));this.privateIsVisible=b},enumerable:!0,configurable:!0});
c.prototype.init=function(b){var a=this;if(this.isInit)throw Error("Menu item is already initialized");this.isInit=!0;this.itemClickCallback=b;this.contentSpan=this.createContentSpan();this.content=this.createContent(this.contentSpan);this.isVisible=this.privateIsVisible;this.isEnabled=this.privateIsEnabled;this.content.on("mouseup",function(b){a.isEnabled&&a.waitForClick&&0===b.button&&(a.waitForClick=!1,a.itemClickHandler(b))});this.content.on("mousedown",function(b){a.isEnabled&&0===b.button&&
(a.waitForClick=!0)});this.content.on("touchend",function(b){a.isEnabled&&a.waitForClick&&(a.waitForClick=!1,a.itemClickHandler(b))});this.content.on("touchstart",function(){a.isEnabled&&(a.waitForClick=!0)});this.content.on("touchmove",function(){a.waitForClick=!1});this.content.on("keyup",function(b){a.isEnabled&&a.waitForClick&&(a.waitForClick=!1,13===(b.keyCode?b.keyCode:b.which)&&a.itemClickHandler(b))});this.content.on("keydown",function(b){b=b.keyCode?b.keyCode:b.which;a.waitForClick=a.isEnabled&&
13===b?!0:!1})};c.prototype.itemClickHandler=function(b){b.preventDefault();this.itemClickCallback&&"function"===typeof this.itemClickCallback&&this.itemClickCallback(this,b);this.privateCallback&&"function"===typeof this.privateCallback&&this.privateCallback(this,b)};c.prototype.createContentSpan=function(){var b=$("<div/>",{"class":"ccl-actionmenu-dialog-content-item-block"});b.html(this.Value);return b};c.prototype.createContent=function(b){var a=$("<li/>",{"class":"ccl-actionmenu-dialog-content-item"});
a.append(b);a.attr("tabindex",0);this.privateTitle&&a[0]&&(a[0].title=this.privateTitle);return a};c.prototype.dispose=function(){this.content&&(this.content.off(),this.content.remove());this.content=this.contentSpan=this.waitForClick=this.privateIsVisible=this.privateIsEnabled=this.itemClickCallback=this.privateCallback=this.privateId=this.privateTitle=this.privateValue=this.isInit=void 0};return c}();c.ActionMenuItem=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(b,a,c,d){this.options=this.convertSettings(c);this.items=[];if(a)for(c=0;c<a.length;c++)this.items.push(this.checkMenuItem(a[c]));this.callback=d;"string"===typeof b?this.boundContainer=$("#"+b):b instanceof HTMLElement?this.boundContainer=$(b):b instanceof jQuery&&(this.boundContainer=b);if(!this.boundContainer||!this.boundContainer.get(0))throw Error("Object for binding action menu events not found");this.init()}Object.defineProperty(d.prototype,"isOpen",
{get:function(){return this.privateIsOpen},enumerable:!0,configurable:!0});d.prototype.on=function(b,a){this.eventHandlers||(this.eventHandlers=[]);this.eventHandlers[b]||(this.eventHandlers[b]=[]);this.eventHandlers[b].push(a)};d.prototype.off=function(b,a){if(b=this.eventHandlers&&this.eventHandlers[b])for(var c=0;c<b.length;c++)b[c]===a&&b.splice(c--,1)};d.prototype.addItems=function(b){for(var a=0;a<b.length;a++)this.addItem(b[a])};d.prototype.addItem=function(b){var a=this;b=this.checkMenuItem(b);
b.init(function(b,c){a.onItemClick(b,c)});this.itemsContainer.append(b.content);this.items.push(b);this.trigger("itemAdded",b)};d.prototype.addItemBefore=function(b,a){var c=this;b=this.checkMenuItem(b);b.init(function(a,b){c.onItemClick(a,b)});b.content.insertBefore(a.content);this.items.push(b);this.trigger("itemAdded",b)};d.prototype.addItemAfter=function(b,a){var c=this;b=this.checkMenuItem(b);b.init(function(a,b){c.onItemClick(a,b)});b.content.insertAfter(a.content);this.items.push(b);this.trigger("itemAdded",
b)};d.prototype.getItems=function(){return this.items};d.prototype.getItemById=function(b){for(var a=0;a<this.items.length;a++)if(this.items[a].Id===b)return this.items[a];return null};d.prototype.getItemByValue=function(b){for(var a=0;a<this.items.length;a++)if(this.items[a].Value===b)return this.items[a];return null};d.prototype.removeItem=function(b){if(b){var a=this.items.indexOf(b);0<=a&&this.items.splice(a,1);b.dispose()}};d.prototype.closeIfNotFocus=function(){0===this.menuContainer.find(":focus").length&&
this.close()};d.prototype.close=function(){this.privateIsOpen&&(this.privateIsOpen=!1,this.clearCloseTimeout(),this.menuContainer.toggle(!1),this.trigger("closed"))};d.prototype.dispose=function(){for(var b=0;b<this.items.length;b++)this.items[b]&&"function"===typeof this.items[b].dispose&&this.items[b].dispose();this.boundContainer&&this.boundContainer.off();this.menuContainer&&(this.menuContainer.off(),this.menuContainer.remove());this.boundContainer=this.menuContainer=this.itemsContainer=this.closeByFocusOutWithTimeoutId=
this.clickWaitTimerId=this.waitForClick=this.privateIsOpen=this.eventHandlers=this.options=this.items=void 0};d.prototype.convertSettings=function(b){return b?b.initByCustumSettingsOrDefault&&"function"===typeof b.initByCustumSettingsOrDefault?b:new c.ActionMenuSettings(b.HorizontalPosition,b.OpeningMode,b.MenuZIndex,b.AutoCloseWindowResize,b.OpenUnderBoundContainer):new c.ActionMenuSettings};d.prototype.checkMenuItem=function(b){return b.init&&"function"===typeof b.init?b:new c.ActionMenuItem(b.Value,
b.Id,b.callback)};d.prototype.onItemClick=function(b,a){this.callback&&"function"===typeof this.callback&&this.callback(b,a);this.trigger("itemClick",b,a);this.close()};d.prototype.init=function(){var b=this;this.itemsContainer=this.createItemsContainer();this.menuContainer=this.createMenuContainer();this.menuContainer.append(this.itemsContainer);if(0<this.items.length)for(var a=0;a<this.items.length;a++)this.items[a].init(function(a,c){b.onItemClick(a,c)}),this.itemsContainer.append(this.items[a].content);
this.options.OpenUnderBoundContainer?this.menuContainer.insertAfter(this.boundContainer):this.menuContainer.appendTo(document.body);this.registerBoundContainerClickHandler();this.menuContainer.on("focusin",function(){b.clearCloseTimeout()});this.menuContainer.on("focusout",function(){b.closeByFocusOutWithTimeoutId=setTimeout(function(){b.closeIfNotFocus()},300)});if(this.options.AutoCloseWindowResize)$(window).on("resize",function(){b.close()})};d.prototype.registerBoundContainerClickHandler=function(){var b=
this;this.boundContainer.on("remove",function(){b.dispose()});switch(this.options.OpeningMode){case c.ActionMenuOpeningMode.Click:this.boundContainer.on("mouseup",function(a){b.waitForClick&&0===a.button&&(b.waitForClick=!1,b.boundContainerClick(a))});this.boundContainer.on("touchend",function(a){b.waitForClick&&(b.waitForClick=!1,b.boundContainerClick(a))});this.boundContainer.on("mousedown",function(a){0===a.button&&(b.waitForClick=!0)});this.boundContainer.on("touchstart",function(){b.waitForClick=
!0});this.boundContainer.on("touchmove",function(){b.waitForClick=!1});this.boundContainer.on("keyup",function(a){b.waitForClick&&(b.waitForClick=!1,a.which===c.CommonConstants.keyCodes.enter&&b.boundContainerClick(a))});this.boundContainer.on("keydown",function(a){b.waitForClick=a.which===c.CommonConstants.keyCodes.enter?!0:!1});break;case c.ActionMenuOpeningMode.ContextMenu:this.boundContainer.on("mouseup",function(){b.clearWaitTimeout()}),this.boundContainer.on("touchend",function(){b.clearWaitTimeout()}),
this.boundContainer.on("touchmove",function(){b.clearWaitTimeout()}),this.boundContainer.on("mousedown",function(a){b.clickWaitTimerId||(b.clickWaitTimerId=setTimeout(function(){b.boundContainerClick(a)},1300))}),this.boundContainer.on("touchstart",function(a){b.clickWaitTimerId||(b.clickWaitTimerId=setTimeout(function(){b.boundContainerClick(a)},1300))}),this.boundContainer.on("contextmenu",function(a){b.clearWaitTimeout();b.boundContainerClick(a)})}};d.prototype.boundContainerClick=function(b){b.preventDefault();
this.clearWaitTimeout();this.open();this.setMenuPosition(b);this.menuContainer.focus()};d.prototype.setMenuPosition=function(b){var a={x:0,y:0};if(this.options.OpenUnderBoundContainer||"contextmenu"!==b.type&&"mouseup"!==b.type&&"mousedown"!==b.type){b=this.boundContainer.offset();b=this.options.OpenUnderBoundContainer?this.boundContainer.position():b;var e=this.boundContainer.outerHeight(!1);this.boundContainer.outerWidth(!1);a.x=b.left;this.options.HorizontalPosition===c.ActionMenuHorizontalPosition.Left&&
(a.x+=this.boundContainer.outerWidth(!1));a.y=b.top+e}else a=this.getClickPosition(b);b=this.menuContainer[0];e=b.offsetWidth;switch(this.options.HorizontalPosition){case c.ActionMenuHorizontalPosition.Right:b.style.left=a.x+"px";break;default:b.style.left=a.x-e+"px"}b.style.top=a.y+"px";this.checkMenuPosition(a)};d.prototype.getClickPosition=function(b){var a=0,c=0;if(b.pageX||b.pageY)a=b.pageX,c=b.pageY;else if(b.clientX||b.clientY)a=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,
c=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:a,y:c}};d.prototype.checkMenuPosition=function(b){var a=this.menuContainer.position(),e=this.menuContainer[0],d=this.menuContainer.offsetParent(),f=d.height();d=d.width();0===f&&(f=$(document).height());e.style.maxHeight=f+"px";var k=this.menuContainer[0],l=k.offsetWidth;k=k.offsetHeight;0>f-(a.top+k)&&(b=b.y-Math.abs(a.top-f+k),0>b&&(b=0),e.style.top=b+"px");switch(this.options.HorizontalPosition){case c.ActionMenuHorizontalPosition.Right:a.left+
l>d&&(a=d-l,0>a&&(a=0),e.style.left=a+"px");break;case c.ActionMenuHorizontalPosition.Left:0>a.left&&(e.style.left="0px")}};d.prototype.createItemsContainer=function(){return $("<ul/>",{"class":"ccl-actionmenu-dialog-content"})};d.prototype.createMenuContainer=function(){var b=$("<div/>",{"class":"ccl-actionmenu-dialog"});b.toggle(!1);b.css("z-index",0<=this.options.MenuZIndex?this.options.MenuZIndex:1);b.attr("tabindex",0);return b};d.prototype.open=function(){this.privateIsOpen&&this.close();this.privateIsOpen=
!0;this.clearCloseTimeout();this.menuContainer.toggle(!0);this.trigger("opened")};d.prototype.clearCloseTimeout=function(){this.closeByFocusOutWithTimeoutId&&(clearTimeout(this.closeByFocusOutWithTimeoutId),this.closeByFocusOutWithTimeoutId=void 0)};d.prototype.clearWaitTimeout=function(){this.clickWaitTimerId&&(clearTimeout(this.clickWaitTimerId),this.clickWaitTimerId=void 0)};d.prototype.trigger=function(b){for(var a=1;a<arguments.length;a++);if(this.eventHandlers&&this.eventHandlers[b]){a=this.eventHandlers[b];
for(var c=0;c<a.length;c++)a[c].apply(this,[].slice.call(arguments,1))}};return d}();c.ActionMenu=d})(CCL||(CCL={}));
(function(c){(function(c){c[c.Left=0]="Left";c[c.Right=1]="Right"})(c.ActionMenuHorizontalPosition||(c.ActionMenuHorizontalPosition={}));(function(c){c[c.Click=0]="Click";c[c.ContextMenu=1]="ContextMenu"})(c.ActionMenuOpeningMode||(c.ActionMenuOpeningMode={}));(function(c){c[c.BelowTargetElement=0]="BelowTargetElement";c[c.AboveTargetElement=1]="AboveTargetElement"})(c.AlternativeChoiceOpenDirection||(c.AlternativeChoiceOpenDirection={}));(function(c){c[c.Retry=0]="Retry";c[c.Dismiss=1]="Dismiss"})(c.ErrorFeedbackMode||
(c.ErrorFeedbackMode={}));(function(c){c[c.Information=0]="Information";c[c.Error=1]="Error";c[c.Warning=2]="Warning";c[c.Tip=3]="Tip";c[c.Functionality=4]="Functionality"})(c.FeedbackType||(c.FeedbackType={}));(function(c){c[c.None=0]="None";c[c.NewTab=1]="NewTab";c[c.NewPopup=2]="NewPopup";c[c.Modal=3]="Modal";c[c.SameFrame=4]="SameFrame";c[c.Custom=5]="Custom"})(c.PreviewType||(c.PreviewType={}));(function(c){c[c.Statically=0]="Statically";c[c.AjaxStatic=1]="AjaxStatic"})(c.OverlayLoadMode||(c.OverlayLoadMode=
{}))})(CCL||(CCL={}));
(function(c){var d=function(){return function(){this.aligns=f.None}}();c.BlinkingDotContext=d;(function(a){a[a.None=0]="None";a[a.WidthCenter=1]="WidthCenter"})(c.BlinkingDotHorizontalAlign||(c.BlinkingDotHorizontalAlign={}));var f=c.BlinkingDotHorizontalAlign,b=new d;b.containerCssClass="ccl-blinkingdot-container";b.dotCssClass="ccl-blinkingdot-dot";b.pulseCssClass="ccl-blinkingdot-pulse";var a=function(){function a(a){var c=this;this.visible=!0;this.context=this.extendContext(b,a);window[this.context.id]=
this;this.$pulseHolder=$("<div />");this.$pulseHolder.prop("id",this.context.id);this.$pulseHolder.addClass(this.context.containerCssClass);this.context.containerCssExtraClasses&&0<this.context.containerCssExtraClasses.length&&this.$pulseHolder.addClass(this.context.containerCssExtraClasses);this.context.containerCss&&this.$pulseHolder.css(this.context.containerCss);this.context.$targetControl.append(this.$pulseHolder);this.initAlign();this.context.isInitialStateHidden?this.hide():this.show();a=$("<div />");
a.addClass(this.context.dotCssClass);this.context.dotCssExtraClasses&&0<this.context.dotCssExtraClasses.length&&a.addClass(this.context.dotCssExtraClasses);this.context.dotCss&&a.css(this.context.dotCss);this.$pulseHolder.append(a);this.getSupportedTransform()?(a=this.getPulse(),this.$pulseHolder.append(a)):this.timerId=setInterval(this.addCircle.bind(this),1500);this.$pulseHolder.on("click",function(a){return c.onClickHandler(a)})}a.prototype.isVisible=function(){return this.visible};a.prototype.getSupportedTransform=
function(){var a=(document.body||document.documentElement).style;return void 0!==a.transition||void 0!==a.WebkitTransition||void 0!==a.MozTransition||void 0!==a.MsTransition};a.prototype.getPulse=function(){var a=$("<div />");a.addClass(this.context.pulseCssClass);this.context.pulseCssExtraClasses&&0<this.context.pulseCssExtraClasses.length&&a.addClass(this.context.pulseCssExtraClasses);this.context.pulseCss&&a.css(this.context.pulseCss);return a};a.prototype.show=function(){this.visible||(this.$pulseHolder.show(),
this.timerId||this.getSupportedTransform()||(this.timerId=setInterval(this.addCircle.bind(this),1500)),this.visible=!0)};a.prototype.hide=function(){this.visible&&(this.$pulseHolder.hide(),clearInterval(this.timerId),this.timerId=null,this.visible=!1)};a.prototype.onClickHandler=function(a){this.context.onClickAction&&(this.context.onClickAction(a),a.stopPropagation())};a.prototype.addCircle=function(){var a=this.getPulse(),b=this.$pulseHolder.outerHeight(),c=this.$pulseHolder.offset(),e=1.1*b;a.css({left:b/
2-2+c.left+"px",top:b/2-2+c.top+"px",width:"0px",height:"0px","margin-top":"0px","margin-left":"0px",opacity:1,position:"fixed"});a.animate({width:e+"px",height:e+"px","margin-top":-e/2+"px","margin-left":-e/2+"px",opacity:"0"},3E3,"easeOutCirc");this.$pulseHolder.append(a);setTimeout(function(){a.remove()},2800)};a.prototype.initAlign=function(){this.context.aligns&&this.context.aligns==f.WidthCenter&&this.moveToWidthCenter()};a.prototype.moveToWidthCenter=function(){var a=Math.round(this.context.$targetControl.width()/
2),b=Math.round(this.$pulseHolder.outerWidth()/2),c=parseInt(this.context.$targetControl.css("margin-left"));isNaN(c)&&(c=0);this.$pulseHolder.css("margin-left",a-b+c)};a.prototype.extendContext=function(a,b){var c=new d;c=$.extend(c,a);a=Object.keys(b);for(var e in a){var f=a[e];b[f]&&(c[f]=b[f])}return c};return a}();c.BlinkingDot=a})(CCL||(CCL={}));
(function(c){var d=function(){function c(){}c.Clearfix="h-clf";c.ErrorFeedback={Container:"ccl-error-feedback",Message:"ccl-error-feedback-message",RetryButton:"ccl-error-feedback-retry",SecondButton:"ccl-error-feedback-secondary",CancelButton:"ccl-error-feedback-cancel",IsVisible:"ccl-error-feedback-is-visible",CloseButton:"ccl-error-feedback-close",DismissButton:"ccl-error-feedback-dismiss"};c.InformationFeedback={Container:"ccl-info-feedback",Message:"ccl-info-feedback-message",CloseButton:"ccl-info-feedback-closebutton",
ExtraButton:"ccl-info-feedback-extrabutton",DismissButton:"ccl-info-feedback-dismiss",IsVisible:"ccl-info-feedback-is-visible",ButtonContainer:"ccl-info-feedback-buttons"};c.FullScreenViewer={Opened:"ccl-full-screen-viewer-opened",ContentElement:"ccl-full-screen-viewer-content-element",HeaderOnly:"ccl-full-screen-viewer--header-only"};c.FullScreenDialog={Opened:"ccl-full-screen-dialog-opened",Header:"ccl-fullscreen-header"};c.CssModal={Content:"ccl-cssmodal-modal-content"};c.Grid={FocusedRow:"focused-row"};
c.ModernCheckbox={Checkbox:"ccl-checkbox",SmallCheckbox:"ccl-checkbox-small",Input:"ccl-checkbox-input",CustomCheck:"ccl-checkbox-custom-check",CustomCheckWrapper:"ccl-checkbox-custom-check-wrapper",Label:"ccl-checkbox-label",TooltipContent:"ccl-checkbox-tooltip"};return c}();c.CommonCssClasses=d})(CCL||(CCL={}));
(function(c){var d=function(){function b(){}b.ShowFeedbackMessage="ShowErrorFeedbackMessage";b.HideFeedbackMessage="HideErrorFeedbackMessage";return b}();c.ErrorFeedbackEvent=d;var f=function(){function b(a,b){var e=this;this.settings=b;this.mode=b.Mode;this.$feedback=a;this.$retryButton=this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.RetryButton);this.$secondButton=this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.SecondButton);this.$cancelButton=this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.CancelButton);
this.$closeButton=this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.CloseButton);this.$dismissButton=this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.DismissButton);a=$("#"+b.MainContainerClientId);a.on(d.ShowFeedbackMessage,function(a,b,d,f,g,p){a.stopPropagation();e.showFeedbackMessage(b,d,f,g,p);c.FeedbackAccessibility.focusOnFeedbackAction(e.$feedback)});a.on(d.HideFeedbackMessage,function(a,b){a.stopPropagation();e.hideFeedbackMessage(b)});this.$cancelButton.on("click",function(){return e.hideFeedbackMessage(!0)});
c.FeedbackAccessibility.makeAccessible(this.$feedback)}b.showFeedback=function(a,b,c,f){void 0===f&&(f=!1);a.trigger(d.ShowFeedbackMessage,[b,c,null,null,f])};b.showFeedbackWithSecondButton=function(a,b,c,f,k,l){void 0===l&&(l=!1);a.trigger(d.ShowFeedbackMessage,[b,c,f,k,l])};b.hideFeedback=function(a,b){void 0===b&&(b=!0);a.trigger(d.HideFeedbackMessage,b)};b.prototype.showFeedbackMessage=function(a,b,d,f,k){var e=this;this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.Message).html(a);this.$secondButton.hide();
this.$retryButton.hide();this.mode===c.ErrorFeedbackMode.Retry?(this.$retryButton.off("click"),b&&(this.$retryButton.on("click",b),this.$retryButton.show())):this.mode===c.ErrorFeedbackMode.Dismiss&&(c.CommonFunctions.isMobileDevice()?(this.$dismissButton.on("click",function(){return e.hideDismissFeedback(b,!0)}),this.$dismissButton.show()):(this.$closeButton.on("click",function(){return e.hideDismissFeedback(b,!0)}),this.$closeButton.show()));this.$secondButton.off("click");d&&f&&(this.$secondButton.text(d),
this.$secondButton.on("click",f),this.$secondButton.show());this.$cancelButton.toggle(k);$("body").addClass(c.CommonCssClasses.ErrorFeedback.IsVisible);this.$feedback.stop(!0,!0).show()};b.prototype.hideDismissFeedback=function(a,b){void 0===b&&(b=!0);this.hideFeedbackMessage(b).then(function(){a&&a()})};b.prototype.hideFeedbackMessage=function(a){void 0===a&&(a=!0);var b=$.Deferred();$("body").removeClass(c.CommonCssClasses.ErrorFeedback.IsVisible);a?this.$feedback.stop(!0,!0).fadeOut(500,function(){b.resolve()}):
(this.$feedback.hide(),b.resolve());return b.promise()};return b}();c.ErrorFeedback=f})(CCL||(CCL={}));
(function(c){var d=function(){function c(){}c.prototype.enable=function(){-1===c.instances.indexOf(this)&&c.instances.push(this)};c.prototype.disable=function(){var b=c.instances.indexOf(this);-1<b&&c.instances.splice(b,1)};c.allowDialogWithId=function(b){c.isAllowed(b)||c.allowDialogIds.push(b)};c.isDialogAllowed=function(b){var a={isAllowed:!0,deniedByInstances:[]};c.isAllowed(b)||c.instances.forEach(function(b){a.isAllowed=!1;a.deniedByInstances.push(b);!a.confirmationMessage&&b.confirmationMessage&&
0<b.confirmationMessage.length&&(a.confirmationMessage=b.confirmationMessage)});return a};c.isAllowed=function(b){return-1<c.allowDialogIds.indexOf(b)};c.instances=[];c.allowDialogIds=[];return c}();c.DialogWhiteList=d})(CCL||(CCL={}));
(function(c){var d=function(){return function(c){var b=this;this.readMetadata=function(a){a=$(a).parents("["+b.options.metadataAttrName+"]").first().attr(b.options.metadataAttrName);return JSON.parse(a)};this.readExtendedMetadata=function(a){return $(a).parents("["+b.options.metadataAttrName+"]").first().data(b.options.extendedMetadataAttrName)};this.options=c;this.options.legacyFileList.settings=this.options.settings;this.options.legacyFileList.controls={title:""};var a=c.container.find("["+c.metadataAttrName+
"]");a.each(function(a,b){a=JSON.parse($(b).attr(c.metadataAttrName));a=c.extendedMetadatas[a.id];$(b).data(c.extendedMetadataAttrName,a)});c.callbacks&&c.callbacks.init&&c.callbacks.init(a);a.find(c.fileItemSelector).click(function(a){var e=b.readMetadata(a.currentTarget);a=b.readExtendedMetadata(a.currentTarget);c.callbacks&&c.callbacks.itemClick&&c.callbacks.itemClick(e,a,b.options.legacyFileList);return!1});a.find(c.downloadSelector).click(function(a){if(a.currentTarget instanceof HTMLAnchorElement&&
a.currentTarget.href)return!0;if(b.options.callbacks&&b.options.callbacks.downloadClick){var c=b.readMetadata(a.currentTarget);a=b.readExtendedMetadata(a.currentTarget);return b.options.callbacks.downloadClick(c,a,b.options.legacyFileList)}return!0})}}();c.FileListMvc=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(b){var a=this;this.onEscape=function(b){b.which===c.CommonConstants.keyCodes.escape&&a.closeDialog()};this.closeTooltip=function(b){return setTimeout(function(){return a.toolTip.closeTooltip()},b)};this.openTooltip=function(b,c,d){setTimeout(function(){a.toolTip.isTooltipOpened()||a.$tooltipContentLabel.html(c);a.toolTip.openTooltip(b,a.tooltipPositionSettings)},d)};this.settings=b;window[d.clientInstanceName]=this;$(function(){a.$body=$("body");a.$bodyWrapper=
$("."+a.settings.Css.BodyWrapper);a.$dialog=$("#"+a.settings.Controls.Dialog);a.$closeButton=a.$dialog.find("."+a.settings.Css.CloseButton);a.$errorLabel=$("#"+a.settings.Controls.ErrorLabel);a.$tooltipContentLabel=$("#"+a.settings.Controls.TooltipContentLabel);a.$contentContainer=$("#"+a.settings.Controls.ContentContainer);a.$loadingIndicator=$("#"+a.settings.Controls.LoadingIndicator);a.focusTracker=new c.FocusTracker(a.$dialog);a.$closeButton.click(function(){a.closeDialog()});a.initTooltip();
a.settings.Terms.CloseTooltip&&a.toggleToolTip(a.$closeButton,a.settings.Terms.CloseTooltip,!0);c.CommonFunctions.attachPostMessageEventListener($(window),c.CommonWindowMessages.MessageNames.fullScreenDialogCollapseTitle,function(){a.$dialog.toggleClass(a.settings.Css.NoHeader)}.bind(a));a.notifyPlayPlanDialog()})}d.getInstance=function(){return window[d.clientInstanceName]};d.openDialog=function(b){d.getInstance().openDialog(b)};d.prototype.isOpened=function(){return this.$dialog.is(":visible")};
d.prototype.closeDialogWithoutConfirm=function(){$(this).trigger(d.onCloseEvent);this.$contentContainer.empty();this.toggleDialog(!1)};d.prototype.closeDialog=function(){var b=this,a=$.Deferred(),c=new CustomEvent(d.onCloseCancelableEvent,{bubbles:!0,cancelable:!0,detail:a});this.$dialog.get(0).dispatchEvent(c)?this.closeDialogWithoutConfirm():a.done(function(){b.closeDialogWithoutConfirm()})};d.prototype.openDialog=function(b){b=this.updateContent(b);this.toggleDialog(!0);return b};d.prototype.openDialogWithContent=
function(b){this.updateContentWithHtmlString(b);this.toggleDialog(!0)};d.prototype.updateContent=function(b){var a=this,c=$.Deferred();if(!b)return console.error("Url to load not set"),c.reject("Url to load not set"),c.promise();this.$contentContainer.empty();this.$loadingIndicator.show();$.get(b).done(function(b){a.$contentContainer.html(b);c.resolve(a)}).fail(function(a){c.reject(a)}).always(function(){a.$loadingIndicator.hide()});return c.promise()};d.prototype.updateContentWithHtmlString=function(b){this.$contentContainer.empty();
this.$contentContainer.html(b)};d.prototype.notifyPlayPlanDialog=function(){var b=window.parent;b&&window!==b&&c.CommonFunctions.makePostMessageCall(b,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.fullScreenDialogOpening))};d.prototype.toggleDialog=function(b){var a=this;this.toggleEscapeHandler(b);this.adjustDialogPositionOnIosDevice(b);this.$body.toggleClass(c.CommonCssClasses.FullScreenDialog.Opened,b);this.$dialog.toggle(b);b?(this.expandContentAreaFrame(),this.$startLink=
$(":focus"),this.$closeButton.focus(),this.focusTracker.startTrackFocus(),$(document).on("cssmodal:show",function(){return a.toggleEscapeHandler(!1)}).on("cssmodal:hide",function(){return a.toggleEscapeHandler(!0)})):(this.collapseContentAreaFrame(),this.focusTracker.stopTrackFocus(),this.$startLink.focus())};d.prototype.expandContentAreaFrame=function(){this.settings.IsOpenedInExtension?c.CommonFunctions.makePostMessageCall(window,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.enableFullScreen)):
(this.suspendUpdateBreadCrumbsAndNavigation(!0),c.CommonFunctions.makePostMessageCall(window.top,{messageName:c.CommonWindowMessages.MessageNames.expandContentAreaFrame}),this.suspendExpandCollaplseContentAreaFrame(!0))};d.prototype.collapseContentAreaFrame=function(){this.settings.IsOpenedInExtension?c.CommonFunctions.makePostMessageCall(window,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.disableFullScreen)):(this.suspendUpdateBreadCrumbsAndNavigation(!1),this.suspendExpandCollaplseContentAreaFrame(!1),
c.CommonFunctions.makePostMessageCall(window.top,{messageName:c.CommonWindowMessages.MessageNames.collapseContentAreaFrame}))};d.prototype.suspendUpdateBreadCrumbsAndNavigation=function(b){c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessageWithData(c.CommonWindowMessages.MessageNames.suspendUpdateBreadCrumbsAndNavigation,{suspend:b}))};d.prototype.suspendExpandCollaplseContentAreaFrame=function(b){c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessageWithData(c.CommonWindowMessages.MessageNames.suspendExpandCollaplseContentAreaFrame,
{suspend:b}))};d.prototype.toggleEscapeHandler=function(b){if(b)this.$body.on("keyup",this.onEscape);else this.$body.off("keyup",this.onEscape)};d.prototype.adjustDialogPositionOnIosDevice=function(b){if(c.CommonFunctions.isIosDevice()&&!this.settings.IsOpenedInExtension){var a=$(window.top).height()-this.$closeButton.height();this.$bodyWrapper.css("overflow",b?"hidden":"");this.$bodyWrapper.height(b?a.toString():"auto")}};d.prototype.showErrorMessage=function(b){this.$errorLabel.text(b);this.$errorLabel.show()};
d.prototype.initTooltip=function(){this.tooltipPositionSettings={My:"right+23 top",At:"center bottom+10",Arrow:"bottom"};this.$toolTipContainer=this.$dialog.find("."+this.settings.Css.ToolTipContentConatiner);this.toolTip=new c.CustomTooltip("fullScreenDialogToolTip",{contentContainer:this.$toolTipContainer,zIndex:10},this.settings.Css.CustomTooltipCssClasses);this.$toolTipContainer.show()};d.prototype.toggleToolTip=function(b,a,e){var d=this;if(!c.CommonFunctions.isMobileDevice())if(e)b.on("mouseover",
function(){return d.openTooltip(b,a,0)}).on("mouseleave",function(){return d.closeTooltip(0)});else this.closeTooltip(0),b.off("mouseover mouseleave")};d.clientInstanceName="fullScreenDialogClientInstanceName";d.onCloseEvent="fullScreenDialog:close";d.onCloseCancelableEvent="fullScreenDialog:cancelableClose";return d}();c.FullScreenDialog=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(){var b=this;this.contentDimensions={width:0,height:0};this.reportContentDimensionsIfChanged();var a=new c.CallbackDebouncer(function(){return b.reportContentDimensions(b.calculateDocumentDimensions())});$(window).on("resize",function(){a.invokeCallback(void 0,250)});$(document).on("cssmodal:show",function(){b.reportContentDimensions(d.defaultDimensions)})}d.prototype.calculateDocumentDimensions=function(){var b=$(document.body),a=$(document.documentElement),
c=d.calculateSelectorsDimensions();return{width:Math.max(b.outerWidth(),a.outerWidth(),c.width,$(document).width()),height:Math.max(b.outerHeight(),a.outerHeight(),c.height)}};d.calculateSelectorsDimensions=function(){var b=0,a=0;this.selectorsToListenHeight.forEach(function(c){$(c+":not(:hidden)").each(function(c,e){c=$(e);e=c.offset();var d=e.top+c.outerHeight(!0);d>b&&(b=d);c=e.left+c.outerWidth(!0);c>a&&(a=c)})});return{width:a,height:b}};d.addSelectorToListenHeight=function(b){this.selectorsToListenHeight.push(b);
return this};d.prototype.reportContentDimensions=function(b){c.CommonFunctions.makePostMessageCall(window.parent,new c.CommonWindowMessages.GenericMessageWithData(c.CommonWindowMessages.MessageNames.extensionContentOpened,{iframeWidth:b.width,iframeHeight:b.height}))};d.prototype.reportContentDimensionsIfChanged=function(){var b=this.calculateDocumentDimensions();if(this.contentDimensions.height!==b.height||this.contentDimensions.width!==b.width)this.contentDimensions=b,this.reportContentDimensions(this.contentDimensions)};
d.prototype.setUpMutationObserver=function(){var b=this;(new MutationObserver(function(a){0<a.length&&(new c.CallbackDebouncer(function(){return b.reportContentDimensionsIfChanged()})).invokeCallback(void 0,100)})).observe(document.body,{childList:!0,attributes:!0,attributeFilter:["style","src","height","width","class"],characterData:!0,subtree:!0})};d.prototype.setUpTimerObserver=function(){var b=this;this.reportContentDimensionsIfChanged();this.onContentHeightChangeTimer&&clearTimeout(this.onContentHeightChangeTimer);
this.onContentHeightChangeTimer=setTimeout(function(){return b.setUpTimerObserver()},200)};d.prototype.setUpChangeObservation=function(){"MutationObserver"in window?this.setUpMutationObserver():this.setUpTimerObserver()};d.setUpIframeContentHeightReporter=function(){(new d).setUpChangeObservation()};d.attachExtensionContentOpenedListenerForIframe=function(b,a){void 0===a&&(a=!1);$(function(){var e=!1;c.CommonFunctions.attachPostMessageEventListener($(window),c.CommonWindowMessages.MessageNames.extensionContentOpened,
function(f){var g=$("#"+b);f=f.extendedData;var k=c.CommonFunctions.calculateRightAndBottomOffset(g);k=IframeResizer.getFixedIframeDefaultWidthAndHeight($(window),g,k);g.height(f.iframeHeight===d.defaultDimensions.height?k.height:Math.max(f.iframeHeight,k.height));a&&void 0!==f.iframeWidth&&g.width(f.iframeWidth===d.defaultDimensions.width?k.width:Math.max(f.iframeWidth,k.width));e||(g.attr("scrolling","no"),e=!0)})})};d.defaultDimensions={width:-1,height:-1};d.selectorsToListenHeight=[];return d}();
c.IframeContentHeightReporter=d})(CCL||(CCL={}));
(function(c){var d=function(){function b(){}b.ShowFeedbackMessage="ShowInformationFeedbackMessage";b.HideFeedbackMessage="HideInformationFeedbackMessage";return b}();c.InformationFeedbackEvent=d;var f=function(){function b(a,b){var e=this;this.settings=b;this.$feedback=a;this.$closeButton=this.$feedback.find("."+c.CommonCssClasses.InformationFeedback.CloseButton);this.$dismissButton=this.$feedback.find("."+c.CommonCssClasses.InformationFeedback.DismissButton);this.$extraButton=this.$feedback.find("."+
c.CommonCssClasses.InformationFeedback.ExtraButton);this.$buttonContainer=this.$feedback.find("."+c.CommonCssClasses.InformationFeedback.ButtonContainer);this.$closeButton.on("click",function(){e.hideFeedbackMessage()});this.$dismissButton.on("click",function(){e.hideFeedbackMessage()});this.$buttonContainer.hide();a=$("#"+b.MainContainerClientId);a.on(d.ShowFeedbackMessage,function(a,b,d,f,g){a.stopPropagation();e.showFeedbackMessage(b,d,f,g);c.FeedbackAccessibility.focusOnFeedbackAction(e.$feedback)});
a.on(d.HideFeedbackMessage,function(a,b){a.stopPropagation();e.hideFeedbackMessage(b)});c.FeedbackAccessibility.makeAccessible(this.$feedback)}b.prototype.showFeedbackMessage=function(a,b,d,f){var e=this;clearTimeout(this.hidingAnimation);this.$feedback.find("."+c.CommonCssClasses.InformationFeedback.Message).html(a);a=!1;this.$extraButton.off("click");b&&d?(this.$extraButton.text(b),this.$extraButton.removeAttr("disabled"),this.$extraButton.on("click",function(){clearTimeout(e.hidingAnimation);e.$extraButton.attr("disabled",
"disabled");d(e.$extraButton)}),this.$extraButton.show(),a=!0):(this.$extraButton.hide(),a=!1);this.settings.HideDismissButton||a?(this.$dismissButton.hide(),this.$closeButton.show()):(this.$dismissButton.show(),this.$closeButton.hide());this.$buttonContainer.toggle(a||!this.settings.HideDismissButton);$("body").addClass(c.CommonCssClasses.InformationFeedback.IsVisible);this.$feedback.stop(!0,!0).show();f||(this.hidingAnimation=setTimeout(function(){return e.hideFeedbackMessage()},15E3))};b.prototype.hideFeedbackMessage=
function(a){void 0===a&&(a=!0);clearTimeout(this.hidingAnimation);$("body").removeClass(c.CommonCssClasses.InformationFeedback.IsVisible);this.$feedback.stop(!0,!0);a?this.$feedback.fadeOut():this.$feedback.hide();this.settings.OnSeenCallback&&(new Function(this.settings.OnSeenCallback))()};b.showFeedback=function(a,b,c){void 0===c&&(c={});a.trigger(d.ShowFeedbackMessage,[b,c.extraButtonName,c.extraButtonCallback,c.disableAutomaticHiding])};b.showFeedbackWithextraButton=function(a,b,c,f){a.trigger(d.ShowFeedbackMessage,
[b,c,f,!1])};b.hideFeedback=function(a,b){void 0===b&&(b=!0);a.trigger(d.HideFeedbackMessage,b)};return b}();c.InformationFeedback=f})(CCL||(CCL={}));
(function(c){var d=function(){function d(b){var a=this;this.settings=b;b=this.settings.ContentSelector+" "+c.CommonFunctions.getDataSelector(d.dataAttributes.visibilityToggler);this.visibleTextLengthCalculator=new c.VisibleTextLengthCalculator(this.settings.NumberOfCharactersToShow,this.settings.NumberOfLineBreaks,c.CommonFunctions.isEdge());$(document).on("click",b,function(b){var e=$(b.currentTarget);a.setVisibilityTogglerState(e,!e.data(d.dataAttributes.textIsExpanded));e=e.parent();e.find("."+
d.commonSettings.CssClasses.VisibleText).toggleClass(d.commonSettings.CssClasses.ShowEllipsis);e=e.find("."+d.commonSettings.CssClasses.HiddenText).toggle();c.CommonFunctions.isFirefox()&&"block"===e.css("display")&&e.css("display","inline");b.preventDefault()});this.settings.RunScanningDocumentAfterInitialization&&this.scanDocumentAndAppend()}d.prototype.scanDocumentAndAppend=function(){var b=this;$(this.settings.ContentSelector+":not("+c.CommonFunctions.getDataSelector(d.dataAttributes.processedIndicator)+
")").each(function(a,c){return b.scanItemAndAppend($(c))})};d.prototype.scanItemAndAppend=function(b){var a=$.trim(b.html());if(this.visibleTextLengthCalculator.shouldCalculateRealLength(b[0])){var c=this.visibleTextLengthCalculator.calculateRealLength(b[0]);if(0!==c&&c<a.length){var f=a.substr(0,c);a=a.substr(c);b.empty().attr("data-"+d.dataAttributes.processedIndicator,"").append($("<span>").addClass(d.commonSettings.CssClasses.VisibleText).addClass(d.commonSettings.CssClasses.ShowEllipsis).html(f)).append($("<span>").addClass(d.commonSettings.CssClasses.HiddenText).html(a).hide()).append(this.setVisibilityTogglerState($("<button>").addClass(d.commonSettings.CssClasses.VisibilityToggler).attr((h=
{},h["data-"+d.dataAttributes.visibilityToggler]="",h["aria-controls"]=b.closest(this.settings.ContentSelector).prop("id")||null,h))))}}var h};d.prototype.setVisibilityTogglerState=function(b,a){void 0===a&&(a=!1);return b.text(a?this.settings.Resources.ShowLess:this.settings.Resources.ShowMore).attr("aria-expanded",""+a).data(d.dataAttributes.textIsExpanded,a)};d.dataAttributes={processedIndicator:"inline-text-expander-processed",textIsExpanded:"inlinetextexpander-expanded",visibilityToggler:"inlinetextexpander-visibility-toggler"};
return d}();c.InlineTextExpander=d})(CCL||(CCL={}));
(function(c){var d=function(){function c(){this.skipUrls=[]}c.prototype.getFirstLink=function(b){b=this.parseFirstLink(this.getTextWithoutSkippedUrls(this.getEmbedCodeWithoutStyles(b)));return""===b?"":c.ensureUrlScheme(b)};c.prototype.getDomain=function(b){var a=document.createElement("a");a.href=b;return a.hostname};c.prototype.skipUrl=function(b){this.skipUrls.push(b)};c.prototype.removeFromSkipUrl=function(b){b=this.skipUrls.indexOf(b);-1<b&&this.skipUrls.splice(b,1)};c.prototype.isEmail=function(b){for(var a=
b.length-1;0<=a&&!b.charAt(a).match(c.lettersRegex);)a--;return null!==b.substr(0,a+1).match(c.emailRegex)};c.ensureUrlScheme=function(b){c.urlWithFirstAtSignRegex.test(b)&&(b=b.substr(b.indexOf("@")+1));return c.schemeDefinedUrlRegex.test(b)?b:c.protocolRelativeUrlRegex.test(b)?"http:"+b:"http://"+b};c.prototype.getEmbedCodeWithoutStyles=function(b){return b.replace(c.stylesRegex,"")};c.prototype.getTextWithoutSkippedUrls=function(b){var a=this;return this.skipUrls.reduce(function(b,d){var e=a.parseFirstLink(b);
return c.ensureUrlScheme(e)===d?b.replace(e," "):b},b)};c.prototype.getDataAttribute=function(b){var a=null;b.match(c.dataAttributesRegex)&&(a=b.replace(c.dataAttributesRegex,c.dataAttributesTemplate));return a};c.prototype.parseFirstLink=function(b){for(var a=this.getDataAttribute(b),e=b.match(c.urlRegex);""!==b&&null!==e&&(this.isEmail(e[0])||0===e[0].trim().indexOf("@"));)b=b.replace(e[0]," ").trim(),e=b.match(c.urlRegex);return null===e?"":a?e[0]+(-1<e[0].indexOf("?")?"&":"?")+a:e[0]};c.wholeUrlRegex=
/^(https?:\/\/)?((((?!-))(xn--)?[a-z0-9-_@]{0,61}[a-z0-9]{1,1}\.)*(xn--)?([a-z0-9\-@]{1,61}|[a-z0-9-]{1,30}\.[a-z]{2,})\.)([a-zZ-Z0-9\.\-\/\\_%,!:\+@=]{2,})(\?([^#\s>"]*))?(#(\S*))?$/i;c.urlRegex=/(https?:\/\/)?((((?!-))(xn--)?[a-z0-9-_@]{0,61}[a-z0-9]{1,1}\.)*(xn--)?([a-z0-9\-@]{1,61}|[a-z0-9-]{1,30}\.[a-z]{2,})\.)([a-zZ-Z0-9\.\-\/\\_%,!:\+@=]{2,})(\?([^#"'\s>"]*))?(#([^"'\s]*))?/i;c.emailRegex=/(mailto:([^\?]*))?([a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$)/i;c.schemeDefinedUrlRegex=/^(https?:\/\/)/i;
c.protocolRelativeUrlRegex=/^(\/\/)/;c.urlWithFirstAtSignRegex=/^((https?:)?\/\/)?@/i;c.lettersRegex=/^[a-z]$/i;c.stylesRegex=/(style\s*=\s*)(?:(?:[^>']([^>"]*))|(?:[^>"]([^>']*)))/ig;c.dataAttributesRegex=/(<div.+?data-nrk-id="([\d]+)".+)|(<div.+?data-sample-id="([\d]+)".+)/i;c.dataAttributesTemplate="data-id=$2$4";return c}();c.LinkParser=d})(CCL||(CCL={}));
(function(c){(function(d){d.BuildCheckbox=function(b,a,e,d){void 0===e&&(e=!0);void 0===d&&(d=!1);if(!b.parent().hasClass(c.CommonCssClasses.ModernCheckbox.Checkbox)){b.addClass(c.CommonCssClasses.ModernCheckbox.Input);b.attr("aria-label",a);var f=c.CommonCssClasses.ModernCheckbox.Checkbox;e&&(f+=" "+c.CommonCssClasses.ModernCheckbox.SmallCheckbox);b=b.wrap('<label class="'+f+'"></label>').parent();e=$("<span>").addClass(c.CommonCssClasses.ModernCheckbox.CustomCheckWrapper);e.append($("<span>").addClass(c.CommonCssClasses.ModernCheckbox.CustomCheck));
b.append(e);a=$("<span>").addClass(c.CommonCssClasses.ModernCheckbox.Label).text(a);a.toggle(!d);b.append(a);return b}};var f=function(){function b(a){this.$container=a.closest("label."+c.CommonCssClasses.ModernCheckbox.Checkbox)}b.prototype.setToolTipHtml=function(a){this.$container&&c.UnobtrusiveCustomTooltipManager.setTooltipContentOnTarget(this.$container,a&&a.length?'<span class="'+c.CommonCssClasses.ModernCheckbox.TooltipContent+'">'+a+"</span>":"")};b.prototype.enableToolTip=function(a){this.$container&&
c.UnobtrusiveCustomTooltipManager.enableTooltipOnTarget(this.$container,a)};return b}();d.CustomTooltipForCheckbox=f})(c.ModernCheckbox||(c.ModernCheckbox={}))})(CCL||(CCL={}));
(function(c){var d=function(){return function(c,b){var a=this;this.clientId=c;this.settings=b;var e=document.getElementById(this.clientId);c=e.querySelector("."+this.settings.CssClasses.MobileMenuButton);var d=e.querySelector("."+this.settings.CssClasses.Content);c.addEventListener("click",function(){if(!a.mobileMenuContent){a.mobileMenuContent=d.cloneNode(!0);var b=a.settings.ClientIds.MobileContentAppendTarget?document.getElementById(a.settings.ClientIds.MobileContentAppendTarget):e.parentElement;
a.mobileMenuContent.classList.remove(a.settings.CssClasses.IsNotMobile);a.mobileMenuContent.classList.add(a.settings.CssClasses.IsMobile);b.appendChild(a.mobileMenuContent)}a.mobileMenuContent.style.display=a.mobileMenuContent.style.display&&"none"!==a.mobileMenuContent.style.display?"none":"block"});window.addEventListener("resize",function(){d.style.cssText=""})}}();c.ModernPageTabs=d})(CCL||(CCL={}));
(function(c){var d=function(){function c(b,a){var c=this;this.settings=a;this.percentageKeys=[];window[b]=this;this.settings=a;this.cssClasses=a.cssClasses;this.controls=a.controls;this.dataAttributes=a.dataAttributes;this.assessmentStatuses=a.assessmentStatuses;this.assessmentsData=JSON.parse(this.controls.updatedCriteriaAssessmentsHidden.val());this.descriptionsData=JSON.parse(this.controls.updatedCriteriaDecriptionsHidden.val());this.createCommentsInlineEdit(this.controls.container);this.toggleAssessmentCallback(!0);
this.assessmentStatusesData=JSON.parse(this.controls.activeAssessmentStatusesHidden.val());this.overriddenAssessmentsData=JSON.parse(this.controls.overriddenCriteriaAssessmentsHidden.val());this.assessmentStatusesByCriteriaData=JSON.parse(this.controls.assessmentStatusesByCriteriaHidden.val());this.possibleMasteredLearningObjectivesData=JSON.parse(this.controls.possibleMasteredLearningObjectivesHidden.val());this.grids=JSON.parse(a.grids);a.assessmentUpdaterSettings.connectAssessmentCriteriaToScale&&
(a.assessmentUpdaterSettings.assessmentPercentage&&($.each(a.assessmentUpdaterSettings.assessmentPercentage,function(a){c.percentageKeys.push(a)}),this.percentageKeys.sort(function(a,b){return a-b})),this.assessmentChangedWarningLabel=$("#"+a.assessmentUpdaterSettings.assessmentChangedWarningLabelClientId));if(a.showOverride&&this.controls.changeReportStatusControl)this.controls.changeReportStatusControl.on(this.settings.events.saveOverridingsEvent,function(){c.saveOverridings()})}c.prototype.update=
function(b,a){var c=this;this.possibleMasteredLearningObjectivesData=JSON.parse(a);$.each(b,function(a,b){0!==b.RubricCriteriaItemId&&(c.updateAssessment(b.LearningObjectiveId,b.RubricCriteriaItemId,b.AssessedAchievementLevelId),c.updateDescription(b.LearningObjectiveId,b.RubricCriteriaItemId,b.Comment));0===b.RubricCriteriaItemId&&(a=c.getAssessmentStatusTypeByStartsAt(b.PercentScore),c.updateStatus(b.LearningObjectiveId,a,0,b.Comment))})};c.prototype.toReadOnlyMode=function(){this.controls.container.removeClass(this.cssClasses.assessMode);
this.controls.container.addClass(this.cssClasses.readOnlyMode);this.toggleAssessmentCallback(!1);this.toggleAssessmentControls(!1)};c.prototype.toAssessMode=function(){this.controls.container.addClass(this.cssClasses.assessMode);this.controls.container.removeClass(this.cssClasses.readOnlyMode);this.toggleAssessmentCallback(!0);this.toggleAssessmentControls(!0)};c.prototype.get=function(){var b=this,a=[];$.each(this.assessmentsData,function(c,d){var e=b.descriptionsData[c];a.push({AssessedAchievementLevelId:d,
RubricCriteriaItemId:c,Comment:null!=e?e:null})});$.each(this.overriddenAssessmentsData,function(c,d){d=b.getStartsAtByAssessmentStatusType(d.Status);a.push({LearningObjectiveId:c,Override:!0,PercentScore:d})});return a};c.prototype.clear=function(){var b=this;this.controls.container.find("li."+this.cssClasses.criteriaDescriptionRow).each(function(a,c){b.setDescriptionValue($(c),"")});this.descriptionsData={};this.controls.updatedCriteriaDecriptionsHidden.val(JSON.stringify(this.descriptionsData));
this.controls.container.find("div."+this.cssClasses.overrideStatusBoxContainer).each(function(a,c){a=$(c).attr(b.dataAttributes.learningObjectiveId);b.setStatusOverridings(a,"",0,"",$(c))});this.overriddenAssessmentsData={};var a=this.controls.container.find("div > span."+this.cssClasses.statusBox);this.updateStatusTextAndCss(a,this.settings.assessmentStatusTypeNotAssessed);this.controls.container.find("ul li."+this.cssClasses.column).each(function(a,c){$(c).hasClass(b.cssClasses.selectedBox)&&b.assess($(c),
!0)});this.assessmentsData={}};c.prototype.saveStatusOverridings=function(b,a,c){this.settings.showOverride&&(c=c.toString(),b=0<b.length?parseInt(b):0,this.saveOverridingsCommon(c,b,0,"",a.controls.container.parents("div."+this.cssClasses.overrideStatusBoxContainer).first()))};c.prototype.toggleAssessmentControls=function(b){var a=this;this.controls.container.find("li."+this.cssClasses.criteriaDescriptionRow).each(function(c,d){c=$(d);c.children("a."+a.cssClasses.criteriaLevelDescription).toggle(b);
c.children("span."+a.cssClasses.criteriaLevelDescription).remove();b?c.show():(d=c.children("input").val())?c.append($("<span/>").prop("class",a.cssClasses.criteriaLevelDescription).text(d)):c.hide()});this.controls.container.find("."+this.cssClasses.outcomeRow).toggle(b)};c.prototype.toggleAssessmentCallback=function(b){var a=this;$("ul li."+this.cssClasses.column,this.controls.container).each(function(c,d){c=$(d);c.off("click.assess");if(b)c.on("click.assess","",d,function(b){b=$(b.data);a.assess(b)})})};
c.prototype.updateAssessment=function(b,a,c){0!==b&&0!==a&&0!==c&&(b=this.getRowsContainer(b).find("ul li."+this.cssClasses.column+"["+this.dataAttributes.itemId+'="'+c+'"]['+this.dataAttributes.criteriaId+'="'+a+'"]'),this.assess(b,!0))};c.prototype.assess=function(b,a){void 0===a&&(a=!1);var c=b.parent(),d=b.hasClass(this.cssClasses.selectedBox);this.removeSelection(c);var f=this.getListItemData(b),k=f.key;f=f.value;d?(this.assessmentsData[k]=this.settings.rubricAssessmentCustomNull,this.hideComment(c)):
(this.selectItem(b),this.assessmentsData[k]=f,this.showComment(c));this.controls.updatedCriteriaAssessmentsHidden.val(JSON.stringify(this.assessmentsData)).trigger("change");this.settings.showOverride&&(b=c.parents("."+this.cssClasses.criteriaContainer),c=b.find("div."+this.cssClasses.overrideStatusBoxContainer).attr(this.dataAttributes.learningObjectiveId),this.updateAssessmentStatus(b.find("ul."+this.cssClasses.row),c));a||(a=this.getPercentScoreByCriteriaAndWeight(),this.changeAssessmentOrScoreByPercentage(a))};
c.prototype.changeAssessmentOrScoreByPercentage=function(b){this.settings.assessmentUpdaterSettings.connectAssessmentCriteriaToScale&&(this.settings.assessmentUpdaterSettings.useScore&&this.settings.callbacks.scoreSetValueFunction?this.settings.callbacks.scoreSetValueFunction(this.calculateScoreByPercent(b)):this.settings.assessmentUpdaterSettings.useAssessment&&this.settings.callbacks.assessmentSetValueFunction&&this.settings.callbacks.assessmentSetValueFunction(this.calculateAssessmentGradeByPercent(b)),
this.assessmentChangedWarningLabel.show())};c.prototype.calculateScoreByPercent=function(b){if(-1!==b){var a=Math.pow(10,2);b=(Math.round(this.settings.assessmentUpdaterSettings.maxScore*b/100*a)/a).toString();"."!==this.settings.assessmentUpdaterSettings.numberDecimalSeparator&&0<b.indexOf(".")&&(b=b.replace(".",this.settings.assessmentUpdaterSettings.numberDecimalSeparator));return b}return""};c.prototype.calculateAssessmentGradeByPercent=function(b){var a=this.percentageKeys.filter(function(a){return b>=
a});return this.settings.assessmentUpdaterSettings.assessmentPercentage[a[a.length-1]]};c.prototype.updateStatus=function(b,a,c,d){if(0!==b){null==a&&(a=0);null==c&&(c=0);null==d&&(d="");var e=this.getRowsContainer(b).closest("."+this.cssClasses.criteriaContainer).find("div."+this.cssClasses.overrideStatusBoxContainer);this.setStatusOverridings(b,a,c,d,e)}};c.prototype.getRowsContainer=function(b){return window[this.grids[b]].getRowsContainer()};c.prototype.updateDescription=function(b,a,c){0!==b&&
0!==a&&null!=c&&""!==c&&(b=this.getRowsContainer(b).find("."+this.cssClasses.gridRow+"["+this.dataAttributes.id+'="'+a+'"]'),this.setDescription(a,c,b))};c.prototype.saveOverridings=function(){if(this.settings.showOverride){var b=this.controls.learningObjectiveIdHidden.val(),a=$("."+this.cssClasses.overrideStatusDropdown+" option:selected").val();a=0<a.length?parseInt(a):0;var c=parseInt(this.settings.useMastery?$("."+this.cssClasses.overrideMasteryDropdown+" option:selected").val():0),d=$("."+this.cssClasses.overrideStatusComment).val().substring(0,
this.settings.maximumCommentLength);this.saveOverridingsCommon(b,a,c,d,$("a[rel="+b+"]").parent())}};c.prototype.saveOverridingsCommon=function(b,a,c,d,f){if(0<a){this.overriddenAssessmentsData[b]={LearningObjectiveId:b,Status:a,MasteryOption:c,Comment:d};this.settings.controls.overriddenCriteriaAssessmentsHidden.val(JSON.stringify(this.overriddenAssessmentsData));var e=f.find("> span."+this.cssClasses.statusBox),g=f.siblings("."+this.cssClasses.overrideMasterText).find("span."+this.cssClasses.masteredBoxHolder),
h=g.find("> span");g=g.find("> img");var n=f.siblings("."+this.cssClasses.overrideComment);f=n.find("."+this.cssClasses.overrideCommentText);n=n.find("."+this.cssClasses.overrideCommentLabel);this.updateStatusTextAndCss(e,a);this.updateCommentText(f,n,d);this.settings.useMastery&&(this.possibleMasteredLearningObjectivesData[b].BreaksRecurrence&&c!==this.settings.learningObjectiveOverrideMasteryOption.mastered?this.updateMasteryTextAndCss(h,g,!1):(d=this.possibleMasteredLearningObjectivesData[b].AffectsByLevel,
e=this.possibleMasteredLearningObjectivesData[b].AffectsByResettingMastery,b=this.possibleMasteredLearningObjectivesData[b].MasteredWithoutOverride,c===this.settings.learningObjectiveOverrideMasteryOption.mastered?this.updateMasteryTextAndCss(h,g,!0):e&&(d?(a=this.getStartsAtByAssessmentStatusType(a),this.updateMasteryTextAndCss(h,g,a>=this.settings.masteryStartsAt)):this.updateMasteryTextAndCss(h,g,b))))}};c.prototype.setStatusOverridings=function(b,a,c,d,f){if(this.settings.showOverride){var e=
f.attr(this.dataAttributes.statusDropdownId);window[e].selectItem(a);this.saveOverridingsCommon(b,a,c,d,f)}};c.prototype.setDescription=function(b,a,c){c=c.find("li."+this.cssClasses.criteriaDescriptionRow);this.setDescriptionValue(c,a);this.descriptionsData[b]=a;this.controls.updatedCriteriaDecriptionsHidden.val(JSON.stringify(this.descriptionsData))};c.prototype.setDescriptionValue=function(b,a){""===a?b.find("a").text(this.settings.terms.watermark).addClass(this.cssClasses.criteriaItemEmptyState):
b.find("a").text(a);b.find("input").val(a);b.find("textarea").val(a)};c.prototype.hideComment=function(b){b.find("li."+this.cssClasses.criteriaDescriptionRow).hide()};c.prototype.showComment=function(b){b.find("li."+this.cssClasses.criteriaDescriptionRow).show()};c.prototype.removeSelection=function(b){b.children("li."+this.cssClasses.selectedBox).removeClass(this.cssClasses.selectedBox);b.find("li span."+this.cssClasses.star).removeClass(this.cssClasses.starOn).addClass(this.cssClasses.starOff)};
c.prototype.selectItem=function(b){b.addClass(this.cssClasses.selectedBox);b.find("span."+this.cssClasses.star).removeClass(this.cssClasses.starOff).addClass(this.cssClasses.starOn)};c.prototype.getListItemData=function(b){b=b.find("input[type=hidden]").val();return JSON.parse(b||"{}")};c.prototype.updateAssessmentStatus=function(b,a){var c=this;if(this.settings.showOverride){var d=0,f=b.length;b.each(function(a,b){b=$(b);a=b.find("li."+c.cssClasses.column);b=b.find("li."+c.cssClasses.selectedBox);
var e=a.index(b)+1;c.settings.achivementLevelOrderDirection===c.settings.achievementLevelOrder.lowestToHighest&&(e=$(a.get().reverse()).index(b)+1);1<=e?d+=c.getPercentScoreByAchievementLevelId(e,a.length):f--});var k=d/f;b=b.parents("."+this.cssClasses.criteriaContainer);var l=b.find("div."+this.cssClasses.overrideStatusBoxContainer+"> span."+this.cssClasses.statusBox),m=b.find("span."+this.cssClasses.masteredBoxHolder);b=m.find("> span");m=m.find("> img");1<=k?this.assessmentStatusesData.forEach(function(b,
e){e=(e=e+1<c.assessmentStatusesData.length?c.assessmentStatusesData[e+1]:null)?e.startsAt:c.settings.maximumPercentageValue;k>=b.startsAt&&k<e&&(c.setAssessmentStatusByCriteria(b.type,a),null==c.overriddenAssessmentsData[a]&&c.updateStatusTextAndCss(l,b.type))}):(this.setAssessmentStatusByCriteria(this.settings.assessmentStatusTypeNotAssessed,a),null==this.overriddenAssessmentsData[a]&&this.updateStatusTextAndCss(l,this.settings.assessmentStatusTypeNotAssessed));if(this.settings.useMastery&&(null==
this.overriddenAssessmentsData[a]||!this.overriddenAssessmentsData[a].MasteryOption))if(this.possibleMasteredLearningObjectivesData[a].BreaksRecurrence)this.updateMasteryTextAndCss(b,m,!1);else{var n=this.possibleMasteredLearningObjectivesData[a],p=n.AffectsByLevel;n.AffectsByResettingMastery&&p&&(n=this.overriddenAssessmentsData[a],n=null==n?k:this.getStartsAtByAssessmentStatusType(n.Status),this.updateMasteryTextAndCss(b,m,n>=this.settings.masteryStartsAt))}}};c.prototype.setAssessmentStatusByCriteria=
function(b,a){this.assessmentStatusesByCriteriaData[a]=this.assessmentStatuses[b].Title;this.controls.assessmentStatusesByCriteriaHidden.val(JSON.stringify(this.assessmentStatusesByCriteriaData))};c.prototype.updateMasteryTextAndCss=function(b,a,c){b.text(this.getMasteryText(c));b.removeClass(this.cssClasses.noPrint);b.addClass(this.settings.useMastery&&c?"":this.cssClasses.noPrint);a.prop("src",this.getMasteryImage(c));a.removeClass(this.cssClasses.noPrint);a.addClass(this.settings.useMastery&&c?
"":this.cssClasses.noPrint)};c.prototype.getMasteryText=function(b){return this.settings.useMastery&&b?this.settings.terms.mastered:this.settings.terms.notMastered};c.prototype.getMasteryImage=function(b){return this.settings.useMastery&&b?this.settings.imgUrls.masteredIcon:this.settings.imgUrls.notMasteredIcon};c.prototype.getPercentScoreByAchievementLevelId=function(b,a){return 100*(a-b+1)/a};c.prototype.updateStatusTextAndCss=function(b,a){$.each(this.assessmentStatuses,function(a,c){b.removeClass(c.CssClass)});
b.addClass(this.assessmentStatuses[a].CssClass);b.text(this.assessmentStatuses[a].Title)};c.prototype.updateCommentText=function(b,a,c){a.parent().toggle(""!==c);b.text(c)};c.prototype.getPercentScoreByCriteriaAndWeight=function(){var b=this,a=0,c=0,d=[];$("."+this.cssClasses.selectedBox).each(function(a,b){a=JSON.parse($(b).find("input[type=hidden]").val()||"{}");d[a.key]=a.value});$.each(this.settings.achievementLevelsPoints,function(e,f){if(d[e]&&0!==d[e]){var g=d[e],h=0;$.each(f,function(a,b){b>
h&&(h=b)});a+=b.settings.achievementLevelsPoints[e][g];c+=h}});return 0<c?a/c*100:-1};c.prototype.getStartsAtByAssessmentStatusType=function(b){for(var a=0,c=0;c<this.assessmentStatusesData.length;c++){var d=this.assessmentStatusesData[c];if(d.type===b){a=d.startsAt;break}}return a};c.prototype.getAssessmentStatusTypeByStartsAt=function(b){for(var a=this,c="",d=Object.keys(this.assessmentStatusesData).map(function(b){return a.assessmentStatusesData[b]}).reverse(),f=0;f<d.length;f++){var k=d[f];if(b>=
k.startsAt){c=k.type;break}}return c};c.prototype.createCommentsInlineEdit=function(b){var a=this;b.find("."+this.cssClasses.criteriaLevelDescription).each(function(b,c){b={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:a.cssClasses.inlineEditor,maxLength:1024};new ClientInlineEditor($(c),void 0,$(c).parent().find("input").last(),b,function(b,c){return a.onEditCriteriaDescription(b,c)},function(b){return a.onChangeInlineEditModeFunction(b)},void 0)})};c.prototype.onEditCriteriaDescription=
function(b,a){var c=this.getCriteriaId(b.source);this.descriptionsData[c]=b.actualText;this.controls.updatedCriteriaDecriptionsHidden.val(JSON.stringify(this.descriptionsData));b.isUpdateSuccess=!0;a(b)};c.prototype.onChangeInlineEditModeFunction=function(b){var a=b.source;b.isEditMode||a.parent().find("input").last().val()?a.removeClass(this.cssClasses.criteriaItemEmptyState):(a.addClass(this.cssClasses.criteriaItemEmptyState),a.text(this.settings.terms.watermark))};c.prototype.getCriteriaId=function(b){return b.parents("ul").next().val()};
return c}();c.RubricAssessment=d})(CCL||(CCL={}));
(function(c){var d=function(){function c(){}c.createTagItInput=function(b,a){var c=this,d={readOnly:a.isReadonly,placeholderText:a.placeholderText,allowSpaces:!0,tagLimit:a.tagitLimit,preprocessTag:function(b){a.preprocessTag&&(b=a.preprocessTag(b));return b.replace('"',"")}};a.beforeTagAdded&&(d.beforeTagAdded=a.beforeTagAdded);a.afterTagAdded&&(d.afterTagAdded=a.afterTagAdded);a.beforeTagRemoved&&(d.beforeTagRemoved=a.beforeTagRemoved);a.afterTagRemoved&&(d.afterTagRemoved=a.afterTagRemoved);d=
b.tagit(d);d.find("input").on("focus",function(){b.addClass(c.focusCssClass)});d.find("input").on("blur",function(){b.removeClass(c.focusCssClass)})};c.focusCssClass="tagit-focus";return c}();c.TagItInput=d})(CCL||(CCL={}));
(function(c){var d=function(){function c(b,a,c){void 0===c&&(c=!1);this.maxLength=b;this.maxLineBreaks=a;this.isEdge=c;this.anchorTagName="A";this.breakLineTagName="BR"}c.prototype.shouldCalculateRealLength=function(b){return b.getElementsByTagName(this.breakLineTagName).length>=this.maxLineBreaks||b.innerHTML.trim().length>this.maxLength};c.prototype.calculateRealLength=function(b){for(var a=this.maxLength,c=0,d=0,f,k=0;f=b.childNodes[d];){var l=f.length||f.outerHTML.length;if(c+l>a){f.nodeType===
Node.ELEMENT_NODE&&(l=this.isEdge?l+1:l,a=f.tagName===this.anchorTagName?c+l:c);break}if(f.nodeType===Node.ELEMENT_NODE&&f.tagName===this.breakLineTagName&&(k++,k===this.maxLineBreaks)){a=c;break}c+=l;d++}return a};return c}();c.VisibleTextLengthCalculator=d})(CCL||(CCL={}));
(function(c){var d=function(){function c(b,a){this.cssClasses=b;this.dataAttributes=a}c.prototype.toggleTextError=function(b,a,c){b=b.find("."+this.cssClasses.EditorTextarea);b.find("[data-"+this.dataAttributes.TextValidationErrorMessage+"]").text(c?a:"").toggle(c);b.toggleClass(this.cssClasses.TextIsValid,!c)};c.prototype.getErrorAppendTarget=function(){return $("<span data-"+this.dataAttributes.TextValidationErrorMessage+">").hide()};return c}();c.ModernInput=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(b,a){window[b]=this;this._settings=a;this._container=$("#"+this._settings.Container);this.initialize()}d.prototype.activateItem=function(b){var a=this._container.find("."+this._settings.ButtonCssClass);b=this._container.find("."+this._settings.ButtonCssClass+"[data-"+this._settings.KeyDataName+'= "'+b+'"]');a.removeClass(this._settings.ActiveCssClass);b.addClass(this._settings.ActiveCssClass)};d.prototype.toggleEnableSwitcher=function(b){this._container.find("."+
this._settings.ButtonCssClass).toggleClass(this._settings.DisabledCssClass,!b)};d.prototype.initialize=function(){var b=this,a=$("#"+this._settings.Container).find("."+this._settings.ButtonCssClass);a.each(function(e,d){var f=$(d);f.click(function(){if(f.hasClass(b._settings.DisabledCssClass))return!1;var e=f.data(b._settings.KeyDataName).toString(),d;$.each(b._settings.ItemSettings,function(a,b){return e===b.Key?(d=b,!1):!0});c.CommonFunctions.makePostMessageCall(window,new c.CommonWindowMessages.GenericMessageWithData(c.MultipleSwitcher.onClickEventName,
d));a.removeClass(b._settings.ActiveCssClass);f.addClass(b._settings.ActiveCssClass);return!1})})};d.onClickEventName="MultipleSwitcher:onclick";return d}();c.MultipleSwitcher=d})(CCL||(CCL={}));
(function(c){var d=function(){function c(b,a){this.settings=b;this.controls=a}c.prototype.validate=function(b,a){b=$("#"+this.controls.id).val();if(""!==b){var c=this.settings.delimiter;"."===c&&(c="\\.");(new RegExp("^\\d+("+c+"\\d+)?$")).test(b)?(b=b.replace(c,"."),parseFloat(b)>this.settings.maxValue&&(a.IsValid=!1)):a.IsValid=!1}};return c}();c.FloatNumberValidator=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(){}d.makeAccessible=function(b){$(b).attr("role","alert")};d.focusOnFeedbackAction=function(b){var a=$(b).find(":input:visible:focusable").first();0<a.length&&(c.CommonFunctions.isIe()&&$(b).focus(),setTimeout(function(){return a.focus()},200))};return d}();c.FeedbackAccessibility=d})(CCL||(CCL={}));
(function(c){var d=function(){function b(a){var b=this;this.settings=a;this.onCloseClick=function(){b.close();return!1};this.onKeyDown=function(a){a.keyCode===c.CommonConstants.keyCodes.escape&&b.close()};window[a.FullScreenViewerId]=this;this.viewer=$("#"+a.FullScreenViewerId);this.icon=$("#"+a.IconId);this.title=$("#"+a.TitleId);this.content=$("#"+a.ContentId);this.contentContainer=$("#"+a.ContentContainerId);this.loader=new f(a);this.attachCloseHandlers();$(window).on("beforeunload",function(){b.viewer.is(":visible")&&
b.close()})}b.prototype.open=function(a){this.icon.attr("src",a.iconUrl);this.title.text(a.title);this.viewer.show();this.contentElement=a.contentElement;this.hideScrollbar();this.loadContent(a);c.CommonFunctions.makePostMessageCall(window,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.enableFullScreen))};b.prototype.attachCloseHandlers=function(){$("#"+this.settings.CloseButtonId).on("click",this.onCloseClick);$(document).keydown(this.onKeyDown)};b.prototype.close=
function(){null!=this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null);this.viewer.hide();this.restoreScrollbar();this.contentElement=null;c.CommonFunctions.makePostMessageCall(window,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.disableFullScreen))};b.prototype.hideScrollbar=function(){$("body").addClass(c.CommonCssClasses.FullScreenViewer.Opened);this.contentElement&&this.contentElement.addClass(c.CommonCssClasses.FullScreenViewer.ContentElement)};
b.prototype.restoreScrollbar=function(){$("body").removeClass(c.CommonCssClasses.FullScreenViewer.Opened);this.contentElement&&this.contentElement.removeClass(c.CommonCssClasses.FullScreenViewer.ContentElement)};b.prototype.loadContent=function(a){a.contentElement?this.enableHeaderOnlyMode():a.contentUrl?this.loadContentFromUrl(a.contentUrl):this.loader.showError()};b.prototype.enableHeaderOnlyMode=function(){this.viewer.addClass(c.CommonCssClasses.FullScreenViewer.HeaderOnly)};b.prototype.loadContentFromUrl=
function(a){var b=this;this.viewer.removeClass(c.CommonCssClasses.FullScreenViewer.HeaderOnly);this.contentContainer.hide();this.loader.showLoader();this.currentRequest=$.get(a).done(function(a){b.loader.hide();b.contentContainer.html(a);b.contentContainer.show();b.currentRequest=null}).fail(function(){b.loader.showError();b.currentRequest=null})};return b}();c.FullScreenViewer=d;var f=function(){function b(a){this.settings=a;this.container=$("#"+a.LoaderId);this.loadingWheel=this.container.find("> .ccl-ajaxloadingwheel");
this.status=this.container.find("> .ccl-full-screen-viewer-content-loader-status")}b.prototype.showLoader=function(){var a=this;this.container.show();this.loadingWheel.show();this.status.css("visibility","hidden");this.status.text(this.settings.LoadingInProgressText);clearTimeout(this.timer);this.timer=setTimeout(function(){a.status.css("visibility","visible")},3E3)};b.prototype.showError=function(){this.container.show();this.loadingWheel.hide();this.status.text(this.settings.LoadingErrorText);this.status.css("visibility",
"visible");clearTimeout(this.timer)};b.prototype.hide=function(){this.container.hide();this.loadingWheel.hide();this.status.css("visibility","hidden");clearTimeout(this.timer)};return b}()})(CCL||(CCL={}));
(function(c){var d=function(){function c(){}c.setMaxLength=function(b,a){var c=this;b.attr("maxlength",a);b.on("input change",function(){return c.ensureTextIsShorterThanMaxLength(b,a)})};c.ensureTextIsShorterThanMaxLength=function(b,a){var c=b.val();a=c.replace(/(\r\n|\n|\r)/g,"  ").length-a;0<a&&(c=c.slice(0,-a),b.val(c))};return c}();c.TextAreaExtensions=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(b){this.settings=b;this.numberOfTries=0;b&&this.pingInTimeout(b.intervalInSeconds)}d.prototype.pingInTimeout=function(b){var a=this;setTimeout(function(){a.ping()},1E3*b)};d.prototype.ping=function(){var b=this;this.settings&&this.settings.webMethodUrl&&$.ajax({type:"POST",data:this.settings.postData,url:this.settings.webMethodUrl,contentType:"application/json; charset=utf-8",headers:c.CommonFunctions.getAntiForgeryAjaxHeader(this.settings)}).done(function(a,
c){if(c&&(a=c.hasOwnProperty("d")?c.d:c,a.ErrorCode&&0>a.ErrorCode&&a.StopPolling&&!0===a.StopPolling))return;b.numberOfTries=0;b.pingInTimeout(b.settings.intervalInSeconds)}).fail(function(a){a.status===c.CommonConstants.httpStatusCodes.unauthorized?$(document).trigger(d.unauthorisedEventName):(b.numberOfTries++,b.numberOfTries<b.settings.maxNumberOfTries&&b.pingInTimeout(b.settings.errorTimeoutInSeconds*b.numberOfTries))})};d.unauthorisedEventName="keepalive:unauthorised";return d}();c.KeepAlive=
d})(CCL||(CCL={}));
(function(c){var d=function(){function c(b){this.ogpImageMaxWidthForCompactView=150;this.ogpImageMaxHeight=200;this.ogpImageMaxHeightForCompactView=350;this.settings=b}c.prototype.loadImage=function(b,a,c,d){var e=this;a&&c&&b&&d||(b=$("#"+this.settings.PlaceholderId),a=b.find("."+this.settings.CssClasses.EmbedOgpContainer),c=a.find("."+this.settings.CssClasses.EmbedOgpImagePreview),d=c.find("img"));if(0!==d.length){d.removeAttr("width height");var f=new Image;$(f).one("load",function(){var b=f.width,
g=f.height,h=g>e.ogpImageMaxHeight?b*e.ogpImageMaxHeight/g:b,k=Math.min(g,e.ogpImageMaxHeight);e.settings.IgnoreImageDimensions&&h<k||h<=e.ogpImageMaxWidthForCompactView?(b=e.calculateSize(b,g,e.ogpImageMaxWidthForCompactView,e.ogpImageMaxHeightForCompactView),g=b.height+"px",c.css({width:b.width+"px",height:g,position:"absolute"}).addClass(e.settings.CssClasses.AlignVertically),a.find("."+e.settings.CssClasses.EmbedOgpTextContainer).css("margin-left",b.width+10+"px"),a.css({position:"relative","min-height":g})):
(c.css({height:"auto","max-height":e.ogpImageMaxHeight+"px"}),d.css({"max-height":e.ogpImageMaxHeight+"px"}));d.addClass(e.settings.CssClasses.EmbedOgpImage)});var g=function(){d.on("load",function(){f.src=d.prop("src")})};d.attr("src")?$("<img/>").on("load",function(){f.src=d.prop("src")}).on("error",function(){g()}).attr("src",d.attr("src")):g()}};c.prototype.calculateSize=function(b,a,c,d){if(b<=c&&a<=d)return{width:b,height:a};b*=d;a*=c;var e=Math.max(b,a);return{width:Math.max(1,Math.min(c,Math.floor(b*
c/e))),height:Math.max(1,Math.min(d,Math.floor(a*d/e)))}};return c}();c.OgpImageLoader=d})(CCL||(CCL={}));
(function(c){var d=function(){function b(){}b.auto=0;b.centerBottom=1;b.centerCenter=2;b.rightBottom=3;b.rightCenter=4;b.bottomLeft=5;b.leftTop=6;return b}(),f=function(){function b(a,b){var c=this;this.blockHighlightZone=this.closedThroughX=this.gotItClicked=!1;this.resizeHandler=function(){c.isOpen&&c.$mask&&c.isMobileView()&&(c.removeMask(),$(c.onboardingDialog.mainContainer).fadeTo(500,0,function(){c.closeContainer()}),$(window).off("resize",c.resizeHandler))};this.clickOutsideHandler=function(a){0===
$(a.target).closest("."+c.settings.DialogCssClass).length&&c.closeDialog(!1,!1)};this.$container=a;this.settings=b;window[this.settings.DialogClientId]=this;this.antiForgeryAjaxHeaders=this.initAntiForgeryAjaxHeaders(this.settings.AntiForgeryHeaderName,this.settings.AntiForgeryHeaderValue);this.addGotItClickHandler(a.find("."+b.CloseButtonCssClass));this.onboardingDialog=new ContextDialog("#"+this.$container[0].id,{footerContent:this.settings.FooterClientId,closeWithOutsideClick:!1,allowAccessToParentWindow:!1,
showArrow:this.settings.ShowArrow,cssClass:this.settings.DialogCssClass,zIndex:this.settings.ZIndex,closeCssClass:this.settings.CloseLinkCssClass,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0});this.onboardingDialog.toggleCloseLink(this.settings.ShowCloseLink);this.onboardingDialog.hideHeader();this.closeContainer=this.onboardingDialog.closeDialog;this.onboardingDialog.setCloseFunction(function(){c.closeDialog(!1)});this.onboardingDialog.setCloseLinkFunction(function(){c.closeDialog(!0)});
this.onboardingDialog.onEscape=function(){};this.settings.StartOpened&&this.openDialog()}b.prototype.initAntiForgeryAjaxHeaders=function(a,b){return a&&b?(c={},c[a]=b,c):{};var c};b.prototype.openDialog=function(a){var b=this;void 0===a&&(a=null);if(this.settings.AllowMobileView||!this.isMobileView())if(this._closeCallback=a,!this.isOpen){var f=$(this.settings.TargetSelector);if(f[0]){this.isOpen=!0;this.settings.ShowMask&&(this.createMask(),$(window).on("resize",this.resizeHandler));if(this.settings.CloseAfterClickOutside)$(document).on("click "+
c.CommonTriggers.clickInInnerFrame,this.clickOutsideHandler);this.closedThroughX=this.gotItClicked=!1;this.settings.PutAfterElementInDomSelector&&(a=$(this.settings.PutAfterElementInDomSelector),a[0]&&$(a[0]).after(this.onboardingDialog.mainContainer));this.onboardingDialog.openDialogAt(0,0);$(this.onboardingDialog.mainContainer).removeAttr("style").css("opacity",0).css("display","block").css("z-index",this.settings.ZIndex).css("max-width",this.settings.MaxWidth);this.settings.Alignment===d.centerBottom?
($(this.onboardingDialog.mainContainer).addClass("bottom"),this.positionMainContainer(f,"center top+15","center bottom","fit"),this.positionArrowContainer(f,"center top","center top")):this.settings.Alignment===d.rightCenter?($(this.onboardingDialog.mainContainer).addClass("right"),this.positionMainContainer(f,"left+15 top","right top")):this.settings.Alignment===d.centerCenter?this.positionMainContainer(f,"center center","center center"):this.settings.Alignment===d.rightBottom?($(this.onboardingDialog.mainContainer).addClass("bottom"),
this.positionMainContainer(f,"right top+15","right bottom","fit",function(a){$(b.onboardingDialog.mainContainer).css("top",a.top).css("left","auto").css("right",0)}),this.positionArrowContainer(f,"center top","center top")):this.settings.Alignment===d.bottomLeft?($(this.onboardingDialog.mainContainer).addClass("bottom"),this.positionMainContainer(f,"left top+20","left bottom"),this.positionArrowContainer($(this.onboardingDialog.mainContainer),"center","center")):this.settings.Alignment===d.leftTop&&
($(this.onboardingDialog.mainContainer).addClass("left"),this.positionMainContainer(f,"right-15 top","left top"));$(this.onboardingDialog.mainContainer).fadeTo(500,1);this.settings.ScrollIntoViewOnShow&&$(this.onboardingDialog.mainContainer).get(0).scrollIntoView(!1);if(this.settings.RepositionArrowOnResize){var h=new c.CallbackThrottler(function(){b.positionArrowContainer(f,"center top","center top")});this.repositionArrowCallback=function(){h.invokeCallback(null,100)};$(window).resize(this.repositionArrowCallback)}this.settings.ExtraGotItSelector&&
this.addGotItClickHandler($(this.settings.ExtraGotItSelector));$("body").keyup(this,this.onKeyup)}}};b.prototype.positionMainContainer=function(a,b,c,d,f){void 0===d&&(d="none");void 0===f&&(f=null);$(this.onboardingDialog.mainContainer).position({of:a,my:b,at:c,collision:d,using:f})};b.prototype.positionArrowContainer=function(a,b,d){(c.CommonFunctions.isIosDevice()||c.CommonFunctions.isSafari())&&$(this.onboardingDialog.arrowContainer).css("left","1px");$(this.onboardingDialog.arrowContainer).position({of:a,
my:b,at:d,collision:"none"})};b.prototype.closeDialog=function(a,b){var e=this;void 0===a&&(a=!1);void 0===b&&(b=!0);$(window).off("resize",this.resizeHandler);this.settings.CloseAfterClickOutside&&$(document).off("click "+c.CommonTriggers.clickInInnerFrame,this.clickOutsideHandler);this.isOpen&&(this.isOpen=!1,a&&(this.closedThroughX=!0),this.settings.RegisterOnboardingCompletion&&b&&this.registerOnboardingCompletion(),this.settings.RepositionArrowOnResize&&$(window).off("resize",this.repositionArrowCallback),
$("body").off("keyup",this.onKeyup),$(this.onboardingDialog.mainContainer).fadeTo(500,0,function(){e.closeContainer()}),this.removeMask(),this._closeCallback&&this._closeCallback(a))};b.prototype.registerOnboardingCompletion=function(){var a=this.settings.OnboardingServiceUrl;a=a.replace("{featureId}",this.settings.OnboardingFeatureId.toString());c.CommonFunctions.safeAjax({url:a,type:"PUT",headers:this.antiForgeryAjaxHeaders})};b.prototype.onKeyup=function(a){if(a.data.isOpen)switch(a.which){case c.CommonConstants.keyCodes.escape:a.stopImmediatePropagation(),
a.data.closeDialog()}};b.prototype.addGotItClickHandler=function(a){var b=this;a.on("click",function(){b.gotItClicked=!0;b.closeDialog()})};b.prototype.createMask=function(){this.settings.HighlightInMaskSelector&&($(this.settings.HighlightInMaskSelector).css("z-index",this.settings.ZIndex),!0===this.blockHighlightZone?($(this.settings.HighlightInMaskSelector).css("pointer-events","none"),$(this.settings.HighlightInMaskSelector).addClass("ccl-onboarding-highlight-in-mask__clean-border")):$(this.settings.HighlightInMaskSelector).addClass("ccl-onboarding-highlight-in-mask"));
var a=$("body");this.settings.AppendMaskToSelector&&(a=$(this.settings.AppendMaskToSelector),a.css("overflow-y","hidden"));this.$mask=$("<div></div>").appendTo(a).addClass("ccl-onboarding-dialog-mask").css({opacity:"0",filter:"alpha(opacity=0)","z-index":this.settings.ZIndex-1});this.settings.AllowMobileView&&this.$mask.addClass("ccl-onboarding-dialog-mobile");this.$mask.fadeTo(400,1);a.addClass("il-has-onboarding-mask");window.top&&window!==window.top&&(c.CommonFunctions.makePostMessageCall(window.top,
new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.registerExtraNavBar)),c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.maskNavigationBar)))};b.prototype.removeMask=function(){var a=this;this.$mask&&(this.settings.HighlightInMaskSelector&&($(this.settings.HighlightInMaskSelector).removeClass("ccl-onboarding-highlight-in-mask"),$(this.settings.HighlightInMaskSelector).css("z-index","")),!0===
this.blockHighlightZone&&($(".ccl-onboarding-highlight-in-mask__clean-border").css("pointer-events",""),$(this.settings.HighlightInMaskSelector).removeClass("ccl-onboarding-highlight-in-mask__clean-border")),this.settings.AppendMaskToSelector&&$(this.settings.AppendMaskToSelector).css("overflow-y",""),this.$mask.fadeTo(400,0,function(){a.$mask.parent().removeClass("il-has-onboarding-mask");a.$mask.remove();a.$mask=null}),window.top&&window!==window.top&&(c.CommonFunctions.makePostMessageCall(window.top,
new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.unregisterExtraNavBar)),c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.unmaskNavigationBar))))};b.prototype.isMobileView=function(){return!c.CommonFunctions.checkScreenSize(c.CommonConstants.mediaScreenSizes.iPadPortraitMode,!0)};return b}();c.OnboardingDialog=f})(CCL||(CCL={}));
(function(c){(function(d){(function(d){var b=function(){function a(a,b,c,f){var e=this;this.handleFeatureState=function(a){if(a.type===d.MessageType.ReceiveFeatureState&&a.featureId===e.featureId)!0===a.IsCompleted?e.completedHandler():e.notCompletedHandler();else throw Error("Can't handle onboarding post message. Check correctness featureId and MessageType");};this.completedHandler=c;this.notCompletedHandler=f;this.listenPostMessageFrom=$(window);this.featureId=a;this.nextFeatureId=b;this.attachMessageHandlers()}
a.prototype.attachMessageHandlers=function(){c.CommonFunctions.attachPostMessageEventListener(this.listenPostMessageFrom,c.CommonWindowMessages.MessageNames.extensionOnboarding,this.handleFeatureState)};a.prototype.next=function(){var a=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.extensionOnboarding);c.CommonFunctions.makePostMessageCallWithData(window.parent,a,{featureId:this.nextFeatureId,type:d.MessageType.TriggerOnboardingFeature})};a.prototype.complete=function(a){void 0===
a&&(a=null);var b=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.extensionOnboarding),e={type:d.MessageType.CompleteFeature,features:[]};e.features.push(this.featureId);a&&Array.prototype.push.apply(e.features,a);c.CommonFunctions.makePostMessageCallWithData(window.parent,b,e)};a.prototype.start=function(){var a=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.extensionOnboarding);c.CommonFunctions.makePostMessageCallWithData(window.parent,
a,{featureId:this.featureId,type:d.MessageType.RequestFeatureState})};a.prototype.overlay=function(a){a={type:a?d.MessageType.ShowOverlay:d.MessageType.HideOverlay};var b=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.extensionOnboarding);c.CommonFunctions.makePostMessageCallWithData(window.parent,b,a)};return a}();d.OnboardingPostMessageController=b})(d.Extensions||(d.Extensions={}))})(c.Onboarding||(c.Onboarding={}))})(CCL||(CCL={}));
(function(c){c=c.Onboarding||(c.Onboarding={});c=c.Extensions||(c.Extensions={});c=c.MessageType||(c.MessageType={});c[c.RequestFeatureState=0]="RequestFeatureState";c[c.ReceiveFeatureState=1]="ReceiveFeatureState";c[c.TriggerOnboardingFeature=2]="TriggerOnboardingFeature";c[c.CompleteFeature=3]="CompleteFeature";c[c.ShowOverlay=4]="ShowOverlay";c[c.HideOverlay=5]="HideOverlay"})(CCL||(CCL={}));
(function(c){c=c.Onboarding||(c.Onboarding={});c=c.Extensions||(c.Extensions={});c=c.OnboardingFeatures||(c.OnboardingFeatures={});c[c.AddElementToLibraryFromCourse=23]="AddElementToLibraryFromCourse";c[c.AssignmentEdit=27]="AssignmentEdit";c[c.AssignmentLearningToolOptions=28]="AssignmentLearningToolOptions";c[c.AssignmentReminders=29]="AssignmentReminders";c[c.AssignmentAddNote=34]="AssignmentAddNote";c[c.AssignmentGetStarted=35]="AssignmentGetStarted";c[c.AssignmentAnnotateAnswerFiles=36]="AssignmentAnnotateAnswerFiles"})(CCL||
(CCL={}));(function(c){var d={},f=function(){function b(a,b){void 0===b&&(b="");this._elem=$("#"+a);this._eventsPrefix=b;d[a]=this}b.GetInstanceForElement=function(a){return d[a]};b.prototype.Trigger=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._elem.trigger(this._eventsPrefix+a,b)};return b}();c.DomElementClass=f})(CCL||(CCL={}));
(function(c){c.PickerEvent={Initialized:"PickerInitialized",Added:"PickerFilesAdded",Started:"PickerUploadStarted",Stopped:"PickerUploadStopped",ResultsChanged:"PickerResultsChanged",LoadingDependencyFailed:"LoadingDependencyFailed"};c.PickerDependencyLoadTimeoutInMs=3E4;var d=function(c){function b(a,b){c.call(this,a);this._settings=b}__extends(b,c);b.prototype.ToggleOkButton=function(a){$(".ccl-button-ok, .ccl-button-pause").each(function(){var b=$(this);a?(void 0===this.previouslyDisabled&&(b.attr("disabled")?
this.previouslyDisabled=!0:this.previouslyDisabled=!1),b.prop("disabled",a)):b.prop("disabled",this.previouslyDisabled)})};b.prototype.ClearResults=function(a){};b.prototype.AllowHide=function(){};b.prototype.isSecure=function(){return"https:"==window.location.protocol};b.prototype.trimStart=function(a,b){if(!a||0==a.length)return a;b=b?b:" ";for(var c=0;c<a.length&&a.charAt(c)==b;c++);return a.substring(c)};b.prototype.trimEnd=function(a,b){if(!a||0==a.length)return a;b=b?b:" ";for(var c=a.length-
1;0<=c&&a.charAt(c)==b;c--);return a.substring(0,c+1)};b.prototype.trim=function(a,b){return a&&0!=a.length?this.trimEnd(this.trimStart(a,b),b):a};return b}(c.DomElementClass);c.ItemPickerBase=d})(CCL||(CCL={}));
(function(c){var d=function(d){function b(a,b){d.call(this,a,b);this._stateHidden=$("#"+this._settings.StateHiddenFieldClientId);this._resultsTable=$("#"+this._settings.FileListTableClientId);this._fileListItemTemplate=$("#"+this._settings.FileListItemTemplateId).html();this.Init();this.Trigger(c.PickerEvent.Initialized);0<this.GetFiles().length&&this.Trigger(c.PickerEvent.ResultsChanged,{results:this.GetFiles()})}__extends(b,d);b.prototype.Init=function(){};b.prototype.getParameterValue=function(a,
b){for(var c=[],e=a.slice(a.indexOf("?")+1).split("&"),d=0;d<e.length;d++)a=e[d].split("="),c.push(a[0]),c[a[0]]=a[1];return c[b]};b.prototype.removeParameter=function(a,b){var c=a.split("#"),e=c[0].split("?");if(2<=e.length){a=e.shift();e=e.join("?");b=encodeURIComponent(b)+"=";e=e.split(/[&;]/g);for(var d=e.length;0<d--;)-1!==e[d].lastIndexOf(b,0)&&e.splice(d,1);a=a+"?"+e.join("&");c[1]&&(a+="#"+c[1])}return a};b.prototype.ReplaceUrlToken=function(a,b,c){var e="{"+b+"}";null!=c&&""!=c?-1!=a.indexOf(e)&&
(a=a.replace(e,c)):a=this.removeParameter(a,b);return a};b.prototype.ReplaceUrlTokens=function(a,b,c){a=this.ReplaceUrlToken(a,this._settings.FileRepoFileNameToken,encodeURIComponent(b));return a=this.ReplaceUrlToken(a,this._settings.FileRepoFileIdToken,encodeURIComponent(c))};b.prototype.GetFullFileRepoUrl=function(){return this.trimEnd(this._settings.FileRepoProxy,"/")};b.prototype.ProcessFileName=function(a){if(/^\.([^\.]+)$/.test(a)){var b=new Date,c=b.getFullYear(),d=b.getMonth()+1;d=10>d?"0"+
d.toString():d.toString();b=b.getDate();a=c+"-"+d+"-"+(10>b?"0"+b.toString():b.toString())+a}return a};b.prototype.GetFileRepoUrlForFileName=function(a){a=this.ReplaceUrlTokens(this.GetFullFileRepoUrl(),a,"");a+=-1<a.indexOf("?")?"&":"?";return a+="ts="+(new Date).getTime()};b.prototype.GetFileRepoUrl=function(a){a=this.ReplaceUrlTokens(this.GetFullFileRepoUrl(),"",a);a+=-1<a.indexOf("?")?"&":"?";return a+="ts="+(new Date).getTime()};b.prototype.ValidateSelectedFiles=function(a,b){for(var c=a.length-
1;0<=c;c--)null!=b&&0<b.length&&(-1===a[c].name.indexOf(".")||-1===$.inArray(a[c].name.split(".").pop().toLowerCase(),b))&&(a[c].error=this._settings.ErrorTextNotAllowedFileType),a[c].error||(0<this._settings.MaxNumberOfFiles&&c>=this._settings.MaxNumberOfFiles?a[c].error=this._settings.MaxNumberOfFilesExceededText:a[c].size>this._settings.MaxFileSize?a[c].error=this._settings.FileSizeExceededText:a[c].size<this._settings.MinFileSize&&(a[c].error=this._settings.FileSizeTooSmallText));this.SetFiles(a);
return a};b.prototype.SetFiles=function(a){this._stateHidden.val(JSON.stringify(a))};b.prototype.GetFiles=function(){return JSON.parse(this._stateHidden.val()||"[]")};b.prototype.UpdateFileList=function(a){var b=this;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);0===a.find(".error").length&&a.remove()});if(a.length){this._settings.ReadOnly||this._chooseButton.hide();for(var d=0;d<a.length;d++){var f=a[d],k=this._fileListItemTemplate.replace("{file.name}",c.CommonFunctions.htmlEncode(f.name)).replace("{file.bytes}",
c.Utils.FormatFileSize(f.size||0,this._settings.KbText,this._settings.MbText));k=$(k);var l=k.find("td.preview img");k.find("td.delete button").click(function(a){a=$(a.target).closest("tr");var c=a.find("td.name > span").text();b.RemoveFile(c,a);return!1});f.thumbnailUrl?l.attr("src",f.thumbnailUrl):l.attr("src",f.icon).attr("height","24").attr("width","24");this._resultsTable.append(k)}}else this._settings.ReadOnly||this._resultsTable.find("tbody").find("tr").length||this._chooseButton.show()};b.prototype.GetSelectedFile=
function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].name===a)return this._selectedFiles[b]};b.prototype.GetSelectedFileByFileId=function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].fileId===a)return this._selectedFiles[b]};b.prototype.RemoveSelectedFile=function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].name===a)return this._selectedFiles.splice(b,
1)[0]};b.prototype.RemoveSelectedFileByFileId=function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].id===a)return this._selectedFiles.splice(b,1)[0]};b.prototype.RemoveFile=function(a,b){for(var e=this.GetFiles(),d=0===b.siblings().length,f=e.length;f--;)if(e[f].name===a){e[f].deleteUrl&&$.ajax({url:e[f].deleteUrl+"&"+this._settings.MethodOverrideQueryStringParam+"=delete",type:"DELETE",xhrFields:{withCredentials:!0}});e.splice(f,1);break}e=this.ValidateSelectedFiles(e,
null);b.remove();this.RemoveSelectedFile(a);this.Trigger(c.PickerEvent.ResultsChanged,{results:e});a=!e.length&&!this._settings.MultiselectAllowed;d=d&&this._settings.MultiselectAllowed&&this.AllUploadsFinished();if(a||d)this._settings.ReadOnly||this._chooseButton.show(),this.HandleStopped({results:[]})};b.prototype.AllUploadsFinished=function(){var a=!0;this._selectedFiles&&this._selectedFiles.forEach(function(b){b.error||(a=!1)});return a};b.prototype.HandleStopped=function(a){this.stopPolling();
this.Trigger(c.PickerEvent.Stopped,a);this.ToggleOkButton(!1)};b.prototype.SetFileErrorText=function(a,b){a.error=b;this.SetFileStatusText(a,b);this.GetRowInResultsTableByText(a.name).find("td.status").addClass("error");this.GetRowInResultsTableByText(a.name).find("td.status span").addClass("label").addClass("label-important")};b.prototype.SetFileStatusText=function(a,b){this.GetRowInResultsTableByText(a.name).find("td.status > span").text(b)};b.prototype.UpdateFileSize=function(a){this.GetRowInResultsTableByText(a.name).find("td.size").text(c.Utils.FormatFileSize(a.size||
0,this._settings.KbText,this._settings.MbText))};b.prototype.UpdateFileName=function(a,b){for(var c=this.GetFiles(),e=c.length;e--;)if(c[e].name===b){c[e].name=a.name;break}this.SetFiles(c);this.GetFileNameElement(b).text(a.name)};b.prototype.GetRowInResultsTableByText=function(a){return this.GetFileNameElement(a).closest("tr")};b.prototype.GetFileNameElement=function(a){return this._resultsTable.find("td.name > span").filter(function(){return $(this).text()===a})};b.prototype.HandleRequestError=
function(){var a=this;this.stopPolling();this._selectedFiles.forEach(function(b){a.SetFileErrorText(b,a._settings.UploadErrorText)});this.HandleStopped({results:this._uploadedFiles})};b.prototype.HandleError=function(a){this.SetFileErrorText(a,this._settings.UploadErrorText);this.AllUploadsFinished()&&0<this._uploadedFiles.length&&this.HandleStopped({results:this._uploadedFiles})};b.prototype.CheckFileDownloadsComplete=function(){var a=this;if(!this._isPolling){this._isPolling=!0;var b=[],c=0;this._selectedFiles.forEach(function(a){!a.error&&
a.signedId&&a.isNew&&(b.push(a.signedId),c++)});if(1===b.length)var d=this.GetFileRepoUrl(b[0]);else if(1<=b.length){d=this.GetFileRepoUrl("batch");var f=b.join()}else this.CompleteFileDownloads();if(d){var l={};f&&(l[this._settings.FileRepoHeaderFileBatch]=f);$.ajax({url:d+"&"+this._settings.FileRepoInfoParam+"=true",type:"get",dataType:"json",headers:l,xhrFields:{withCredentials:!0},success:function(b){var c=!1;b?(b=[].concat(b),b.forEach(function(b){if(b&&b.status)if("DownloadCompleted"===b.status||
"Available"===b.status){var e=a.RemoveSelectedFileByFileId(b.fileId);e&&(e.id=b.fileId,e.signedId=b.signature,e.name=b.fileName,e.type=b.mimeType,e.size=b.fileSize,e.fileUrl=a.GetFileRepoUrl(b.signature),e.deleteUrl=a.GetFileRepoUrl(b.signature),a._uploadedFiles.push(e),a.SetFileStatusText(e,""))}else"Error"===b.status?(e=a.RemoveSelectedFileByFileId(b.fileId),a.SetFileErrorText(e,b.statusMessage)):"Downloading"===b.status&&(e=a.GetSelectedFile(b.fileName),a.SetFileStatusText(e,a._settings.FileIsBeingDownloadedText+
" "+b.statusProgress+"%"));else c=!0})):c=!0;c?a.HandleRequestError():a.AllUploadsFinished()?a.CompleteFileDownloads():a._checkFileDownloadsCompleteTask=setTimeout(function(){a._isPolling=!1;a.CheckFileDownloadsComplete()},1E3)},error:function(){a.HandleRequestError()}})}}};b.prototype.CompleteFileDownloads=function(){this.stopPolling();var a=this.ValidateSelectedFiles(this._uploadedFiles,null);this.UpdateFileList(a);this.Trigger(c.PickerEvent.ResultsChanged,{results:a});this.HandleStopped({results:a});
this._resultsTable.find("tbody").find("tr").length&&this._settings.MultiselectAllowed&&this.Trigger(c.PickerEvent.ResultsChanged,{results:[{}]})};b.prototype.StartUploadFiles=function(a){var b=this;this.ToggleOkButton(!0);this.Trigger(c.PickerEvent.Started);this.Trigger(c.PickerEvent.Added,{files:a});this._selectedFiles=a;this._uploadedFiles=[];var d=!1;this._selectedFiles.forEach(function(a){if(a.error)b.SetFileErrorText(a,a.error);else if(a.fileUrl){b.SetFileStatusText(a,b._settings.FileIsBeingDownloadedText+
" 0%");var e=b.GetFileRepoUrlForFileName(a.name)+"&"+b._settings.FileRepoHeaderDownloadFrom+"=1",f=b.buildDownloadRequestData(a);f&&(e=e+"&"+f);d=!0;c.CommonFunctions.safeAjaxPost({url:e,dataType:"json",xhrFields:{withCredentials:!0},success:function(c){c&&c.fileId&&c.signature?(a.id=c.fileId,a.signedId=c.signature,a.isNew=!0,b.CheckFileDownloadsComplete()):b.HandleError(a)},error:function(){b.HandleError(a)}})}});a&&a.length&&!d&&this._settings.MultiselectAllowed&&(this.SetFiles([]),this.HandleStopped({results:[]}),
this.Trigger(c.PickerEvent.ResultsChanged,{results:[{}]}))};b.prototype.buildDownloadRequestData=function(a){};b.prototype.AddAdditionalHeadersToDownloadFile=function(a,b){};b.prototype.ClearResults=function(a){if(a){var b=this.GetFiles();a.forEach(function(a){for(var c=b.length;c--;)if(b[c].id===a.id){b.splice(c,1);break}});this.SetFiles(b)}};b.prototype.stopPolling=function(){this._checkFileDownloadsCompleteTask&&clearTimeout(this._checkFileDownloadsCompleteTask);this._checkFileDownloadsCompleteTask=
null;this._isPolling=!1};return b}(c.ItemPickerBase);c.FilePickerBase=d})(CCL||(CCL={}));(function(c){var d=function(){function c(){}c.FormatFileSize=function(b,a,c){return 1048576<=b?(b/1048576).toFixed(2)+" "+c:(b/1024).toFixed(2)+" "+a};return c}();c.Utils=d})(CCL||(CCL={}));var Utils;
(function(c){var d=function(){return function(){this.newGuid=function(){function c(b){var a=(Math.random().toString(16)+"000000000").substr(2,8);return b?"-"+a.substr(0,4)+"-"+a.substr(4,4):a}return c()+c(!0)+c(!0)+c()}}}();c.GuidFactory=d;d=function(){return function(c){var b=this;this.value=c;this.getParamValue=function(a){for(var c=[],d=b.value.slice(b.value.indexOf("?")+1).split("&"),f=0;f<d.length;f++){var k=d[f].split("=");c.push(k[0]);c[k[0]]=k[1]}return c[a]};this.appendOrUpdateParam=function(a,
c){var e=new RegExp("([?&])"+a+"=.*?(&|$)","i"),d=-1!==b.value.indexOf("?")?"&":"?";b.value.match(e)?b.value=b.value.replace(e,"$1"+a+"="+c+"$2"):b.value=b.value+d+a+"="+c}}}();c.Url=d})(Utils||(Utils={}));var UrlUtilities=Utils;
(function(c){var d=function(d){function b(a,b){d.call(this,a,b);this.uploaderWindowWidth=660;this.uploaderWindowHeight=552;this.pickerWindow=null;this.oneDrivePickerActions={fileSelected:0}}__extends(b,d);b.prototype.Init=function(){var a=this;this._settings.ReadOnly||(window.addEventListener("message",function(b){if(b.origin===a._settings.PickerDomain&&b.data.isOneDriveForBusinessPickerResult&&b.data.action===a.oneDrivePickerActions.fileSelected)a.onFileSelected(b.data)}),this._chooseButton=$("#"+
this._settings.ButtonId),this._chooseButton.on("click",function(){a.pickerWindowIsAlreadyOpened()?a.pickerWindow.focus():a.pickerWindow=window.open(a.getPickerUrl(),"OneDrivePicker",a.getOnedriveFilePickerWindowSettings())}),this._elem.append(this._chooseButton));this.UpdateFileList(this.GetFiles())};b.prototype.getPickerUrl=function(){var a=new UrlUtilities.Url(this._settings.PickerUrl);a.appendOrUpdateParam("mode",encodeURIComponent(JSON.stringify({allowToSelectMultipleFiles:this._settings.MultiselectAllowed})));
return a.value};b.prototype.onFileSelected=function(a){if(!(this._elem.hasClass("disabled")||0<this._resultsTable.find("tr").length)){a=this.ConvertSelectedFiles(a);for(var b=a.length-1;0<=b;b--)a[b].name=this.ProcessFileName(a[b].name);this.ValidateSelectedFiles(a,null);this.UpdateFileList(a);0<a.length&&this.StartUploadFiles(a)}};b.prototype.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-this.uploaderWindowWidth)/2};b.prototype.getWindowTopCoordinate=function(){return(window.screenY+
window.outerHeight-this.uploaderWindowHeight)/2};b.prototype.getWindowPositionAndSizeSettingString=function(a,b){var c=this.getWindowLeftCoordinate(),e=this.getWindowTopCoordinate();return"width = "+a+", height = "+b+", left = "+c+", top = "+e};b.prototype.getOnedriveFilePickerWindowSettings=function(){return this.getWindowPositionAndSizeSettingString(this.uploaderWindowWidth,this.uploaderWindowHeight)+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};b.prototype.pickerWindowIsAlreadyOpened=
function(){return this.pickerWindow&&!this.pickerWindow.closed};b.prototype.ConvertSelectedFiles=function(a){var b=this,c=a.files;return c?$.map(c,function(c,e){return{name:c.name,size:c.size,thumbnailUrl:b._settings.DefaultThumbnailUrl,fileUrl:c.url,icon:b._settings.DefaultThumbnailUrl,authToken:a.authToken}}):[]};b.prototype.ClearResults=function(a){var b=!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(b=
!1,a.addClass("clearme"))});b&&this._chooseButton.show();d.prototype.ClearResults.call(this,a);this.Trigger(c.PickerEvent.ResultsChanged,{results:[]})};b.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};b.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoDownloadFromParam+"="+encodeURIComponent(a.fileUrl)+"&"+this._settings.FileRepoSourceTypeParam+"="+this._settings.SourceType+"&"+this._settings.FileRepoFileSizeParam+"="+
a.size};return b}(c.FilePickerBase);c.OneDrivePicker=d})(CCL||(CCL={}));
(function(c){var d=function(){function a(){}a.show="overlayModal:show";a.hide="overlayModal:hide";return a}();c.OverlayModalEvents=d;var f=function(){return function(){}}();c.OverlayModalCloseContext=f;var b=function(){function b(a,c,e){this.id=a;this.controls=e;this._$document=$(document);this._$window=$(window);this.Params={};a=e.container.data(b.settingsAttribute)||{IsIos:!1,ResizeTimeoutInMilliseconds:10};"string"===typeof c?this._settings={}:$.extend(a,c);this._settings=a;this.Params.Url=this._settings.Url;
this._contentLoader=this.GetContentLoader(this._settings.Mode);this.initialize(e);this._activeElement=e.container.get(0);this._settings.PreferredWidth=this._settings.PreferredWidth||800;this.renderHeader();e.container.data(b.settingsAttribute,this._settings)}b.prototype.renderHeader=function(){if(this._settings.Title){this.controls.container.find("."+c.OverlayModal.CssClasses.Header).length||(this._titleTemplate="<div class='"+c.OverlayModal.CssClasses.Header+"'><h2>"+(this._settings.Title||"")+'</h2><a class="'+
c.OverlayModal.CssClasses.Close+'">Close</a></div>',this.controls.contentContainer.before($(this._titleTemplate)));var a=this.controls.container.find("."+c.OverlayModal.CssClasses.Close);a.off("click");a.click(function(){this.close(e.CloseButtonClicked)}.bind(this))}};b.prototype.setParams=function(a){a&&$.extend(this.Params,a)};b.prototype.setContentMinSize=function(a,b){this._settings.MinContentWidth=a;this._settings.MinContentHeight=b;this.adjustWindowSize()};b.prototype.setPreferredSize=function(a,
b){0<a&&(this._settings.PreferredWidth=a);0<b&&(this._settings.PreferredHeight=b);this.adjustWindowSize()};b.prototype.clearContent=function(){this.controls.contentContainer.empty()};b.prototype.getId=function(){return this.id};b.prototype.onModalKeyUp=function(a){a.which===c.CommonConstants.keyCodes.escape&&c.OverlayModal.instance&&c.OverlayModal.instance.close(e.EscapeKeyPressed)};b.prototype.initialize=function(a){this._$document.on("keyup",this.onModalKeyUp);this._$window.on("resize",this.adjustWindowSizeWithTimeout.bind(this));
this._activeElement=this.controls.container.get(0);if(this._contentLoader)this._contentLoader.onInit(this.controls.contentContainer,this.adjustWindowSize.bind(this),this.Params);null==navigator.userAgent.match(/iPod/)&&$(this.controls.contentContainer).perfectScrollbar({suppressScrollX:!0})};b.prototype.getIsOpened=function(){return this._isOpened};b.prototype.adjustWindowSizeWithTimeout=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=setTimeout(this.adjustWindowSize.bind(this),
this._settings.ResizeTimeoutInMilliseconds)};b.prototype.adjustWindowSize=function(){var a=this._settings,b=this.controls;this.controls.wrapperContainer.removeAttr("style");this.controls.contentContainer.removeAttr("style");var e=0;b.wrapperContainer.children().not(b.contentContainer).each(function(){e+=$(this).outerHeight()});if(this._$window.width()>c.CommonConstants.mediaScreenSizes.mobile){a.PreferredWidth&&0<a.PreferredWidth&&b.wrapperContainer.width(Math.min(a.PreferredWidth,this._$window.width()-
40));var d=b.contentContainer.outerHeight(!0)-b.contentContainer.height();if(a.PreferredHeight&&0<a.PreferredHeight){var f=b.wrapperContainer.outerHeight()-b.contentContainer.height();b.contentContainer.outerHeight(a.PreferredHeight-f+d,!0)}else b.contentContainer.height(b.wrapperContainer.outerHeight()-e-d);b.contentContainer.css({width:a.MinContentWidth&&0<a.MinContentWidth?a.MinContentWidth:void 0,minWidth:a.MinContentWidth&&0<a.MinContentWidth?a.MinContentWidth:void 0,minHeight:a.MinContentHeight&&
0<a.MinContentHeight?a.MinContentHeight:void 0});a=b.wrapperContainer.outerHeight()-b.headerContainer.outerHeight();b.contentContainer.outerHeight()-1>a&&b.contentContainer.outerHeight(a);a=b.wrapperContainer.height()/2;d=b.wrapperContainer.width()/2;b.wrapperContainer.css({left:"50%","margin-left":-1*d,"margin-top":-1*a,top:"50%"})}else b.contentContainer.outerHeight(b.wrapperContainer.height()-e);null==navigator.userAgent.match(/iPod/)&&$(b.contentContainer).perfectScrollbar("update")};b.prototype.toggleContentAreaFrame=
function(a){c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessage(a?c.CommonWindowMessages.MessageNames.expandContentAreaFrame:c.CommonWindowMessages.MessageNames.collapseContentAreaFrame));IframeResizer.reportSetIframeDefaultHeight()};b.prototype.open=function(){b.instance=this;this.toggleContentAreaFrame(!0);!this._isOpened&&this._settings.IsTopFrame&&(this.adjustWindowSize(),this.openModal())};b.prototype.openModal=function(){var a=this.controls;this._activeElement&&
$(this._activeElement).removeClass(c.OverlayModal.CssClasses.IsActive);if(this._contentLoader)this._contentLoader.onOpen(this.controls.contentContainer,this.adjustWindowSize.bind(this),this.Params);else this.adjustWindowSizeWithTimeout();this._lastWindowScroll=this._$window.scrollTop();$("html").addClass(c.OverlayModal.CssClasses.Overlay);this.controls.container.addClass(c.OverlayModal.CssClasses.IsActive);this.setFocus();this._$document.trigger(c.OverlayModalEvents.show,[this._activeElement,this.id]);
a.contentContainer.toggleClass(c.OverlayModal.CssClasses.WebkitOverflow)};b.prototype.close=function(a){if(b.instance){a||(a=e.FunctionExecuted);b.instance=null;this.controls.contentContainer.removeClass(c.OverlayModal.CssClasses.WebkitOverflow);this._$window.scrollTop(this._lastWindowScroll);$("html").removeClass(c.OverlayModal.CssClasses.Overlay);if(this._activeElement){$(this._activeElement).removeClass(c.OverlayModal.CssClasses.IsActive);var d=new f;d.closeType=a;d.activeElement=this._activeElement;
d.id=this.id;this._$document.trigger(c.OverlayModalEvents.hide,d);this._activeElement=null}this.toggleContentAreaFrame(!1);this.removeFocus();this._$document.off("keyup",this.onModalKeyUp)}};b.prototype.setFocus=function(){this._activeElement&&(this._lastActive=document.activeElement,this._activeElement.focus())};b.prototype.removeFocus=function(){this._lastActive&&this._lastActive.focus()};b.prototype.GetContentLoader=function(b){var e;b==c.OverlayLoadMode.AjaxStatic&&(e=new a);return e};b.settingsAttribute=
"settings";b.CssClasses={Container:"ccl-overlay-modal",IsActive:"is-active",WebkitOverflow:"ccl-modal-webkit-overflow",Content:"ccl-overlay-modal-content",Wrapper:"ccl-overlay-modal-wrapper",Overlay:"ccl-overlay-modal-has-overlay",OverlayIos:"ccl-overlay-modal-has-overlay-ios",Close:"ccl-overlay-modal-close",Header:"ccl-overlay-modal-header"};return b}();c.OverlayModal=b;d=function(){function a(){}a.prototype.onInit=function(a,b,c){};a.prototype.onOpen=function(a,b,c){};return a}();c.BaseContentLoader=
d;var a=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.onInit=function(a,b,c){c&&c.Url&&$.ajax({type:"POST",url:c.Url,data:c,success:function(c){a.html($(c).text());b()},error:function(a,b,c){alert(c)}})};return b}(d);c.StaticAjaxContentLoader=a;(function(a){a[a.FunctionExecuted=0]="FunctionExecuted";a[a.CloseButtonClicked=1]="CloseButtonClicked";a[a.EscapeKeyPressed=2]="EscapeKeyPressed"})(c.OverlayModalCloseType||(c.OverlayModalCloseType={}));var e=c.OverlayModalCloseType;
d=function(){function a(){c.CommonFunctions.attachPostMessageEventListener($(window),[c.CommonWindowMessages.MessageNames.contentAreaFrameHasExpanded],function(a){c.OverlayModal.instance&&!c.OverlayModal.instance.getIsOpened()&&setTimeout(c.OverlayModal.instance.openModal(),20)})}a._initEventListener=new a;return a}();c.OverlayModalListener=d;(function(a){a.fn.overlayModal=function(c,e){var d={container:this,contentContainer:this.find("."+b.CssClasses.Content),wrapperContainer:this.find("."+b.CssClasses.Wrapper),
headerContainer:this.find("."+b.CssClasses.Header)};c instanceof Object&&a.extend(void 0,c);d=new b(d.container.get(0).id,c,d);d.Params=e;switch(c){case "open":d.open();break;case "close":d.close()}return this}})(jQuery)})(CCL||(CCL={}));var PopupInitFailureReason;(function(c){c[c.BrowserNotSupported=1]="BrowserNotSupported";c[c.ExternalServiceNotAvailable=2]="ExternalServiceNotAvailable"})(PopupInitFailureReason||(PopupInitFailureReason={}));
var PopupInitFailureEventArgs=function(){return function(c,d){this.failureReason=c;this.translation=d}}(),PopupCallback=function(){return function(c,d){this.onMessageReceived=c;this.onPopupClosed=d}}(),Popup=function(){function c(d,f){var b=this;this.settings=d;this.browserSniffer=f;this.popupWidth=660;this.popupHeight=552;this.popupWindow=null;this.subscriberCallbacks=[];this.windowOpenCheckIntervalInMilliseconds=1E3;this.open=function(){b.popupWindowIsAlreadyOpened()?b.popupWindow.focus():(b.popupWindow=
window.open(b.getPopupUrlWithTarget(),b.getInitialPopupTitle(),b.getPopupWindowSettings()),b.timerForCheckingOpenWindow=setInterval(b.notifyIfWindowWasClosed,b.windowOpenCheckIntervalInMilliseconds))};this.subscribe=function(a){b.subscriberCallbacks.push(a)};this.popupWindowIsAlreadyOpened=function(){return b.popupWindow&&!b.popupWindow.closed};this.getPopupUrlWithTarget=function(){var a=new Utils.Url(b.getPopupUrl());if(a.getParamValue(c.target))throw"You cannot set query parameter: ["+c.target+
"] in popupUrl.";a.appendOrUpdateParam(c.target,encodeURI(b.popupIdentifier));return a.value};this.listenForPostMessages=function(){window.addEventListener("message",b.onPostMessageReceived)};this.getPopupWindowSettings=function(){var a=b.getPopupCoordinates();return"width="+a[0]+", height="+a[1]+", left="+a[2]+", top="+a[3]+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};this.getPopupCoordinates=function(){return[b.popupWidth,b.popupHeight,b.getWindowLeftCoordinate(),
b.getWindowTopCoordinate()]};this.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-b.popupWidth)/2};this.getWindowTopCoordinate=function(){return(window.screenY+window.outerHeight-b.popupHeight)/2};this.isProxyIframeRequired=function(){return b.settings.crossCommunicationProxyUrl&&b.browserSniffer.isInternetExplorerAnyVersion()};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("cross_communication_proxy")){var a=b.prepareIframe("cross_communication_proxy");
document.body.appendChild(a)}};this.prepareIframe=function(a){var c=document.createElement("iframe");c.id=a;c.style.display="none";c.src=b.settings.crossCommunicationProxyUrl;return c};this.notifyIfWindowWasClosed=function(){b.popupWindow&&b.popupWindow.closed&&(b.timerForCheckingOpenWindow=clearInterval(b.timerForCheckingOpenWindow),b.popupWindow=null,b.notifyAboutClosing())};this.notifyAboutClosing=function(){for(var a=0;a<b.subscriberCallbacks.length;a++){var c=b.subscriberCallbacks[a];if(c.onPopupClosed)c.onPopupClosed()}};
this.onPostMessageReceived=function(a){b.isPostMessageForUs(a)&&b.processPostMessage(a)};this.isPostMessageForUs=function(a){return a&&a.origin===b.settings.popupDomain&&a.data&&a.data[c.target]===b.popupIdentifier};this.popupIdentifier=(new Utils.GuidFactory).newGuid();if(objectState.isNullOrUndefined(this.settings))throw"Popup requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"Popup requires browserSniffer to be passed. Please provide it.";
this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered();this.listenForPostMessages()}c.prototype.getPopupUrl=function(){return this.settings.popupUrl};c.prototype.getInitialPopupTitle=function(){return"Title"};c.prototype.processPostMessage=function(c){for(var d=0;d<this.subscriberCallbacks.length;d++){var b=this.subscriberCallbacks[d];if(b.onMessageReceived)b.onMessageReceived(c.data)}};c.target="target";return c}();
(function(c){var d=function(){function c(){this.lastPromise=$.Deferred().resolve()}c.prototype.enqueue=function(b){var a=$.Deferred();this.lastPromise.always(function(){b().always(function(){a.resolve()})});this.lastPromise=a};return c}();c.PromiseQueue=d})(CCL||(CCL={}));
(function(c){(function(c){c.toDate=function(c){return c?new Date(c.Year,c.Month-1,c.Day,c.Hour,c.Minute):void 0};c.toDateWithSeconds=function(c){return c?new Date(c.Year,c.Month-1,c.Day,c.Hour,c.Minute,c.Second):void 0};c.fromDate=function(c){return c?{Year:c.getFullYear(),Month:c.getMonth()+1,Day:c.getDate(),Hour:c.getHours(),Minute:c.getMinutes()}:void 0};c.fromDateWithSeconds=function(c){return c?{Year:c.getFullYear(),Month:c.getMonth()+1,Day:c.getDate(),Hour:c.getHours(),Minute:c.getMinutes(),
Second:c.getSeconds()}:void 0}})(c.SerializableDateTimeConverter||(c.SerializableDateTimeConverter={}))})(CCL||(CCL={}));
(function(c){var d=function(){function d(b,a){this._id=b;this._settings=a}d.prototype.toggleContentAreaFrame=function(b){c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessage(b?c.CommonWindowMessages.MessageNames.expandContentAreaFrame:c.CommonWindowMessages.MessageNames.collapseContentAreaFrame));IframeResizer.reportSetIframeDefaultHeight()};d.prototype.init=function(){this._settings.OpenOnClick&&this.fancyboxInit();this.imageClickInit();this.slideshowInit()};
d.prototype.fancyboxInit=function(){var b=this;$("#ad-gallery_"+b._id).on("click",".ad-image",function(){var a=$(this).find("img").attr("src"),c=null,d=null;a.split("/");if($(this).parent().find(".ad-image-description")){c=$(this).parent().find(".ad-description-title");var f=c.text();c&&(c=c.html());""!=f&&(c="<big>"+c+"</big>");d=$(this).parent().find(".ad-image-description span");var k=d.text();d&&(d=d.html());d&&0<=d.indexOf("IMAGE_LINK_")&&(k=d="");""!=k&&(""!=f&&(c+="<br>"),d="<i>"+d+"</i>")}$.fancybox.open({href:a,
beforeLoad:function(){b.toggleContentAreaFrame(!0);this.title=b._settings.ShowTitle?(c||"")+(d||""):""},beforeClose:function(){b.toggleContentAreaFrame(!1)},lang:{error_request_cannot_be_loaded:b._settings.Terms.FancyboxErrorRequestCannotBeLoaded,error_try_again_later:b._settings.Terms.FancyboxErrorTryAgainLater,close:b._settings.Terms.FancyboxClose,next:b._settings.Terms.FancyboxNext,previous:b._settings.Terms.FancyboxPrevious,start_slideshow:b._settings.Terms.FancyboxStartSlideshow,toggle_size:b._settings.Terms.FancyboxToggleSize,
pause_slideshow:b._settings.Terms.FancyboxPauseSlideshow}})})};d.prototype.imageClickInit=function(){$("#ad-gallery_"+this._id).on("click",".ad-image",function(){$(this).find("img").attr("src");var b;if($(this).find(".ad-image-description")&&((b=$(this).find(".ad-description-title"))&&b.text(),(b=$(this).find("span"))&&(b=b.text()),""!=b)){var a=window.location.href.trim();0<=b.indexOf("IMAGE_LINK_TAB:")?(b=b.substring(15).trim(),a!=b&&window.open(b,"_blank")):0<=b.indexOf("IMAGE_LINK_PAR:")&&(b=
b.substring(15).trim(),a!=b&&window.open(b,"_self"))}})};d.prototype.slideshowInit=function(){$("#ad-gallery_"+this._id).adGallery({loader_image:this._settings.LoaderImageUrl,width:this._settings.Width,height:this._settings.Hight,start_at_index:this._settings.StartAtIndex,animation_speed:this._settings.AnimationSpeed,update_window_hash:this._settings.UpdateWindowHash,hooks:{displayDescription:this._settings.ShowTitle?null:function(b){b.css("display","none")}},effect:this._settings.TransitionType,
slideshow:{enable:this._settings.Enable,autostart:this._settings.Autostart,start_label:this._settings.Terms.StartLabel,stop_label:this._settings.Terms.StopLabel,speed:this._settings.Speed}})};return d}();c.Slideshow=d})(CCL||(CCL={}));
(function(c){var d=function(d){function b(a,b){d.call(this,a);this.collapsedDataAttribute="data-collapsed";this.scrollTopAnimationTimeMilliseconds=200;this.settings=b}__extends(b,d);b.prototype.renderShowMoreTextSection=function(a,b,d,f,k){var e=this;0<this.settings.MaxTextHeight&&0<this.settings.CollapsedTextHeight&&setTimeout(function(){var g=e.settings.CollapsedTextHeight;if(e.hasEnoughHeightForRenderingShowMore(d)){a.addClass(e.settings.CssClasses.Container).empty();var h=$("<button>").attr({type:"button",
"aria-controls":b.prop("id"),"aria-expanded":"false"}).click(function(f){e.expandText({clickablePlaceholder:a,toggleButton:h,collapsibleContainer:b,collapseHeight:g,collapse:!e.isCollapsed(a),contentPanel:d},function(){k(b,a)});c.CommonFunctions.isOnScreen(b,1,1)||(e.settings.EnableAnimation?$("html, body").animate({scrollTop:b.offset().top},e.scrollTopAnimationTimeMilliseconds,function(){k(b,a)}):$("html, body").scrollTop(b.offset().top))});a.append($("<span>").addClass(e.settings.CssClasses.Line)).append(h).append($("<span>").addClass(e.settings.CssClasses.Line));
e.expandText({clickablePlaceholder:a,toggleButton:h,collapsibleContainer:b,collapseHeight:g,collapse:!f,contentPanel:d},function(){k(b,a)});a.show()}else a.hide(),b.css("max-height","");d.show()})};b.prototype.hasEnoughHeightForRenderingShowMore=function(a){return a.height()>this.settings.MaxTextHeight};b.prototype.expand=function(a,b){a.css("max-height","");b.removeAttr(this.collapsedDataAttribute);b.find("button").attr("aria-expanded","true").text(this.settings.Resources.ShowLess)};b.prototype.isCollapsed=
function(a){return!!a.attr(this.collapsedDataAttribute)};b.prototype.expandText=function(a,b){a.collapse?(a.clickablePlaceholder.attr(this.collapsedDataAttribute,1),a.toggleButton.attr("aria-expanded","false").text(this.settings.Resources.ShowMore)):(a.clickablePlaceholder.removeAttr(this.collapsedDataAttribute),a.toggleButton.attr("aria-expanded","true").text(this.settings.Resources.ShowLess));this.settings.EnableAnimation?a.collapsibleContainer.animate({"max-height":(a.collapse?a.collapseHeight:
a.contentPanel.outerHeight())+"px"},{duration:this.scrollTopAnimationTimeMilliseconds,complete:a.collapse?b:function(){a.collapsibleContainer.css("max-height","");b()}}):a.collapsibleContainer.css("max-height",a.collapse?a.collapseHeight+"px":"")};return b}(c.DomElementClass);c.TextExpander=d})(CCL||(CCL={}));
(function(c){var d=function(){function c(b,a){this._controls={link:$(),label:$(),hidden:$()};this._settings=b;this._controls.link=$("#"+b.LinkClientId);this._controls.label=this._controls.link.prev();this._controls.hidden=this._controls.link.next();this.changeStateFunction=a;this._isActive=b.IsInitiallyActive;var c=this;this._controls.link.click(function(a){c._controls.link.getIfHyperLinkEnabled()&&(c.changeStateFunction?(c._controls.link.toggleHyperlink(!1),c.changeStateFunction({isActive:!c._isActive,
changeSuccess:!0},function(a){a.changeSuccess&&(c._isActive=a.isActive,c.applyState(c._isActive));c._controls.link.toggleHyperlink(!0)})):(c._isActive=!c._isActive,c.applyState(c._isActive)));a.preventDefault()})}c.prototype.applyState=function(b){var a=b?this._settings.ActiveState:this._settings.InactiveState;this._controls.link.text(a.ActionText);this._controls.label.removeClass().addClass(a.CssClass).text(a.Title);this._controls.hidden.val(b?"1":"0")};return c}();c.ToggleActivation=d})(CCL||(CCL=
{}));(function(c){var d=function(){function c(){}c.GetFunctionByName=function(b,a){if(void 0!==b&&null!==b){if(void 0===a||null===a)a=window;b=b.split(".");for(var c=b.pop(),d=0;d<b.length;d++)a=a[b[d]];return a[c]}};return c}();c.Callbacks=d})(CCL||(CCL={}));(function(c){var d=function(){function d(b){this.settings=b;this.inlineTextExpander=new c.InlineTextExpander(this.settings.InlineTextExpanderSettings)}d.prototype.init=function(){};return d}();c.CommentModuleManager=d})(CCL||(CCL={}));
(function(c){var d=function(d){function b(a){d.call(this,a.DomElementClientId);this._stringToDateRegex=/-?\d+/;this._addCommentInputArea=$();this._furtherCommentsAreDisabledInfoPanel=$();this._animationSpeed=200;this._wasControlsCreated=this._wasDataSourceFetchedAtLeastOnce=!1;this._settings=a;this._userData=this._settings.UserData;this._initData=this._settings.DataSource;this._cmm=window[this._settings.CommentModuleManagerName];this._oldestCommentId=this._newestCommentId=-1;this._sending=!1;this._elem.data("CommentModule",
this)}__extends(b,d);b.prototype.initCallbacks=function(a,b,c,d,f){this._onAddCommentFunction=a;this._onEditCommentFunction=b;this._onDeleteCommentFunction=c;this._onLoadOldCommentsFunction=d;this._onDeleteConfirmationFunction=f};b.prototype.createControls=function(a){void 0===a&&(a=!1);this._wasControlsCreated||!this._settings.IsInitiallyVisible&&!a||(this._wasControlsCreated=!0,this._cmm.settings.Resources.FurtherCommentsAreDisabled&&(this._furtherCommentsAreDisabledInfoPanel=$("<div>").addClass(this._cmm.settings.CssClasses.Inactive).text(this._cmm.settings.Resources.FurtherCommentsAreDisabled).hide(),
this._furtherCommentsAreDisabledInfoPanel.addClass(this._cmm.settings.CssClasses.FurtherCommentsDisabled)),this._settings.UseModernSkin?(this._elem.addClass("ccl-commentmodule-modernskin").empty().append(this._addCommentInputArea=this.createInputArea().hide()).append(this.createLoadMoreLink()).append(this.createCommentList(this._initData.Items)),this._cmm.settings.Resources.FurtherCommentsAreDisabled&&this._elem.before(this._furtherCommentsAreDisabledInfoPanel)):(this._elem.empty().append(this.createLoadMoreLink()).append(this.createCommentList(this._initData.Items)).append(this._addCommentInputArea=
this.createInputArea().hide()),this._cmm.settings.Resources.FurtherCommentsAreDisabled&&this._elem.after(this._furtherCommentsAreDisabledInfoPanel)),0<this._initData.Items.length&&(this._wasDataSourceFetchedAtLeastOnce=!0),this._settings.IsInitiallyVisible&&this.updateLoadMoreLink(this,this._initData.VirtualCount-this._initData.Items.length),this.setVisibility())};b.prototype.show=function(){var a=this;this._elem.slideDown(this._animationSpeed,function(){0===a.getCommentsCount()&&a._settings.SetFocusOnShow&&
a.focusInputArea()})};b.prototype.loadAndShow=function(){var a=this;this.createControls(!0);this.loadOldComments(function(){return a.show()})};b.prototype.isDataSourceFetchedAtLeastOnce=function(){return this._wasDataSourceFetchedAtLeastOnce};b.prototype.isVisible=function(){return this._elem.is(":visible")};b.prototype.hide=function(){this._elem.slideUp(this._animationSpeed)};b.prototype.getCommentsCount=function(){return this._list?this._list.children(":data(commentId)").length:0};b.prototype.getCommentsCountWithoutDeleted=
function(){return this._list?this._list.children(":data(commentId):visible").length:0};b.prototype.loadOldComments=function(a){var b=this;void 0===a&&(a=function(){});if(this._onLoadOldCommentsFunction){var c=this._wasDataSourceFetchedAtLeastOnce?0:this._settings.NumberOfPreviouslyReadItemsToDisplay;this._wasDataSourceFetchedAtLeastOnce=!0;this._onLoadOldCommentsFunction(this,this._userData,this._oldestCommentId,this._settings.PageSize,c,this._settings.UsePersonNameFormatLastFirst,function(c,e){b.loadOldCommentsSuccess(c,
e);a()},this.loadOldCommentsFault)}};b.prototype.togglePossibilityToAddComments=function(a){this._settings.AllowAddComments=a;this.setVisibility()};b.prototype.setVisibility=function(){var a=0<this.getCommentsCount()||this._loadMoreLinkContainer.is(":visible");this._elem.toggle(this._settings.AllowAddComments||a);this._addCommentInputArea.toggle(this._settings.AllowAddComments);this._furtherCommentsAreDisabledInfoPanel.toggle(!this._settings.AllowAddComments&&a)};b.prototype.createLoadMoreLink=function(){var a=
this;this._loadMoreLinkContainer=$("<div>").addClass(this._cmm.settings.CssClasses.LoadMoreCommentsLink).hide();this._loadMoreLink=$('<a href="#">').click(function(b){a._loadMoreLink.getIfHyperLinkEnabled()&&(a._loadMoreLink.toggleHyperlink(!1),a.loadOldComments(function(){return a._loadMoreLink.toggleHyperlink(!0)}));b.preventDefault()}).appendTo(this._loadMoreLinkContainer);this._pageInfoLabel=this._settings.ShowPageInfoLabel?$("<span>").addClass(this._cmm.settings.CssClasses.PageInfoLabel).appendTo(this._loadMoreLinkContainer).hide():
$();return this._loadMoreLinkContainer};b.prototype.createCommentList=function(a){this._list=$("<ul>").addClass(this._cmm.settings.CssClasses.CommentList);this.fillCommentList(a,!0);return this._list};b.prototype.fillCommentList=function(a,b){var c=this;a&&(b||(a=a.reverse()),$.each(a,function(a,e){c.renderComment(e,b,!1);if(-1===c._newestCommentId||e.Id>c._newestCommentId)c._newestCommentId=e.Id;if(-1===c._oldestCommentId||e.Id<c._oldestCommentId)c._oldestCommentId=e.Id}));this._list.toggle(!this._list.is(":empty"))};
b.prototype.renderComment=function(a,b,d){var e=this,f=$("<li>"),g=$("<div>"),m=$("<img>"),n=$("<div>"),p=$("<div>"),r=$(a.ProfileHyperlinkControl?a.ProfileHyperlinkControl:c.CommonFunctions.formatString("<span>{0}</span>",a.UserName)),w=$("<span>"),u=$("<div>"),v=$("<span>"),q=$("<textarea>"),t=$("<div>"),B=$("<span>");f.data("commentId",a.Id);var H=a.PictureUrl&&0<a.PictureUrl.length;this._settings.HidePersonPictures?f.addClass(this._cmm.settings.CssClasses.CommentListItemNoPersonPicture):f.addClass(this._cmm.settings.CssClasses.CommentListItem);
a.IsRead||f.addClass(this._cmm.settings.CssClasses.UnreadItem);n.addClass(this._cmm.settings.CssClasses.CommentContent);n.append(p);if(this._settings.UseModernSkin){var y=$("<div>").addClass(c.CommonCssClasses.Clearfix).addClass("ccl-commentmodule-listitem-headerwrapper").appendTo(f),K=$("<div>").append(r);this._settings.HidePersonPictures||y.append(g.append(m));y.append(K);y.append(v);(this._settings.AllowDeleteComments&&a.AllowDeleteComment||this._settings.AllowEditComments&&a.AllowEditComment)&&
this.renderCommentMenu(a,y,q,t,w,u);p.append(w);f.append(n,u)}else this._settings.HidePersonPictures||f.append(g.append(m)),f.append(n,u,v),(this._settings.AllowDeleteComments&&a.AllowDeleteComment||this._settings.AllowEditComments&&a.AllowEditComment)&&this.renderCommentMenu(a,f,q,t,w,u),p.append(r,$("<span>:</span>").addClass(this._cmm.settings.CssClasses.MarginRight5).addClass(this._cmm.settings.CssClasses.ColonAfterPersonName),w);y=this.encodeText(a.CommentText);this._settings.HidePersonPictures||
(g.addClass(this._cmm.settings.CssClasses.PersonImgWrapper),m.addClass(this._cmm.settings.CssClasses.PersonImg).prop({src:H?a.PictureUrl:this._cmm.settings.DefaultPersonImageUrl,alt:"",width:this._cmm.settings.ImageWidth,height:this._cmm.settings.ImageHeight}));r.addClass(this._cmm.settings.CssClasses.PersonName);w.addClass(this._cmm.settings.CssClasses.CommentText).prop("id",""+this._cmm.settings.CommentTextContainerClientIdPrefix+a.Id).data("originalText",y).html(linkifyHtml(y));u.addClass(this._cmm.settings.CssClasses.ShowMoreTextContainer);
p.hide();this._cmm.inlineTextExpander.scanItemAndAppend(w);n.find("div").first().show();v.addClass(this._cmm.settings.CssClasses.CommentDate).text(a.DateTimeString);a.DateTimeTooltip&&0<a.DateTimeTooltip.length&&v.prop("title",a.DateTimeTooltip);this._settings.AllowEditComments&&a.AllowEditComment&&(q.data("originalText",a.CommentText).val(a.CommentText).keydown(function(a){a.which===c.CommonConstants.keyCodes.escape&&(q.val(q.data("originalText")).trigger("input"),e.toggleEditing(!1,q,t,w,u));return!0}).on("input paste",
function(){e.validateTextArea(q,B,f)}).hide(),this.renderAriaLabels(q),this.makeTextAreaAutoResizable(q),this.updatePlaceholder(q),this.renderPostOrEditButtonPanel(t,!1,B,function(){e.tryEditComment(a.Id,q,B,t,w,u)}).hide(),B.hide().addClass(this._cmm.settings.CssClasses.ErrorText),f.append(q,t,B));d?(this.getCommentPnlById(this._list,a.Id).replaceWith(f),f.get(0).scrollIntoView()):b?this._list.append(f):this._list.prepend(f);return f};b.prototype.tryEditComment=function(a,b,c,d,f,l){var e;!c.is(":visible")&&
0<(e=b.val()).trim().length&&(e!==b.data("originalText")&&this._onEditCommentFunction?this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):(this._sending=!0,this._onEditCommentFunction(this,this._userData,a,e,this._settings.UsePersonNameFormatLastFirst,this.editCommentSuccess,this.editCommentFault)):this.toggleEditing(!1,b,d,f,l))};b.prototype.renderCommentMenu=function(a,b,c,d,f,l){var e=$('<a href="#">').addClass(this._cmm.settings.CssClasses.ShowMenuLink).attr("aria-label",this._cmm.settings.Resources.ShowMenuLinkAccessibilityText).click(function(a){a.preventDefault()}).appendTo(b);
this.renderMenuItems(a,b,e,c,d,f,l)};b.prototype.renderMenuItems=function(a,b,c,d,f,l,m){var e=$("<div>").addClass(this._cmm.settings.CssClasses.Menu).hide().appendTo(b),g=$("<ul>").appendTo(e);this._settings.AllowEditComments&&a.AllowEditComment&&this.renderCommentEditButton(d,f,l,m).appendTo(g);this._settings.AllowDeleteComments&&a.AllowDeleteComment&&this.renderCommentDeleteButton(a,b).appendTo(g);this.createDropDownMenu(a,c,e)};b.prototype.createDropDownMenu=function(a,b,c){a=new DropDownMenu("CommentMenu"+
a.Id,!1);a.settings={showMenuOnHover:this._settings.ShowMenuOnHover,isIos:this._cmm.settings.IsIos,closeMenuWhenClickingOnLink:!0,closeMenuWhenClickingInside:!0,appendToBody:!1,selectedHolderCssClass:"",useTargetPosition:!0,setMinWidthByTarget:!1,horizontalPosition:this._cmm.settings.DropDownMenuPosition,useFixedPosition:!1,zIndex:1E3,autofitHeight:!1};a.initializeControls(c,b,b)};b.prototype.renderCommentEditButton=function(a,b,d,f){var e=this,g=$("<li>");$('<a href="#">').addClass(this._cmm.settings.CssClasses.MenuItemLink).click(function(c){e.toggleEditing(!0,
a,b,d,f);c.preventDefault()}).append($("<img>").prop({src:c.CommonConstants.onePixelTransparentImageSource,alt:""}).addClass(this._cmm.settings.CssClasses.EditButton)).append($("<span>").text(this._cmm.settings.Resources.EditComment)).appendTo(g);return g};b.prototype.toggleEditing=function(a,b,c,d,f){b.add(c).toggle(a);d.toggle(!a);a&&b.focus().trigger("input");f.children().toggle(!a)};b.prototype.renderCommentDeleteButton=function(a,b){var e=this,d=$("<li>");$('<a href="#">').addClass(this._cmm.settings.CssClasses.MenuItemLink).click(function(c){e.deleteComment(a.Id,
b);c.preventDefault()}).append($("<img>").prop({src:c.CommonConstants.onePixelTransparentImageSource,alt:""}).addClass(this._cmm.settings.CssClasses.DeleteButton)).append($("<span>").text(this._cmm.settings.Resources.DeleteComment)).appendTo(d);return d};b.prototype.createInputArea=function(){var a=this,b=$("<div>");(this._settings.HidePersonPictures||this._settings.UseModernSkin)&&b.addClass(this._cmm.settings.CssClasses.InputAreaNoPersonPicture);b.addClass(this._cmm.settings.CssClasses.InputArea);
var d=this._cmm.settings.CurrentPersonImageUrl&&0<this._cmm.settings.CurrentPersonImageUrl.length,f=null;this._settings.HidePersonPictures||this._settings.UseModernSkin||(f=$("<img>").addClass(this._cmm.settings.CssClasses.PersonImg).prop({src:d?this._cmm.settings.CurrentPersonImageUrl:this._cmm.settings.DefaultPersonImageUrl,alt:c.CommonFunctions.formatString(this._settings.UsePersonNameFormatLastFirst?"{1}, {0}":"{0} {1}",this._cmm.settings.CurrentPersonFirstName,this._cmm.settings.CurrentPersonLastName),
width:this._cmm.settings.ImageWidth,height:this._cmm.settings.ImageHeight}));var k=$("<span>").hide().addClass(this._cmm.settings.CssClasses.ErrorText);this._addCommentTextArea=$("<textarea>").prop("rows",1).on("input paste",function(){a.validateTextArea(a._addCommentTextArea,k,b)});this.renderAriaLabels(this._addCommentTextArea);this.makeTextAreaAutoResizable(this._addCommentTextArea);this.updatePlaceholder(this._addCommentTextArea);d=this.renderPostOrEditButtonPanel($("<div>"),!0,k,function(){a.tryAddNewComment(k)});
this._settings.HidePersonPictures||this._settings.UseModernSkin||b.append(f);b.append(this._addCommentTextArea,d,k);return b};b.prototype.renderPostOrEditButtonPanel=function(a,b,c,d){return a.addClass(this._cmm.settings.CssClasses.PostButtonPanel).toggle(!this._settings.HidePostButtonWhileEmpty).append($("<input />").prop("type","submit").addClass(this._cmm.settings.CssClasses.PostButton).val(b?this._cmm.settings.Resources.PostCommentButtonText:this._cmm.settings.Resources.EditCommentButtonText).click(function(a){d();
a.preventDefault()}))};b.prototype.tryAddNewComment=function(a){a.is(":visible")||(a=this._addCommentTextArea.val(),0<a.trim().length&&(this.addNewComment(a),this._addCommentTextArea.val("").trigger("change"),this._settings.HidePostButtonWhileEmpty&&this.getPostButtonPanelForTextArea(this._addCommentTextArea).hide()))};b.prototype.validateTextArea=function(a,b,d){var e=a.val().length;e>this._cmm.settings.CommentMaxLength?(b.text(c.CommonFunctions.formatString(this._cmm.settings.Resources.TextTooLongError,
this._cmm.settings.CommentMaxLength,e)),b.show(),d.addClass(this._cmm.settings.CssClasses.ErrorArea)):(this._settings.HidePostButtonWhileEmpty&&this.getPostButtonPanelForTextArea(a).toggle(0<e),d.removeClass(this._cmm.settings.CssClasses.ErrorArea),b.hide())};b.prototype.getPostButtonPanelForTextArea=function(a){return a.next("."+this._cmm.settings.CssClasses.PostButtonPanel.replace(" ","."))};b.prototype.focusInputArea=function(){this._addCommentTextArea&&this._addCommentTextArea.focus()};b.prototype.updateLoadMoreLink=
function(a,b){if(0<b){var e=a._settings.ShowPageInfoLabel;if(!a._settings.PageSize||0>=a._settings.PageSize||(a._wasDataSourceFetchedAtLeastOnce||0===a._settings.NumberOfPreviouslyReadItemsToDisplay?a._settings.PageSize:Math.min(a._settings.NumberOfPreviouslyReadItemsToDisplay,a._settings.PageSize))>=b){var d=1===b?a._cmm.settings.Resources.ShowOneMoreComment:c.CommonFunctions.formatString(a._cmm.settings.Resources.ShowXMoreComments,b);e=!1}else d=a._cmm.settings.Resources.ShowMoreComments;a._loadMoreLink.text(d);
e?(d=this.getCommentsCount(),a._pageInfoLabel.text(c.CommonFunctions.formatString(a._cmm.settings.Resources.ViewingXofYCommentsFormat,d,b+d))):a._pageInfoLabel.text("");a._pageInfoLabel.toggle(e);a._loadMoreLinkContainer.show()}};b.prototype.addNewComment=function(a){this._onAddCommentFunction&&(this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):(this._sending=!0,this._onAddCommentFunction(this,this._userData,a,this._newestCommentId,this._settings.UsePersonNameFormatLastFirst,this.addNewCommentSuccess,
this.addNewCommentFault)))};b.prototype.addNewCommentSuccess=function(a,b){a._sending=!1;b&&(a.fillCommentList(b.Items,!0),b=a.getCommentPnlById(a._list,a._newestCommentId),0<b.length&&b.get(0).scrollIntoView());a.afterAddingCommentFunction&&a.afterAddingCommentFunction({commentModule:a,userData:a._userData})};b.prototype.addNewCommentFault=function(a,b){a._sending=!1;alert(a._cmm.settings.Resources.AddCommentError)};b.prototype.editCommentSuccess=function(a,b){a._sending=!1;b&&a.renderComment(b,
!1,!0)};b.prototype.editCommentFault=function(a,b,c){a._sending=!1;alert(a._cmm.settings.Resources.EditCommentError);b&&(b=a.getCommentPnlById(a._list,b))&&(a=b.find("."+a._cmm.settings.CssClasses.CommentText),a.html(a.data("originalText")),a=b.find("textarea"),a.val(a.data("originalText")))};b.prototype.deleteComment=function(a,b){var c=this,e=function(){c._onDeleteCommentFunction&&(c._sending?alert(c._cmm.settings.Resources.TooManyRequestError):(c._sending=!0,c._onDeleteCommentFunction(c,c._userData,
a,c.deleteCommentSuccess,c.deleteCommentFault),b.hide()))};this._onDeleteConfirmationFunction?this._onDeleteConfirmationFunction(this,this._userData,a,this._cmm.settings.Resources.DeleteConfirmation,e):confirm(this._cmm.settings.Resources.DeleteConfirmation)&&e()};b.prototype.deleteCommentSuccess=function(a,b,c){a._sending=!1;b&&(b=a.getCommentPnlById(a._list,b))&&(b.remove(),a._list.toggle(!a._list.is(":empty")),a.setVisibility())};b.prototype.deleteCommentFault=function(a,b,c){a._sending=!1;alert(a._cmm.settings.Resources.DeleteCommentError);
b&&(a=a.getCommentPnlById(a._list,b))&&a.show()};b.prototype.loadOldCommentsSuccess=function(a,b){b&&(a.fillCommentList(b.Items,!1),a._loadMoreLinkContainer.hide(),a.updateLoadMoreLink(a,b.VirtualCount-b.Items.length),a.setVisibility())};b.prototype.loadOldCommentsFault=function(a,b){a._sending=!1};b.prototype.makeTextAreaAutoResizable=function(a){setTimeout(function(){a.autogrow()},0)};b.prototype.updatePlaceholder=function(a){var b=this;setTimeout(function(){a.prop("placeholder",b.getPostCommentTextAreaWatermark())},
0)};b.prototype.renderAriaLabels=function(a){var b=this._settings.DomElementClientId+"_DescribedLabel",c=this._elem.find("#"+b);0<c.length?c.text(this.getPostCommentTextAreaWatermark()):(c=$("<span>").prop("id",b).addClass(this._cmm.settings.CssClasses.Hidden).text(this.getPostCommentTextAreaWatermark()),this._elem.append(c));a.attr("aria-label",this.getPostCommentTextAreaAriaLabel()).attr("aria-describedby",b)};b.prototype.getPostCommentTextAreaWatermark=function(){return this._settings.CustomPostCommentTextAreaWatermark&&
"string"===typeof this._settings.CustomPostCommentTextAreaWatermark&&0<this._settings.CustomPostCommentTextAreaWatermark.length?this._settings.CustomPostCommentTextAreaWatermark:this._cmm.settings.Resources.PostCommentTextAreaWatermark};b.prototype.getPostCommentTextAreaAriaLabel=function(){return this._settings.CustomPostCommentTextAreaAriaLabel&&"string"===typeof this._settings.CustomPostCommentTextAreaAriaLabel&&0<this._settings.CustomPostCommentTextAreaAriaLabel.length?this._settings.CustomPostCommentTextAreaAriaLabel:
this._cmm.settings.Resources.PostCommentTextAreaAriaLabel};b.prototype.stringToDate=function(a){return new Date(parseInt(this._stringToDateRegex.exec(a)[0]))};b.prototype.encodeText=function(a){return c.CommonFunctions.replaceLineBreaksWithBrTags(c.CommonFunctions.htmlEncode(a))};b.prototype.getCommentPnlById=function(a,b){var c=null;a.children(":data(commentId)").each(function(a,e){a=$(e);if(a.data("commentId")===b)return c=a,!1});return c};return b}(c.DomElementClass);c.CommentModule=d})(CCL||(CCL=
{}));jQuery.fn.extend({getCommentModuleObject:function(){return this.data("CommentModule")}});
(function(c){var d=function(){function d(){this.managedContainers=new Map;this.temporaryUnmanagedMenus=new Map}d.getInstance=function(){void 0===d.instance&&(d.instance=new d);return d.instance};d.prototype.registerContainer=function(b,a){this.managedContainers.has(b)||(a=new c.DropDownMenuManagedContainer(a),this.managedContainers.set(b,a),this.putUnmanagedMenusToContainer(b,a))};d.prototype.containerAddOrReplaceInstance=function(b,a){this.managedContainers.has(b)?this.managedContainers.get(b).addOrReplaceInstance(a):
this.addInstanceToTemporaryUnmanagedMenus(b,a)};d.prototype.addInstanceToTemporaryUnmanagedMenus=function(b,a){this.temporaryUnmanagedMenus.has(b)||this.temporaryUnmanagedMenus.set(b,[]);this.temporaryUnmanagedMenus.get(b).push(a)};d.prototype.putUnmanagedMenusToContainer=function(b,a){this.temporaryUnmanagedMenus.has(b)&&(this.temporaryUnmanagedMenus.get(b).forEach(function(b){return a.addOrReplaceInstance(b)}),this.temporaryUnmanagedMenus.delete(b))};return d}();c.DropDownMenuManager=d})(CCL||(CCL=
{}));
(function(c){var d=function(){function d(b){var a=this;this.dropDownMenuList=[];this.settings=b;this.$window=$(window);$(document).on((this.settings.IsIos?"touchend":"click")+" "+c.CommonTriggers.clickInInnerFrame,function(b){b=$(b.target);var c=b.closest("["+a.settings.TargetLinkDataAttributeName+"]");if(0<c.length){var d=window[c.attr(a.settings.TargetLinkDataAttributeName)];d.toggleManagedMenu();a.startTrackingResize(d);a.dropDownMenuList.forEach(function(b){b!==d&&(b.hideMenu(),a.stopTrackingResize(b))})}else{b=b.closest("[id][role='menu']");
if(0<b.length&&(b=window[b.attr("id")],0<=a.dropDownMenuList.indexOf(b)))return;a.dropDownMenuList.forEach(function(a){return a.hideMenu()})}})}d.prototype.addOrReplaceInstance=function(b){var a=this.dropDownMenuList.filter(function(a){return a.name!==b.name});a.push(b);this.dropDownMenuList=a};d.prototype.startTrackingResize=function(b){var a=this;if(void 0===b.onResizeHandler){var c=function(){a.stopTrackingResize(b);b.hideMenu()};this.$window.resize(c);b.onResizeHandler=c}};d.prototype.stopTrackingResize=
function(b){void 0!==b.onResizeHandler&&(this.$window.off("resize",b.onResizeHandler),b.onResizeHandler=void 0)};return d}();c.DropDownMenuManagedContainer=d})(CCL||(CCL={}));
(function(c){var d=function(d){function b(a,b){d.call(this,a,b)}__extends(b,d);b.prototype.Init=function(){var a=this;this._scope=this._settings.Scope;this._clientId=this._settings.ClientId;this._applicationKey=this._settings.ApplicationKey;this._multiselectAllowed=this._settings.MultiselectAllowed;this._allowedFileTypeExtensions=this._settings.AllowedFileTypeExtensions;this._interFrameMessageName=this._settings.InterFrameMessageName;this._downloadUrlTemplate="https://www.googleapis.com/drive/v2/files/{fileid}?key={appkey}";
this.googleSheetMimeType="application/vnd.google-apps.spreadsheet";this._language=this._settings.Language;this._settings.ReadOnly||(this._chooseButton=this._loader=this._elem.children("."+this._settings.LoaderCssClass),$(window).load(function(){return a.initializeDependencies()}));this.UpdateFileList(this.GetFiles())};b.prototype.initializeDependencies=function(){var a=this;this._settings.UseProxyIframe&&$("."+this._settings.PickerControlCssClass).attr("src",this._settings.ProxyIframeSrc);asyncDependenciesResolver.loadScriptAsync({url:a._settings.ApiScriptUrl,
timeoutInMilliseconds:c.PickerDependencyLoadTimeoutInMs}).pipe(function(){return asyncDependenciesResolver.loadScriptAsync({url:a._settings.ClientScriptUrl,timeoutInMilliseconds:c.PickerDependencyLoadTimeoutInMs})}).always(function(){a._loader.remove()}).done(function(){a._chooseButton=$("."+a._settings.PickerControlCssClass);"none"!==a._loader.css("display")&&a._chooseButton.show();a._settings.UseProxyIframe?a.listenToProxyPickerFileSelected():a.displayRegularPickerOnButtonClick()}).fail(function(){a._settings.ReadOnly=
!0;a._chooseButton=$();a.Trigger(c.PickerEvent.LoadingDependencyFailed)})};b.prototype.listenToProxyPickerFileSelected=function(){var a=this;$(document).on(this._settings.ProxyUploadFilesSelectedEventName,function(b,c){b=c.files;b.forEach(function(a){a.fileUrl=a.url;a.isNew=!0});a._selectedFiles=b;a.UpdateFileList(a._selectedFiles);a.ValidateSelectedFiles(a._selectedFiles,a._allowedFileTypeExtensions);a.StartUploadFiles(a._selectedFiles)})};b.prototype.displayRegularPickerOnButtonClick=function(){var a=
this;this._chooseButton.on("click",function(b){gapi.auth.getToken()?a.showPicker():a.doAuth(!1,function(b){a.showPicker()}.bind(a))});this._chooseButton.on("keydown",function(b){if(13===b.which||32===b.which)b.preventDefault(),a._chooseButton.click()});c.CommonFunctions.attachPostMessageEventListener($(window),this._interFrameMessageName,function(b,c){window!=c||b.origin?(a._origin=b.origin,a._chooseButton.prop("disabled",!1)):a._origin=window.location.protocol+"//"+window.location.host}.bind(this));
gapi.load("picker",{callback:function(){b.prototype.pickerApiLoad.call(this)}.bind(this)})};b.prototype.pickerApiLoad=function(){this.doAuth(!0,function(){c.CommonFunctions.makePostMessageCall(window.top,{messageName:this._interFrameMessageName.toString()})}.bind(this))};b.prototype.doAuth=function(a,b){gapi.auth.authorize({client_id:this._clientId,scope:this._scope,immediate:a},b)};b.prototype.showPicker=function(){var a=gapi.auth.getToken().access_token;a=(new google.picker.PickerBuilder).addViewGroup((new google.picker.ViewGroup(this.preparePickerView(google.picker.ViewId.DOCS))).addView(this.preparePickerView(google.picker.ViewId.DOCS_IMAGES)).addView(this.preparePickerView(google.picker.ViewId.DOCS_VIDEOS)).addView(this.preparePickerView(google.picker.ViewId.DOCUMENTS)).addView(this.preparePickerView(google.picker.ViewId.DRAWINGS)).addView(this.preparePickerView(google.picker.ViewId.FOLDERS)).addView(this.preparePickerView(google.picker.ViewId.PDFS)).addView(this.preparePickerView(google.picker.ViewId.PHOTOS)).addView(this.preparePickerView(google.picker.ViewId.PRESENTATIONS)).addView(this.preparePickerView(google.picker.ViewId.SPREADSHEETS))).setOAuthToken(a).setDeveloperKey(this._applicationKey).setOrigin(this._origin).setCallback(function(a){this.pickerCallback(a)}.bind(this)).setLocale(this._language);
this._multiselectAllowed&&a.enableFeature(google.picker.Feature.MULTISELECT_ENABLED);a.build().setVisible(!0)};b.prototype.preparePickerView=function(a){a=new google.picker.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a};b.prototype.pickerCallback=function(a){var b=this;if(a[google.picker.Response.ACTION]==google.picker.Action.PICKED){this._selectedFiles=this.ConvertSelectedFiles(a[google.picker.Response.DOCUMENTS]);for(a=this._selectedFiles.length-1;0<=a;a--)this._selectedFiles[a].name=
this.ProcessFileName(this._selectedFiles[a].name);this.UpdateFileList(this._selectedFiles);var c=[];if(0<this._selectedFiles.length){var d={};d.Authorization="Bearer "+gapi.auth.getToken().access_token;this._selectedFiles.forEach(function(a){var e=b.ComposeDownloadUrl(a.fileId);$.support.cors||(e=b._settings.GoogleDriveProxy+encodeURIComponent(e));c.push($.ajax({url:e,type:"GET",data:"",headers:d,success:function(c){var d=!1;if(c.downloadUrl)a.fileUrl=c.downloadUrl+"&"+b._settings.TokenPlaceholderInQuerystring+
"="+gapi.auth.getToken().access_token;else if(c.exportLinks&&c.exportLinks[Object.keys(c.exportLinks)[0]]){d=a.type===b.googleSheetMimeType;a.type=c.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":c.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":c.exportLinks["image/png"]?"image/png":c.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"]?
"application/vnd.openxmlformats-officedocument.presentationml.presentation":c.exportLinks["application/pdf"]?"application/pdf":Object.keys(c.exportLinks)[0];a.fileUrl=c.exportLinks[a.type]+"&"+b._settings.TokenPlaceholderInQuerystring+"="+gapi.auth.getToken().access_token;var e=b.getParameterValue(a.fileUrl,"exportFormat");if(e){var f=a.name;e="."+e;a.name.substr(-e.length)!==e&&(a.name+=e);b.UpdateFileName(a,f)}}else a.error=b._settings.UnsupportedDownloadTypeErrorText;a.thumbnailUrl=c.thumbnailLink;
b.checkFileSize(a,d)},error:function(){a.error=b._settings.UploadErrorText}}))});$.when.apply($,c).done(function(){b.ValidateSelectedFiles(b._selectedFiles,b._allowedFileTypeExtensions);b.StartUploadFiles(b._selectedFiles)})}}};b.prototype.checkFileSize=function(a,b){0==a.size&&(a.size=this.getFileSize(a,b),this.UpdateFileSize(a))};b.prototype.getFileSize=function(a,b){var c=0;b=this.getFileUrl(a.fileUrl,b);try{c=this.getContentLength(b)}catch(h){a.error=this._settings.UploadErrorText}return c};b.prototype.getFileUrl=
function(a,b){return b?this._settings.GoogleDriveProxy+encodeURIComponent(a):a};b.prototype.getContentLength=function(a){var b=0,d=new XMLHttpRequest;d.open("HEAD",a,!1);d.send();d.status==c.CommonConstants.httpStatusCodes.ok&&(b=parseInt(d.getResponseHeader("Content-Length")));return b};b.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoDownloadFromParam+"="+a.fileUrl+"&"+this._settings.FileRepoFileSizeParam+"="+a.size};b.prototype.AddAdditionalHeadersToDownloadFile=function(a,
b){a[this._settings.FileRepoHeaderGoogleDriveFileSize]=b.size};b.prototype.ConvertSelectedFiles=function(a){return a?$.map(a,function(a,b){return{fileId:a[google.picker.Document.ID],name:a[google.picker.Document.NAME],type:a[google.picker.Document.MIME_TYPE],icon:a[google.picker.Document.ICON_URL],size:a.sizeBytes}}):[]};b.prototype.ComposeDownloadUrl=function(a){return this._downloadUrlTemplate.replace("{fileid}",a).replace("{appkey}",this._applicationKey)};b.prototype.ClearResults=function(a){var b=
!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(b=!1,a.addClass("clearme"))});b&&this._chooseButton.show();d.prototype.ClearResults.call(this,a);this.Trigger(c.PickerEvent.ResultsChanged,{results:[]})};b.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};b.prototype.HandleStopped=function(a){d.prototype.HandleStopped.call(this,a);this._settings.UseProxyIframe&&
$(document).trigger(this._settings.ProxyUploadFinishedEventName)};return b}(c.FilePickerBase);c.GoogleDrivePicker=d})(CCL||(CCL={}));
(function(c){c.ControlTabsEvent={Initialized:"ControlTabsInitialized",TabIndexChanged:"ControlTabsSelectedIndexChanged"};var d=function(d){function b(a,b){d.call(this,a);this._settings=b;this.InitControls();this.RunControlInitializationCallback()}__extends(b,d);b.prototype.SetCurrentTab=function(a){this.GetCurrentTab()!==a&&$(this._tabItemLinks[a]).click()};b.prototype.GetCurrentTab=function(){return parseInt(this._selectedTabIndexHolder.val())};b.prototype.GetTabsCount=function(){return this._tabItemLinks.length};
b.prototype.SetTabEnabled=function(a,b){(a=a&&this.IsTabAvailable(b))?($(this._tabItemLinks[b]).removeClass("disabled"),$(this._mobileSelect.find("> option")[b]).prop("disabled",!1)):($(this._tabItemLinks[b]).addClass("disabled"),$(this._mobileSelect.find("> option")[b]).prop("disabled",!0))};b.prototype.SetTabNotAvailable=function(a){$(this._tabItemLinks[a]).addClass("tabIsNotAvailable");this.SetTabEnabled(!1,a)};b.prototype.UpdateTabImageUrl=function(a,b){$(this._tabItemLinks[a]).find("img").attr("src",
b)};b.prototype.IsTabAvailable=function(a){return!$(this._tabItemLinks[a]).hasClass("tabIsNotAvailable")};b.prototype.SetTabToolTip=function(a,b){$(this._tabs[a]).attr("title",b)};b.prototype.InitControls=function(){var a=this;this._tabsList=this._elem.find("ul."+this._settings.TabsCssClass);this._mobileSelect=this._elem.find("select."+this._settings.TabsCssClass);this._selectedTabIndexHolder=this._elem.find("#"+this._settings.TabIndexHolderClientId);this._tabs=this._elem.find("ul > li > h2");this._tabItemLinks=
this._elem.find("ul > li > h2 > a");this._tabItemLinks.each(function(b,c){a.InitTabItem(b,c)});$(this._tabItemLinks[this._settings.CurrentlySelectedTabIndex]).click();this.Trigger(c.ControlTabsEvent.Initialized)};b.prototype.RunControlInitializationCallback=function(){var a=c.Callbacks.GetFunctionByName(this._settings.OnControlInitialization,null);void 0!==a&&null!==a&&a(this)};b.prototype.InitTabItem=function(a,b){var c=this;a=$(b);$(a.data("contentid")).addClass(this._settings.TabContentCssClass).addClass(this._settings.ClearLeftCssClass).hide();
a.on("click",function(a){c.OnTabChanged(a)})};b.prototype.OnTabChanged=function(a){a=$(a.currentTarget);if(a.hasClass("disabled"))return!1;var b=a.closest("li"),d=$(a.data("contentid"));a=b.data("tabitemindex");this._tabsList.find("> li").removeClass(this._settings.ActiveTabCssClass);b.addClass(this._settings.ActiveTabCssClass);this._scrollPosition=$(window).scrollTop();this._tabItemLinks.each(function(a,b){$($(b).data("contentid")).hide()});d.show();$(window).scrollTop(this._scrollPosition);this._mobileSelect.prop("selectedIndex",
a);b=this._selectedTabIndexHolder.val();this._selectedTabIndexHolder.val(a);d=this._selectedTabIndexHolder.val();this.Trigger(c.ControlTabsEvent.TabIndexChanged,{selectedTab:a,previousTabString:b,currentTabString:d});return!1};return b}(c.DomElementClass);c.ControlTabs=d})(CCL||(CCL={}));
(function(c){var d=function(d){function b(a,b){d.call(this,a,b)}__extends(b,d);b.prototype.Init=function(){var a=this;this._settings.ReadOnly||(this._chooseButton=this._loader=this._elem.children("."+this._settings.LoaderCssClass),$(window).load(function(){return a.initializeWithScripts()}));this.UpdateFileList(this.GetFiles())};b.prototype.initializeWithScripts=function(){var a=this;asyncDependenciesResolver.loadScriptAsync({url:a._settings.ScriptUrl,attributes:{"data-app-key":a._settings.ApplicationKey,
id:"dropboxjs"},timeoutInMilliseconds:c.PickerDependencyLoadTimeoutInMs}).always(function(){a._loader.remove()}).done(function(){a._chooseButton=$(Dropbox.createChooseButton({success:function(b){if(!(a._elem.hasClass("disabled")||0<a._resultsTable.find("tr").length)){b=a.ConvertSelectedFiles(b);for(var c=b.length-1;0<=c;c--)b[c].name=a.ProcessFileName(b[c].name);a.ValidateSelectedFiles(b,null);a.UpdateFileList(b);0<b.length&&a.StartUploadFiles(b)}},linkType:"direct",multiselect:a._settings.MultiselectAllowed,
extensions:a._settings.AllowedFileTypeExtensions}));a._chooseButton.attr("tabindex","0");"none"===a._loader.css("display")&&a._chooseButton.hide();a._elem.append(a._chooseButton)}).fail(function(){a._settings.ReadOnly=!0;a._chooseButton=$();a.Trigger(c.PickerEvent.LoadingDependencyFailed)})};b.prototype.ConvertSelectedFiles=function(a){return a?$.map(a,function(a,b){return{name:a.name,size:a.bytes,thumbnailUrl:a.thumbnailLink,fileUrl:a.link,icon:a.icon}}):[]};b.prototype.ClearResults=function(a){var b=
!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(b=!1,a.addClass("clearme"))});b&&this._chooseButton.show();d.prototype.ClearResults.call(this,a);this.Trigger(c.PickerEvent.ResultsChanged,{results:[]})};b.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};b.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoDownloadFromParam+"="+encodeURIComponent(a.fileUrl)};
return b}(c.FilePickerBase);c.DropboxPicker=d})(CCL||(CCL={}));
(function(c){var d=function(d){function b(a,b){d.call(this,a,b)}__extends(b,d);b.ConfirmReplaceFile=function(){return confirm(b.confirmReplaceMessage)};b.prototype.Init=function(){var a=this;this._chooseButton=$(".ccl-fileuploader-button").children("input");this.fileUploaderContainer=$(".ccl-fileuploader-container");b.confirmReplaceMessage=this._settings.ConfirmReplaceMessageText;this._chooseButton.focusin(function(b){a._chooseButton.parent().toggleClass("ccl-button-color-green-highlight")}).focusout(function(b){a._chooseButton.parent().toggleClass("ccl-button-color-green-highlight")});this._elem.on("fileuploadstarted",
function(){a.ToggleOkButton(!0);a.Trigger(c.PickerEvent.Started)}).on("fileuploadadd",function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a.Trigger(c.PickerEvent.Added,d[0])}).on("fileuploadstopped",function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];d[0].results=a.fileUploaderContainer.fileupload("getUploadedFiles");a.Trigger(c.PickerEvent.Stopped,d[0]);a.ToggleOkButton(!1)}).on("fileuploadresultschanged",function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-
1]=arguments[e];a.Trigger(c.PickerEvent.ResultsChanged,d[0])}).on("fileuploadsubmit",function(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];c=c[0];c.url=a.GetFileRepoUrlForFileName(a.ProcessFileName(c.files[0].name));c.xhrFields={withCredentials:!0}}).on("fileuploaddestroy",function(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];c=c[0];c.url&&(c.url+="&"+a._settings.MethodOverrideQueryStringParam+"=delete");c.type="DELETE";c.xhrFields={withCredentials:!0}}).on("fileuploaddone",
function(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];(c=c[0])&&c.result&&c.result.fileId&&c.result.signature&&(d={deleteUrl:a.GetFileRepoUrl(c.result.signature),fileUrl:a.GetFileRepoUrl(c.result.signature),id:c.result.fileId,signedId:c.result.signature,name:c.result.fileName,size:c.result.fileSize,type:c.result.mimeType,thumbnailUrl:a._settings.DefaultThumbnailUrl,isNew:!0},c.result.files=[d])})};b.prototype.ClearResults=function(){this.fileUploaderContainer.fileupload("clearResults")};
b.prototype.AllowHide=function(){return this.fileUploaderContainer.fileupload("allowHide")};return b}(c.FilePickerBase);c.FilePicker=d})(CCL||(CCL={}));var tmpl,FileRepoUploaderInstance;
(function(c){c.FileRepoUploaderEvent={PickerChanged:"FileRepoUploaderPickerChanged",ResultsChanged:"FileRepoUploaderResultsChanged"};var d=function(d){function b(a,b){var e=this;d.call(this,a);this._pickers=[];this._inlineModeFileList=[];this._inlineModeFileKeys={};this._removedFiles=[];this._changedFiles={};this._settings=b;this._currentTabIndex=-1;FileRepoUploaderInstance=this;$("#"+this._settings.ControlTabsClientId).on(c.ControlTabsEvent.TabIndexChanged,function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-
1]=arguments[d];e._currentTabIndex!==b[0].selectedTab&&(e._currentTabIndex=b[0].selectedTab,(b=e._pickers[e._currentTabIndex])&&e.Trigger(c.FileRepoUploaderEvent.PickerChanged,{selectedPicker:b}))});this._elem.on(c.PickerEvent.Initialized,function(a){a=c.DomElementClass.GetInstanceForElement(a.target.id);e._pickers.push(a);1==e._pickers.length&&e._settings.IsEmpty&&e.Trigger(c.FileRepoUploaderEvent.PickerChanged,{selectedPicker:e._pickers[0]})});this._elem.on(c.PickerEvent.ResultsChanged,function(a){for(var b=
[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];d=c.DomElementClass.GetInstanceForElement(a.target.id);b=b[0].results;var f=e._settings.ReadOnly?e.GetControlTabs().GetCurrentTab():e._pickers.indexOf(d);e.GetControlTabs().SetCurrentTab(f);e.HandleResultsChanges(b,f);e.Trigger(c.FileRepoUploaderEvent.ResultsChanged,{results:b,picker:d})});this._elem.on(c.PickerEvent.Started,function(a){for(var b=1;b<arguments.length;b++);b=c.DomElementClass.GetInstanceForElement(a.target.id);b=e._settings.ReadOnly?
e.GetControlTabs().GetCurrentTab():e._pickers.indexOf(b);e.HandleResultsChanges([{}],b)});if(b.InlineMode)this._elem.on(c.PickerEvent.Added,function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];(b.UniqueFileNamesOnly||e.CanCheckFileNames())&&c[0].files.forEach(function(a){b.UniqueFileNamesOnly&&e._filesContainer.find("td.name").toArray().forEach(function(c){if(c.innerText===a.name)if(confirm(b.FileAlreadyExistsDialogText.replace("{0}",a.name))){c=$(c).closest("."+b.FileListRowCssClass);
var d=c.find("a."+b.RemoveActionCssClass);d=$(d).data("filekey");d=e.GetFileByKey(d);e.RemoveFile(d,c)}else a.error=b.FileAlreadyExistsErrorMessage});!a.error&&e.CanCheckFileNames()&&(a.error=e.GetFileNameValidation(a.name))})}),this._elem.on(c.PickerEvent.Stopped,function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];e.UpdateFileList(b[0].results,!0,null);e.UpdateFileListState(e._inlineModeFileList);d=b[0].results&&0<b[0].results.length&&e._expandableContainer.getIsExpandedState();
var f=c.DomElementClass.GetInstanceForElement(a.target.id);f.ClearResults(b[0].results);d&&f.AllowHide()&&e._expandableContainer.toggle()}),this._elem.on("hybrideditoritemtextupdated",function(a){for(var d=[],f=1;f<arguments.length;f++)d[f-1]=arguments[f];f=$(a.target).closest("."+b.FileListRowCssClass);var g=f.find("a."+b.RemoveActionCssClass);g=$(g).data("filekey");g=e.GetFileByKey(g);d=d[0].value;d||(d="(empty)",f.find("."+b.FileNameContainerCssClass).text(d));g.rawFilename=d;g.name=g.rawFilename;
g.extension&&(g.name+=g.extension);e._changedFiles[g.id]=g;e._changedFilesStateHidden.val(JSON.stringify(e._changedFiles));e.UpdateFileListState(e._inlineModeFileList);d=e._pickers[e.GetControlTabs().GetCurrentTab()];e.Trigger(c.FileRepoUploaderEvent.ResultsChanged,{results:e._inlineModeFileList,picker:d})}),this._expandableContainer=new ExpandableContainer(this._elem,{expander:$("#"+this._settings.ExpandableHeaderClientId),target:$("#"+this._settings.ExpandableContentClientId)}),this._filesContainer=
$("#"+b.FileListContainerId),this._filesContainer.on("click","."+this._settings.RemoveActionCssClass,function(a){var b=$(a.target).data("filekey");b=e.GetFileByKey(b);a=$(a.target).closest("."+e._settings.FileListRowCssClass);e.RemoveFile(b,a)}),this._filesContainer.on("click","."+this._settings.ViewActionCssClass,function(a){a=$(a.target).data("filekey");a=e.GetFileByKey(a);e.OpenFile(a,!0)}),this._filesContainer.on("click","."+this._settings.EditActionCssClass,function(a){a=$(a.target).data("filekey");
a=e.GetFileByKey(a);e.OpenFile(a,!1)}),this._filesContainer.on("click","."+this._settings.DownloadActionCssClass,function(a){a=$(a.target).data("filekey");a=e.GetFileByKey(a);e.DownloadFile(a)}),$("#"+this._settings.ViewDialogId).on("click",".ccl-button-ok",function(a){e._openedForEditing&&(a=$(".ccl-cssmodal-modal-iframe").attr("src"),$(".ccl-cssmodal-modal-iframe").attr("src",a))}),this._templatesContainer=document.createElement(this._filesContainer.prop("nodeName")),tmpl&&(this._fileListItemTemplate=
tmpl(b.FileListItemTemplateId)),this._fileListStateHidden=$("#"+this._settings.FileListHiddenStateClientId),a=this.ReadFileList(),0<a.length&&this.UpdateFileList(a,!1,null),this._changedFilesStateHidden=$("#"+this._settings.ChangedFilesHiddenStateClientId),this._removedFilesStateHidden=$("#"+this._settings.RemovedFilesHiddenStateClientId);else this._elem.on(c.PickerEvent.Added,function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b=b[0];e.CanCheckFileNames()&&b.files.forEach(function(a){a.error||
(a.error=e.GetFileNameValidation(a.name))})})}__extends(b,d);b.prototype.CanCheckIllegalCharacters=function(){return this._settings.IllegalCharacters&&0<this._settings.IllegalCharacters.length?!0:!1};b.prototype.CanCheckIllegalFileNames=function(){return this._settings.IllegalFileNames&&0<this._settings.IllegalFileNames.length?!0:!1};b.prototype.CanCheckFileNames=function(){return this.CanCheckIllegalCharacters||this.CanCheckIllegalFileNames};b.prototype.GetFileNameValidation=function(a){var b=[];
if(this.CanCheckIllegalCharacters())for(var c=this._settings.IllegalCharacters.length,d=0;d<c;d++)this._settings.IllegalCharacters[d]&&-1<a.indexOf(this._settings.IllegalCharacters[d])&&b.push(this._settings.IllegalCharacters[d]);if(this.CanCheckIllegalFileNames())for(a=a.split(".")[0],c=this._settings.IllegalFileNames.length,d=0;d<c;d++)this._settings.IllegalFileNames[d]&&a.toUpperCase()===this._settings.IllegalFileNames[d].toUpperCase()&&b.push(this._settings.IllegalFileNames[d]);return 0<b.length?
(c=b.filter(function(a,c){return b.indexOf(a)==c}),this._settings.FileNameInvalidErrorMessage.replace("{0}",c.join(" "))):null};b.prototype.AddExternalFile=function(a){var b=[];b.push(JSON.parse(JSON.stringify(a)));this.UpdateFileList(b,!0,null);this.UpdateFileListState(this._inlineModeFileList)};b.prototype.ReplaceExternalFile=function(a,b){var c=[];b=JSON.parse(JSON.stringify(b));c.push(b);b=this._filesContainer.find("[id$="+a+"]").closest("."+this._settings.FileListRowCssClass);this.UpdateFileList(c,
!0,b);this.UpdateFileListState(this._inlineModeFileList);a=this.GetFileByKey(a);this.RemoveFile(a,b)};b.prototype.GetUploadResults=function(){return this._fileListStateHidden&&this._fileListStateHidden.val()?this._fileListStateHidden.val():""};b.prototype.RemoveFile=function(a,b){a.deleteUrl?$.ajax({url:a.deleteUrl+"&"+this._settings.MethodOverrideQueryStringParam+"=delete",type:"DELETE",xhrFields:{withCredentials:!0}}):(this._removedFiles.push(a.id),this._removedFilesStateHidden.val(JSON.stringify(this._removedFiles)));
this.RemoveFileFromList(a,b)};b.prototype.RemoveFileFromList=function(a,b){b.remove();this._changedFiles[a.id]&&(delete this._changedFiles[a.id],this._changedFilesStateHidden.val(JSON.stringify(this._changedFiles)));this._inlineModeFileList.splice(this._inlineModeFileList.indexOf(a),1);this.UpdateFileListState(this._inlineModeFileList);a=this._pickers[this.GetControlTabs().GetCurrentTab()];this.Trigger(c.FileRepoUploaderEvent.ResultsChanged,{results:this._inlineModeFileList,picker:a})};b.prototype.OpenFile=
function(a,b){if(!b&&this.ShouldBeEditedUsingDirectEdit(a)){var c=this._settings.DirectEditUrl;c=c.replace("{fileName}",encodeURIComponent(a.name));c=c.replace("{fileId}",encodeURIComponent(a.id));window.open(c,"","height = 300, width = 500, toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes")}else{c=this._settings.ViewEditUrl;c=c.replace("{fileName}",encodeURIComponent(a.name));c=c.replace("{viewOnly}",b.toString());c=c.replace("{fileRepoId}",encodeURIComponent(a.signedId));
var d=a.modified?new Date(a.modified):new Date;this._openedForEditing=!b;c=c.replace("{uniqueId}",this.convertToTicks(d).toString());this.ShouldBeOpenedInPopup(a.type)?this.OpenInWindow(c):(d=b=0,this.isEmbeddedVideo(a.type)&&(b=400,d=300),this.OpenInModalDialog(b,d,a.name,c,!1))}};b.prototype.ShouldBeOpenedInPopup=function(a){return this.IsOwasFileType(a)||0<=this._settings.AdditionalMimeTypesOpenedInPopup.indexOf(a)};b.prototype.OpenInWindow=function(a){var b=window.open(a,"","width="+.8*screen.width+
", height="+.8*screen.height+",location = 0, directories = 0, toolbar = 0, scrollbars = 0, status = 0, menubars = 0, resizable = 1");this.CheckIfBrowserIsOldIE()&&this.AttachEventForOldIE(b,"onload",function(){$("head",b.document).append('<style type="text/css">html,body{height:100%}html{width:auto;margin-top:-8px;}</style>')})};b.prototype.CheckIfBrowserIsOldIE=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?10>=parseInt(a.split("msie")[1])?!0:!1:!1};b.prototype.AttachEventForOldIE=
function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a[b]=c};b.prototype.OpenInModalDialog=function(a,b,c,d,f){var e=this.GetDialog();e.setContentMinSize(a,b);e.setTitle(c);e.setAjaxUrl(d);e.openDialog(f)};b.prototype.IsOwasFileType=function(a){return 0<=this._settings.OWASMimeTypes.indexOf(a)};b.prototype.ShouldBeEditedUsingDirectEdit=function(a){return this._settings.UseDirectEdit&&!this.IsEditableOwasFile(a)};b.prototype.IsEditableOwasFile=function(a){return 0<=this._settings.OWASMimeTypes.indexOf(a.type)&&
0<=this._settings.EditableMimeTypes.indexOf(a.type)};b.prototype.convertToTicks=function(a){return 621355968E9+1E4*a.getTime()};b.prototype.DownloadFile=function(a){a=this._settings.DownloadRedirectUrl.replace(this._settings.FileRepoFileIdToken,encodeURIComponent(a.signedId));window.open(a)};b.prototype.IsViewSupported=function(a){return a?0<=this._settings.ViewMimeTypes.indexOf(a):!1};b.prototype.IsEditingAllowed=function(a){return a?0<=this._settings.EditableMimeTypes.indexOf(a)&&this._settings.IsFileEditingAllowed:
!1};b.prototype.isEmbeddedVideo=function(a){return a?0<=this._settings.EmbedVideoMimeTypes.indexOf(a):!1};b.prototype.GetDialog=function(){return window[this._settings.ViewDialogId]};b.prototype.HandleResultsChanges=function(a,b){var c=this.GetControlTabs(),d=c.GetTabsCount();a=a&&0<a.length;for(var e=0;e<d;e++){var f=c.IsTabAvailable(e);c.SetTabEnabled(a?e==b:f,e);c.SetTabToolTip(e,this.GetTooltipForTab(a?b:e,e))}};b.prototype.GetTooltipForTab=function(a,b){return this._settings.DisabledTabTextForPickers.filter(function(b){return b.PickerIndex===
a})[0].Tooltips.filter(function(a){return a.PickerIndex===b})[0].Tooltip};b.prototype.GetControlTabs=function(){this._controlTabsControl||(this._controlTabsControl=c.DomElementClass.GetInstanceForElement(this._settings.ControlTabsClientId));return this._controlTabsControl};b.prototype.ReadFileList=function(){return this._fileListStateHidden&&this._fileListStateHidden.val()?JSON.parse(this._fileListStateHidden.val()):JSON.parse("[]")};b.prototype.GetRemovedFileIds=function(){return this._removedFilesStateHidden&&
this._removedFilesStateHidden.val()?JSON.parse(this._removedFilesStateHidden.val()):JSON.parse("[]")};b.prototype.GetChangedFilesDictionary=function(){return this._changedFilesStateHidden&&this._changedFilesStateHidden.val()?JSON.parse(this._changedFilesStateHidden.val()):JSON.parse("{}")};b.prototype.UpdateFileListState=function(a){this._fileListStateHidden.val(JSON.stringify(a));this._fileListStateHidden.trigger("change")};b.prototype.UpdateFileList=function(a,b,c){var d=this,e=this;a.forEach(function(a){a.thumbnailUrl=
e.GetFileIcon(a.name);d._inlineModeFileList.push(a);d._inlineModeFileKeys[a.id]=a;var b=a.name.split(".");if(1<b.length){a.rawFilename=b[0];if(2<b.length)for(var c=1;c<=b.length-2;c++)a.rawFilename+="."+b[c];a.extension="."+b[b.length-1]}else a.rawFilename=a.name});a&&0<a.length&&(a=this.RenderTemplate(this._fileListItemTemplate,a,b),c&&0<c.length?c.after(a):a.appendTo(this._filesContainer),b&&DropDownMenu.initialize(),a.find("."+this._settings.ViewActionCssClass).filter(function(){var a=e.GetFileByKey($(this).data("filekey"));
return!e.IsViewSupported(a.type)}).closest("li").hide(),this._settings.UseDirectEdit||a.find("."+this._settings.EditActionCssClass).filter(function(){var a=e.GetFileByKey($(this).data("filekey"));return!e.IsEditingAllowed(a.type)}).closest("li").hide());var f=this;$(".ccl-hybrideditoritem").each(function(){f.fixSize($(this))})};b.prototype.fixSize=function(a){a.css("width","0px");setTimeout(function(){a.css("width","auto")},10)};b.prototype.RenderTemplate=function(a,b,c){if(!a)return $();a=a({files:b,
delayMenuInit:c});return a instanceof $?a:$(this._templatesContainer).html(a).children()};b.prototype.GetFileIcon=function(a){a=this.GetFileExtension(a);if(this._settings.FileTypeIcons)return this._settings.FileTypeIcons[a]||this._settings.DefaultFileIcon};b.prototype.GetFileExtension=function(a){a=a.split(".");return 1>=a.length?"":a.pop().toLowerCase()};b.prototype.GetFileByKey=function(a){return this._inlineModeFileKeys[a]};b.prototype.GetFilenameEditorItemSettings=function(){return{editModeEnabled:"inline",
inlineEditorOptions:{blockedCharacters:this._settings.IllegalCharacters,editFieldAutoWidth:!1,editFieldDisplayInline:!0,editFieldCssClass:this._settings.FileNameEditorCssClass,forceContainerSize:!0,maxLength:255}}};return b}(c.DomElementClass);c.FileRepoUploader=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(b,a,c){void 0===c&&(c=null);this.form=b;this.warningMessage=a;this.options=c;this.textInputs=b.find("input[type=text], input[type=numeric],textarea");this.hybridEditors=b.find("div.ccl-hybrideditoritem > input[type=hidden]");this.checkboxesRadios=b.find("input[type=checkbox],input[type=radio]");this.selects=b.find("select");this.textInputs.each(function(a,b){a=$(b);a.data(d.initialValueDataKey,a.val())});this.hybridEditors.each(function(a,b){a=$(b);a.data(d.initialValueDataKey,
a.val())});this.checkboxesRadios.each(function(a,b){a=$(b);a.data(d.initialValueDataKey,a.is(":checked"))});this.selects.each(function(a,b){a=$(b);a.data(d.initialValueDataKey,a.find(":selected").val())});this.AttachHandler();b.submit($.proxy(this.DetachHandler,this));this.initOptions(a);d.instances.push(this)}d.prototype.initOptions=function(b){if(this.options){this.options.cancelButtonId&&$(document.getElementById(this.options.cancelButtonId)).click($.proxy(this.DetachHandler,this));this.options.$cancelButtons&&
this.options.$cancelButtons.length&&this.options.$cancelButtons.click($.proxy(this.DetachHandler,this));var a=this.options.whiteList;a&&a.enabled&&(this.dialogWhiteList=new c.DialogWhiteList,this.dialogWhiteList.clearStateCallback=a.clearStateCallback,this.dialogWhiteList.confirmationMessage=b)}};d.prototype.IsDirty=function(){return 1==this.form.data(d.dirtyFormDataKey)};d.prototype.SetDirty=function(b){var a=b?1:0;this.toggleWhiteListEnabled(b);this.form.data(d.dirtyFormDataKey,a);this.form.trigger("dirtyChanged",
a)};d.prototype.AttachHandler=function(){if(!this.isAttached){var b=$.proxy(this.onBeforeUnloadHandler,this);$(window).on(d.eventBeforeunload,b);this.isAttached=!0}};d.prototype.DetachHandler=function(){if(this.isAttached){var b=$.proxy(this.onBeforeUnloadHandler,this);$(window).off(d.eventBeforeunload,b);this.isAttached=!1}this.toggleWhiteListEnabled(!1)};d.manuallyRunBeforeUnloadHandler=function(){d.instances.forEach(function(b){b.onBeforeUnloadHandler()})};d.prototype.onBeforeUnloadHandler=function(){var b=
this.IsDirty();b||this.textInputs.each(function(a,c){a=$(c);if(a.is(":visible")&&a.val()!=a.data(d.initialValueDataKey))return b=!0,!1});b||this.hybridEditors.each(function(a,c){a=$(c);if(a.val()!=a.data(d.initialValueDataKey))return b=!0,!1});b||this.checkboxesRadios.each(function(a,c){a=$(c);if(a.is(":visible")&&a.is(":checked")!=a.data(d.initialValueDataKey))return b=!0,!1});b||this.selects.each(function(a,c){a=$(c);if(a.is(":visible")&&a.find(":selected").val()!=a.data(d.initialValueDataKey))return b=
!0,!1});if(!b&&window.CKEDITOR&&CKEDITOR.instances)for(var a in CKEDITOR.instances)if(isTextEditorDirty(a)){b=!0;break}this.options&&this.options.callback&&(b=this.options.callback());this.SetDirty(b);if(b)return this.warningMessage};d.prototype.toggleWhiteListEnabled=function(b){this.dialogWhiteList&&(b?this.dialogWhiteList.enable():this.dialogWhiteList.disable())};d.instances=[];d.eventBeforeunload="beforeunload";d.initialValueDataKey="InitialValue";d.dirtyFormDataKey="IsDirty";return d}();c.FormCheckBeforeUnload=
d})(CCL||(CCL={}));
(function(c){var d=function(d){function b(a,b){var e=this;d.call(this,a,b);this._inputControl=$("#"+b.InputClientId);this._inputLabel=$("#"+b.LabelClientId);this._inputControl.on("keydown keyup change input propertychange",function(){e._inputControl.is(":visible")&&e.NotifyResultChanged()});this.determineVisibilityOfEmbedCheckbox(this.GetResults());this.Trigger(c.PickerEvent.Initialized);this.NotifyResultChanged()}__extends(b,d);b.prototype.GetResults=function(){return this._inputControl.val()||this._inputLabel.text()};
b.prototype.determineVisibilityOfEmbedCheckbox=function(a){a?this.isSecure?this.isUrlUnsecure(a)||8>=a.trim().length?$(".checkbox-embed-link-target").hide():$(".checkbox-embed-link-target").show():$(".checkbox-embed-link-target").show():$(".checkbox-embed-link-target").hide()};b.prototype.NotifyResultChanged=function(){var a=[],b=this.GetResults();this.determineVisibilityOfEmbedCheckbox(b);b&&a.push({fileUrl:b});this.Trigger(c.PickerEvent.ResultsChanged,{results:a})};b.prototype.isUrlUnsecure=function(a){a=
a.trim();var b=!0;8<a.length&&(a=this.parseUrl(a)[1],b=!a||"https:"!==a.toLowerCase());return b};b.prototype.parseUrl=function(a){return/^(?:(?:(?:([^:\/#\?]+:)?(?:(?:\/\/)((?:((?:[^:@\/#\?]+)(?::(?:[^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?::([0-9]+))?))?)?)?((?:\/?(?:[^\/\?#]+\/+)*)(?:[^\?#]*)))?(\?[^#]+)?)(#.*)?/.exec(a)};return b}(c.ItemPickerBase);c.LinkPicker=d})(CCL||(CCL={}));
(function(c){var d;(function(b){b[b.Horizontal=0]="Horizontal";b[b.Vertical=1]="Vertical"})(d||(d={}));var f=function(){function b(a,c,d){this.settings=c;this.cssClasses=d;this.$mainContainer=this.settings.contentContainer.wrap("<div class='"+this.cssClasses.TooltipWrapper+"'></div>").parent();this.$arrowContainer=$("<div class='"+this.cssClasses.TooltipArrow+"'></div>").prependTo(this.$mainContainer);this.$mainContainer.data("CustomTooltip",this);$.ui.position[b.tooltipCollisionName]!==b.tooltipCollision&&
($.ui.position[b.tooltipCollisionName]=b.tooltipCollision)}b.prototype.openTooltip=function(a,c){var d=this;this.isOpened||(this.isOpened=!0,this.dialogArrow=c.Arrow,this.$targetElement=a,this.$mainContainer.removeAttr("style"),this.clearArrowClassesFromMainContainer(),this.$mainContainer.css({display:"block","z-index":this.settings.zIndex}),this.$mainContainer.position({of:a,my:c.My,at:c.At,collision:b.tooltipCollisionName+" "+b.tooltipCollisionName,within:c.Within}),this.setArrowPosition(),this.$mainContainer.fadeIn(250,
function(){d.$mainContainer.show()}))};b.prototype.closeTooltip=function(){this.isOpened&&(this.$mainContainer.hide(),this.isOpened=!1)};b.prototype.isTooltipOpened=function(){return this.isOpened};b.prototype.setArrowPosition=function(){var a="",b="";switch(this.dialogArrow){case this.cssClasses.Bottom:b="center top";a="center bottom";break;case this.cssClasses.Top:b="center bottom";a="center top";break;case this.cssClasses.Left:b="right center";a="left center";break;case this.cssClasses.Right:b=
"left center",a="right center"}""!==a&&""!==b&&(this.clearArrowClassesFromMainContainer(),this.$mainContainer.addClass(this.dialogArrow),this.$arrowContainer.position({of:this.$targetElement,my:b,at:a,collision:"none none"}))};b.prototype.clearArrowClassesFromMainContainer=function(){this.$mainContainer.removeClass(this.cssClasses.Top+" "+this.cssClasses.Bottom+" "+this.cssClasses.Left+" "+this.cssClasses.Right)};b.prototype.invertArrow=function(a){switch(a){case d.Horizontal:switch(this.dialogArrow){case this.cssClasses.Right:this.dialogArrow=
this.cssClasses.Left;break;case this.cssClasses.Left:this.dialogArrow=this.cssClasses.Right}break;case d.Vertical:switch(this.dialogArrow){case this.cssClasses.Bottom:this.dialogArrow=this.cssClasses.Top;break;case this.cssClasses.Top:this.dialogArrow=this.cssClasses.Bottom}}this.setArrowPosition()};b.tooltipCollisionName="flipWithArrow";b.tooltipCollision={left:function(a,b){var c=a.left;$.ui.position.flip.left(a,b);$.ui.position.fit.left(a,b);c!==a.left&&b.elem.data("CustomTooltip").invertArrow(d.Horizontal)},
top:function(a,b){var c=a.top;$.ui.position.flip.top(a,b);$.ui.position.fit.top(a,b);c!==a.top&&b.elem.data("CustomTooltip").invertArrow(d.Vertical)}};return b}();c.CustomTooltip=f})(CCL||(CCL={}));
(function(c){var d=function(){function c(b,a,d,f){void 0===d&&(d=null);void 0===f&&(f=500);this.loadingIndicatorClass=a;this.$element=$(b);this.$elementsToDisable=d;this.timeout=f;var e=this;$(function(){e.$element.on("click",e.handler.bind(e)).each(function(){var a=$._data(this,"events").click,b=a.pop();a.unshift(b)}).on(c.eventRemoveLoadingIndicator,function(a,b){return e.removeLoadingIndicatorClass(b)})})}c.prototype.handler=function(){var b=this;this.disableLoadingIndicator||(this.timer=setTimeout(function(){b.$element.addClass(b.loadingIndicatorClass);
b.toggleDisabled(!0)},this.timeout))};c.prototype.removeLoadingIndicatorClass=function(b){void 0===b&&(b=!1);clearTimeout(this.timer);this.$element.removeClass(this.loadingIndicatorClass);b||this.toggleDisabled()};c.prototype.toggleDisabled=function(b){void 0===b&&(b=!1);this.$element.prop("disabled",b);void 0!==this.$elementsToDisable&&null!==this.$elementsToDisable&&$.each(this.$elementsToDisable,function(a,c){$(c).prop("disabled",b)})};c.eventRemoveLoadingIndicator="removeLoadingIndicator";return c}();
c.ButtonLoadingIndicator=d})(CCL||(CCL={}));(function(c){var d=function(){function c(b){this.delayedCallback=b}c.prototype.invokeCallback=function(b,a){var c=this;this.timeoutId&&clearTimeout(this.timeoutId);this.timeoutId=setTimeout(function(){c.delayedCallback(b)},a)};return c}();c.CallbackDebouncer=d})(CCL||(CCL={}));
(function(c){var d=function(){function d(){var b=this;this.firstHit=!0;this.lastState=c.CommonFunctions.isPhoneScreenSize();var a=new c.CallbackDebouncer(function(){var a=c.CommonFunctions.isPhoneScreenSize();if(b.firstHit||a!==b.lastState)b.firstHit=!1,$(b).trigger(d.mediaChangedEventName,a),b.lastState=a});$(window).resize(function(){a.invokeCallback(void 0,200)})}d.mediaChangedEventName="mediaTypeChanged";return d}();c.WindowResizeHandler=d})(CCL||(CCL={}));
__extends=this&&this.__extends||function(c,d){function f(){this.constructor=c}for(var b in d)d.hasOwnProperty(b)&&(c[b]=d[b]);c.prototype=null===d?Object.create(d):(f.prototype=d.prototype,new f)};var PickerInitFailureReason;(function(c){c[c.BrowserNotSupported=1]="BrowserNotSupported";c[c.ExternalServiceNotAvailable=2]="ExternalServiceNotAvailable"})(PickerInitFailureReason||(PickerInitFailureReason={}));
var PickerInitFailureEventArgs=function(){return function(c,d,f){this.failureReason=c;this.failureMessage=d;this.pickerName=f}}(),PickerCallback=function(){return function(c,d,f,b){this.onPickerInitSuccess=c;this.onPickerInitFailure=d;this.onFileSelected=f;this.onFileSelectionCanceled=b}}(),SourceType;
(function(c){c[c.Dropbox=1]="Dropbox";c[c.Google=2]="Google";c[c.OneDriveForBusiness=3]="OneDriveForBusiness";c[c.Local=4]="Local";c[c.OneDrivePersonal=5]="OneDrivePersonal";c[c.WebDav=6]="WebDav";c[c.Ziggeo=7]="Ziggeo"})(SourceType||(SourceType={}));(function(c){c.isOneDrive=function(d){return d===c.OneDrivePersonal||d===c.OneDriveForBusiness};c.isCloud=function(d){return d===c.Dropbox||d===c.Google||c.isOneDrive(d)||d===c.WebDav||d===c.Ziggeo}})(SourceType||(SourceType={}));var Uploaders;
(function(c){(function(c){(function(c){var b=function(){return function(a){this.buttonComponents=a}}();c.CollaborationViewModel=b})(c.Components||(c.Components={}))})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){return function(a,b){void 0===b&&(b=CCL.FileList.Components.NestedFileListComponent.defaultNestedFileListHtmlTag);this.buttonComponents=a;this.fileListHtmlTagName=b;this.name="collaboration-control";this.viewModel={instance:new c.CollaborationViewModel(this.buttonComponents)};this.template='\n\x3c!-- ko foreach: buttonComponents --\x3e\n<div data-bind="component: {name: name}"></div>\n\x3c!-- /ko --\x3e\n<'+this.fileListHtmlTagName+">\n    <"+
CCL.FileList.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag+' params="file: $data.file, settings: $data.settings"></'+CCL.FileList.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag+">\n</"+this.fileListHtmlTagName+">\n"}}();c.CollaborationComponent=b})(c.Components||(c.Components={}))})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){function a(a,b,c){contract.require(!objectState.isNullOrUndefined(a),"This class requires 'name' to be passed. Please, provide it.");-1===a.lastIndexOf(".")||void 0!==b||c?(this._name=a,this._extension=objectState.isNullOrUndefined(b)?null:b):(this._name=a.substring(0,a.lastIndexOf(".")),this._extension=a.substring(a.lastIndexOf(".")+1))}a.prototype.getName=function(){return this._name};a.prototype.getExtension=function(){return this._extension};
a.prototype.getFullName=function(){return this._name+"."+(this._extension?this._extension:"")};return a}();c.FileName=b})(c.Model||(c.Model={}))})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
var BaseMetadata=function(){return function(c,d,f){this.name=c;this.sourceType=d;this.mimeType=f}}(),LocalFileInputHandle=function(){function c(c){this.fileInput=c}c.prototype.get=function(){return this.fileInput};return c}(),LocalFileHandle=function(){function c(c){this.file=c}c.prototype.get=function(){return this.file};return c}(),ExternalSourceFileHandle=function(){function c(c,f,b,a){this.url=c;this.id=f;this.canBeCopied=b;this.canBeShared=a}c.prototype.get=function(){return objectState.isNullOrUndefined(this.id)?
this.url:{url:this.url,id:this.id,canBeCopied:null==this.canBeCopied?!0:this.canBeCopied,canBeShared:null==this.canBeShared?!0:this.canBeShared}};return c}(),FileInOneDriveHandle=function(){function c(c){this.postMessageFile=c}c.prototype.get=function(){return objectState.isNullOrUndefined(this.postMessageFile.id)?this.postMessageFile.url:{url:this.postMessageFile.url,viewUrl:this.postMessageFile.viewUrl,downloadUrl:this.postMessageFile.downloadUrl,id:this.postMessageFile.id,canBeCopied:null==this.postMessageFile.canBeCopied?
!0:this.postMessageFile.canBeCopied,canBeShared:null==this.postMessageFile.canBeShared?!0:this.postMessageFile.canBeShared}};return c}(),PickerFileResult=function(){function c(c,f,b,a,e,g){this.fileHandle=c;this.name=f;this.size=b;this.sourceType=a;this.relativePath=e;this.mimeType=g}c.prototype.getFileHandle=function(){return this.fileHandle.get()};c.createExternalSourcePickerFileResult=function(d,f,b,a,e,g,h,k){return new c(new ExternalSourceFileHandle(d,g,h,k),f,b,a,null,e)};c.createLocalPickerFileResultWithInput=
function(d,f){return new c(new LocalFileInputHandle(d),f,null,SourceType.Local)};c.createLocalPickerFileResult=function(d){return new c(new LocalFileHandle(d),d.name,d.size,SourceType.Local,null,d.type)};c.createFolderPickerFileResultWithRelativePath=function(d,f){return new c(new LocalFileHandle(d),d.name,d.size,SourceType.Local,f,d.type)};c.createPickerFileResultWithFileName=function(d){return new c(new LocalFileHandle(null),d,0,SourceType.Local,null,null)};c.createOneDrivePickerFileResult=function(d){return new c(new FileInOneDriveHandle(d),
d.name,d.size,d.sourceType,null,d.mimeType)};return c}(),UploadMetadata=function(c){function d(d,b,a,e,g,h,k,l){c.call(this,b,a,h);this.id=d;this.name=b;this.sourceType=a;this.signature=e;this.signedFileRepoId=g;this.mimeType=h;this.isTemplate=k;this.customId=l}__extends(d,c);d.updateName=function(c,b){c.name=b};d.setTemplate=function(c,b){c.isTemplate=b};d.create=function(c,b){var a=c.name,e=c.sourceType;c=c.mimeType;var f=null,h=null,k=null,l=null;b&&(b.fileGuid&&(f=b.fileGuid),b.signedGuid&&(h=
b.signedGuid),b.signedFileRepoId&&(k=b.signedFileRepoId),b.mimeType&&(c=b.mimeType),b.customId&&(l=b.customId));return new d(f,a,e,h,k,c,!1,l)};return d}(BaseMetadata),ValidationStatus;
(function(c){c[c.Ok=0]="Ok";c[c.Inconclusive=1]="Inconclusive";c[c.FileIsUnavailable=2]="FileIsUnavailable";c[c.FileSizeIsTooSmall=3]="FileSizeIsTooSmall";c[c.FileSizeIsTooBig=4]="FileSizeIsTooBig";c[c.FileExtensionIsNotAllowed=5]="FileExtensionIsNotAllowed";c[c.FilenameContainsIllegalCharacters=6]="FilenameContainsIllegalCharacters";c[c.FileNameIsIllegal=7]="FileNameIsIllegal";c[c.FileIsEmpty=8]="FileIsEmpty";c[c.FileNameIsTooLong=9]="FileNameIsTooLong";c[c.FileNameIsEmpty=10]="FileNameIsEmpty";
c[c.FileTypeNotSupportedByCasper=11]="FileTypeNotSupportedByCasper";c[c.FileCannotBeCopied=12]="FileCannotBeCopied";c[c.FileCannotBeShared=13]="FileCannotBeShared"})(ValidationStatus||(ValidationStatus={}));
var ValidationResult=function(){function c(c,f){this.status=c;this.data=f}c.prototype.isValid=function(){return this.status===ValidationStatus.Ok||this.status===ValidationStatus.Inconclusive};c.prototype.getStatus=function(){return this.status};c.prototype.getData=function(){return this.data};return c}(),FileExtensionValidator=function(){function c(c,f){this.allowedExtensions=c;this.forbiddenExtensions=f}c.prototype.validateFile=function(d){if(objectState.isNullOrUndefined(d))throw Error("Argument 'file' cannot be null or undefined");
if(objectState.isNullOrUndefined(d.name))return new ValidationResult(ValidationStatus.Inconclusive);d=c.getFileExtension(d.name);return!this.isAllowed(d)||this.isForbidden(d)?new ValidationResult(ValidationStatus.FileExtensionIsNotAllowed):new ValidationResult(ValidationStatus.Ok)};c.prototype.isAllowed=function(c){var d=this;return this.isAllowedFileValidationEnabled()?this.allowedExtensions.some(function(b){return d.equalsIgnoreCase(b,c)}):!0};c.prototype.isAllowedFileValidationEnabled=function(){return Array.isArray(this.allowedExtensions)&&
0<this.allowedExtensions.length};c.prototype.isForbidden=function(c){var d=this;return this.isForbiddenFileValidationEnabled()?this.forbiddenExtensions.some(function(b){return d.equalsIgnoreCase(b,c)}):!1};c.prototype.isForbiddenFileValidationEnabled=function(){return Array.isArray(this.forbiddenExtensions)&&0<this.forbiddenExtensions.length};c.prototype.equalsIgnoreCase=function(c,f){return c.toLowerCase()===f.toLowerCase()};c.getFileExtension=function(c){return c&&(c=c.split("."),1<c.length)?c.pop():
""};return c}(),GapiDocType=function(){function c(){}c.word="application/vnd.openxmlformats-officedocument.wordprocessingml.document";c.excel="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";c.powerpoint="application/vnd.openxmlformats-officedocument.presentationml.presentation";c.png="image/png";c.pdf="application/pdf";c.googleSpreadsheet="application/vnd.google-apps.spreadsheet";c.googleDocument="application/vnd.google-apps.document";c.googlePresentation="application/vnd.google-apps.presentation";
c.googleDrawing="application/vnd.google-apps.drawing";c.googleForm="application/vnd.google-apps.form";c.googleApps=[c.googleSpreadsheet,c.googleDocument,c.googlePresentation];c.getDocumentType=function(d){return d[c.word]?c.word:d[c.excel]?c.excel:d[c.powerpoint]?c.powerpoint:d[c.png]?c.png:d[c.pdf]?c.pdf:Object.keys(d)[0]};return c}(),GoogleAppExportInfo=function(){function c(){}c.getExportedTypesMap=function(){var c={};c[GapiDocType.googleDocument]={mimeType:GapiDocType.word,extension:"docx"};c[GapiDocType.googleSpreadsheet]=
{mimeType:GapiDocType.excel,extension:"xlsx"};c[GapiDocType.googlePresentation]={mimeType:GapiDocType.powerpoint,extension:"pptx"};return c};c.exportedMimeTypes=c.getExportedTypesMap();c.getExportedTypeForGoogleApp=function(d){return c.exportedMimeTypes[d]};c.getGoogleAppForExportedExtension=function(d){for(var f in c.exportedMimeTypes)if(c.exportedMimeTypes.hasOwnProperty(f)&&c.exportedMimeTypes[f].extension===d)return f};return c}(),FileInCloudTypeValidator=function(c){function d(d,b,a){c.call(this,
d,b);this.allowedGoogleAppMimeTypes=this.mapFileExtensionsToGoogleAppMimeTypes(d);this.forbiddenGoogleAppMimeTypes=this.mapFileExtensionsToGoogleAppMimeTypes(b);this.isCasperEnabled=a}__extends(d,c);d.prototype.validateFile=function(f){if(objectState.isNullOrUndefined(f))throw Error("Argument 'file' cannot be null or undefined");return this.isCasperEnabled&&!d.isSupportedByCasper(f.mimeType)?new ValidationResult(ValidationStatus.FileTypeNotSupportedByCasper,f.name):this.isGoogleAppFileFromGoogle(f)?
this.validateGoogleApp(f):c.prototype.validateFile.call(this,f)};d.prototype.mapFileExtensionsToGoogleAppMimeTypes=function(c){if(!Array.isArray(c))return[];for(var b=[],a=0;a<c.length;a++){var d=GoogleAppExportInfo.getGoogleAppForExportedExtension(c[a]);d&&b.push(d)}return b};d.prototype.isGoogleAppFileFromGoogle=function(c){return c.sourceType===SourceType.Google&&c.mimeType&&-1!==GapiDocType.googleApps.indexOf(c.mimeType)};d.prototype.validateGoogleApp=function(c){return!this.isAllowedGoogleApp(c)||
this.isForbiddenGoogleApp(c)?new ValidationResult(ValidationStatus.FileExtensionIsNotAllowed):!1===c.getFileHandle().canBeShared?new ValidationResult(ValidationStatus.FileCannotBeShared,c.name):!1===c.getFileHandle().canBeCopied?new ValidationResult(ValidationStatus.FileCannotBeCopied,c.name):new ValidationResult(ValidationStatus.Ok)};d.prototype.isAllowedGoogleApp=function(c){return this.isAllowedFileValidationEnabled()?-1!==this.allowedGoogleAppMimeTypes.indexOf(c.mimeType):!0};d.prototype.isForbiddenGoogleApp=
function(c){return this.isForbiddenFileValidationEnabled()?-1!==this.forbiddenGoogleAppMimeTypes.indexOf(c.mimeType):!1};d.isSupportedMimeTypeForTemplating=function(c){switch(c){case "application/vnd.google-apps.document":case "application/vnd.google-apps.spreadsheet":case "application/vnd.google-apps.presentation":case "application/vnd.google-apps.drawing":return!0}return!1};d.isSupportedByCasper=function(c){return 0===c.indexOf("application/vnd.google-apps.")?d.isSupportedMimeTypeForTemplating(c):
!0};return d}(FileExtensionValidator),FileInCloudMetadata=function(c){function d(d,b,a,e,g,h,k,l){void 0===l&&(l=!1);c.call(this,d,b,e);this.name=d;this.sourceType=b;this.viewUrl=a;this.mimeType=e;this.isTemplate=g;this.downloadUrl=h;this.editUrl=k;this.isRegisteredWithCasper=l;this.supportsTemplating=FileInCloudTypeValidator.isSupportedMimeTypeForTemplating(e);this.isSupportedByCasper=FileInCloudTypeValidator.isSupportedByCasper(e)}__extends(d,c);d.clone=function(c){var b=new d(c.name,c.sourceType,
c.viewUrl,c.mimeType,c.isTemplate,c.downloadUrl,c.editUrl,c.isRegisteredWithCasper);b.id=c.id;b.oAuthContext=c.oAuthContext;return b};d.setTemplate=function(c,b){c.isTemplate=b};d.downloadUrlTemplate="https://drive.google.com/uc?export=download&id={fileId}";d.create=function(c,b){var a=c.name,e=c.sourceType,f=d.getViewUrl(c),h=d.getDownloadUrl(c);a=new d(a,e,f,c.mimeType,!1,h,f);a.oAuthContext=b;a.id=d.getId(c);return a};d.getViewUrl=function(c){c=c.getFileHandle();return"string"===typeof c?c:c.viewUrl?
c.viewUrl:c.url};d.getDownloadUrl=function(c){if(!FileInCloudTypeValidator.isSupportedByCasper(c.mimeType))return null;c=c.getFileHandle();var b="";c&&(c.downloadUrl?b=c.downloadUrl:c.id&&(b=d.downloadUrlTemplate.replace("{fileId}",c.id)));return b};d.getId=function(c){c=c.getFileHandle();return d.isIdAvailable(c)?c.id:null};d.isIdAvailable=function(c){return!objectState.isNullOrUndefined(c)&&!objectState.isNullOrUndefined(c.id)};return d}(BaseMetadata),UploadControlTranslation=function(){return function(){}}();
(function(c){c=c.FileList||(c.FileList={});c=c.Model||(c.Model={});c=c.FileItemState||(c.FileItemState={});c[c.New=0]="New";c[c.Ready=1]="Ready";c[c.InProgress=2]="InProgress";c[c.Aborting=3]="Aborting";c[c.Error=4]="Error";c[c.Success=5]="Success"})(CCL||(CCL={}));
(function(c){(function(c){(function(c){var b=function(){function a(){this.currentState=c.FileItemState.New}a.prototype.getCurrentState=function(){return this.currentState};a.prototype.isFinalState=function(){return this.currentState===c.FileItemState.Success||this.currentState===c.FileItemState.Error};a.prototype.prepareUpload=function(){if(this.currentState===c.FileItemState.New)this.currentState=c.FileItemState.Ready;else throw Error("You can only prepare upload if it is in status 'New'");};a.prototype.startUpload=
function(){if(this.currentState===c.FileItemState.Ready)this.currentState=c.FileItemState.InProgress;else throw Error("You can only start upload if it is in status 'Ready'");};a.prototype.abortUpload=function(){if(this.currentState===c.FileItemState.InProgress)this.currentState=c.FileItemState.Aborting;else throw Error("You can only abort upload if it is in status 'InProgress'");};a.prototype.finishUpload=function(){if(this.currentState===c.FileItemState.Ready||this.currentState===c.FileItemState.InProgress||
this.currentState===c.FileItemState.Aborting)this.currentState=c.FileItemState.Success;else throw Error("You can only finish upload if it is in status 'InProgress' or 'Ready' or 'Aborting'");};a.prototype.failUpload=function(){if(this.currentState===c.FileItemState.Ready||this.currentState===c.FileItemState.InProgress||this.currentState===c.FileItemState.Aborting)this.currentState=c.FileItemState.Error;else throw Error("You can only fail upload if it is in status 'Ready' or 'InProgress' or 'Aborting'");
};return a}();c.FileItemStateMachine=b})(c.Model||(c.Model={}))})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(c){var d=function(){function b(){}b.internalFileItemSelected="internal:fileitem:selected";b.internalFileItemViewActivated="internal:fileitem:view:activated";b.internalFileItemViewOriginalActivated="internal:fileitem:vieworiginal:activated";b.internalFileItemDownloadActivated="internal:fileitem:download:activated";b.internalFileItemEditActivated="internal:fileitem:edit:activated";b.internalFileItemTemplateChanged="internal:fileitem:templateChanged";return b}();c.InternalTriggers=
d})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(c){(function(d){var b=function(){function a(a){var b=this;this.onItemClick=function(a,d){!b.noInteraction&&a.canBeSelected&&d.target.dispatchEvent(new CustomEvent(c.InternalTriggers.internalFileItemSelected,{bubbles:!0,detail:{File:a}}))};contract.require(!objectState.isNullOrUndefined(a.fileName),"This class requires 'fileName' to be passed. Please, provide it.");this.fileName=ko.observable(a.fileName.getName());this.fileExtension=ko.observable(a.fileName.getExtension());this.fileFullName=
ko.observable(a.fileName.getFullName());this.stateMachine=a.stateMachine;this.isRemoveAllowed=ko.observable(objectState.isNullOrUndefined(a.isRemoveAllowed)?!0:a.isRemoveAllowed);this.showTemplateOptionsInFilelist=ko.observable(!1);this.showTemplateOptionsForItem=ko.observable(!1);this.disableTemplateOptionsForItem=ko.observable(!1);this.isRenaming=ko.observable(!1);this.isRenaming.subscribe(function(a){a||b.renameFile()});this.noInteraction=objectState.isNullOrUndefined(a.noInteraction)?!1:a.noInteraction;
this.onRemoveCallback=a.onRemoveCallback;this.onRenameCallback=a.onRenameCallback;this.onSetTemplateCallback=a.onSetTemplateCallback;this.errorMessage=ko.observable(objectState.isNullOrUndefined(a.errorMessage)?null:a.errorMessage);this.warningMessage=ko.observable(objectState.isNullOrUndefined(a.warningMessage)?null:a.warningMessage);this.Metadata=a.metadata;this.PreviewSettings=a.previewSettings;this.Name=this.fileFullName();this.IsViewableInOfficeOnline=a.isViewableInOfficeOnline;this.SnapshotFileRepoSignature=
a.snapshotFileRepoSignature;this.SnapshotFileRepoId=a.snapshotFileRepoId;this.SnapshotFileUrl=a.snapshotFileUrl;this.SnapshotFileId=a.snapshotFileId;this.isUploaded=ko.observable(!1);this.isCompleted=ko.observable(!1);this.rightSideCustomHtml=ko.pureComputed(function(){return objectState.isNullOrUndefined(a.rightSideCustomHtml)?null:a.rightSideCustomHtml});this.customContextMenuItems=a.customContextMenuItems;this.isSupportedByCasper=ko.observable(!1);var d=this.Metadata;this.mimeType=d?ko.observable(d.mimeType):
ko.observable("");this.getItemCss=ko.pureComputed(function(){if(b.errorMessage()||b.warningMessage())return"ccl-fl-item-error";if(b.noInteraction)return"no-interaction";var a="";b.canBeSelected&&(a+=" ccl-fl-item-selectable");b.showTemplateOptionsInFilelist()&&b.showTemplateOptionsForItem()&&a+" ccl-fl-item-with-template-options";return a});this.getRowCss=ko.pureComputed(function(){var a=[];a.push("ccl-fl-item-row-container");b.showTemplateOptionsInFilelist()&&b.errorMessage()&&a.push("h-less-opacity");
return a.join(" ")});this.getFileItemCss=ko.pureComputed(function(){var c=["ccl-fl-item-details"];b.isUploaded()||c.push("ccl-fl-item-details-file-icon-faded");a.iconCssClass&&c.push(a.iconCssClass);return c.join(" ")});this.getFileNameCss=ko.pureComputed(function(){var a=[];b.errorMessage()||b.warningMessage()?a.push("ccl-fl-item-details-text-file-name-error"):b.isUploaded()?a.push("ccl-fl-item-details-text-file-name-uploaded"):a.push("ccl-fl-item-details-text-file-name-faded");return a.join(" ")});
this.getFileExtensionText=ko.pureComputed(function(){return"."+b.fileExtension()});this.getFileExtensionCss=ko.pureComputed(function(){return b.errorMessage()||b.warningMessage()?"ccl-fl-item-details-text-file-extension-error":b.isUploaded()?"ccl-fl-item-details-text-file-extension-uploaded":"ccl-fl-item-details-text-file-extension-faded"});this.getFormCssClasses=ko.pureComputed(function(){return b.errorMessage()||b.warningMessage()?"ccl-fl-item-details-form error":"ccl-fl-item-details-form"});this.getRemoveButtonCss=
ko.pureComputed(function(){return"ccl-fl-item-remove-"+(b.isRemoveAllowed()?"enabled":"disabled")});this.progress=ko.observable(0);this.stateMachine.prepareUpload();this.isExtraOperationAvailable=ko.pureComputed(function(){return b.isUploaded()})}a.prototype.setProgress=function(a){var b=this.progress();if(100<a)throw"Progress can't exceed 100";b>=a||(0===b&&0<a&&this.stateMachine.startUpload(),this.progress(a))};a.prototype.setTemplate=function(a){this.isFileFromGoogleDrive()?FileInCloudMetadata.setTemplate(this.Metadata,
a):UploadMetadata.setTemplate(this.Metadata,a);this.onSetTemplateCallback()};a.prototype.renameFile=function(){var a=this.Metadata,b=this.fileName();!objectState.isNullOrUndefined(this.fileExtension())&&0<this.fileExtension().length&&(b=this.fileName()+"."+this.fileExtension());if(a instanceof UploadMetadata){var c=PickerFileResult.createPickerFileResultWithFileName(b);c=this.validator.validateFile(c);c.isValid()?(UploadMetadata.updateName(a,b),this.errorMessage(null),this.isRenaming(!1),this.onRenameCallback(),
this.Name=b):(this.isRenaming(!0),this.errorMessage(c.getData()))}else throw Error("Metadata needs to be of type UploadMetadata to be able to rename the file");};a.prototype.canRename=function(){return this.isUploaded()&&!this.IsFileInCloud};Object.defineProperty(a.prototype,"IsFileInCloud",{get:function(){return this.Metadata instanceof FileInCloudMetadata},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"MimeType",{get:function(){return this.mimeType()},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"RegisteredWithCasper",{get:function(){return this.IsFileInCloud?this.Metadata.isRegisteredWithCasper:!1},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"canBeSelected",{get:function(){if(this.isFileFromGoogleDrive()&&!this.RegisteredWithCasper)switch(this.mimeType()){case GapiDocType.googleDocument:case GapiDocType.googlePresentation:case GapiDocType.googleSpreadsheet:case GapiDocType.googleDrawing:case GapiDocType.googleForm:return!1}return!0},
enumerable:!0,configurable:!0});a.prototype.isFileFromGoogleDrive=function(){return this.IsFileInCloud?this.Metadata.sourceType===SourceType.Google:!1};a.prototype.isFileTemplate=function(){var a=this.Metadata;return a instanceof FileInCloudMetadata||a instanceof UploadMetadata?a.isTemplate:!1};a.prototype.markAsUploaded=function(){this.isUploaded()||this.stateMachine.finishUpload();this.progress(100);this.isUploaded(!0)};a.prototype.markAsCompleted=function(){this.isCompleted(!0)};a.prototype.setFolderError=
function(){this.setError(UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};a.prototype.setError=function(a){this.errorMessage(a);this.progress(100);this.stateMachine.failUpload();this.isRemoveAllowed(!0)};a.prototype.setFolderWarning=function(){this.warningMessage(UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};a.prototype.getState=function(){return this.stateMachine.getCurrentState()};a.prototype.abortUpload=function(){this.stateMachine.abortUpload()};a.buildItemForUpload=
function(b,c){b=new d.FileName(b);c=new a({fileName:b,stateMachine:new d.FileItemStateMachine,iconCssClass:a.getCssIconForFile(a.getFilePurpose(b.getExtension())),metadata:c});c.isSupportedByCasper(!0);return c};a.buildItemForFolder=function(b){return new a({fileName:new d.FileName(b,void 0,!0),stateMachine:new d.FileItemStateMachine,iconCssClass:"ccl-fl-item-details-folder-icon"})};a.buildItemForFileInCloud=function(b){var c=new a({fileName:new d.FileName(b.name),stateMachine:new d.FileItemStateMachine,
iconCssClass:a.getCssIconForFileInCloud(b),metadata:b});b.isSupportedByCasper&&c.isSupportedByCasper(!0);return c};a.getCssIconForFileInCloud=function(b){return b.sourceType===SourceType.Google?a.getCssIconForGoogleDriveFile(b.mimeType):SourceType.isOneDrive(b.sourceType)?"ccl-fl-item-details-one-drive-file-icon":a.defaultIconCssClass};a.getCssIconForGoogleDriveFile=function(a){switch(a){case GapiDocType.googleDocument:return"ccl-fl-item-details-google-document-icon";case GapiDocType.googlePresentation:return"ccl-fl-item-details-google-presentation-icon";
case GapiDocType.googleSpreadsheet:return"ccl-fl-item-details-google-spreadsheet-icon";default:return"ccl-fl-item-details-google-drive-file-icon"}};a.getFilePurpose=function(a){return-1!==["docx","doc","docm","odt","rtf"].indexOf(a)?"document":-1!==["pptx","ppt","pptm","odp"].indexOf(a)?"presentation":-1!==["pdf"].indexOf(a)?"pdf":-1!==["xlsx","xls","xlsb, xlsm","ods"].indexOf(a)?"table":-1!=="mov wmv flv swf mp4 m4v webm".split(" ").indexOf(a)?"video":-1!=="mp3 m4a wav fla acc ogg".split(" ").indexOf(a)?
"audio":-1!==["bmp","gif","jpg","jpeg","png"].indexOf(a)?"image":-1!==["zip","rar","7z"].indexOf(a)?"archive":"generic"};a.getCssIconForFile=function(a){return"ccl-fl-item-details-"+a+"-file-icon"};a.defaultIconCssClass="ccl-fl-item-details-generic-file-icon";return a}();d.FileItem=b})(c.Model||(c.Model={}))})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(c){(function(d){var b=function(){function a(a,b,d){var e=this;this.settings=a;this.fileItems=b;this.validator=d;this.addFile=function(a){var b=!1;e.showTemplateOptionsInFilelist()&&(b=e.settings.MimeTypesToTemplateFromUpload.some(function(b){return b===a.mimeType()}),(a.IsFileInCloud&&a.isFileFromGoogleDrive()||a.isUploaded()&&b)&&a.showTemplateOptionsInFilelist(!0));a.validator=e.validator;e.files.push(a);e.lastAddedFile=a;e.showTemplateOptionsInFilelist()&&(a.IsFileInCloud||
b)&&e.updateDisabledStateForTemplateOptionsInFileList()};this.clearFileList=function(){e.files.removeAll();e.lastAddedFile=null};this.removeFile=function(a){e.files.remove(a);a.isFileTemplate()&&e.updateDisabledStateForTemplateOptionsInFileList();if(a.onRemoveCallback)a.onRemoveCallback()};this.getFiles=function(){return e.files()};this.getLastAddedFile=function(){return e.lastAddedFile};this.isVisible=ko.observable(!0);this.files=ko.observableArray(b);this.showTemplateOptionsInFilelist=ko.observable(objectState.isNullOrUndefined(this.settings)?
!1:this.settings.ShowTemplateOptions);this.isEnabledMakeACopyForEachStudent=ko.observable(objectState.isNullOrUndefined(this.settings)?!1:this.settings.IsEnabledMakeACopyForEachStudent);this.selectedTemplate=ko.observable("");document.body.addEventListener(c.InternalTriggers.internalFileItemTemplateChanged,function(a){e.updateDisabledStateForTemplateOptionsInFileList();e.selectedTemplate=a.detail.isTemplate?a.detail.id:""})}a.prototype.updateDisabledStateForTemplateOptionsInFileList=function(){for(var a=
this.isTemplateSelected(),b=0,c=this.files();b<c.length;b++){var d=c[b];if(d.IsFileInCloud){var f=d.Metadata;f=this.settings.DisableTemplateOptions||!f.supportsTemplating&&!f.isTemplate||a&&!f.isTemplate;d.disableTemplateOptionsForItem(f)}else d.Metadata instanceof UploadMetadata&&(f=d.Metadata,f=this.settings.DisableTemplateOptions||a&&!f.isTemplate,d.disableTemplateOptionsForItem(f))}};a.prototype.isTemplateSelected=function(){for(var a=!1,b=0,c=this.files();b<c.length;b++)if(c[b].Metadata.isTemplate){a=
!0;break}return a};return a}();d.FileListViewModel=b})(c.Model||(c.Model={}))})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(c){(function(d){var b=function(){function a(b,c,d){var e=this;void 0===c&&(c=a.defaultFileListHtmlTag);this.settings=b;this.name=c;this.renameValidator=d;this.viewModel={createViewModel:function(a,b){return e.getViewModel(a,b)}};this.template=this.getHtmlTemplate()}a.prototype.getViewModel=function(a,b){b=new c.Model.FileListViewModel(a&&a.settings?a.settings:this.settings,a&&a.files?this.transformFiles(a.files):[],a&&a.renameValidator?a.renameValidator:this.renameValidator);
a&&a.api(b);return b};a.prototype.getHtmlTemplate=function(){return'\n                <div data-bind="foreach: { data: files, as: \'file\' }, visible: isVisible">\n                    <div class="ccl-fl-item-container">\n                        <div data-bind="css: getRowCss()">\n                            <div tabindex="0" data-bind="css: getItemCss(), click: function(file, event) { onItemClick(file, event) }, clickBubble: false" class="ccl-fl-item">\n                                <div data-bind="style: {width: progress() + \'%\'},\n                                    css: isCompleted() ? \'ccl-fl-item-uploaded\' : \'ccl-fl-item-progress-animate\',\n                                    visible: !errorMessage()">\n                                </div>\n                                <div class="ccl-fl-item-content">\n                                    <div data-bind="css: getFileItemCss()">\n                                        <form data-bind="css: getFormCssClasses(), submit: renameFile, visible: isRenaming()">\n                                            <label data-bind="attr: { for: \'ccl-fl-item-\' + $index() }, text: $parent.settings.Translations.WriteANewFileName" style="display: none"></label>\n                                            <input type="text" data-bind="attr: { id: \'ccl-fl-item-\' + $index(), placeholder: $parent.settings.Translations.WriteANewFileName }, hasFocus: isRenaming,  textInput: fileName, click: function() { }, clickBubble: false">\n                                        </form>\n                                        <span data-bind="text: fileName, css: getFileNameCss(), visible: !isRenaming()"></span>\n                                        <span data-bind="visible: fileExtension() && !isRenaming(), text: getFileExtensionText, css: getFileExtensionCss()"></span>\n                                    </div>\n                                    <div data-bind="visible: !isRenaming()">\n                                        <div class="ccl-fl-item-actions">\n                                            \x3c!-- ko template: { nodes: $componentTemplateNodes, data: { file: file, settings: $parent.settings }, if: $parent.settings.EnableContextMenu && !$parent.settings.NoInteraction} --\x3e\x3c!-- /ko --\x3e\n                                    <div data-bind="visible: !$parent.settings.DisableRemove && isRemoveAllowed() && !(isFileTemplate() && $parent.settings.DisableTemplateOptions)">\n                                                <button data-bind="click: function() { $parent.removeFile(file) }, css: getRemoveButtonCss(), attr: { \'aria-label\': $parent.settings.Translations.Delete }"></button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="ccl-fl-item-template-options" data-bind="visible: $parent.showTemplateOptionsInFilelist && showTemplateOptionsForItem(), css: disableTemplateOptionsForItem() ? \'disabled\' : \'\'">\n                                <templateoptions-dropdown params="file: $data, settings: $parent.settings"></templateoptions-dropdown>\n                            </div>\n\n                            <div class="ccl-fl-warning" data-bind="visible: warningMessage()">\n                                <div class="ili ili-exclamation-circle ccl-fl-warning-exclamation-circle" aria-hidden="true"></div>\n                                <div class="ccl-fl-warning-message" data-bind="text: warningMessage"></div>\n                            </div>\n\n                            <div class="ccl-fl-item-right-placeholder" data-bind="visible: rightSideCustomHtml(), html: rightSideCustomHtml"></div>\n                        </div>\n                        <div class="ccl-fl-error" data-bind="visible: errorMessage()">\n                            <div class="ccl-fl-error-message" data-bind="text: errorMessage"></div>\n                        </div>\n                    </div>\n                </div>'};
a.prototype.transformFiles=function(a){var b=this;return ko.utils.arrayMap(a,function(a){var d=new c.Model.FileName(a.Name);a=new c.Model.FileItem({fileName:d,stateMachine:new c.Model.FileItemStateMachine,metadata:a.Metadata,iconCssClass:c.Model.FileItem.getCssIconForFile(c.Model.FileItem.getFilePurpose(d.getExtension())),previewSettings:a.PreviewSettings,noInteraction:b.settings.NoInteraction,rightSideCustomHtml:a.RightSideCustomHtml,isViewableInOfficeOnline:a.IsViewableInOfficeOnline,snapshotFileRepoSignature:a.SnapshotFileRepoSignature,
snapshotFileRepoId:a.SnapshotFileRepoId,snapshotFileId:a.SnapshotFileId,snapshotFileUrl:a.SnapshotFileUrl,customContextMenuItems:a.CustomContextMenuItems});a.markAsUploaded();a.markAsCompleted();return a})};a.defaultFileListHtmlTag="file-list";return a}();d.FileListComponent=b})(c.Components||(c.Components={}))})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
var FeedbackManager=function(){return function(c){var d=this;this.feedbackControl=c;this.messages=[];this.showFeedback=function(c){d.messages.push(c);c=d.messages.join("<br />");d.feedbackControl.showMessage(CCL.FeedbackType.Information,c)}}}(),FolderMetadata=function(){return function(c){this.name=c;this.files=[];this.folders=[]}}(),MetadataArrays=function(){return function(){}}(),HiddenMetadataManager=function(){function c(c,f){var b=this;this.metadataField=c;this.fileListControlSettings=f;this.replaceFileItems=
function(a){for(var c=[],d=[],f=[],k=0;k<a.length;k++){var l=a[k];if(l.getState()===CCL.FileList.Model.FileItemState.Success)if(l=l.Metadata,l instanceof UploadMetadata)c.push(l);else if(l instanceof FileInCloudMetadata)d.push(l);else if(l instanceof FolderMetadata)f.push(l);else throw Error("Serialization error: Unknown type of Metadata!");}b.metadataField.val(JSON.stringify({uploadMetadataArray:c,fileInCloudMetadataArray:d,folderMetadataArray:f}))};this.getFileItems=function(){var a=b.metadataArrays,
c=[];if(a.uploadMetadataArray)for(var d=function(a){var d=CCL.FileList.Model.FileItem.buildItemForUpload(a.name,new UploadMetadata(a.id,a.name,a.sourceType,a.signature,a.signedFileRepoId,a.mimeType,a.isTemplate,a.customId));b.fileListControlSettings.ShowTemplateOptions&&b.fileListControlSettings.MimeTypesToTemplateFromUpload.some(function(a){return a===d.mimeType()})&&(d.showTemplateOptionsInFilelist(!0),d.showTemplateOptionsForItem(!0));c.push(d)},f=0,k=a.uploadMetadataArray;f<k.length;f++)d(k[f]);
if(a.fileInCloudMetadataArray&&(b.fileListControlSettings.ShowGoogleLinks||b.fileListControlSettings.ShowOneDriveLinks))for(f=0,k=a.fileInCloudMetadataArray;f<k.length;f++)d=FileInCloudMetadata.clone(k[f]),d=CCL.FileList.Model.FileItem.buildItemForFileInCloud(d),b.fileListControlSettings.ShowTemplateOptions&&(d.isFileFromGoogleDrive()||d.isUploaded())&&(d.showTemplateOptionsInFilelist(b.fileListControlSettings.ShowTemplateOptions),d.showTemplateOptionsForItem(!0)),c.push(d);if(a.folderMetadataArray)for(f=
0,a=a.folderMetadataArray;f<a.length;f++)k=a[f],d=CCL.FileList.Model.FileItem.buildItemForFolder(k.name),d.Metadata=b.getFolderMetadataInstance(k),c.push(d);return c};this.getFolderMetadataInstance=function(a){var b=new FolderMetadata(a.name);b.files=a.files;b.folders=a.folders;return b}}Object.defineProperty(c.prototype,"metadataArrays",{get:function(){var c=this.metadataField.val();return objectState.isNullOrWhitespace(c)?new MetadataArrays:JSON.parse(c)},enumerable:!0,configurable:!0});return c}(),
UploadStatus;(function(c){c[c.Awaiting=0]="Awaiting";c[c.InProgress=1]="InProgress";c[c.Succeeded=2]="Succeeded";c[c.SucceededWithErrors=3]="SucceededWithErrors";c[c.Failed=4]="Failed"})(UploadStatus||(UploadStatus={}));
var UploadStatusCalculator=function(){function c(){var c=this;this.calculate=function(d){var b=c.countFileItemsInGivenStates(d,[CCL.FileList.Model.FileItemState.New,CCL.FileList.Model.FileItemState.Ready,CCL.FileList.Model.FileItemState.InProgress,CCL.FileList.Model.FileItemState.Aborting]),a=c.countFileItemsInGivenStates(d,[CCL.FileList.Model.FileItemState.Success]);d=c.countFileItemsInGivenStates(d,[CCL.FileList.Model.FileItemState.Error]);return c.determineStatus(b,a,d)}}c.prototype.countFileItemsInGivenStates=
function(c,f){return c.filter(function(b){b=b.getState();return-1!==f.indexOf(b)}).length};c.prototype.determineStatus=function(c,f,b){return 0<c?UploadStatus.InProgress:0<f&&0<b?UploadStatus.SucceededWithErrors:0<f?UploadStatus.Succeeded:0<b?UploadStatus.Failed:UploadStatus.Awaiting};return c}();
(function(c){(function(c){var d=function(){return function(b,a,c,d,f,k){var e=this;this.controller=b;this.callbacks=a;this.feedbackManager=c;this.fileList=d;this.statusCalculator=f;this.metadataManager=k;this.subscribeToController=function(a){a.subscribe({onInitializationFailure:e.presentInitializationFailure,onFilesSelected:e.signalFilesSelection,onActionSuccess:e.signalSuccess,onActionError:e.signalError,onActionAborted:e.signalAbort,onFileRemoved:e.signalFileRemoval,onFileRenamed:e.signalFileRenamed,
onFileSetTemplate:e.signalFileIsTemplate})};this.handleStateChange=function(){var a=e.fileList.getFiles();e.metadataManager.save(a);e.callbacks.onStatusChanged&&(a=e.statusCalculator.calculate(a),e.callbacks.onStatusChanged(a))};this.presentInitializationFailure=function(a){e.feedbackManager.showFeedback(a.failureMessage)};this.signalFilesSelection=function(a){for(var b=0;b<a.length;b++)e.fileList.addFile(a[b]);e.handleStateChange();e.callbacks.onFilesSelected&&(a=a.map(function(a){return a.Metadata}),
e.callbacks.onFilesSelected(a))};this.signalSuccess=function(a){e.handleStateChange();if(e.callbacks.onActionSuccess)e.callbacks.onActionSuccess(a)};this.signalError=function(a,b){e.handleStateChange();if(e.callbacks.onActionError)e.callbacks.onActionError(a,b)};this.signalAbort=function(a){e.handleStateChange();if(e.callbacks.onActionAborted)e.callbacks.onActionAborted(a)};this.signalFileRemoval=function(a){e.handleStateChange();if(e.callbacks.onFileRemoved)e.callbacks.onFileRemoved(a)};this.signalFileRenamed=
function(a){e.handleStateChange();if(e.callbacks.onFileRenamed)e.callbacks.onFileRenamed(a)};this.signalFileIsTemplate=function(a){e.handleStateChange();if(e.callbacks.onFileSetTemplate)e.callbacks.onFileSetTemplate(a)};this.showFileItemsFromHiddenMetadataField=function(){for(var a=function(a){a.markAsUploaded();e.fileList.addFile(a);a.onRemoveCallback=function(){e.signalFileRemoval(a.Metadata);e.handleStateChange()};a.markAsCompleted()},b=0,c=e.metadataManager.get();b<c.length;b++)a(c[b]);e.handleStateChange()};
contract.require(!objectState.isNullOrUndefined(this.controller),"'controller' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.feedbackManager),"'feedbackManager' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.statusCalculator),"'statusManager' is not defined");contract.require(!objectState.isNullOrUndefined(this.metadataManager),
"'metadataManager' is not defined");this.subscribeToController(this.controller);this.showFileItemsFromHiddenMetadataField()}}();c.CollaborationControl=d})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){return function(a,b,d,f){this.name=a;this.title=b;this.description=d;this.picker=f;this.viewModel={instance:new c.ButtonViewModel(this.title,this.description,this.picker)};this.template='\n<div>\n    <button class="ccl-gcc-source-container" data-bind="click: onClick">\n        <span data-bind="text: title" class="ccl-gcc-source-content-text"></span>\n    </button>\n    <span data-bind="text: description" class="ccl-gcc-source-content-description"></span>\n</div>\n'}}();c.ButtonComponent=
b})(c.Components||(c.Components={}))})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));(function(c){(function(c){(function(c){var b=function(){return function(a,b,c){var d=this;this.title=a;this.description=b;this.picker=c;this.onClick=function(){d.picker.open()}}}();c.ButtonViewModel=b})(c.Components||(c.Components={}))})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(d){var b=function(){function a(a,b,d,f,l,m){var e=this;this.collaborationContainerId=a;this.settings=b;this.callbackFinder=d;this.translations=f;this.feedbackManager=l;this.metadataField=m;this.initializePickers=function(){var a=[],b=[];if(e.settings.EnableCollaborationFromGoogle){var c=e.buildGooglePicker(),d=c[0];c=c[1];a.push(d);b.push(c)}e.settings.EnableCollaborationFromOffice&&(c=e.buildOfficePicker(),d=c[0],c=c[1],a.push(d),b.push(c));return[a,b]};this.buildGooglePicker=
function(){var a=e.getGooglePickerInitSettings();a=new GooglePickerInPopup(a,BrowserSniffer(),e.translations.GoogleBrowserNotSupported,new CloudPickerModeSerializer,e.getLinkToCloudPickerMode());var b=new c.Components.ButtonComponent("google-collaboration",e.translations.CollaborateWithGoogleTitle,e.translations.CollaborateWithGoogleDescription,a);ko.components.register(b.name,b);return[a,b]};this.getGooglePickerInitSettings=function(){return{pickerDomain:e.settings.GoogleDriveUploadSettings.PickerDomain,
pickerUrl:e.settings.GoogleDriveUploadSettings.PickerUrl,crossCommunicationProxyUrl:e.settings.GoogleDriveUploadSettings.CrossCommunicationProxyUrl}};this.getLinkToCloudPickerMode=function(){return{allowToSelectMultipleFiles:!0,purpose:PickerPurpose.LinkToCloud,allowCollaboration:!0}};this.buildOfficePicker=function(){var a=OneDrivePicker.create(e.getOneDriveInitSettings(),BrowserSniffer(),new CloudPickerModeSerializer,e.getLinkToCloudPickerMode()),b=new c.Components.ButtonComponent("office-collaboration",
e.translations.CollaborateWithOfficeTitle,e.translations.CollaborateWithOfficeDescription,a);ko.components.register(b.name,b);return[a,b]};this.getOneDriveInitSettings=function(){return{pickerUrl:e.settings.OneDriveUploadSettings.OneDrivePickerUrl,pickerDomain:e.settings.OneDriveUploadSettings.OneDrivePickerDomain,crossCommunicationProxyUrl:e.settings.OneDriveUploadSettings.CrossCommunicationProxyUrl}};this.initializeCollaborationComponent=function(a,b){void 0===b&&(b=CCL.FileList.Components.NestedFileListComponent.defaultNestedFileListHtmlTag);
a=new c.Components.CollaborationComponent(a,b);ko.components.register(a.name,a)}}a.prototype.build=function(){this.initializeTranslations();var a=new CCL.FileList.NestedFileListControl({HtmlTagName:"file-list-collaboration",ContainerClientId:this.collaborationContainerId}),b=this.initializePickers(),d=b[0];this.initializeCollaborationComponent(b[1],a.htmlTagName);ko.applyBindings(null,window.document.getElementById(this.collaborationContainerId));b=new PickerFileResultValidatorLiterals(this.translations);
b=PickerFileResultValidatorFactory.createValidatorForCollaborationFiles(this.settings.ValidationSettings.MaxFileNameLength,b);d=new FilesInCloudController(d,b,!1);b=this.callbackFinder.getCallbacks();var f=new UploadStatusCalculator,l=new c.MetadataManager(this.metadataField);return new c.CollaborationControl(d,b,this.feedbackManager,a,f,l)};a.prototype.initializeTranslations=function(){c.Translations.collaborateWithGoogleTitle=this.translations.CollaborateWithGoogleTitle;c.Translations.collaborateWithGoogleDescription=
this.translations.CollaborateWithGoogleDescription;c.Translations.collaborateWithOfficeTitle=this.translations.CollaborateWithOfficeTitle;c.Translations.collaborateWithOfficeDescription=this.translations.CollaborateWithOfficeDescription;c.Translations.fileExtensionNotAllowed=this.translations.FileExtensionNotAllowed;c.Translations.unableToOpenFile=this.translations.UnableToOpenFile;c.Translations.invalidFirstPartOfFileName=this.translations.InvalidFirstPartOfFileName;c.Translations.invalidCharactersXInFileName=
this.translations.InvalidCharactersXInFileName;c.Translations.fileIsEmpty=this.translations.FileIsEmpty;c.Translations.fileTooBig=this.translations.FileTooBig;c.Translations.fileTooSmall=this.translations.FileTooSmall;c.Translations.fileNameIsTooLong=this.translations.FileNameIsTooLong;c.Translations.kb=this.translations.Kb;c.Translations.mb=this.translations.Mb;c.Translations.googleBrowserNotSupported=this.translations.GoogleBrowserNotSupported};return a}();d.CollaborationControlFactory=b})(c.Initialization||
(c.Initialization={}))})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){var d=function(){return function(b){var a=this;this.metadataField=b;this.save=function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d];if(e.getState()===CCL.FileList.Model.FileItemState.Success)if(e=e.Metadata,e instanceof FileInCloudMetadata)c.push(e);else throw Error("Serialization error: Unknown type of Metadata!");}a.metadataField.val(JSON.stringify(c))};this.get=function(){var b=a.metadataField.val();if(objectState.isNullOrWhitespace(b))return[];var c=[];if(b=JSON.parse(b))for(var d=
0;d<b.length;d++){var f=FileInCloudMetadata.clone(b[d]);f=CCL.FileList.Model.FileItem.buildItemForFileInCloud(f);c.push(f)}return c}}}();c.MetadataManager=d})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));(function(c){(function(c){var d=function(){return function(){}}();c.Translations=d})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){function a(a){var b=this;this.settings=a;this.getViewUrl=function(a,c){void 0===c&&(c=!1);var d=a.Metadata;if(d&&d.signedFileRepoId)return(a=b.getViewEditUrlTemplate(d.name,c?a.SnapshotFileRepoSignature:d.signedFileRepoId,c?a.SnapshotFileId.toString():d.id,d.customId))?a.replace(b.settings.TemplateTokens.ViewOnly,(!0).toString()):"";if(d&&d.viewUrl)return d.viewUrl;throw Error("Download error: Unknown type of Metadata!");}}a.prototype.getDownloadUrl=
function(a){if((a=a.Metadata)&&a.signedFileRepoId){var b=this.settings.DownloadEndpointUrl;b=b.replace(this.settings.TemplateTokens.FileRepoId,encodeURIComponent(a.signedFileRepoId));return b=b.replace(this.settings.TemplateTokens.CustomId,encodeURIComponent(a.customId))}if(a&&a.downloadUrl)return a.downloadUrl;throw Error("Download error: Unknown type of Metadata!");};a.prototype.getEditUrl=function(a){if((a=a.Metadata)&&a.signedFileRepoId)return(a=this.getViewEditUrlTemplate(a.name,a.signedFileRepoId,
a.id,a.customId))?a.replace(this.settings.TemplateTokens.ViewOnly,(!1).toString()):"";if(a&&a.editUrl)return a.editUrl;throw Error("Download error: Unknown type of Metadata!");};a.prototype.getViewEditUrlTemplate=function(a,b,c,d){if(a&&b&&c){var e=this.settings.ViewEditEndpointUrl;e=e.replace(this.settings.TemplateTokens.FileRepoId,encodeURIComponent(b));e=e.replace(this.settings.TemplateTokens.FileName,encodeURIComponent(a));e=e.replace(this.settings.TemplateTokens.UniqueId,c);return e=e.replace(this.settings.TemplateTokens.CustomId,
d)}return""};return a}();c.FileItemActions=b})(c.Model||(c.Model={}))})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(d){var f=function(){function b(a,d){var e=this;this.settings=a;this.fileActions=d;this.openPreview=function(a,d){void 0===d&&(d=!1);var f=a.PreviewSettings?a.PreviewSettings:b.getDefaultPreviewSettings(a.IsFileInCloud,a.MimeType,e.settings),g=d?c.PreviewType.NewTab:f.Type;d=!d&&f.Url?f.Url:e.fileActions.getViewUrl(a,d);switch(g){case c.PreviewType.None:e.download(a);break;case c.PreviewType.NewPopup:e.openInPopup(d);break;case c.PreviewType.NewTab:e.openInTab(d);break;case c.PreviewType.SameFrame:e.openInSameFrame(d);
break;case c.PreviewType.Modal:e.openInModalDialog(a.Name,d,f.DialogWidth,f.DialogHeight,f.DialogMaximised)}}}b.getDefaultPreviewSettings=function(a,d,f){return f.MimeTypesToView.some(function(a){return a===d})?a?{Type:c.PreviewType.NewTab}:b.shouldBeOpenedInPopup(d,f)?{Type:c.PreviewType.NewPopup}:{Type:c.PreviewType.Modal,DialogWidth:b.isEmbeddedVideo(d,f)?b.videoMinWidth:0,DialogHeight:b.isEmbeddedVideo(d,f)?b.videoMinHeight:0,DialogMaximised:!1}:{Type:c.PreviewType.None}};b.shouldBeOpenedInPopup=
function(a,b){return this.isOwasFileType(a,b)||0<=b.AdditionalMimeTypesOpenedInPopup.indexOf(a)};b.isOwasFileType=function(a,b){return 0<=b.OwasMimeTypes.indexOf(a)};b.isEmbeddedVideo=function(a,b){return!!a&&0<=b.EmbedVideoMimeTypes.indexOf(a)};b.prototype.openEdit=function(a){var b=this.fileActions.getEditUrl(a);a.IsFileInCloud&&this.settings.GoogleMimeTypes.some(function(b){return b===a.MimeType})?this.openInTab(b):this.openInPopup(b)};b.prototype.download=function(a){a=this.fileActions.getDownloadUrl(a);
contract.require(!objectState.isNullOrUndefined(a),"No download url for file.");this.openInTab(a)};b.prototype.openInTab=function(a){window.open(a)};b.prototype.openInPopup=function(a){window.open(a,"","width="+.8*screen.width+", height="+.8*screen.height+",location=0, directories=0, toolbar=0, scrollbars=0, status=0, menubars=0, resizable=1")};b.prototype.openInModalDialog=function(a,c,d,f,k){void 0===k&&(k=!1);var e=window[this.settings.PreviewDialogInstanceName];e&&(e.setAjaxUrl(c),e.setTitle(a),
e.setContentMinSize(d,f),0<f&&e.setContentMaxSize(d,b.maxHeight),e.openDialog(k))};b.prototype.openInSameFrame=function(a){window.location.href=a};b.videoMinWidth=650;b.videoMinHeight=350;b.maxHeight=600;return b}();d.PreviewerControl=f})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(d){(function(f){var b=function(){function a(a,b){var e=this;this.fileItem=a;this.settings=b;this.items=ko.observableArray([]);this.isContextMenuDisplayed=ko.observable(!1);this.isAnyOperationAvailable=ko.observable(!1);this.onViewClick=function(a,b){e.dispatchInternalEvent(d.InternalTriggers.internalFileItemViewActivated,b,e.ensureViewMode(a))};this.onViewOriginalClick=function(a,b){e.dispatchInternalEvent(d.InternalTriggers.internalFileItemViewOriginalActivated,b,e.ensureViewMode(a))};
this.onEditClick=function(a,b){e.dispatchInternalEvent(d.InternalTriggers.internalFileItemEditActivated,b,e.ensureEditMode(a))};this.onDownloadClick=function(a,b){e.dispatchInternalEvent(d.InternalTriggers.internalFileItemDownloadActivated,b,a)};this.onRenameClick=function(a,b){e.isContextMenuDisplayed(!1);a.isRenaming(!0)};this.onKeyDown=function(a,b){if(e.isContextMenuDisplayed()){if(b.which===c.CommonConstants.keyCodes.escape)return e.isContextMenuDisplayed(!1),b.currentTarget.querySelector(".ccl-fl-context-menu-ellipsis").focus(),
!1;if(b.which===c.CommonConstants.keyCodes.tab){a=b.currentTarget.querySelector(".ccl-fl-context-menu-ellipsis");var d=b.currentTarget.querySelectorAll(".ccl-fl-context-menu-dialog-content-item");d=d[d.length-1];if(b.shiftKey&&b.target===a)return d.focus(),!1;if(!b.shiftKey&&b.target===d)return a.focus(),!1}}return!0};this.isEditEnabled=function(){return!e.settings.DisableEdit};this.isRenameEnabled=function(){return!e.settings.DisableRename};this.isViewEnabled=function(){return!e.settings.DisableView};
this.isOriginalEnabled=function(){return!e.settings.DisableOriginal};this.isFileEditable=function(){return Array.isArray(e.settings.MimeTypesToEdit)?e.fileItem.isFileFromGoogleDrive()?Array.isArray(e.settings.MimeTypesToEditFromGoogleDrive)?e.settings.MimeTypesToEditFromGoogleDrive.some(function(a){return a===e.fileItem.mimeType()}):!1:e.settings.MimeTypesToEdit.some(function(a){return a===e.fileItem.mimeType()}):!1};this.isFileViewable=function(){return e.isAnyPreviewAvailable(e.fileItem)};this.isDownloadPossible=
function(){var a=e.fileItem.Metadata;return Array.isArray(e.settings.GoogleMimeTypes)&&e.settings.GoogleMimeTypes.some(function(a){return a===e.fileItem.MimeType})?a.isRegisteredWithCasper:a&&(a.signedFileRepoId||a.downloadUrl)};this.isAnyPreviewAvailable=function(a){return(a=a.PreviewSettings?a.PreviewSettings:d.PreviewerControl.getDefaultPreviewSettings(a.IsFileInCloud,a.MimeType,e.settings))&&a.Type!==c.PreviewType.None};this.redraw(a);a.isCompleted.subscribe(function(){e.redraw(a)})}a.prototype.toggleContextMenu=
function(a,b){var c=this;if(this.isContextMenuDisplayed())this.isContextMenuDisplayed(!1);else{this.isContextMenuDisplayed(!0);var d=$(b.target.parentElement.parentElement);$(document).mousedown(function(a){d.is(a.target)||0!==d.has(a.target).length||c.isContextMenuDisplayed(!1)})}};a.prototype.ensureViewMode=function(a){a.PreviewSettings&&a.PreviewSettings.Url&&(a.PreviewSettings.Url=a.PreviewSettings.Url.replace("ViewOnly%3DFalse","ViewOnly%3DTrue").replace("UserAction%3DEdit","UserAction%3DView"));
return a};a.prototype.ensureEditMode=function(a){a.PreviewSettings&&a.PreviewSettings.Url&&(a.PreviewSettings.Url=a.PreviewSettings.Url.replace("ViewOnly%3DTrue","ViewOnly%3DFalse").replace("UserAction%3DView","UserAction%3DEdit"));return a};a.prototype.createDefaultItems=function(a){var b=this,c=[];c.push({Text:this.settings.Translations.View,Action:function(c,d){b.onViewClick(a,d)},Visible:this.isViewEnabled()&&this.isFileViewable()&&a.isUploaded()});c.push({Text:this.settings.Translations.ViewOriginal,
Action:function(c,d){b.onViewOriginalClick(a,d)},Visible:this.isOriginalEnabled()&&this.isViewEnabled()&&this.isFileViewable()&&a.isUploaded()&&a.SnapshotFileId&&a.IsViewableInOfficeOnline});c.push({Text:this.settings.Translations.Edit,Action:function(c,d){b.onEditClick(a,d)},Visible:this.isEditEnabled()&&this.isFileEditable()&&a.isUploaded()});c.push({Text:this.settings.Translations.Download,Action:function(c,d){b.onDownloadClick(a,d)},Visible:!this.settings.DisableDownload&&a.isUploaded()&&this.isDownloadPossible()});
c.push({Text:this.settings.Translations.Rename,Action:function(c,d){b.onRenameClick(a,d)},Visible:this.isRenameEnabled()&&a.canRename()});return c};a.prototype.createCustomItems=function(a){var b=this,c=[];if(null==a.customContextMenuItems)return c;a.customContextMenuItems.forEach(function(d){c.push({Text:d.Text,Action:function(c,e){e.stopPropagation();d.Action&&d.Action(b.createCustomEvent("fileitem:customaction",a));d.EventName&&b.dispatchInternalEvent(d.EventName,e,a)},Visible:d.Visible})});return c};
a.prototype.redraw=function(a){var b=this.createDefaultItems(a);a=this.createCustomItems(a);this.items(b.concat(a).filter(function(a){return a.Visible}));this.isAnyOperationAvailable(0<this.items().length)};a.prototype.dispatchInternalEvent=function(a,b,c){this.isContextMenuDisplayed(!1);b.target.dispatchEvent(this.createCustomEvent(a,c))};a.prototype.createCustomEvent=function(a,b){return new CustomEvent(a,{bubbles:!0,detail:{File:b}})};return a}();f.ContextMenuViewModel=b})(d.Model||(d.Model={}))})(c.FileList||
(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(c){(function(d){var b=function(){function a(){this.name=a.defaultFileItemContextMenuHtmlTag;this.viewModel={createViewModel:function(a,b){return new c.Model.ContextMenuViewModel(a.file,a.settings)}};this.template='\n            <div class="ccl-fl-context-menu" data-bind="\n                visible: isAnyOperationAvailable,\n                event: { keydown: onKeyDown }\n            ">\n                <button type="button" class="ccl-fl-context-menu-ellipsis" data-bind="\n                    attr: {\'aria-label\': settings.Translations.FileListOptions},\n                    click: toggleContextMenu,\n                    clickBubble: false,\n                    css: { \'ccl-fl-context-menu-ellipsis-active\': isContextMenuDisplayed }\n                ">\n                    <span class="ili ili-h-ellipsis"></span>\n                </button>\n                <div class="ccl-fl-context-menu-dialog" data-bind="visible: isContextMenuDisplayed">\n                    <div class="ccl-fl-context-menu-dialog-content" data-bind="foreach: { data: items, as: \'item\' }">\n                        <button type="button" class="ccl-fl-context-menu-dialog-content-item" tabindex="0" data-bind="click: item.Action, clickBubble: false, text: item.Text"></button>\n                    </div>\n                </div>\n            </div>\n        '}a.defaultFileItemContextMenuHtmlTag=
"file-item-context-menu";return a}();d.ContextMenuComponent=b})(c.Components||(c.Components={}))})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));(function(c){(function(c){var d=function(){function b(){}b.view="view";b.copy="copy";return b}();c.DropDownConstants=d})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(d){(function(f){var b=function(){function a(a,b){this.fileItem=a;this.items=[{Text:b.Translations.TemplateOptionsStudentsCanView,Value:d.DropDownConstants.view},{Text:b.Translations.TemplateOptionsMakeACopyForEachStudent,Value:d.DropDownConstants.copy}];this.selected=ko.observable(this.items[0].Text);this.show=ko.observable(!1);a=a.Metadata;(a instanceof FileInCloudMetadata||a instanceof UploadMetadata)&&a.isTemplate&&(this.selected=ko.observable(this.items[1].Text),a=this.createTemplateChangedEvent(a.id,
a.isTemplate),document.body.dispatchEvent(a))}a.prototype.selectOption=function(a,b,c,f){b=c.fileItem.Metadata;if(b instanceof FileInCloudMetadata&&2===b.sourceType||b instanceof UploadMetadata)c.fileItem.setTemplate(a.Value===d.DropDownConstants.copy),b=this.createTemplateChangedEvent(b.id,a.Value===d.DropDownConstants.copy),f.dispatchEvent(b);c.selected(a.Text);c.show(!1)};a.prototype.toggle=function(a,b,c){var d=this;if(!a.fileItem.disableTemplateOptionsForItem())if(this.show())this.show(!1);else{c&&
document.body.addEventListener("click",function(a){c.contains(a.target)||(d.show(!1),document.body.removeEventListener("click",function(){}))});a=document.querySelectorAll(".dropdown-container.show");if(0<a.length)for(var e in a)a.hasOwnProperty(e)&&a[e].classList.remove("show");this.show(!this.show());(e=document.querySelector(".dropdown-container.show > ul > li"))&&e.focus()}};a.prototype.handleContainerKeydown=function(a,b,d){return b.which===c.CommonConstants.keyCodes.space||b.which===c.CommonConstants.keyCodes.escape&&
this.show()?(this.toggle(a,b,d),!1):!0};a.prototype.handleRowKeydown=function(a,b,d,f){if(!this.show())return!0;switch(b.which){case c.CommonConstants.keyCodes.arrowDown:return this.moveDown(f),!1;case c.CommonConstants.keyCodes.arrowUp:return this.moveUp(f),!1;case c.CommonConstants.keyCodes.enter:case c.CommonConstants.keyCodes.space:return this.selectOption(a,b,d,f),!1;default:return!0}};a.prototype.createTemplateChangedEvent=function(a,b){return new CustomEvent(d.InternalTriggers.internalFileItemTemplateChanged,
{bubbles:!0,detail:{id:a,isTemplate:b}})};a.prototype.moveDown=function(a){var b=a.nextElementSibling;b||(b=a.parentElement.firstElementChild);b.focus()};a.prototype.moveUp=function(a){var b=a.previousElementSibling;b||(b=a.parentElement.lastElementChild);b.focus()};return a}();f.DropDownViewModel=b})(d.Model||(d.Model={}))})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(c){(function(d){var b=function(){function a(){this.name=a.defaultDropDownHtmlTag;this.viewModel={createViewModel:function(a,b){return new c.Model.DropDownViewModel(a.file,a.settings)}};this.template='\n            <fieldset class="dropdown">\n                <div class="legend-container" tabindex="0" aria-haspopup="true" data-bind="click: function(data, event) { toggle(data, event, $element);} , attr: {\'aria-expanded\': show() }, event: { keydown: function(data,event) { return handleContainerKeydown(data, event, $element);} }">\n                    <legend data-bind="text: selected()"></legend><span class="arrow-down"></span>\n                </div>\n                <div class="dropdown-container" data-bind="css: {\'show\': show }">\n                    <ul class="dropdown-items" data-bind="foreach: items">\n                        <li class="dropdown-item" tabindex="-1" role="option" data-bind="click: function(data, event) { $parent.selectOption(data, event, $parent, $element); }, text: Text, value: Value, event: {keydown: function(data,event) { return $parent.handleRowKeydown(data, event, $parent, $element);} }"></li>\n                    </ul>\n                </div>\n            </fieldset>\n        '}
a.defaultDropDownHtmlTag="templateoptions-dropdown";return a}();d.DropDownComponent=b})(c.Components||(c.Components={}))})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(c){(function(c){var b=function(a){function b(c,d){void 0===d&&(d=b.defaultNestedFileListHtmlTag);a.call(this,c.settings,d);this.fileList=c;this.name=d}__extends(b,a);b.prototype.getViewModel=function(a,b){return this.fileList};b.defaultNestedFileListHtmlTag="nested-file-list";return b}(c.FileListComponent);c.NestedFileListComponent=b})(c.Components||(c.Components={}))})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(c){var d=function(){function b(a,b){var d=this;void 0===a&&(a={});void 0===b&&(b=void 0);this.params=a;this.renameValidator=b;this.Settings={EnableContextMenu:!1,IsEnabledMakeACopyForEachStudent:!1,NoInteraction:!1,ShowTemplateOptions:!1,DisableDownload:!0,DisableEdit:!0,DisableView:!0,DisableRemove:!0,DisableRename:!0,DisableFileListControlItemClick:!1,ShowGoogleLinks:!0,ShowOneDriveLinks:!0,DownloadEndpointUrl:void 0,ViewEditEndpointUrl:void 0,MimeTypesToEdit:[],MimeTypesToView:[],
TemplateTokens:void 0,ShouldApplyKnockoutBindings:!0,ContainerClientId:void 0,HtmlTagName:this.defaultHtmlTagName,Translations:{},Triggers:{},AdditionalMimeTypesOpenedInPopup:[],EmbedVideoMimeTypes:[],OwasMimeTypes:[],GoogleMimeTypes:[]};this.api=ko.observable();this.handleItemSelected=function(a){a.stopPropagation();d.Settings.DisableFileListControlItemClick||d.dispatchExternalEvent(d.getFileItemFromInternalEvent(a),d.Settings.Triggers.FileItemSelected,d.Settings.ShouldTriggerItemSelected,function(a){d.previewer.openPreview(a)})};
this.handleItemViewActivated=function(a,b){void 0===b&&(b=!1);a.stopPropagation();d.dispatchExternalEvent(d.getFileItemFromInternalEvent(a),b?d.Settings.Triggers.FileItemViewOriginalActivated:d.Settings.Triggers.FileItemViewActivated,d.Settings.ShouldTriggerItemViewActivated,function(a){d.previewer.openPreview(a,b)})};this.handleItemEditActivated=function(a){a.stopPropagation();d.dispatchExternalEvent(d.getFileItemFromInternalEvent(a),d.Settings.Triggers.FileItemEditActivated,d.Settings.ShouldTriggerItemEditActivated,
function(a){d.previewer.openEdit(a)})};this.handleItemDownloadActivated=function(a){a.stopPropagation();d.dispatchExternalEvent(d.getFileItemFromInternalEvent(a),d.Settings.Triggers.FileItemDownloadActivated,d.Settings.ShouldTriggerItemDownloadActivated,function(a){d.previewer.download(a)})};Object.assign(this.Settings,a);this.validatePrerequisiteSettings();this.container=document.getElementById(this.Settings.ContainerClientId);contract.require(!objectState.isNullOrUndefined(this.container),"No parent container element with ContainerClientId="+
this.Settings.ContainerClientId+" has been found.");this.previewer=new c.PreviewerControl(this.Settings,new c.Model.FileItemActions(this.Settings));this.attachListeners()}Object.defineProperty(b.prototype,"defaultHtmlTagName",{get:function(){return"file-list"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"htmlTagName",{get:function(){return this.Settings.HtmlTagName},enumerable:!0,configurable:!0});b.prototype.addFile=function(a){this.api&&this.api().addFile(a)};b.prototype.clearFileList=
function(){this.api&&this.api().clearFileList()};b.prototype.removeFile=function(a){this.api&&this.api().removeFile(a)};b.prototype.getFiles=function(){return this.api?this.api().getFiles():[]};b.prototype.getLastAddedFile=function(){return this.api?this.api().getLastAddedFile():null};b.prototype.dispose=function(){ko.components.unregister(this.htmlTagName);ko.components.unregister(c.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag);ko.components.unregister(c.Components.DropDownComponent.defaultDropDownHtmlTag);
this.container&&ko.cleanNode(this.container)};b.prototype.validatePrerequisiteSettings=function(){contract.require(!objectState.isNullOrUndefined(this.Settings.ContainerClientId),"File list control requires a parent container element with correct ContainerClientId. Passed ContainerClientId is "+this.Settings.ContainerClientId);this.Settings.DisableRename||contract.require(!objectState.isNullOrUndefined(this.renameValidator),"Rename functionality of the control requires 'RenameValidator' parameter.");
this.Settings.DisableDownload||contract.require(!objectState.isNullOrUndefined(this.Settings.DownloadEndpointUrl),"Download file functionality of the control requires 'DownloadEndpointUrl' to be supplied.");this.Settings.DisableEdit&&this.Settings.DisableView||contract.require(!objectState.isNullOrUndefined(this.Settings.ViewEditEndpointUrl),"Edit file functionality of the control requires 'EditEndpointUrl' to be supplied.")};b.prototype.initializeContextMenuComponent=function(){this.registerComponent(c.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag,
function(){return new c.Components.ContextMenuComponent})};b.prototype.initializeTemplateOptionDropdownComponent=function(){this.registerComponent(c.Components.DropDownComponent.defaultDropDownHtmlTag,function(){return new c.Components.DropDownComponent})};b.prototype.registerComponent=function(a,b){ko.components.isRegistered(a)||(a=b(),ko.components.register(a.name,a))};b.prototype.attachListeners=function(){var a=this;this.container.addEventListener(c.InternalTriggers.internalFileItemSelected,function(b){return a.handleItemSelected(b)});
this.container.addEventListener(c.InternalTriggers.internalFileItemViewActivated,function(b){return a.handleItemViewActivated(b)});this.container.addEventListener(c.InternalTriggers.internalFileItemViewOriginalActivated,function(b){return a.handleItemViewActivated(b,!0)});this.container.addEventListener(c.InternalTriggers.internalFileItemEditActivated,function(b){return a.handleItemEditActivated(b)});this.container.addEventListener(c.InternalTriggers.internalFileItemDownloadActivated,function(b){return a.handleItemDownloadActivated(b)})};
b.prototype.dispatchExternalEvent=function(a,b,c,d){this.Settings.Triggers&&b&&a&&(c&&a.PreviewSettings.Type&&0!==a.PreviewSettings.Type?this.container.dispatchEvent(new CustomEvent(b,{detail:{File:a,DefaultHandler:function(){d(a)}}})):d(a))};b.prototype.getFileItemFromInternalEvent=function(a){return(a=a.detail)?a.File:void 0};return b}();c.BaseFileListControl=d})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(c){var d=function(b){function a(a,c){void 0===a&&(a={});void 0===c&&(c=void 0);b.call(this,a,c);this.initializeFileListComponent(this.Settings,this.Settings.HtmlTagName)}__extends(a,b);Object.defineProperty(a.prototype,"defaultHtmlTagName",{get:function(){return c.Components.FileListComponent.defaultFileListHtmlTag},enumerable:!0,configurable:!0});a.prototype.initialize=function(a){var b=this;void 0===a&&(a=[]);a=a.filter(function(a){return b.showCloudLinks||a.IsFileInCloud===
b.showCloudLinks});0<a.length&&(0===this.container.getElementsByTagName(this.Settings.HtmlTagName).length&&this.container.appendChild(this.createElement(this.Settings.HtmlTagName,this.Settings,a)),this.Settings.ShouldApplyKnockoutBindings&&ko.applyBindings(this,this.container))};a.prototype.initializeFileListComponent=function(a,b){a&&a.EnableContextMenu&&!a.NoInteraction&&this.initializeContextMenuComponent();a&&a.ShowTemplateOptions&&this.initializeTemplateOptionDropdownComponent();this.registerComponent(a.HtmlTagName,
function(){return new c.Components.FileListComponent(a,b)})};a.prototype.createElement=function(a,b,d){a=window.document.createElement(a);a.setAttribute("params","settings: "+JSON.stringify(b)+", files: "+JSON.stringify(d)+", api: api");b=window.document.createElement(c.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag);b.setAttribute("params","file: $data.file, settings: $data.settings");a.appendChild(b);return a};Object.defineProperty(a.prototype,"showCloudLinks",{get:function(){return this.Settings.ShowGoogleLinks||
this.Settings.ShowOneDriveLinks},enumerable:!0,configurable:!0});return a}(c.BaseFileListControl);c.FileListControl=d})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
(function(c){(function(c){var d=function(b){function a(a,d){void 0===a&&(a={});void 0===d&&(d=void 0);b.call(this,a,d);this.api=ko.observable(new c.Model.FileListViewModel(this.Settings,[],this.renameValidator));this.initializeSharedFileListComponent(this.api())}__extends(a,b);Object.defineProperty(a.prototype,"defaultHtmlTagName",{get:function(){return c.Components.NestedFileListComponent.defaultNestedFileListHtmlTag},enumerable:!0,configurable:!0});a.prototype.initializeSharedFileListComponent=
function(a){a.settings&&a.settings.EnableContextMenu&&!a.settings.NoInteraction&&this.initializeContextMenuComponent();a.settings&&a.settings.ShowTemplateOptions&&this.initializeTemplateOptionDropdownComponent();this.registerComponent(a.settings.HtmlTagName,function(){return new c.Components.NestedFileListComponent(a,a.settings.HtmlTagName)})};return a}(c.BaseFileListControl);c.NestedFileListControl=d})(c.FileList||(c.FileList={}))})(CCL||(CCL={}));
var PickerResult=function(){function c(c,f){this.files=c;this.authToken=f}c.prototype.setOAuthContext=function(c){this.oAuthContext=c};c.prototype.getOAuthContext=function(){return this.oAuthContext};return c}(),MediaRecorderPicker=function(){function c(c,f,b){var a=this;this.settings=c;this.translations=f;this.jq=b;this.subscriberCallbacks=[];this.actionMenu=null;this.open=function(){};this.subscribe=function(b){if(b.onPickerInitSuccess)b.onPickerInitSuccess();a.subscriberCallbacks.push(b)};this.enableMultipleFilesSelecting=
function(){a.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){a.allowToSelectMultipleFiles=!1};this.startRecordAudioFeedback=function(){a.openRecordDialog(a.settings.MediaRecorderAudioUrl)};this.startRecordVideoFeedBack=function(){a.openRecordDialog(a.settings.MediaRecorderVideoUrl)};this.listenForPostMessages=function(){window.addEventListener("message",a.onContentSaved);window.addEventListener("message",a.onMediaRecorderClosed)};this.onContentSaved=function(b){a.isPostMessageForUs(b,
CCL.CommonWindowMessages.MessageNames.mediaRecorderContentSaved)&&(b=JSON.parse(b.data))&&b.extendedData&&a.processPostMessage(b.extendedData)};this.onMediaRecorderClosed=function(b){a.isPostMessageForUs(b,CCL.CommonWindowMessages.MessageNames.mediaRecorderClosed)&&(b=window[a.settings.MediaRecorderDialogInstanceName])&&b.getIsOpened()&&CssModal.closeDialog()};this.isPostMessageForUs=function(a,b){return a&&a.data?(a="string"===typeof a.data?JSON.parse(a.data):a.data,a.messageName&&a.messageName===
b):!1};contract.require(!objectState.isNullOrUndefined(c),"This media recorder picker requires 'settings' to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(f),"This media recorder picker requires 'translations' to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(b),"This media recorder picker requires 'jquery' to be passed. Please provide it.");this.listenForPostMessages()}c.prototype.initActionMenu=function(){if(this.actionMenu)return this.actionMenu;
var c=new CCL.ActionMenuSettings;c.MenuZIndex=5E3;var f=new CCL.ActionMenuItem("<span class='ccl-picker-media-recorder-audio-item-link'>"+this.translations.MediaRecorderRecordAudio+"</span>","",this.startRecordAudioFeedback),b=new CCL.ActionMenuItem("<span class='ccl-picker-media-recorder-video-item-link'>"+this.translations.MediaRecorderRecordVideo+"</span>","",this.startRecordVideoFeedBack);return this.actionMenu=new CCL.ActionMenu("ccl-picker-media-recorder-link-id",[f,b],c)};c.prototype.dispose=
function(){window.removeEventListener("message",this.onContentSaved);window.removeEventListener("message",this.onMediaRecorderClosed)};c.prototype.openRecordDialog=function(c){var d=window[this.settings.MediaRecorderDialogInstanceName];d.setTitle(this.translations.MediaRecorderModalDialogTitle);d.openDialog(!1);d.setIframeUrl(c,!1)};c.prototype.processPostMessage=function(c){c=PickerFileResult.createExternalSourcePickerFileResult(c.url,c.name,c.size,SourceType.Ziggeo,null,c.id);c=new PickerResult([c]);
for(var d=0,b=this.subscriberCallbacks;d<b.length;d++){var a=b[d];if(a.onFileSelected)a.onFileSelected(c)}};return c}(),PickerInitStatus;(function(c){c[c.InProgress=0]="InProgress";c[c.Success=1]="Success";c[c.Error=2]="Error"})(PickerInitStatus||(PickerInitStatus={}));var FileUploadState;(function(c){c[c.New=0]="New";c[c.Ready=1]="Ready";c[c.InProgress=2]="InProgress";c[c.Aborting=3]="Aborting";c[c.Error=4]="Error";c[c.Success=5]="Success"})(FileUploadState||(FileUploadState={}));
var Url=function(){return function(c){var d=this;this.value=c;this.getParamValue=function(c){for(var b=[],a,e=d.value.slice(d.value.indexOf("?")+1).split("&"),f=0;f<e.length;f++)a=e[f].split("="),b.push(a[0]),b[a[0]]=a[1];return b[c]};this.appendOrUpdateParam=function(c,b){var a=new RegExp("([?&])"+c+"=.*?(&|$)","i"),e=-1!==d.value.indexOf("?")?"&":"?";d.value.match(a)?d.value=d.value.replace(a,"$1"+c+"="+b+"$2"):d.value=d.value+e+c+"="+b}}}();
function GuidFactory(){return{newGuid:function(){function c(c){var d=(Math.random().toString(16)+"000000000").substr(2,8);return c?"-"+d.substr(0,4)+"-"+d.substr(4,4):d}return c()+c(!0)+c(!0)+c()}}}
var guidFactory=GuidFactory(),PickerInPopup=function(){function c(){var d=this;this.popupWidth=660;this.popupHeight=552;this.pickerWindow=null;this.open=function(){d.pickerWindowIsAlreadyOpened()?d.pickerWindow.focus():d.pickerWindow=window.open(d.getPickerUrlWithTarget(),d.getInitialPopupTitle(),d.getPopupWindowSettings())};this.listenForPostMessages=function(){window.addEventListener("message",d.onPostMessageReceived)};this.pickerWindowIsAlreadyOpened=function(){return d.pickerWindow&&!d.pickerWindow.closed};
this.getPickerUrlWithTarget=function(){var f=new Url(d.getPickerUrl());if(f.getParamValue(c.target))throw"You cannot set query parameter: ["+c.target+"] in getPickerUrl function.";f.appendOrUpdateParam(c.target,encodeURI(d.pickerIdentifier));return f.value};this.getPopupWindowSettings=function(){var c=d.getPopupCoordinates();return"width="+c[0]+", height="+c[1]+", left="+c[2]+", top="+c[3]+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};this.getPopupCoordinates=function(){return[d.popupWidth,
d.popupHeight,d.getWindowLeftCoordinate(),d.getWindowTopCoordinate()]};this.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-d.popupWidth)/2};this.getWindowTopCoordinate=function(){return(window.screenY+window.outerHeight-d.popupHeight)/2};this.onPostMessageReceived=function(c){d.isPostMessageForUs(c)&&d.processPostMessage(c)};this.isPostMessageForUs=function(f){return f&&f.data&&f.data[c.target]===d.pickerIdentifier};this.pickerIdentifier=guidFactory.newGuid();this.listenForPostMessages()}
c.target="target";return c}(),PickerPurpose;(function(c){c[c.Upload=0]="Upload";c[c.LinkToCloud=1]="LinkToCloud";c[c.Combined=2]="Combined"})(PickerPurpose||(PickerPurpose={}));
var WebDavPicker=function(c){function d(d,b,a,e,g){var f=this;void 0===g&&(g={purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:!1,allowCollaboration:!1});c.call(this);this.settings=d;this.browserSniffer=b;this.browserNotSupportedErrorTranslation=a;this.modeSerializer=e;this.mode=g;this.subscriberCallbacks=[];this.subscribe=function(a){f.raiseInitCallback(a);f.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=
function(){f.mode.allowToSelectMultipleFiles=!1};this.isProxyIframeRequired=function(){return f.browserSniffer.isInternetExplorerAnyVersion()&&f.settings.crossCommunicationProxyUrl};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("webdav_proxy")){var a=f.prepareIframe("webdav_proxy");document.body.appendChild(a)}};this.prepareIframe=function(a){var b=document.createElement("iframe");b.id=a;b.style.display="none";b.src=f.settings.crossCommunicationProxyUrl;return b};this.raiseInitCallback=
function(a){if(f.browserSniffer.isInternetExplorer9()){var b=new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,f.browserNotSupportedErrorTranslation,UploadControlTranslation.webDav);a.onPickerInitFailure(b)}else a.onPickerInitSuccess()};if(objectState.isNullOrUndefined(this.settings))throw"WebDavPicker requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"WebDavPicker requires browserSniffer to be passed. Please provide a handle to it.";
if(objectState.isNullOrUndefined(this.browserNotSupportedErrorTranslation))throw"WebDavPicker requires browserNotSupportedErrorTranslation to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.modeSerializer))throw"WebDavPicker requires modeSerializer to be passed. Please provide it.";this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered()}__extends(d,c);d.prototype.processPostMessage=function(c){if(c.origin===this.settings.pickerDomain){c=c.data.files.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.url,
a.name,a.size,SourceType.WebDav,a.mimeType)});c=new PickerResult(c);for(var b=0,a=this.subscriberCallbacks;b<a.length;b++){var d=a[b];if(d.onFileSelected)d.onFileSelected(c)}}};d.prototype.getPickerUrl=function(){var c=new Url(this.settings.pickerUrl);c.appendOrUpdateParam("mode",this.modeSerializer.serialize(this.mode));return c.value};d.prototype.getInitialPopupTitle=function(){return"WebDav"};d.create=function(c,b,a,e){return new d(c,b,"",a,e)};return d}(PickerInPopup),FileInFolder=function(){return function(c){this.result=
c;this.error=null}}(),Folder=function(){return function(c,d){var f=this;this.name=c;this.path=d;this.error=null;this.getFolderMetadata=function(){for(var b=new FolderMetadata(f.name),a=0,c=f.files;a<c.length;a++){var d=c[a];null===d.error&&b.files.push(d.metadata)}a=0;for(c=f.folders;a<c.length;a++)d=c[a],null===d.error&&0!==d.getFilesWithoutValidationErrors().length&&(d=d.getFolderMetadata(),b.folders.push(d));return b};this.getFilesWithoutValidationErrors=function(){return f.getFiles().filter(function(b){return!b.error})};
this.isAnyErrorInFolder=function(){if(f.error)return!0;for(var b=0,a=f.files;b<a.length;b++)if(a[b].error)return!0;b=0;for(a=f.folders;b<a.length;b++)if(a[b].isAnyErrorInFolder())return!0;return!1};this.getFiles=function(){if(f.error)return[];var b=f.files;f.folders.forEach(function(a){a=a.getFiles();b=b.concat(a)});return b};this.folders=[];this.files=[]}}(),ActionQueue=function(){return function(c){var d=this;this.maxNumberOfConcurrentActions=c;this.queue=[];this.numberOfActionsInProgress=0;this.register=
function(c){d.maxNumberOfConcurrentActionsNotReached()?(c(),d.numberOfActionsInProgress++):d.queue.push(c)};this.remove=function(c){d.queue=d.queue.filter(function(b){return b!==c})};this.signalDone=function(){0!==d.numberOfActionsInProgress&&(d.numberOfActionsInProgress--,d.elementsWaiting()&&d.maxNumberOfConcurrentActionsNotReached()&&d.startNextAction())};this.clear=function(){d.queue=[]};this.startNextAction=function(){d.numberOfActionsInProgress++;d.queue.shift()()};this.elementsWaiting=function(){return 0<
d.queue.length};this.maxNumberOfConcurrentActionsNotReached=function(){return d.numberOfActionsInProgress<d.maxNumberOfConcurrentActions}}}(),GenericUploader;
(function(c){(function(c){(function(c){var b=function(){return function(a){var b=this;this.jq=a;this.jqueryUploadControl=null;this.startUpload=function(a,c){b.jqueryUploadControl||(b.jqueryUploadControl=b.jq('<input type="file" />'),b.jqueryUploadControl.fileupload(a));b.jqueryUploadControl.fileupload("add",c)};contract.require(!objectState.isNullOrUndefined(a),"argument 'jq' is not defined")}}();c.HtmlUploadInputHandler=b})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||
(c.Sender={}))})(GenericUploader||(GenericUploader={}));(function(c){(function(c){(function(c){var b=function(){return function(){}}();c.Callbacks=b})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){function a(a,b,c,d){var e=this;this.isIe9=a;this.validationHeader=b;this.token=c;this.callbacks=d;this.add=function(a,b){e.isIe9||(b.headers=e.getHeadersForFileRepo(),b.crossDomain=!0);e.callbacks.onFileSelected(function(){b.abort()});b.submit()};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'validationHeader' is not defined");
contract.require(!objectState.isNullOrUndefined(c),"argument 'token' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'callbacks' is not defined")}a.prototype.getHeadersForFileRepo=function(){return{"X-Public-Upload":"1","X-Customer-Validations":this.validationHeader,"X-Authorization-FileRepoToken":"Bearer "+this.token}};return a}();a.Add=b})(b.Action||(b.Action={}))})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||
(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){return function(a){var b=this;this.callbacks=a;this.progress=function(a,c){b.callbacks.onUploadProgress(c.loaded/c.total*100)};contract.require(!objectState.isNullOrUndefined(a),"argument 'callbacks' is not defined")}}();a.ProgressAll=b})(b.Action||(b.Action={}))})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader=
{}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){return function(a,b){var c=this;this.errorResponseTranslator=a;this.callbacks=b;this.done=function(a,b){if(c.isDoneReallyAFail(b))a=c.errorResponseTranslator.getErrorMessageFromErrorCode(b.result.Error),c.callbacks.onSendFailure(a);else c.callbacks.onSendSuccess(c.file,b.result)};this.isDoneReallyAFail=function(a){return c.isIframeTransportUsed(a)&&"undefined"!==typeof a.result&&null!=a.result.Error?!0:!1};this.isIframeTransportUsed=function(a){return a.dataType&&
"iframe"===a.dataType.substr(0,6)};contract.require(!objectState.isNullOrUndefined(a),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined")}}();a.Done=b})(b.Action||(b.Action={}))})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){function a(a,b){var c=this;this.errorResponseTranslator=a;this.callbacks=b;this.fail=function(a,b){if(c.isFileUploadAborted(b.errorThrown)){if(c.callbacks.onAbortSuccess)c.callbacks.onAbortSuccess()}else a=c.getErrorMessageFromResponse(b),c.callbacks.onSendFailure(a)};contract.require(!objectState.isNullOrUndefined(a),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),
"argument 'callbacks' is not defined")}a.prototype.isFileUploadAborted=function(a){return"abort"===a};a.prototype.getErrorMessageFromResponse=function(a){var b=this.errorResponseTranslator.getErrorMessageFromResponse(a);null==b&&a.xhr&&(b=this.getErrorMesageFromXhr(a.xhr()));return b};a.prototype.getErrorMesageFromXhr=function(a){if(a.responseText)try{var b=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(b.errorMessage))return b.errorMessage}catch(l){}return a.statusText};return a}();
a.Fail=b})(b.Action||(b.Action={}))})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){var a=function(){return function(a,b,c,d){this.addAction=a;this.progressAction=b;this.doneAction=c;this.failAction=d;contract.require(!objectState.isNullOrUndefined(a),"argument 'addAction' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'progressAllAction' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'doneAction' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'failAction' is not defined")}}();
b.Actions=a})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){var a=function(){function a(a,b,c,d,e,f){var g=this;this.isIe9=a;this.endpoint=b;this.validationHeader=c;this.token=d;this.redirectUrl=e;this.actions=f;this.build=function(a){var b={};contract.require(!objectState.isNullOrUndefined(a),"argument 'file' is not defined");g.actions.doneAction.file=a;b.url=g.createUrl();b.dataType="json";b.add=g.actions.addAction.add;b.progressall=g.actions.progressAction.progress;b.fail=g.actions.failAction.fail;b.done=
g.actions.doneAction.done;b.dropZone=null;return b};this.createUrl=function(){return g.isIe9?g.getUrlWithValidationParamsInQueryString(g.endpoint,g.getIframeUploadQueryStringParameters()):g.endpoint};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'endpoint' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'validationHeader' is not defined");contract.require(!objectState.isNullOrUndefined(d),
"argument 'token' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'actions' is not defined")}a.prototype.getIframeUploadQueryStringParameters=function(){return{"X-Public-Upload":"1","X-Customer-Validations":this.validationHeader,"X-Authorization-FileRepoToken":"Bearer "+this.token,redirectUrl:this.redirectUrl}};a.prototype.getUrlWithValidationParamsInQueryString=function(a,b){b=$.param(b);var c=-1===a.indexOf("?");return a+(c?"?":"&")+b};return a}();b.ConfigurationBuilder=
a})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));(function(c){var d=function(){return function(){}}();c.SenderCallbacks=d})(GenericUploader||(GenericUploader={}));(function(c){var d=function(){return function(c,b){this.file=c;this.uploadStateChannelId=b}}();c.RequestToSender=d})(GenericUploader||(GenericUploader={}));
var UploaderSenderOptions=function(){return function(c){var d=this;this.editableOptions=c;this.dictionary={};this.hasChanged=!1;this.addParameter=function(c,b){d.hasChanged=!0;d.url.addSearch(c,b)};this.addDictionaryParameter=function(c,b){d.dictionary[c]=b};this.getDictionaryParameter=function(c){return d.dictionary[c]};this.getProcessedOptions=function(){return{url:d.url.normalizeSearch().toString()}};contract.require(!objectState.isNullOrUndefined(c),"argument 'editableOptions' is not defined");
this.url=URI(this.editableOptions.url).normalizeSearch()}}();
(function(c){(function(c){(function(c){var b=function(){function a(a,b,c,d){var e=this;this.isIe9=a;this.inputHandler=b;this.callbacks=c;this.configurationBuilder=d;this.send=function(a,b,c,d){e.callbacks.onFileSelected=e.fileSelected;e.callbacks.onSendSuccess=c;e.callbacks.onSendFailure=d;e.callbacks.onUploadProgress=b;b=e.configurationBuilder.build(a.file);a=e.createRequestContent(a.file);e.inputHandler.startUpload(b,a);return{abort:e.abort}};this.createRequestContent=function(a){var b={};e.isIe9?
b.fileInput=a.getFileHandle():b.files=[a.getFileHandle()];return b};this.fileSelected=function(a){e.abortUpload=a};this.abort=function(a){e.callbacks.onAbortSuccess=a;e.abortUpload()};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'localFileInputHander' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(d),
"argument 'optionsBuilder' is not defined")}a.prototype.getOptions=function(){return null};return a}();c.Sender=b})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){var b=c.FileInput.Action.Add,a=c.FileInput.Action.ProgressAll,d=c.FileInput.Action.Done,f=c.FileInput.Action.Fail,h=c.FileInput.Actions,k=c.FileInput.ConfigurationBuilder,l=function(){return function(e,g,l){var m=this;this.errorResponseTranslator=g;this.fileRepoData=l;this.build=function(){var e=new c.HtmlUploadInputHandler($),g=new c.Callbacks,l=new b(m.isIe9,m.fileRepoData.ValidationHeader,m.fileRepoData.Token,g),n=new a(g),p=new d(m.errorResponseTranslator,
g),r=new f(m.errorResponseTranslator,g);l=new h(l,n,p,r);l=new k(m.isIe9,m.fileRepoData.Endpoint,m.fileRepoData.ValidationHeader,m.fileRepoData.Token,m.fileRepoData.RedirectUrl,l);return new c.Sender(m.isIe9,e,g,l)};contract.require(!objectState.isNullOrUndefined(e),"argument 'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(l),"argument 'fileRepoData' is not defined");
this.isIe9=e.isInternetExplorer9()}}();c.Factory=l})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(d){(function(d){var b=function(){function a(a,b){var d=this;this.actionQueue=a;this.senderFactory=b;this.abortActions=[];this.send=function(a,b,c){d.onUploadProgress=b;d.onSendCompleted=c;d.folder=a;d.filesToUpload=a.getFilesWithoutValidationErrors();d.numberOfFilesToUpload=d.filesToUpload.length;d.uploadedFiles=0;d.filesToUpload.forEach(function(a){d.actionQueue.register(function(){d.sendFile(a)})});return{abort:d.abort}};this.sendFile=function(a){var b=new c.RequestToSender(a.result),
e=d.senderFactory.build().send(b,function(){},function(b,c){d.fileSendingSuccess(a,b,c)},function(b){d.fileSendingFailure(a,b)});d.addAbortAction(a,function(){e.abort()})};this.createRequestContent=function(a){var b={};b.files=a.map(function(a){return a.getFileHandle()});return b};this.fileSendingSuccess=function(a,b,c){a.metadata=UploadMetadata.create(b,c);d.fileUploadEnded(a)};this.fileSendingFailure=function(a,b){a.error=b;d.fileUploadEnded(a)};this.fileUploadEnded=function(a){d.uploadedFiles++;
d.updateProgress();d.removeAbortAction(a);d.actionQueue.signalDone();if(d.allFilesUploaded())d.onSendCompleted(d.folder)};this.removeAbortAction=function(a){d.abortActions=d.abortActions.filter(function(b){return b.file!==a})};this.addAbortAction=function(a,b){d.abortActions.push({file:a,action:b})};this.allFilesUploaded=function(){return d.uploadedFiles===d.numberOfFilesToUpload};this.updateProgress=function(){d.onUploadProgress(d.uploadedFiles/d.numberOfFilesToUpload*100)};this.abort=function(a){d.actionQueue.clear();
d.abortActions.forEach(function(a){a.action()});a()};contract.require(!objectState.isNullOrUndefined(this.actionQueue),"argument 'actionQueue' is not defined");contract.require(!objectState.isNullOrUndefined(this.senderFactory),"argument 'senderFactory' is not defined")}a.prototype.getOptions=function(){return null};return a}();d.FolderSender=b})(d.FileRepoSenderForLocalFolders||(d.FileRepoSenderForLocalFolders={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){var b=function(){return function(a){var b=this;this.fileRepoForLocalFilesFactory=a;this.build=function(){var a=new ActionQueue(2);return new c.FolderSender(a,b.fileRepoForLocalFilesFactory)}}}();c.Factory=b})(c.FileRepoSenderForLocalFolders||(c.FileRepoSenderForLocalFolders={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
var FolderValidator=function(){function c(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'validators' cannot be null or undefined");this.validators=c}c.prototype.validateFolder=function(c){for(var d=0,b=this.validators;d<b.length;d++){var a=b[d];if(!objectState.isNullOrUndefined(a)&&(a=a.validateFolder(c),!a.isValid()))return a}return new ValidationResult(ValidationStatus.Ok)};return c}(),IllegalCharactersValidator=function(){function c(c){this.illegalCharacters=c}c.prototype.validateFile=
function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");if(objectState.isNullOrUndefined(c.name))return new ValidationResult(ValidationStatus.Inconclusive);if(objectState.isNullOrUndefined(this.illegalCharacters)||0===this.illegalCharacters.length)return new ValidationResult(ValidationStatus.Ok);c=this.getInvalidCharactersFromFilename(c.name);return 0<c.length?new ValidationResult(ValidationStatus.FilenameContainsIllegalCharacters,c):new ValidationResult(ValidationStatus.Ok)};
c.prototype.getInvalidCharactersFromFilename=function(c){for(var d=[],b=0,a=this.illegalCharacters;b<a.length;b++){var e=a[b];e&&-1<c.indexOf(e)&&d.push(e)}return d.filter(function(a,b){return d.indexOf(a)===b})};return c}(),RestrictedFileNameValidator=function(){function c(c){this.restrictedFileNames=c}c.prototype.validateFile=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");if(objectState.isNullOrUndefined(c.name))return new ValidationResult(ValidationStatus.Inconclusive);
if(objectState.isNullOrUndefined(this.restrictedFileNames)||0===this.restrictedFileNames.length)return new ValidationResult(ValidationStatus.Ok);c=c.name.split(".")[0];for(var d=0,b=this.restrictedFileNames;d<b.length;d++){var a=b[d];if(a&&c.toUpperCase()===a.toUpperCase())return new ValidationResult(ValidationStatus.FileNameIsIllegal,a)}return new ValidationResult(ValidationStatus.Ok)};return c}(),FolderValidatorFactory=function(){function c(){}c.prototype.createFileValidator=function(c){c=[new NameLengthValidator(c.maxFileNameLength)];
return new FolderValidator(c)};c.prototype.createFileValidatorWithLocalizedMessages=function(c,f){c=this.createFileValidator(c);return new LocalizedFolderValidator(c,f)};return c}(),LocalizedFolderValidator=function(){function c(c,f){this.validator=c;this.literals=f}c.prototype.validateFolder=function(c){c=this.validator.validateFolder(c);return c.isValid()?new ValidationResult(c.getStatus()):this.createLocalizedValidationResult(c)};c.prototype.createLocalizedValidationResult=function(c){var d=c.getStatus();
c=this.getErrorMessage(c);return new ValidationResult(d,c)};c.prototype.getErrorMessage=function(c){switch(c.getStatus()){case ValidationStatus.FileNameIsTooLong:return this.literals.fileNameIsTooLong.replace("{0}",c.getData());default:return"-"}};return c}(),Components;
(function(c){c=c.ComponentName||(c.ComponentName={});c.dialog="uc-dialog";c.uploadArea="upload-area";c.dropzonePicker="dropzone-picker";c.dropboxPicker="dropbox-picker";c.folderPicker="folder-picker";c.googlePicker="google-picker";c.linkToGoogleDrivePicker="link-to-google-drive-picker";c.linkToOnedrivePicker="link-to-onedrive-picker";c.localPicker="local-picker";c.onedrivePicker="onedrive-picker";c.webDavPicker="webdav-picker";c.mediaRecorderPicker="media-recorder-picker"})(Components||(Components=
{}));
(function(c){(function(d){var f=function(){function b(a,e){var f=this;this.picker=a;this.showOffice365=e;this.name=c.ComponentName.linkToOnedrivePicker;this.viewModel=function(a){return new d.PickerViewModel(f.picker,a.onPickerOpen)};this.template=d.Template.create(this.name,this.showOffice365?b.office365Template:b.onedriveTemplate)}b.onedriveTemplate='\n        <div class="ccl-uc-source-content-image ccl-uc-onedrive-icon" aria-hidden="true"></div> \n        <span class="ccl-uc-source-content-text">OneDrive</span>';b.office365Template=
'\n        <div class="ccl-uc-source-content-image ccl-uc-office365-icon" aria-hidden="true"></div> \n        <span class="ccl-uc-source-content-text">Office 365</span>';return b}();d.LinkToOneDrivePickerComponent=f})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(c){(function(c){var b=function(){return function(a){var b=this;this.picker=a;this.handlePickerInitialization=function(){b.isLoading=ko.observable(!0);b.isLoadingFailed=ko.observable(!1);b.picker.subscribe(new PickerCallback(b.onPickerInitSuccess,b.onPickerInitFailure,function(){},function(){}))};this.onPickerInitSuccess=function(){b.isLoading(!1);b.picker.initActionMenu()};this.onPickerInitFailure=function(){b.isLoading(!1);b.isLoadingFailed(!0)};this.dispose=function(){b.picker.dispose()};
contract.require(!objectState.isNullOrUndefined(a),"This media recorder view model requires picker to be passed. Please provide it.");this.handlePickerInitialization()}}();c.MediaRecorderViewModel=b})(c.MediaRecorder||(c.MediaRecorder={}))})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(d){(function(d){var b=function(){return function(a){var b=this;this.picker=a;this.name=c.ComponentName.mediaRecorderPicker;this.viewModel=function(){return new d.MediaRecorderViewModel(b.picker)};this.template='\n<button type="button" id="ccl-picker-media-recorder-link-id" class="ccl-picker-media-recorder-link" data-bind="text: UploadControlTranslation.mediaRecorder"></button>'}}();d.MediaRecorderPickerComponent=b})(d.MediaRecorder||(d.MediaRecorder={}))})(c.Picker||(c.Picker=
{}))})(Components||(Components={}));
(function(c){(function(c){var d=function(){function b(){}b.create=function(a,b){return'\n<div class="ccl-uc-source-container">\n    <button class="ccl-uc-source-content" id="'+a+'" data-bind="click: onClick, disable: isLoading() || isLoadingFailed()">\n        <span>\n'+b+'\n        </span>\n    </button>\n    <div class="ccl-uc-source-status">\n        <span aria-hidden="true" class="ili ili-spinner ili-pulse-linear" data-bind="visible: isLoading"></span>\n        <span aria-hidden="true" class="ili ili-exclamation-circle" data-bind="visible: isLoadingFailed"></span>\n    </div>\n</div>'};return b}();
c.Template=d})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(c){var d=function(){return function(b,a){var c=this;this.picker=b;this.onPickerOpen=a;this.onClick=function(){c.onPickerOpen();c.picker.open()};this.handlePickerInitialization=function(){c.isLoading=ko.observable(!0);c.isLoadingFailed=ko.observable(!1);c.picker.subscribe(new PickerCallback(c.onPickerInitSuccess,c.onPickerInitFailure,function(){},function(){}))};this.onPickerInitSuccess=function(){c.isLoading(!1)};this.onPickerInitFailure=function(){c.isLoading(!1);c.isLoadingFailed(!0)};
contract.require(!objectState.isNullOrUndefined(b),"This ViewModel requires picker to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(a),"This ViewModel requires onPickerOpen to be passed. Please provide it.");this.handlePickerInitialization()}}();c.PickerViewModel=d})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(d){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.webDavPicker;this.viewModel=function(b){return new d.PickerViewModel(a.picker,b.onPickerOpen)};this.template=d.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-webdav-icon" aria-hidden="true"></div> \n        <span data-bind="text: UploadControlTranslation.webDav" class="ccl-uc-source-content-text"></span>')}}();d.WebDavPickerComponent=f})(c.Picker||(c.Picker=
{}))})(Components||(Components={}));
(function(c){var d=function(){function c(){}c.isMobile=function(){return window.matchMedia&&window.matchMedia("only screen and (max-width: 568px)").matches};c.toggleTopFrameAndMobileOverlay=function(b){c.sendMessageToTopFrame(window.parent,b?"collapseContentAreaFrame":"expandContentAreaFrame");c.sendMessageToTopFrame(window.parent,"setIframeDefaultHeight");$("html").toggleClass($("body").hasClass("h-ios")?"ccl-overlay-modal-has-overlay-ios":"ccl-overlay-modal-has-overlay",!b)};c.sendMessageToTopFrame=
function(b,a){b.postMessage(JSON.stringify({messageName:a}),"*")};return c}();c.UploadControlUtils=d})(Components||(Components={}));
var FolderBuilder=function(){return function(c,d){var f=this;this.validator=c;this.folderValidator=d;this.buildFolder=function(b){var a=null,c=[];b.forEach(function(b){var d=f.getFolderFromRelativePath(b.relativePath,c);null===a&&(a=c[0]);!objectState.isNullOrUndefined(d)&&objectState.isNullOrUndefined(d.error)&&f.processFile(b,d)});return a};this.getFolderFromRelativePath=function(b,a){b=f.getPathOfParentFolder(b);var c=f.getFolderForPath(b,a);c||(c=f.createNewFolder(b,a));return c};this.createNewFolder=
function(b,a){var c=f.getFolderName(b);c=new Folder(c,b);f.validateFolder(c);(b=f.getParentFolder(b,a))&&b.folders.push(c);a.push(c);return c};this.getParentFolder=function(b,a){b=f.getPathOfParentFolder(b);if(!b)return null;var c=f.getFolderForPath(b,a);c||(c=f.createNewFolder(b,a));return c};this.processFile=function(b,a){b=new FileInFolder(b);f.validateFile(b);a.files.push(b)};this.getFolderForPath=function(b,a){return(a=a.filter(function(a){return a.path===b}))&&0!==a.length?a[0]:null};this.getFolderName=
function(b){var a=b.lastIndexOf("/");return b.substring(a+1,b.length)};this.getPathOfParentFolder=function(b){var a=b.lastIndexOf("/");return-1===a?null:b.substring(0,a)};this.validateFile=function(b){var a=f.validator.validateFile(b.result);a.isValid()||(b.error=a.getData())};this.validateFolder=function(b){var a=f.folderValidator.validateFolder(b);a.isValid()||(b.error=a.getData())};contract.require(!objectState.isNullOrUndefined(this.validator),"'fileResultValidator' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderValidator),
"'folderValidator' is not defined")}}(),FolderController=function(){return function(c,d,f,b){var a=this;this.pickers=c;this.folderSenderFactory=d;this.folderBuilder=f;this.actionQueue=b;this.subscribe=function(b){a.callbacks=b};this.initializePickers=function(){a.pickers.forEach(function(b){a.initPickerCallback(b)})};this.initPickerCallback=function(b){var c=function(){};c=new PickerCallback(c,c,a.folderSelected,c);b.subscribe(c)};this.uploadCompleted=function(b,c){b.markAsUploaded();b.onRemoveCallback=
function(){a.fileRemoved(b)};b.isRemoveAllowed(!0);a.allFilesinFolderInvalid(c)?a.signalError(b):(a.showWarningIfFolderContainsAnyError(b,c),b.Metadata=c.getFolderMetadata(),a.callbacks.onActionSuccess(b.Metadata),b.markAsCompleted())};this.fileRemoved=function(b){a.callbacks.onFileRemoved(b.Metadata)};this.allFilesinFolderInvalid=function(a){return 0===a.getFilesWithoutValidationErrors().length};this.signalError=function(b){b.setFolderError();a.callbacks.onActionError({},UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};
this.showWarningIfFolderContainsAnyError=function(a,b){b.isAnyErrorInFolder()&&a.setFolderWarning()};this.uploadProgressed=function(a,b){a.setProgress(b)};this.abortSucceeded=function(b){a.callbacks.onActionAborted(b.Metadata)};this.folderSelected=function(b){var c=a.folderBuilder.buildFolder(b.files),d=CCL.FileList.Model.FileItem.buildItemForFolder(c.name);a.callbacks.onFilesSelected([d]);if(a.allFilesinFolderInvalid(c))a.signalError(d);else{a.showWarningIfFolderContainsAnyError(d,c);var e=function(){a.send(d,
c)};d.onRemoveCallback=function(){a.actionQueue.remove(e);a.fileRemoved(d)};a.actionQueue.register(e)}};this.send=function(b,c){var d=a.folderSenderFactory.build().send(c,function(c){return a.uploadProgressed(b,c)},function(c){a.actionQueue.signalDone();a.uploadCompleted(b,c)});b.onRemoveCallback=function(){a.actionQueue.signalDone();d.abort(function(){return a.abortSucceeded(b)})}};contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderSenderFactory),
"'senderFactory' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderBuilder),"'folderBuilder' is not defined");contract.require(!objectState.isNullOrUndefined(this.actionQueue),"'actionQueue' is not defined");this.initializePickers()}}(),PickerFileResultValidatorLiterals=function(){function c(c){this.fileExtensionNotAllowed=c.FileExtensionNotAllowed;this.fileTooBig=c.FileTooBig;this.fileTooSmall=c.FileTooSmall;this.invalidCharactersXInFileName=c.InvalidCharactersXInFileName;
this.unableToOpenFile=c.UnableToOpenFile;this.invalidFirstPartOfFileName=c.InvalidFirstPartOfFileName;this.fileNameIsTooLong=c.FileNameIsTooLong;this.mb=c.Mb;this.kb=c.Kb;this.fileIsEmpty=c.FileIsEmpty;this.fileNameIsEmpty=c.FileNameIsEmpty;this.fileTypeNotSupportedByCasper=c.FileTypeNotSupportedByCasper;this.fileNotEnoughPermissions=c.FileNotEnoughPermissions}c.prototype.getExcededSizeLimitTranslation=function(c){return this.fileTooBig.replace("{0}",this.getFormattedFileSize(c))};c.prototype.getBelowSizeLimitTranslation=
function(c){return this.fileTooSmall.replace("{0}",this.getFormattedFileSize(c))};c.prototype.getFormattedFileSize=function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+this.mb:(c/1024).toFixed(2)+" "+this.kb};return c}(),LocalFilePicker=function(){function c(c,f,b,a){var d=this;this.mode=c;this.browserSniffer=f;this.fileNameExtractor=b;this.jq=a;this.subscriberCallbacks=[];this.open=function(){var a=d.jq(d.getInputMarkup());a.on("change",function(){d.handleFileSelectedInInput(a,
a[0])});a.click()};this.subscribe=function(a){if(a.onPickerInitSuccess)a.onPickerInitSuccess();d.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){d.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){d.mode.allowToSelectMultipleFiles=!1};this.handleFileSelectedInInput=function(a,b){a=d.browserSniffer.isInternetExplorer9()?d.createResultWithInputElement(a,b):d.createResultWithFileList(a,b);b=0;for(var c=d.subscriberCallbacks;b<c.length;b++){var e=
c[b];if(e.onFileSelected)e.onFileSelected(new PickerResult(a))}};contract.require(!objectState.isNullOrUndefined(c),"This picker requires mode to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(f),"This picker requires browserSniffer to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(b),"This picker requires fileNameExtractor to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(a),"This picker requires jquery to be passed. Please provide it.")}
c.prototype.getInputMarkup=function(){return'<input type="file" '+this.getMultipleAttributeForInput()+" "+this.getAcceptAttributeForInput()+" />"};c.prototype.getMultipleAttributeForInput=function(){return this.mode.allowToSelectMultipleFiles?'multiple="multiple"':""};c.prototype.getAcceptAttributeForInput=function(){return this.mode.allowedFileExtensions?'accept="'+this.getFileExtensionsForAcceptAttribute()+'"':""};c.prototype.getFileExtensionsForAcceptAttribute=function(){return this.mode.allowedFileExtensions.map(function(c){return"."+
c}).join(",")};c.prototype.createResultWithInputElement=function(c,f){f=this.fileNameExtractor.getFileName(f.value);return[PickerFileResult.createLocalPickerFileResultWithInput(c,f)]};c.prototype.createResultWithFileList=function(c,f){return[].slice.call(f.files).map(function(b){return PickerFileResult.createLocalPickerFileResult(b)})};return c}(),DropzonePicker=function(){function c(c,f){var b=this;this.mode=c;this.fileValidator=f;this.subscriberCallbacks=[];this.currentDragEnterCount=0;this.enableMultipleFilesSelecting=
function(){b.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){b.mode.allowToSelectMultipleFiles=!1};this.onFilesDropped=function(a){b.mode.allowDragAndDrop&&(b.browserSupportsFileAndDirectoryEntriesApi(a)?b.preparePickerFileResultsUsingFileAndDirectoryEntriesApiAsync(a.items):b.preparePickerFileResultsUsingFileListAsync(a.files)).then(b.handlePickerFileResults)};this.open=function(){};this.isEnabled=function(){return b.mode.allowDragAndDrop};this.browserSupportsFileAndDirectoryEntriesApi=
function(a){return a.items&&0<a.items.length&&(a.items[0].webkitGetAsEntry||a.items[0].getAsEntry)};this.preparePickerFileResultsUsingFileAndDirectoryEntriesApiAsync=function(a){if(!b.mode.allowToSelectMultipleFiles&&1<a.length)return $.Deferred().resolve([]).promise();for(var c=[],d=0;d<a.length;d++)c.push(b.getEntry(a[d]));if(c.some(function(a){return a.isDirectory}))return $.Deferred().resolve([]).promise();var f=[];c.forEach(function(a){return f.push(b.getFileFromEntryAsync(a))});return $.when.apply($,
f).pipe(b.mapFilesToPickerFileResults)};this.getEntry=function(a){return a.webkitGetAsEntry?a.webkitGetAsEntry():a.getAsEntry()};this.getFileFromEntryAsync=function(a){var b=$.Deferred();a.file(function(a){return b.resolve(a)},function(a){return b.reject(a)});return b.promise()};this.mapFilesToPickerFileResults=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return a.map(function(a){return PickerFileResult.createLocalPickerFileResult(a)})};this.preparePickerFileResultsUsingFileListAsync=
function(a){if(null===a||void 0===a||!b.mode.allowToSelectMultipleFiles&&1<a.length)return $.Deferred().resolve([]).promise();var c=[],d=[].slice.call(a);d.forEach(function(a){c.push(b.fileValidator.isFile(a))});return $.when.apply($,c).pipe(function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return a.some(function(a){return!1===a})?[]:b.mapFilesToPickerFileResults.apply(b,d)})};this.handlePickerFileResults=function(a){if(0!==a.length)for(var c=0,d=b.subscriberCallbacks;c<d.length;c++){var f=
d[c];if(f.onFileSelected)f.onFileSelected(new PickerResult(a))}};contract.require(!objectState.isNullOrUndefined(c),"This picker requires mode to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(f),"This picker requires fileValidator to be passed. Please provide it.")}c.prototype.subscribe=function(c){if(c.onPickerInitSuccess)c.onPickerInitSuccess();this.subscriberCallbacks.push(c)};return c}(),FileValidator=function(){function c(){var c=this;this.isFile=function(d){return c.attemptToReadFile(d)}}
c.prototype.attemptToReadFile=function(c){var d=$.Deferred(),b=new FileReader;b.onprogress=function(){b.abort();d.resolve(!0)};b.onerror=function(){d.resolve(!1)};b.readAsArrayBuffer(c.slice(0,5));return d.promise()};return c}(),FolderPicker=function(){function c(c){var d=this;this.jq=c;this.subscriberCallbacks=[];this.open=function(){var b=d.jq('<input type="file" webkitdirectory="" directory="" />');b.on("change",function(){d.fileSelectedInInput(b,b[0])});b.click()};this.subscribe=function(b){if(b.onPickerInitSuccess)b.onPickerInitSuccess();
d.subscriberCallbacks.push(b)};this.enableMultipleFilesSelecting=function(){d.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){d.allowToSelectMultipleFiles=!1};this.fileSelectedInInput=function(b,a){b=d.createResultWithFileList(b,a);if(0!==b.length){a=0;for(var c=d.subscriberCallbacks;a<c.length;a++){var f=c[a];if(f.onFileSelected)f.onFileSelected(new PickerResult(b))}}};contract.require(!objectState.isNullOrUndefined(c),"This picker requires jquery to be passed. Please provide it.")}
c.prototype.createResultWithFileList=function(c,f){var b=this;return[].slice.call(f.files).map(function(a){return PickerFileResult.createFolderPickerFileResultWithRelativePath(a,b.getRelativePath(a,""))})};c.prototype.getRelativePath=function(c,f){return c.webkitRelativePath||c.relativePath||f||""};return c}(),FileNameFromPathExtractor=function(){function c(){}c.prototype.getFileName=function(c){if(null===c)return null;if("undefined"!==typeof c){if("string"!==typeof c)throw"Argument filePath is of type other than string";
return c.replace(/[\s\S]*[\\/]/,"")}};return c}(),DropboxPicker=function(){return function(c,d,f,b){var a=this;void 0===b&&(b={purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:!1,allowCollaboration:!1});this.settings=c;this.dropbox=d;this.dropboxNotAvailableErrorTranslation=f;this.mode=b;this.subscriberCallbacks=[];this.subscribe=function(b){a.attemptToRaiseInitCallback(b);a.subscriberCallbacks.push(b)};this.enableMultipleFilesSelecting=function(){a.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=
function(){a.mode.allowToSelectMultipleFiles=!1};this.open=function(){if(a.isInitializationSuccessful()){var b=a.getDropboxOptions();a.dropbox.choose(b)}};this.initializeWithScript=function(){asyncDependenciesResolver.loadScriptAsync({url:"https://www.dropbox.com/static/api/2/dropins.js",attributes:{id:"dropboxjs","data-app-key":a.settings.dropboxAppKey},timeoutInMilliseconds:3E4}).done(function(){return a.initStatus=PickerInitStatus.Success}).fail(function(){return a.initStatus=PickerInitStatus.Error}).always(a.notifySubscribersAboutInitialization)};
this.notifySubscribersAboutInitialization=function(){for(var b=0,c=a.subscriberCallbacks;b<c.length;b++)a.attemptToRaiseInitCallback(c[b])};this.attemptToRaiseInitCallback=function(b){if(a.isInitializationSuccessful()&&b.onPickerInitSuccess)b.onPickerInitSuccess();if(a.initStatus===PickerInitStatus.Error&&b.onPickerInitFailure)b.onPickerInitFailure(new PickerInitFailureEventArgs(PickerInitFailureReason.ExternalServiceNotAvailable,a.dropboxNotAvailableErrorTranslation,UploadControlTranslation.dropbox))};
this.isInitializationSuccessful=function(){return a.initStatus===PickerInitStatus.Success};this.getDropboxOptions=function(){return{success:a.onDropboxFileSelected,cancel:a.onDropboxFileSelectionCanceled,linkType:"direct",multiselect:a.mode.allowToSelectMultipleFiles,extensions:a.getAllowedFileExtensionsWithDots()}};this.getAllowedFileExtensionsWithDots=function(){return a.mode.allowedFileExtensions?a.mode.allowedFileExtensions.map(function(a){return"."+a}):null};this.onDropboxFileSelected=function(b){b=
b.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.link,a.name,a.bytes,SourceType.Dropbox)});for(var c=0,d=a.subscriberCallbacks;c<d.length;c++){var e=d[c];if(e.onFileSelected)e.onFileSelected(new PickerResult(b))}};this.onDropboxFileSelectionCanceled=function(){for(var b=0,c=a.subscriberCallbacks;b<c.length;b++){var d=c[b];if(d.onFileSelectionCanceled)d.onFileSelectionCanceled()}};if(objectState.isNullOrUndefined(this.settings))throw"DropboxPicker requires settings to be passed. Please provide them.";
if(objectState.isNullOrUndefined(this.dropbox))throw"DropboxPicker requires dropbox api to be passed. Please provide a handle to it.";if(objectState.isNullOrUndefined(this.dropboxNotAvailableErrorTranslation))throw"DropboxPicker requires error translation to be passed. Please provide it.";"complete"===document.readyState?this.initializeWithScript():window.addEventListener("load",this.initializeWithScript)}}(),DropboxWrapper=function(){function c(){this.isAvailable=function(){try{return!objectState.isNullOrUndefined(Dropbox)}catch(d){return!1}}}
c.prototype.choose=function(c){Dropbox.choose(c)};return c}(),CloudPickerModeSerializer=function(){function c(){}c.prototype.serialize=function(c){return encodeURI(JSON.stringify(c))};c.prototype.deserialize=function(c){return JSON.parse(decodeURI(c))};return c}(),GooglePickerInPopup=function(c){function d(d,b,a,e,g){var f=this;c.call(this);this.settings=d;this.browserSniffer=b;this.browserNotSupportedErrorTranslation=a;this.pickerModeSerializer=e;this.mode=g;this.subscriberCallbacks=[];this.subscribe=
function(a){f.raiseInitCallback(a);f.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!1};this.isProxyIframeRequired=function(){return f.browserSniffer.isInternetExplorerAnyVersion()};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("cross_communication_proxy")){var a=f.prepareIframe("cross_communication_proxy");document.body.appendChild(a)}};
this.prepareIframe=function(a){var b=document.createElement("iframe");b.id=a;b.style.display="none";b.src=f.settings.crossCommunicationProxyUrl;return b};this.raiseInitCallback=function(a){if(f.browserSniffer.isInternetExplorer9()){var b=new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,f.browserNotSupportedErrorTranslation,UploadControlTranslation.googleDrive);a.onPickerInitFailure(b)}else a.onPickerInitSuccess()};this.shouldProcessPostMessage=function(a){return a.origin===
f.settings.pickerDomain};if(objectState.isNullOrUndefined(this.settings))throw"GooglePickerInPopup requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"GooglePickerInPopup requires browserSniffer to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.browserNotSupportedErrorTranslation))throw"GooglePickerInPopup requires browserNotSupportedErrorTranslation to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.pickerModeSerializer))throw"GooglePickerInPopup requires modeSerializer to be passed. Please provide it.";
if(objectState.isNullOrUndefined(this.mode))throw"GooglePickerInPopup requires mode to be passed. Please provide it.";this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered()}__extends(d,c);d.prototype.processPostMessage=function(c){if(this.shouldProcessPostMessage(c)){var b=c.data.files.map(function(a){var b=!0,c=!0;a.capabilities&&(b=a.capabilities.canCopy,c=a.capabilities.canShare);return PickerFileResult.createExternalSourcePickerFileResult(a.url,a.name,a.size,SourceType.Google,a.mimeType,
a.id,b,c)});b=new PickerResult(b);c=this.getOAuthContext(c);objectState.isNullOrUndefined(c)||b.setOAuthContext(c);c=0;for(var a=this.subscriberCallbacks;c<a.length;c++){var d=a[c];if(d.onFileSelected)d.onFileSelected(b)}}};d.prototype.getOAuthContext=function(c){return objectState.isNullOrUndefined(c.data.oAuthContext)?null:c.data.oAuthContext};d.prototype.getPickerUrl=function(){var c=new Url(this.settings.pickerUrl);c.appendOrUpdateParam("mode",this.pickerModeSerializer.serialize(this.mode));return c.value};
d.prototype.getInitialPopupTitle=function(){return"Google Drive"};return d}(PickerInPopup),OneDrivePicker=function(c){function d(d,b,a,e,g){var f=this;void 0===g&&(g={purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:!1,allowCollaboration:!1});c.call(this);this.settings=d;this.browserSniffer=b;this.browserNotSupportedErrorTranslation=a;this.modeSerializer=e;this.mode=g;this.subscriberCallbacks=[];this.subscribe=function(a){f.raiseInitCallback(a);f.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=
function(){f.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!1};this.isProxyIframeRequired=function(){return f.browserSniffer.isInternetExplorerAnyVersion()&&f.settings.crossCommunicationProxyUrl};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("onedrive_proxy")){var a=f.prepareIframe("onedrive_proxy");document.body.appendChild(a)}};this.prepareIframe=function(a){var b=document.createElement("iframe");b.id=
a;b.style.display="none";b.src=f.settings.crossCommunicationProxyUrl;return b};this.raiseInitCallback=function(a){if(f.browserSniffer.isInternetExplorer9()){var b=new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,f.browserNotSupportedErrorTranslation,UploadControlTranslation.oneDrive);a.onPickerInitFailure(b)}else a.onPickerInitSuccess()};if(objectState.isNullOrUndefined(this.settings))throw"OneDrivePicker requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"OneDrivePicker requires browserSniffer to be passed. Please provide a handle to it.";
if(objectState.isNullOrUndefined(this.browserNotSupportedErrorTranslation))throw"OneDrivePicker requires browserNotSupportedErrorTranslation to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.modeSerializer))throw"OneDrivePicker requires modeSerializer to be passed. Please provide it.";this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered()}__extends(d,c);d.prototype.processPostMessage=function(c){if(c.origin===this.settings.pickerDomain){var b=c.data.files.map(function(a){return PickerFileResult.createOneDrivePickerFileResult(a)});
b=new PickerResult(b);b.setOAuthContext(c.data.oAuthContext);c.data.purpose===PickerPurpose.Combined&&(b.purpose=c.data.isLinkMode?PickerPurpose.LinkToCloud:PickerPurpose.Upload);c=0;for(var a=this.subscriberCallbacks;c<a.length;c++){var d=a[c];if(d.onFileSelected)d.onFileSelected(b)}}};d.prototype.getPickerUrl=function(){var c=new Url(this.settings.pickerUrl);c.appendOrUpdateParam("mode",this.modeSerializer.serialize(this.mode));return c.value};d.prototype.getInitialPopupTitle=function(){return"OneDrive"};
d.create=function(c,b,a,e){return new d(c,b,"",a,e)};return d}(PickerInPopup);
(function(c){(function(d){var f=function(){return function(b,a){var e=this;this.picker=b;this.hasFolderPicker=a;this.icon=browserSniffer.isAnyMobile()?"ccl-uc-device-icon":this.hasFolderPicker?"ili ili-file":"ccl-uc-computer-icon";this.name=c.ComponentName.localPicker;this.viewModel=function(a){return new d.PickerViewModel(e.picker,a.onPickerOpen)};this.template=d.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image '+this.icon+'" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.fileFromComputer" class="ccl-uc-source-content-text"></span>')}}();
d.LocalPickerComponent=f})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(c){(function(c){var b=function(){function a(a){var b=this;this.picker=a;this.css=ko.observable("");this.title=UploadControlTranslation.addFiles;this.caption=UploadControlTranslation.orSimplyDropThemHere;this.currentDragEnterCount=0;this.showCaption=function(){return BrowserSniffer().isAnyMobile()||!b.picker.isEnabled()?!1:!0};this.dropzoneDragOver=function(a,c){a=c.originalEvent;if(!b.isDraggingFiles(a))return!1;a.stopPropagation();a.preventDefault();b.picker.isEnabled()?a.dataTransfer.dropEffect=
"copy":a.dataTransfer.dropEffect="none";return!0};this.dropzoneDrop=function(a,c){a=c.originalEvent;if(!b.isDraggingFiles(a)||!b.picker.isEnabled())return!1;b.picker.onFilesDropped(a.dataTransfer);return!0};this.documentDragEnter=function(a){b.isDraggingFiles(a)&&(a.preventDefault(),b.currentDragEnterCount++,b.picker.isEnabled()&&b.css("highlight"))};this.documentDragOver=function(a){b.isDraggingFiles(a)&&(a.preventDefault(),a.dataTransfer.dropEffect="none")};this.documentDrop=function(a){b.isDraggingFiles(a)&&
(a.preventDefault(),b.currentDragEnterCount=0,b.css(""))};this.documentDragLeave=function(a){b.isDraggingFiles(a)&&(b.currentDragEnterCount--,0===b.currentDragEnterCount&&b.css(""))};this.isDraggingFiles=function(a){if(a.dataTransfer.types)for(var b=0;b<a.dataTransfer.types.length;b++)if("Files"===a.dataTransfer.types[b])return!0;return!1};contract.require(!objectState.isNullOrUndefined(a),"This ViewModel requires picker to be passed. Please provide them.");this.eventHandlers={drop:this.dropzoneDrop,
dragover:this.dropzoneDragOver};this.subscribeToDocumentDragDropEvents()}a.prototype.subscribeToDocumentDragDropEvents=function(){document.addEventListener("dragenter",this.documentDragEnter,!1);document.addEventListener("dragover",this.documentDragOver,!1);document.addEventListener("drop",this.documentDrop,!1);document.addEventListener("dragleave",this.documentDragLeave,!1)};return a}();c.DropzoneViewModel=b})(c.Dropzone||(c.Dropzone={}))})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(d){(function(d){var b=function(){return function(a){this.picker=a;this.name=c.ComponentName.dropzonePicker;this.viewModel={instance:new d.DropzoneViewModel(this.picker)};this.template='\n<button class="ccl-uc-dropzone-container" data-bind="event: eventHandlers">\n    <div class="ccl-uc-dropzone" data-bind="css: css">\n        <div id="ccl-uc-dropzone-text-container">\n            <div aria-hidden="true" class="ili ili-file"></div>\n            <span id="ccl-uc-dropzone-text" data-bind="text: title"></span>\n        </div>\n        <span id="ccl-uc-dropzone-caption" data-bind="text: caption, visible: showCaption()"></span>\n    </div>\n</button>'}}();
d.DropzonePickerComponent=b})(d.Dropzone||(d.Dropzone={}))})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(d){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.dropboxPicker;this.viewModel=function(b){return new d.PickerViewModel(a.picker,b.onPickerOpen)};this.template=d.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-dropbox-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.dropbox" class="ccl-uc-source-content-text"></span>')}}();d.DropboxPickerComponent=f})(c.Picker||
(c.Picker={}))})(Components||(Components={}));
(function(c){(function(d){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.googlePicker;this.viewModel=function(b){return new d.PickerViewModel(a.picker,b.onPickerOpen)};this.template=d.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-google-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.googleDrive" class="ccl-uc-source-content-text"></span>')}}();d.GooglePickerComponent=f})(c.Picker||
(c.Picker={}))})(Components||(Components={}));
(function(c){(function(d){var f=function(){function b(a,e){var f=this;this.picker=a;this.showOffice365=e;this.name=c.ComponentName.onedrivePicker;this.viewModel=function(a){return new d.PickerViewModel(f.picker,a.onPickerOpen)};this.template=d.Template.create(this.name,this.showOffice365?b.office365Template:b.onedriveTemplate)}b.onedriveTemplate='\n        <div class="ccl-uc-source-content-image ccl-uc-onedrive-icon" aria-hidden="true"></div> \n        <span class="ccl-uc-source-content-text">OneDrive</span>';b.office365Template=
'\n        <div class="ccl-uc-source-content-image ccl-uc-office365-icon" aria-hidden="true"></div> \n        <span class="ccl-uc-source-content-text">Office 365</span>';return b}();d.OneDrivePickerComponent=f})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(d){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.linkToGoogleDrivePicker;this.viewModel=function(b){return new d.PickerViewModel(a.picker,b.onPickerOpen)};this.template=d.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-google-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.googleDrive" class="ccl-uc-source-content-text"></span>')}}();d.LinkToGoogleDrivePickerComponent=
f})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(d){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.folderPicker;this.viewModel=function(b){return new d.PickerViewModel(a.picker,b.onPickerOpen)};this.template=d.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ili ili-folder" aria-hidden="true"></div> \n        <span data-bind="text: UploadControlTranslation.folderFromComputer" class="ccl-uc-source-content-text"></span>')}}();d.FolderPickerComponent=f})(c.Picker||
(c.Picker={}))})(Components||(Components={}));
var PickerObjectsFactory=function(){function c(c,f){var b=this;this.settings=c;this.translations=f;this.initializeDropzonePicker=function(a){var c=b.getDropzonePickerMode();c=new DropzonePicker(c,new FileValidator);a.push(c);a=new Components.Picker.Dropzone.DropzonePickerComponent(c);ko.components.register(a.name,a)};this.initializeLocalFilePicker=function(a,c){if(b.settings.EnableLocalUpload&&(!BrowserSniffer().isChromeBookOs()||!b.settings.EnableLinkingToGoogleDrive&&!b.settings.EnableUploadFromGoogleDrive)){var d=
b.getPickerMode();d=new LocalFilePicker(d,BrowserSniffer(),new FileNameFromPathExtractor,$);a.push(d);a=new Components.Picker.LocalPickerComponent(d,b.isFolderUploadingAllowed());ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};this.initializeFolderPicker=function(a,c){if(b.isFolderUploadingAllowed()){var d=new FolderPicker($);a.push(d);a=new Components.Picker.FolderPickerComponent(d);ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};
this.isFolderUploadingAllowed=function(){return b.settings.EnableLocalUpload&&b.settings.AllowToUploadFolders&&browserSniffer.isDirectoryUploadSupported()&&!browserSniffer.isAnyMobile()&&!browserSniffer.isChromeBookOs()};this.initializeDropboxPicker=function(a,c){if(b.settings.EnableUploadFromDropbox){var d=b.getDropboxPickerInitSettings();d=new DropboxPicker(d,new DropboxWrapper,b.translations.DropboxApiNotAvailable,b.getUploadCloudPickerMode());a.push(d);a=new Components.Picker.DropboxPickerComponent(d);
ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};this.initializeGoogleDriveUploadPicker=function(a,c){if(b.settings.EnableUploadFromGoogleDrive){var d=b.getGooglePickerInitSettings();d=new GooglePickerInPopup(d,BrowserSniffer(),b.translations.GoogleBrowserNotSupported,new CloudPickerModeSerializer,b.getUploadCloudPickerMode());a.push(d);a=new Components.Picker.GooglePickerComponent(d);ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};
this.getGooglePickerInitSettings=function(){return{pickerDomain:b.settings.GoogleDriveUploadSettings.PickerDomain,pickerUrl:b.settings.GoogleDriveUploadSettings.PickerUrl,crossCommunicationProxyUrl:b.settings.GoogleDriveUploadSettings.CrossCommunicationProxyUrl}};this.getUploadCloudPickerMode=function(){return{purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:b.settings.AllowToSelectMultipleFiles,allowedFileExtensions:b.settings.ValidationSettings.AllowedFileExtensions,allowCollaboration:!1}};
this.initializeOneDriveUploadPicker=function(a,c){if(b.settings.EnableUploadFromOneDrive){var d=new OneDrivePicker(b.getOneDrivePickerInitSettings(),BrowserSniffer(),b.translations.OneDriveBrowserNotSupported,new CloudPickerModeSerializer,b.getUploadCloudPickerMode());a.push(d);a=new Components.Picker.OneDrivePickerComponent(d,b.settings.OneDriveUploadSettings.ShowOffice365);ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};this.initializeGoogleDriveLinkingPicker=function(a,
c){if(b.settings.EnableLinkingToGoogleDrive){var d=b.getGooglePickerInitSettings();d=new GooglePickerInPopup(d,BrowserSniffer(),b.translations.GoogleBrowserNotSupported,new CloudPickerModeSerializer,b.getLinkToCloudPickerMode());a.push(d);a=new Components.Picker.LinkToGoogleDrivePickerComponent(d);ko.components.register(a.name,a);c.push(b.getLinkPickerComponentInfo(a.name))}};this.getLinkToCloudPickerMode=function(){return{allowToSelectMultipleFiles:b.settings.AllowToSelectMultipleFiles,purpose:PickerPurpose.LinkToCloud,
allowedFileExtensions:b.settings.ValidationSettings.AllowedFileExtensions,allowCollaboration:!1}};this.initializeOneDriveLinkingPicker=function(a,c){if(b.settings.EnableLinkingFromOneDrive){var d=b.getOneDrivePickerInitSettings();d=new OneDrivePicker(d,BrowserSniffer(),b.translations.OneDriveBrowserNotSupported,new CloudPickerModeSerializer,b.getLinkToCloudPickerMode());a.push(d);a=new Components.Picker.LinkToOneDrivePickerComponent(d,b.settings.OneDriveUploadSettings.ShowOffice365);ko.components.register(a.name,
a);c.push(b.getLinkPickerComponentInfo(a.name))}};this.initializeWebDavUploadPicker=function(a,c){if(b.settings.EnableUploadFromWebDav){var d=new WebDavPicker(b.getWebDavPickerInitSettings(),BrowserSniffer(),b.translations.WebDavBrowserNotSupported,new CloudPickerModeSerializer,b.getUploadCloudPickerMode());a.push(d);a=new Components.Picker.WebDavPickerComponent(d);ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};this.getCombinedPickerMode=function(){return{allowToSelectMultipleFiles:b.settings.AllowToSelectMultipleFiles,
purpose:PickerPurpose.Combined,allowedFileExtensions:b.settings.ValidationSettings.AllowedFileExtensions,allowCollaboration:!1}};this.initializeOneDriveCombinedPicker=function(a,c,d){if(b.settings.EnableLinkingFromOneDrive)if(b.settings.EnableUploadFromOneDrive){var e=b.getOneDrivePickerInitSettings();e=new OneDrivePicker(e,BrowserSniffer(),b.translations.OneDriveBrowserNotSupported,new CloudPickerModeSerializer,b.getCombinedPickerMode());a.push(e);c.push(e);a=new Components.Picker.OneDrivePickerComponent(e,
b.settings.OneDriveUploadSettings.ShowOffice365);ko.components.register(a.name,a);d.push(b.getCombinedPickerComponentInfo(a.name))}else b.initializeOneDriveLinkingPicker(c,d);else b.initializeOneDriveUploadPicker(a,d)};this.initializeMediaRecorderPicker=function(a){if(b.settings.EnableUploadFromMediaRecorder){var c=new MediaRecorderPicker(b.settings,b.translations,$);a.push(c);a=new Components.Picker.MediaRecorder.MediaRecorderPickerComponent(c);ko.components.register(a.name,a)}}}c.prototype.build=
function(){var c=[],f=[],b=[],a=[];this.initializeDropzonePicker(c);this.initializeLocalFilePicker(c,a);this.initializeFolderPicker(b,a);this.initializeDropboxPicker(c,a);this.settings.ForceSingleColumnPickerLayout?this.initializeOneDriveCombinedPicker(c,f,a):(this.initializeOneDriveUploadPicker(c,a),this.initializeOneDriveLinkingPicker(f,a));this.initializeGoogleDriveLinkingPicker(f,a);this.settings.ForceSingleColumnPickerLayout||this.initializeGoogleDriveUploadPicker(c,a);this.initializeWebDavUploadPicker(c,
a);this.initializeMediaRecorderPicker(c);return[c,f,b,a]};c.prototype.getDropzonePickerMode=function(){return{allowToSelectMultipleFiles:this.settings.AllowToSelectMultipleFiles,allowDragAndDrop:this.settings.EnableLocalUpload&&this.settings.LocalUploadSettings.AllowDragAndDrop}};c.prototype.getPickerMode=function(){return{allowToSelectMultipleFiles:this.settings.AllowToSelectMultipleFiles,allowedFileExtensions:this.settings.ValidationSettings.AllowedFileExtensions}};c.prototype.getUploadPickerComponentInfo=
function(c){return{componentName:c,purpose:PickerPurpose.Upload}};c.prototype.getDropboxPickerInitSettings=function(){return{dropboxAppKey:this.settings.DropboxUploadSettings.DropboxAppKey}};c.prototype.getOneDrivePickerInitSettings=function(){return{pickerDomain:this.settings.OneDriveUploadSettings.OneDrivePickerDomain,pickerUrl:this.settings.OneDriveUploadSettings.OneDrivePickerUrl,crossCommunicationProxyUrl:this.settings.OneDriveUploadSettings.CrossCommunicationProxyUrl}};c.prototype.getLinkPickerComponentInfo=
function(c){return{componentName:c,purpose:this.settings.ForceSingleColumnPickerLayout?PickerPurpose.Upload:PickerPurpose.LinkToCloud}};c.prototype.getWebDavPickerInitSettings=function(){return{pickerDomain:this.settings.WebDavUploadSettings.WebDavPickerDomain,pickerUrl:this.settings.WebDavUploadSettings.WebDavPickerUrl,crossCommunicationProxyUrl:this.settings.WebDavUploadSettings.CrossCommunicationProxyUrl}};c.prototype.getCombinedPickerComponentInfo=function(c){return{componentName:c,purpose:PickerPurpose.Combined}};
return c}(),LegacyGenericUploaderLiterals=function(){function c(c){this.maxFileSizeForUpload=c.MaxFileSizeForUpload;this.files=c.Files;this.fileExtensionNotAllowed=c.FileExtensionNotAllowed;this.fileTooBig=c.FileTooBig;this.fileTooSmall=c.FileTooSmall;this.invalidCharactersXInFileName=c.InvalidCharactersXInFileName;this.unableToOpenFile=c.UnableToOpenFile;this.invalidFirstPartOfFileName=c.InvalidFirstPartOfFileName;this.mb=c.Mb;this.kb=c.Kb;this.fileIsEmpty=c.FileIsEmpty;this.fileNameIsTooLong=c.FileNameIsTooLong;
this.fileNameIsEmpty=c.fileNameIsEmpty}c.prototype.getExcededSizeLimitTranslation=function(c){return this.fileTooBig.replace("{0}",this.getFormattedFileSize(c))};c.prototype.getBelowSizeLimitTranslation=function(c){return this.fileTooSmall.replace("{0}",this.getFormattedFileSize(c))};c.prototype.getFormattedFileSize=function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+this.mb:(c/1024).toFixed(2)+" "+this.kb};return c}(),uploaderFileStatus;
(function(c){c[c.added=1]="added";c[c.inProgress=2]="inProgress";c[c.success=3]="success";c[c.error=4]="error"})(uploaderFileStatus||(uploaderFileStatus={}));function AjaxUploaderCommon(){return{getRelativePath:function(c,d){return browserSniffer.isFirefox()?c.relativePath||d||"":c.webkitRelativePath||c.relativePath||d||""}}}
var auCommon=AjaxUploaderCommon(),UploaderFileItem=function(){function c(c,f){var b=this;this.fileData=c;this.literals=f;this.getProgressSafe=function(a){return a||0};this.hasAction=ko.observable(!1);this.preview=ko.observable(null);this.progress=ko.observable(null);this.progressText=ko.pureComputed(function(){var a=String(100*b.getProgressSafe(b.progress()));return parseInt(a,10)+"%"});this.status=ko.observable(uploaderFileStatus.added);this.isActionEnabled=ko.observable(!0);this.isActionVisible=
ko.observable(!0);this.errorMessage=ko.observable(null);this.messageColumnCss=ko.pureComputed(function(){switch(b.status()){case uploaderFileStatus.error:return"error";case uploaderFileStatus.inProgress:return"progress";default:return"empty-col"}});this.buttonColumnCss=ko.pureComputed(function(){var a="";switch(b.status()){case uploaderFileStatus.success:a+="delete";break;default:a+="cancel"}b.isActionEnabled()||(a+=" transparent");return a});this.isError=ko.pureComputed(function(){return b.status()===
uploaderFileStatus.error});this.isInProgress=ko.pureComputed(function(){return b.status()===uploaderFileStatus.inProgress});this.isProgressSet=ko.pureComputed(function(){return objectState.isNumber(b.progress())});this.useDefaultPreview=ko.pureComputed(function(){return null===b.preview()});this.name=this.fileData.name;this.size=this.fileData.size;this.fileId=this.fileData.fileId;this.sizeText=this.literals.getFormattedFileSize(c.size);this.action=null}c.prototype.emptyAction=function(){return!1};
return c}(),UploaderFileList=function(){return function(c,d,f){var b=this;this.fileListElement=c;this.fileItemFactory=d;this.literals=f;this.findFileById=function(a){return ko.utils.arrayFirst(b.files(),function(b){return b.fileId===a})};this.setFileStatus=function(a,c,d){a=b.findFileById(a);objectState.isNullOrUndefined(a)||(a.status(c),b.prepareActionCallback(a,d))};this.prepareActionCallback=function(a,b){b?(a.action=function(){b(a.fileId)},a.hasAction(!0)):null===b&&(a.action=null,a.hasAction(!1))};
this.setErrorMessage=function(a,c){a=b.findFileById(a);objectState.isNullOrUndefined(a)||(objectState.isNullOrWhitespace(c)&&(c=b.literals.unknown),a.errorMessage(c))};this.addFile=function(a,c){b.removeFiles();a=b.fileItemFactory.create(a,b.literals);b.prepareActionCallback(a,c);b.files.push(a)};this.removeFile=function(a){b.files.remove(function(b){return b.fileId===a})};this.removeFiles=function(){b.files.removeAll()};this.setDefaultFileProgress=function(a){b.updateFileProgress(a,null)};this.updateFileProgress=
function(a,c){a=b.findFileById(a);objectState.isNullOrUndefined(a)||a.progress(c)};this.setFileStatusToInProgress=function(a){b.setFileStatus(a,uploaderFileStatus.inProgress)};this.setFileStatusToSuccess=function(a,c){b.setFileStatus(a,uploaderFileStatus.success,c)};this.setFileStatusToError=function(a,c,d){b.setFileStatus(a,uploaderFileStatus.error,d);b.setErrorMessage(a,c)};this.updateFilePreview=function(a,c){a=b.findFileById(a);objectState.isNullOrUndefined(a)||a.preview(c)};this.setActionCallback=
function(a,c){a=b.findFileById(a);objectState.isNullOrUndefined(a)||b.prepareActionCallback(a,c)};this.disableAction=function(a){a=b.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionEnabled(!1)};this.enableAction=function(a){a=b.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionEnabled(!0)};this.hideAction=function(a){a=b.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionVisible(!1)};contract.require(!objectState.isNullOrUndefined(c),"argument 'fileListElement' is not defined");
contract.require(!objectState.isNullOrUndefined(d),"argument 'fileItemFactory' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'literals' is not defined");this.files=ko.observableArray([]);ko.applyBindings(this,this.fileListElement[0])}}();
function UploadStateServiceClient(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'options' is not defined");contract.require(!objectState.isNullOrUndefined(c.client),"'options.client' is not defined");contract.require(!objectState.isNullOrUndefined(c.hub),"'options.hub' is not defined");var d={usePreExistingChannel:null,openChannel:function(b){d.usePreExistingChannel=!1;null!==c.hub&&"undefined"!==typeof c.hub.id&&(d.usePreExistingChannel=!0);c.client.UpdateUploadProgress=function(a){d.onProgress(a)};
c.client.UploadCompleted=function(a){d.onSuccess(JSON.parse(a));d.usePreExistingChannel||c.hub.stop()};c.client.UploadError=function(a){d.onFail(a);d.usePreExistingChannel||c.hub.stop()};c.client.uploadAborted=function(){d.onAbort();d.usePreExistingChannel||c.hub.stop()};d.usePreExistingChannel?(b.channelId=c.hub.id,d.onChannelOpened(b)):d.openNewChannel(b)},openNewChannel:function(b){var a=!1;c.hub.start({transport:"longPolling"}).done(function(){a||(a=!0,b.channelId=c.hub.id,d.onChannelOpened(b))}).fail(function(){a||
(a=!0,console.log("Could not connect to UploadProgressNotificationHub!"),d.onChannelOpenFailure())});c.openTimeoutPeriodInMs&&setTimeout(function(){a||(a=!0,console.log("Connecting to UploadProgressNotificationHub timed out!"),d.onChannelOpenFailure())},c.openTimeoutPeriodInMs)},onProgress:function(b){if(c.onProgress)c.onProgress(b)},onSuccess:function(b){if(c.onSuccess)c.onSuccess(b)},onFail:function(b){if(c.onFail)c.onFail(b)},onAbort:function(){if(c.onAbort)c.onAbort()},onChannelOpened:function(b){if(c.onChannelOpened)c.onChannelOpened(b)},
onChannelOpenFailure:function(){if(c.onChannelOpenFailure)c.onChannelOpenFailure()},initialize:function(b){d.openChannel(b)}},f={channelId:null,abort:function(){}};d.initialize(f);return f}
var UploadStateService=function(){return function(){var c=this;this.uploadStateServiceClient=this.server=this.hub=this.client=null;this.specifyServiceUrl=function(c){objectState.isNullOrUndefined(c.endpoint)||($.connection.hub.url=c.endpoint)};this.openChannelWithoutSignalRLoaded=function(c){if(c&&c.onChannelOpenFailure)c.onChannelOpenFailure()};this.openChannelWithSignalRLoaded=function(d){d=d||{};c.uploadStateServiceClient=UploadStateServiceClient({client:c.client,hub:c.hub,onProgress:d.onProgress,
onSuccess:d.onSuccess,onFail:d.onFail,onChannelOpened:d.onChannelOpened,onAbort:d.onAbort,onChannelOpenFailure:d.onChannelOpenFailure,openTimeoutPeriodInMs:3E3})};this.abortUploadWithoutSignalRLoaded=function(c){safeConsoleLogger.log("Request to abort failed. Script with signalr hub definition has not come yet.");c&&c()};this.abortUploadWithSignalRLoaded=function(d){c.server.abortUpload().fail(function(c){safeConsoleLogger.log("Request to abort failed, probably because SignalR is unavailable. "+c);
d&&d()})};this.signalrHubScriptLoaded=function(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'options' is not defined");contract.require(!objectState.isNullOrUndefined(d.signalR),"'options.signalR' is not defined");contract.require(!objectState.isNullOrUndefined(d.signalR.uploadProgressNotificationHub),"could not find progress notification hub");c.specifyServiceUrl(d);c.client=d.signalR.uploadProgressNotificationHub.client;c.server=d.signalR.uploadProgressNotificationHub.server;
c.hub=d.signalR.hub;c.openChannel=c.openChannelWithSignalRLoaded;c.abortUpload=c.abortUploadWithSignalRLoaded};this.openChannel=this.openChannelWithoutSignalRLoaded;this.abortUpload=this.abortUploadWithoutSignalRLoaded}}();
(function(c){var d=function(){function c(){this.resetState()}c.prototype.getCurrentState=function(){return this.currentState};c.prototype.getFileId=function(){return this.fileId};c.prototype.isFinalState=function(){return this.currentState===FileUploadState.Success||this.currentState===FileUploadState.Error};c.prototype.prepareUpload=function(b){contract.require(!objectState.isNullOrUndefined(b),"'fileId' is not defined");if(this.currentState===FileUploadState.New)this.fileId=b,this.currentState=
FileUploadState.Ready;else throw Error("You can only prepare upload if it is in status 'New'");};c.prototype.startUpload=function(){if(this.currentState===FileUploadState.Ready)this.currentState=FileUploadState.InProgress;else throw Error("You can only start upload if it is in status 'Ready'");};c.prototype.abortUpload=function(){if(this.currentState===FileUploadState.InProgress)this.currentState=FileUploadState.Aborting;else throw Error("You can only abort upload if it is in status 'InProgress'");
};c.prototype.finishUpload=function(){if(this.currentState===FileUploadState.Ready||this.currentState===FileUploadState.InProgress||this.currentState===FileUploadState.Aborting)this.currentState=FileUploadState.Success;else throw Error("You can only finish upload if it is in status 'InProgress' or 'Ready' or 'Aborting'");};c.prototype.failUpload=function(){if(this.currentState===FileUploadState.Ready||this.currentState===FileUploadState.InProgress||this.currentState===FileUploadState.Aborting)this.currentState=
FileUploadState.Error;else throw Error("You can only fail upload if it is in status 'Ready' or 'InProgress' or 'Aborting'");};c.prototype.resetState=function(){this.currentState=FileUploadState.New;this.fileId=null};return c}();c.FileUploadStateHandler=d})(GenericUploader||(GenericUploader={}));var LegacyGenericUploaderControlFailureReason;(function(c){c[c.AllPickersFailed=0]="AllPickersFailed"})(LegacyGenericUploaderControlFailureReason||(LegacyGenericUploaderControlFailureReason={}));
var LegacyGenericUploaderControlFailureEventArgs=function(){return function(c){this.failureReason=c}}(),LegacyGenericUploaderCallbacks=function(){return function(c,d){c&&d&&(this.controlInitialized=d.getFunctionByName(c?c.OnControlInitialization:void 0),this.fileSelected=d.getFunctionByName(c?c.OnFileSelected:void 0),this.fileSelectionCanceled=d.getFunctionByName(c?c.OnFileSelectionCanceled:void 0),this.fileUploadSuccess=d.getFunctionByName(c?c.OnFileUploadSuccess:void 0),this.fileUploadError=d.getFunctionByName(c?
c.OnFileUploadError:void 0),this.controlInitializationError=d.getFunctionByName(c?c.OnControlInitializationError:void 0),this.pickerInitFailure=d.getFunctionByName(c?c.OnPickerInitFailure:void 0),this.fileUploadAborted=d.getFunctionByName(c?c.OnFileUploadAborted:void 0),this.fileRemoved=d.getFunctionByName(c?c.fileRemoved:void 0))}}(),LegacyGenericUploaderControl=function(){function c(c,f,b,a,e,g,h,k,l){var d=this;this.settings=c;this.literals=f;this.pickers=b;this.sender=a;this.fileList=e;this.fileMetadataFactory=
g;this.uploaderCallbacks=h;this.uploadStateHandler=k;this.fileResultValidator=l;this.shouldAllowToCancelUpload=!1;this.initPickerInitializationDfds=function(a){d.pickerInitializationDfds=a.map(function(){return $.Deferred()})};this.initialize=function(){d.pickers.forEach(function(a,b){d.initPickerCallback(a,b)});d.controlInitializedDfd.done(d.uploaderCallbacks.controlInitialized);d.controlInitializedDfd.fail(d.uploaderCallbacks.controlInitializationError)};this.initPickerCallback=function(a,b){var c=
new PickerCallback(function(){return d.onPickerInitialized(b)},function(a){return d.onPickerInitializationError(b,a)},d.onFileSelected,function(){});a.subscribe(c);d.pickerInitializationDfds[b].fail(d.uploaderCallbacks.pickerInitFailure)};this.onPickerInitialized=function(a){d.pickerInitializationDfds[a].resolve();d.checkPickersInitStateAndRaiseControlInit()};this.onPickerInitializationError=function(a,b){d.pickerInitializationDfds[a].reject(d,b);d.checkPickersInitStateAndRaiseControlInit()};this.checkPickersInitStateAndRaiseControlInit=
function(){d.pickerInitializationDfds.every(function(a){return"rejected"===a.state()})?d.controlInitializedDfd.reject(d,new LegacyGenericUploaderControlFailureEventArgs(LegacyGenericUploaderControlFailureReason.AllPickersFailed)):d.pickerInitializationDfds.every(function(a){return"pending"!==a.state()})&&d.controlInitializedDfd.resolve(d)};this.onUploadError=function(a){d.fileList.setFileStatusToError(d.uploadStateHandler.getFileId(),a,d.removeFromList);d.uploadStateHandler.failUpload();d.fileList.enableAction(d.uploadStateHandler.getFileId());
d.enablePickerButton();d.uploaderCallbacks.fileUploadError&&d.uploaderCallbacks.fileUploadError(a)};this.onUploadSuccess=function(a,b){d.fileList.setFileStatusToSuccess(d.uploadStateHandler.getFileId(),d.removeFromList);d.uploadStateHandler.finishUpload();d.settings.disableDeletePostBackAfterUpload?d.doNotAllowToCancelUpload():d.fileList.enableAction(d.uploadStateHandler.getFileId());d.uploaderCallbacks.fileUploadSuccess&&d.uploaderCallbacks.fileUploadSuccess(a,b||{})};this.removeFromList=function(a){d.fileList.removeFile(a);
d.enablePickerButton();d.uploaderCallbacks.fileRemoved&&d.uploaderCallbacks.fileRemoved()};this.disablePickerButton=function(){d.pickers.forEach(function(a){return a.disable()})};this.enablePickerButton=function(){d.pickers.forEach(function(a){return a.enable()})};this.addFilesToFileList=function(a){a=d.fileMetadataFactory.create(a);d.fileList.addFile(a);d.uploadStateHandler.prepareUpload(a.fileId);d.fileList.setFileStatusToInProgress(d.uploadStateHandler.getFileId())};this.onUploadProgress=function(a){a/=
100;d.shouldAllowToCancelUpload&&(d.fileList.enableAction(d.uploadStateHandler.getFileId()),d.shouldAllowToCancelUpload=!1);d.fileList.updateFileProgress(d.uploadStateHandler.getFileId(),a);d.settings.disableDeletePostBackAfterUpload&&a>=d.disableDeletePostbackThreshold&&d.doNotAllowToCancelUpload()};this.onAbortSuccess=function(){d.uploadStateHandler.abortUpload();d.removeFromList(d.uploadStateHandler.getFileId());d.uploaderCallbacks.fileUploadAborted&&d.uploaderCallbacks.fileUploadAborted()};this.onAbortFailure=
function(){d.uploadStateHandler.isFinalState()?safeConsoleLogger.log("Abort request failed, but upload has already ended."):(d.doNotAllowToCancelUpload(),d.fileList.updateFileProgress(d.uploadStateHandler.getFileId(),"-"),d.fileList.setFileStatusToInProgress(d.uploadStateHandler.getFileId()))};this.onFileSelected=function(a){d.uploadStateHandler.resetState();d.disablePickerButton();var b=d.sender.getOptions();d.uploaderCallbacks.fileSelected&&d.uploaderCallbacks.fileSelected(a.files[0],b);d.addFilesToFileList(a.files);
if(d.validate(a)){d.shouldAllowToCancelUpload=!0;d.fileList.disableAction(d.uploadStateHandler.getFileId());a=new GenericUploader.RequestToSender(a.files[0]);var c=d.sender.send(a,d.onUploadProgress,d.onUploadSuccess,d.onUploadError,b);d.fileList.setActionCallback(d.uploadStateHandler.getFileId(),function(){c.abort(d.onAbortSuccess,d.onAbortFailure)});d.uploadStateHandler.startUpload()}};this.validate=function(a){if(1<a.files.length)return!0;a=d.fileResultValidator.validateFile(a.files[0]);return a.isValid()?
!0:(d.onUploadError(a.getData()),!1)};this.doNotAllowToCancelUpload=function(){d.shouldAllowToCancelUpload=!1;d.fileList.disableAction(d.uploadStateHandler.getFileId())};this.hidePicker=function(){d.pickers.forEach(function(a){return a.hide()})};this.showPicker=function(){d.pickers.forEach(function(a){return a.show()})};this.enableMultipleFilesMode=function(){d.pickers.forEach(function(a){return a.enableMultipleFilesSelecting()})};this.disableMultipleFilesMode=function(){d.pickers.forEach(function(a){return a.disableMultipleFilesSelecting()})};
this.subscribe=function(a){d.uploaderCallbacks=a;d.controlInitializedDfd.done(d.uploaderCallbacks.controlInitialized);d.controlInitializedDfd.fail(d.uploaderCallbacks.controlInitializationError);d.pickerInitializationDfds.forEach(function(a){return a.fail(d.uploaderCallbacks.pickerInitFailure)})};contract.require(!objectState.isNullOrUndefined(this.settings),"'settings' is not defined");contract.require(!objectState.isNullOrUndefined(this.literals),"'literals' is not defined");contract.require(!objectState.isNullOrUndefined(this.pickers),
"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileMetadataFactory),"'fileMetadataFactory' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploaderCallbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploadStateHandler),"'uploadStateHandler' is not defined");
contract.require(!objectState.isNullOrUndefined(this.fileResultValidator),"'fileResultValidator' is not defined");this.controlInitializedDfd=$.Deferred();this.initPickerInitializationDfds(b);this.disableDeletePostbackThreshold=.99;this.initialize()}c.prototype.setCurrentFileStatusToError=function(c){var d=this.uploadStateHandler.getFileId();this.fileList.setFileStatusToError(d,c,this.removeFromList);this.fileList.enableAction(d)};c.prototype.setFileRemovedCallback=function(c){var d=this;this.fileList.setActionCallback(this.uploadStateHandler.getFileId(),
function(b){d.removeFromList(b);"function"===typeof c&&c()})};c.prototype.displayFileInFileList=function(c,f,b){var a=this.fileMetadataFactory.generateFileId();this.uploadStateHandler.prepareUpload(a);this.uploadStateHandler.finishUpload();c={name:c,size:f,fileId:this.uploadStateHandler.getFileId()};this.fileList.addFile(c);b?(this.fileList.setFileStatusToSuccess(this.uploadStateHandler.getFileId(),this.removeFromList),this.disablePickerButton()):this.fileList.setFileStatusToSuccess(this.uploadStateHandler.getFileId());
this.settings.readOnlyMode?this.fileList.hideAction(this.uploadStateHandler.getFileId()):this.settings.disableDeletePostBackAfterUpload?this.doNotAllowToCancelUpload():this.fileList.enableAction(this.uploadStateHandler.getFileId())};return c}(),LegacyGenericUploaderSettings=function(){function c(c){this.redirectUrl=c.RedirectUrl;this.pickerUrl=c.PickerUrl;this.uploadUrl=c.UploadUrl;this.disableDeletePostBackAfterUpload=this.getBoolean(c.DisableDeletePostBackAfterUpload);this.readOnlyMode=this.getBoolean(c.ReadOnlyMode);
this.uploadStateServiceEndpoint=c.UploadStateServiceEndpoint;this.minFileSize=parseInt(c.MinFileSize);this.maxFileSize=parseInt(c.MaxFileSize);this.forbiddenFileExtensions=this.getArray(c.ForbiddenFileExtensions);this.illegalCharacters=this.getArray(c.IllegalCharacters);this.restrictedFileNames=this.getArray(c.IllegalFileNames);this.maxFileNameLength=parseInt(c.MaxFileNameLength)}c.prototype.getBoolean=function(c){return/^true$/i.test(c)};c.prototype.getArray=function(c){return"undefined"===typeof c||
null==c?null:JSON.parse(c)};return c}();function UploaderSenderOptionsFactory(){return{create:function(c){return new UploaderSenderOptions(c)}}}
function ExternalUploadersFileMetadataFactory(c,d){contract.require(!objectState.isNullOrUndefined(c),"");contract.require(!objectState.isNullOrUndefined(d),"");return{create:function(f){if(void 0==f)throw Error("Files are undefined");if(!(f instanceof Array))throw Error("Files are not an array");var b={fileId:null,size:null,name:null};b.fileId=c.newGuid();b.size=f.reduce(function(a,b){return a+b.size},0);b.name=1===f.length?f[0].name:d;return b},generateFileId:function(){return c.newGuid()}}}
var PickerFileResultValidator=function(){function c(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'validators' cannot be null or undefined");this.validators=c}c.prototype.validateFile=function(c){for(var d=0,b=this.validators;d<b.length;d++){var a=b[d];if(!objectState.isNullOrUndefined(a)&&(a=a.validateFile(c),!a.isValid()))return a}return new ValidationResult(ValidationStatus.Ok)};return c}(),FileReaderErrorValidator=function(){function c(){}c.prototype.validateFile=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");
c=c.getFileHandle();return objectState.isFileError(c)||objectState.isDomError(c)?new ValidationResult(ValidationStatus.FileIsUnavailable,c):new ValidationResult(ValidationStatus.Ok)};return c}(),FileSizeValidator=function(){function c(c,f){if(0>c)throw Error("Minimal file size cannot be negative");if(0>f)throw Error("Maximal file size cannot be negative");if(c>f)throw Error("Maximal file size must be greater than minimal file size");this.minFileSize=c;this.maxFileSize=f}c.prototype.validateFile=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");
return objectState.isNullOrUndefined(c.size)?new ValidationResult(ValidationStatus.Inconclusive):0===c.size?new ValidationResult(ValidationStatus.FileIsEmpty):c.size<this.minFileSize?new ValidationResult(ValidationStatus.FileSizeIsTooSmall,this.minFileSize):c.size>this.maxFileSize?new ValidationResult(ValidationStatus.FileSizeIsTooBig,this.maxFileSize):new ValidationResult(ValidationStatus.Ok)};return c}(),NameLengthValidator=function(){function c(c){this.maxAllowedFileNameLength=c;contract.require(!objectState.isNullOrUndefined(c),
"'MaxAllowedFileNameLength' is not provided");if(!objectState.isNumber(c)||0>=c)throw Error("'maxAllowedFileNameLength' cannot be 0 or negative");}c.prototype.validateFile=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");return this.validate(c.name)};c.prototype.validateFolder=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");return this.validate(c.name)};c.prototype.validate=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file.name' cannot be null or undefined");
return c.length>this.maxAllowedFileNameLength?new ValidationResult(ValidationStatus.FileNameIsTooLong,this.maxAllowedFileNameLength):0===c.length?new ValidationResult(ValidationStatus.FileNameIsEmpty):new ValidationResult(ValidationStatus.Ok)};return c}(),LocalizedPickerFileResultValidator=function(){function c(c,f){this.validator=c;this.literals=f}c.prototype.validateFile=function(c){c=this.validator.validateFile(c);return c.isValid()?new ValidationResult(c.getStatus()):this.createLocalizedValidationResult(c)};
c.prototype.createLocalizedValidationResult=function(c){var d=c.getStatus();c=this.getErrorMessage(c);return new ValidationResult(d,c)};c.prototype.getErrorMessage=function(c){switch(c.getStatus()){case ValidationStatus.FileExtensionIsNotAllowed:return this.literals.fileExtensionNotAllowed;case ValidationStatus.FileIsUnavailable:return this.literals.unableToOpenFile;case ValidationStatus.FileNameIsIllegal:return this.literals.invalidFirstPartOfFileName.replace("{0}",c.getData());case ValidationStatus.FileSizeIsTooBig:return this.literals.getExcededSizeLimitTranslation(c.getData());
case ValidationStatus.FileSizeIsTooSmall:return this.literals.getBelowSizeLimitTranslation(c.getData());case ValidationStatus.FileIsEmpty:return this.literals.fileIsEmpty;case ValidationStatus.FilenameContainsIllegalCharacters:return this.literals.invalidCharactersXInFileName.replace("{0}",c.getData().join(" "));case ValidationStatus.FileNameIsTooLong:return this.literals.fileNameIsTooLong.replace("{0}",c.getData());case ValidationStatus.FileNameIsEmpty:return this.literals.fileNameIsEmpty;case ValidationStatus.FileTypeNotSupportedByCasper:return this.literals.fileTypeNotSupportedByCasper.replace("{0}",
c.getData());case ValidationStatus.FileCannotBeShared:case ValidationStatus.FileCannotBeCopied:return this.literals.fileNotEnoughPermissions.replace("{0}",c.getData());default:return"-"}};return c}(),PickerFileResultValidatorFactory=function(){function c(){}c.prototype.createFileValidatorWithLocalizedMessages=function(c,f){c=[new FileExtensionValidator(null,c.forbiddenFileExtensions),new FileReaderErrorValidator,new FileSizeValidator(c.minFileSize,c.maxFileSize),new IllegalCharactersValidator(c.illegalCharacters),
new RestrictedFileNameValidator(c.restrictedFileNames),new NameLengthValidator(c.maxFileNameLength)];c=new PickerFileResultValidator(c);return new LocalizedPickerFileResultValidator(c,f)};c.create=function(c,f){c=[new FileExtensionValidator(c.AllowedFileExtensions,c.ForbiddenFileExtensions),new FileReaderErrorValidator,new FileSizeValidator(c.MinFileSize,c.MaxFileSize),new IllegalCharactersValidator(c.IllegalCharacters),new RestrictedFileNameValidator(c.IllegalFileNames),new NameLengthValidator(c.MaxFileNameLength)];
c=new PickerFileResultValidator(c);return new LocalizedPickerFileResultValidator(c,f)};c.createValidatorForLinkedFilesInCloud=function(c,f,b,a,e){c=[new NameLengthValidator(c),new FileInCloudTypeValidator(f,b,a)];c=new PickerFileResultValidator(c);return new LocalizedPickerFileResultValidator(c,e)};c.createValidatorForCollaborationFiles=function(c,f){c=new NameLengthValidator(c);return new LocalizedPickerFileResultValidator(c,f)};c.createValidatorForRenameFile=function(c,f){c=[new IllegalCharactersValidator(c.IllegalCharacters),
new RestrictedFileNameValidator(c.IllegalFileNames),new NameLengthValidator(c.MaxFileNameLength)];c=new PickerFileResultValidator(c);return new LocalizedPickerFileResultValidator(c,f)};return c}(),LegacyGenericUploaderControlFactory=function(){return function(c,d,f,b,a,e){var g=this;this.settings=c;this.literals=d;this.callbacks=f;this.pickers=b;this.fileList=a;this.sender=e;this.create=function(){return new LegacyGenericUploaderControl(g.settings,g.literals,g.pickers,g.sender,g.fileList,g.fileMetadataFactory,
g.callbacks,g.uploadStateHandler,g.fileResultValidator)};contract.require(!objectState.isNullOrUndefined(this.settings),"'settings' is not defined");contract.require(!objectState.isNullOrUndefined(this.literals),"'literals' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");
contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");this.fileMetadataFactory=ExternalUploadersFileMetadataFactory(window.guidFactory,this.literals.files);this.uploadStateHandler=new GenericUploader.FileUploadStateHandler;this.fileResultValidator=(new PickerFileResultValidatorFactory).createFileValidatorWithLocalizedMessages(c,this.literals)}}(),FileInGoogleDriveHandle=function(){function c(c){this.metadata=c}c.prototype.get=function(){return this.metadata};return c}(),
CloudPickerWithButton=function(){function c(c,f){this.picker=c;this.button=f;if(objectState.isNullOrUndefined(this.picker))throw"This picker requires picker to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.button))throw"This picker requires button to be passed. Please provide it.";}c.prototype.show=function(){this.button.show()};c.prototype.hide=function(){this.button.hide()};c.prototype.enable=function(){this.button.removeAttr("disabled")};c.prototype.disable=function(){this.button.attr("disabled",
"disabled")};c.prototype.subscribe=function(c){var d=this,b=new PickerCallback(function(){d.button.unbind("click",d.picker.open);d.button.click(d.picker.open);c.onPickerInitSuccess()},function(a){d.disable();c.onPickerInitFailure(a)},c.onFileSelected,c.onFileSelectionCanceled);this.picker.subscribe(b)};c.prototype.enableMultipleFilesSelecting=function(){this.picker.enableMultipleFilesSelecting()};c.prototype.disableMultipleFilesSelecting=function(){this.picker.disableMultipleFilesSelecting()};c.prototype.open=
function(){"disabled"!==this.button.attr("disabled")&&this.picker.open()};return c}(),LocalFilePickerWrapper=function(){function c(c,f){this.localFilePicker=c;this.button=f;if(objectState.isNullOrUndefined(this.localFilePicker))throw"This picker requires localFilePicker to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.button))throw"This picker requires button to be passed. Please provide it.";this.button.subscribeToFileSelectedEvent(this.localFilePicker.handleFileSelectedInInput)}
c.prototype.show=function(){this.button.show()};c.prototype.hide=function(){this.button.hide()};c.prototype.enable=function(){this.button.enable()};c.prototype.disable=function(){this.button.disable()};c.prototype.subscribe=function(c){this.localFilePicker.subscribe(c)};c.prototype.enableMultipleFilesSelecting=function(){this.localFilePicker.enableMultipleFilesSelecting();this.button.enableMultipleFilesSelecting()};c.prototype.disableMultipleFilesSelecting=function(){this.localFilePicker.disableMultipleFilesSelecting();
this.button.disableMultipleFilesSelecting()};c.prototype.open=function(){this.button.open()};return c}();(function(c){(function(c){(function(c){var b=function(){return function(){}}();c.Callbacks=b})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));var FileRepoError;
(function(c){c[c.AbortedByUser=0]="AbortedByUser";c[c.UnknownError=1]="UnknownError";c[c.DownloadFromWebDavForbidden=2]="DownloadFromWebDavForbidden";c[c.FileSizeTooLarge=3]="FileSizeTooLarge"})(FileRepoError||(FileRepoError={}));(function(c){c.toString=function(d){return c[d]}})(FileRepoError||(FileRepoError={}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){function a(a,b){var c=this;this.errorResponseTranslator=a;this.callbacks=b;this.success=function(a,b,d){if(c.isSuccessReallyAFail(a))if(c.isErrorCodeAborted(a.error))c.callbacks.onAbortSuccess();else a=c.errorResponseTranslator.getErrorMessageFromErrorCode(a.error),c.callbacks.onSendFailure(a);else c.callbacks.onSendSuccess(c.file,a)};this.isSuccessReallyAFail=function(a){return!a||null!=a.error};contract.require(!objectState.isNullOrUndefined(a),
"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined")}a.prototype.isErrorCodeAborted=function(a){return a===FileRepoError.toString(FileRepoError.AbortedByUser)};return a}();a.Success=b})(b.Action||(b.Action={}))})(c.Ajax||(c.Ajax={}))})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){function a(a,b){var c=this;this.errorResponseTranslator=a;this.callbacks=b;this.error=function(a,b,d){if(c.wasUploadAborted(a))c.callbacks.onAbortSuccess();else a=c.getErrorMesage(a,d),c.callbacks.onSendFailure(a)};contract.require(!objectState.isNullOrUndefined(a),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined")}a.prototype.getErrorMesage=
function(a,b){var c=this.errorResponseTranslator.getErrorMessageFromXhr(a);null==c&&(c=this.attemptToGetErrorMessageFromXhr(a));null==c&&(c=b);return c};a.prototype.attemptToGetErrorMessageFromXhr=function(a){if(a.responseText)try{var b=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(b.errorMessage))return b.errorMessage}catch(l){}return null};a.prototype.wasUploadAborted=function(a){if(!a||!a.responseText)return!1;try{var b=JSON.parse(a.responseText)}catch(l){return!1}return b&&b.error?
b.error===FileRepoError.toString(FileRepoError.AbortedByUser):!1};return a}();a.Error=b})(b.Action||(b.Action={}))})(c.Ajax||(c.Ajax={}))})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){var a=function(){function a(a,b,c,d){var e=this;this.isIe9=a;this.fileRepoData=b;this.errorAction=c;this.successAction=d;this.build=function(a){contract.require(!objectState.isNullOrUndefined(a),"argument 'request' is not defined");var b={};e.successAction.file=a.file;e.isIe9?b.url=e.getUrlWithValidationParamsInQueryString(e.fileRepoData.Endpoint,e.getHeadersForFileRepo()):(b.url=e.fileRepoData.Endpoint,b.headers=e.getHeadersForFileRepo());b.type=
"POST";b.dataType="json";b.success=e.successAction.success;b.error=e.errorAction.error;b.data=JSON.stringify({Url:e.getUrlForFile(a.file),Name:a.file.name,Size:a.file.size,UploadStateChannelId:a.uploadStateChannelId,SourceType:a.file.sourceType});return b};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'fileRepoData' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'errorAction' is not defined");
contract.require(!objectState.isNullOrUndefined(d),"argument 'successAction' is not defined")}a.prototype.getUrlWithValidationParamsInQueryString=function(a,b){b=$.param(b);var c=-1===a.indexOf("?");return a+(c?"?":"&")+b};a.prototype.getHeadersForFileRepo=function(){return{"X-Public-Upload-From-External-Source":"1","X-Customer-Validations":this.fileRepoData.ValidationHeader,"X-Authorization-FileRepoToken":"Bearer "+this.fileRepoData.Token}};a.prototype.getUrlForFile=function(a){return(a=a.getFileHandle())&&
a.url?a.url:a};return a}();b.AjaxSettingsBuilder=a})(c.Ajax||(c.Ajax={}))})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
var UploadController=function(){function c(d,f,b,a,e){var g=this;this.pickers=d;this.sender=f;this.validator=b;this.actionQueue=a;this.settings=e;this.subscribe=function(a){g.callbacks=a;g.pickerInitializationDfds.forEach(function(a){return a.fail(g.callbacks.onInitializationFailure)})};this.initializePickers=function(){g.pickerInitializationDfds=g.pickers.map(function(){return $.Deferred()});g.pickers.forEach(function(a,b){g.initPickerCallback(a,b)})};this.initPickerCallback=function(a,b){var c=
new PickerCallback(function(){return g.resolvePickerInitialization(b)},function(a){return g.rejectPickerInitialization(b,a)},g.filesSelected,function(){});a.subscribe(c)};this.resolvePickerInitialization=function(a){g.pickerInitializationDfds[a].resolve()};this.rejectPickerInitialization=function(a,b){g.pickerInitializationDfds[a].reject(g,b)};this.uploadFailed=function(a,b){a.setError(b);a.onRemoveCallback=function(){g.fileRemoved(a)};a.isRemoveAllowed(!0);g.callbacks.onActionError(a.Metadata,a.errorMessage())};
this.uploadSucceeded=function(a,b,c){a.markAsUploaded();a.onRemoveCallback=function(){g.fileRemoved(a)};a.onRenameCallback=function(){g.renameFile(a)};a.isRemoveAllowed(!0);a.Metadata=UploadMetadata.create(b,c);a.mimeType(c.mimeType);g.updateShowTemplateOption(a);g.callbacks.onActionSuccess(a.Metadata);a.markAsCompleted()};this.fileRemoved=function(a){g.callbacks.onFileRemoved(a.Metadata)};this.renameFile=function(a){g.callbacks.onFileRenamed(a.Metadata)};this.uploadProgressed=function(a,b){a.isUploaded()||
(a.isRemoveAllowed(b<c.progressThresholdAfterWhichRemoveActionIsDisallowed),a.setProgress(b))};this.abortSucceeded=function(a){g.callbacks.onActionAborted(a.Metadata)};this.abortFailed=function(a){a.isUploaded()?safeConsoleLogger.warn("Abort request failed because upload already finished"):a.isRemoveAllowed(!1)};this.filesSelected=function(a){a.purpose!==PickerPurpose.LinkToCloud&&(a=g.prepareFileItemsWithResult(a),g.callbacks.onFilesSelected(a.map(function(a){return a.fileItem})),a.forEach(function(a){return g.prepareFileForSending(a.fileItem,
a.result)}))};this.prepareFileItemsWithResult=function(a){return a.files.map(function(a){return{result:a,fileItem:g.prepareFileItem(a)}})};this.prepareFileItem=function(a){a=CCL.FileList.Model.FileItem.buildItemForUpload(a.name,UploadMetadata.create(a));a.isCompleted()&&g.updateShowTemplateOption(a);return a};this.prepareFileForSending=function(a,b){if(g.handleValidation(a,b)){var c=new GenericUploader.RequestToSender(b),d=function(){g.send(a,c,b)};a.onRemoveCallback=function(){g.actionQueue.remove(d);
g.fileRemoved(a)};a.onSetTemplateCallback=function(){g.callbacks.onFileSetTemplate(a.Metadata)};g.actionQueue.register(d)}};this.handleValidation=function(a,b){b=g.validator.validateFile(b);if(b.isValid())return!0;g.uploadFailed(a,b.getData());return!1};this.send=function(a,b,c){var d=g.sender.send(b,function(b){return g.uploadProgressed(a,b)},function(b,c){g.actionQueue.signalDone();g.uploadSucceeded(a,b,c)},function(b){g.actionQueue.signalDone();g.uploadFailed(a,b)});a.onRemoveCallback=function(){g.actionQueue.signalDone();
d.abort(function(){return g.abortSucceeded(a)},function(){return g.abortFailed(a)})}};contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");contract.require(!objectState.isNullOrUndefined(this.validator),"'fileResultValidator' is not defined");contract.require(!objectState.isNullOrUndefined(this.actionQueue),"'actionQueue' is not defined");this.initializePickers()}c.prototype.updateShowTemplateOption=
function(c){this.settings.FileListControlSettings.MimeTypesToTemplateFromUpload.some(function(d){return d===c.mimeType()})&&(c.showTemplateOptionsInFilelist(this.settings.FileListControlSettings.ShowTemplateOptions),c.showTemplateOptionsForItem(this.settings.FileListControlSettings.ShowTemplateOptions))};c.progressThresholdAfterWhichRemoveActionIsDisallowed=99;return c}();
(function(c){(function(c){(function(c){var b=function(){function a(a,b,c,d){var e=this;this.uploadStateService=a;this.jQuery=b;this.callbacks=c;this.ajaxSettingsBuilder=d;this.send=function(a,b,c,d){e.callbacks.onSendSuccess=c;e.callbacks.onSendFailure=d;a=e.prepareDelayedObj(a);a.data.onProgress=b;a.data.onAbort=function(){return e.callbacks.onAbortSuccess()};a.wait(e.openSignalRCommunicationChannel);a.wait(e.callFileRepo);return{abort:e.abort}};this.callFileRepo=function(a){a=e.ajaxSettingsBuilder.build(a.data.request);
e.jQuery.ajax(a)};this.prepareDelayedObj=function(a){a=DelayRequest({request:a});a.signal();return a};this.openSignalRCommunicationChannel=function(a){e.uploadStateService.openChannel({onChannelOpened:function(b){a.data.request.uploadStateChannelId=b.channelId;a.signal()},onSuccess:null,onFail:null,onProgress:a.data.onProgress,onAbort:null,onChannelOpenFailure:function(){safeConsoleLogger.log("Opening channel failed, probably because SignalR is unavailable. Upload progress will not be tracked.");
a.data.onProgress(UploadController.progressThresholdAfterWhichRemoveActionIsDisallowed);a.signal()}})};this.abort=function(a,b){e.callbacks.onAbortSuccess=a;e.uploadStateService.abortUpload(b)};contract.require(!objectState.isNullOrUndefined(a),"argument 'uploadStateService' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'jQuery' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(d),
"argument 'ajaxSettingsBuilder' is not defined")}a.prototype.getOptions=function(){return null};return a}();c.Sender=b})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){var b=c.Ajax.Action.Error,a=c.Ajax.Action.Success,d=c.Ajax.AjaxSettingsBuilder,f=function(){return function(e,f,g){var h=this;this.errorResponseTranslator=f;this.settings=g;this.fileRepoData={};this.build=function(){var e=new c.Callbacks,f=new b(h.errorResponseTranslator,e),g=new a(h.errorResponseTranslator,e);f=new d(h.isIe9,h.fileRepoData,f,g);var k=new UploadStateService;window.asyncDependenciesResolver.subscribeToDependencyLoadEvent(window.asyncDependencies.signalRHubScript,
function(){k.signalrHubScriptLoaded({signalR:$.signalR,endpoint:h.uploadStateServiceEndpoint})});return new c.Sender(k,$,e,f)};contract.require(!objectState.isNullOrUndefined(e),"argument 'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(g.uploadStateServiceEndpoint),"argument 'settings.uploadStateServiceEndpoint' is not defined");
contract.require(!objectState.isNullOrUndefined(g.fileRepoData),"argument 'settings.fileRepoData' is not defined");this.uploadStateServiceEndpoint=g.uploadStateServiceEndpoint;this.fileRepoData=g.fileRepoData;this.isIe9=e.isInternetExplorer9()}}();c.Factory=f})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){var d=function(){function b(a,b){this.localSenderFactory=a;this.cloudSenderFactory=b;contract.require(!objectState.isNullOrUndefined(a),"FileRepoSender requires localSenderFactory to be provided.");contract.require(!objectState.isNullOrUndefined(b),"FileRepoSender requires cloudSenderFactory to be provided.")}b.prototype.send=function(a,b,c,d,f){return this.buildSenderForSourceType(a.file.sourceType).send(a,b,c,d,f)};b.prototype.getOptions=function(){return null};b.prototype.buildSenderForSourceType=
function(a){if(a===SourceType.Local)return this.localSenderFactory.build();if(SourceType.isCloud(a))return this.cloudSenderFactory.build();throw"Unsupported SourceType";};return b}();c.FileRepoSender=d})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
var GoogleTranslations=function(){return function(c,d){this.browserNotSupported=c;this.googleApiNotAvailable=d}}(),SelfResettingFileInput=function(){function c(c){this.input=c}c.prototype.show=function(){this.input.show()};c.prototype.hide=function(){this.input.hide()};c.prototype.enable=function(){this.input.removeAttr("disabled")};c.prototype.disable=function(){this.input.attr("disabled","disabled")};c.prototype.open=function(){this.input.click()};c.prototype.enableMultipleFilesSelecting=function(){this.input.attr("multiple",
"multiple")};c.prototype.disableMultipleFilesSelecting=function(){this.input.removeAttr("multiple")};c.prototype.subscribeToFileSelectedEvent=function(c){var d=this;this.input.on("change",function(){var b=d.input;d.input=d.cloneInputAndReplaceInDom(b);d.prepareInputForCallback(b);c(b,b[0])})};c.prototype.getFileInputJQueryElement=function(){return this.input};c.prototype.getFileInputHtmlElement=function(){return this.input[0]};c.prototype.cloneInputAndReplaceInDom=function(c){var d=this.cloneElementPreservingEventHandlers(c);
this.resetElementUsingForm(d);this.addElementToDomAfterOtherElement(d,c);this.removeElementFromDomKeepingInformationAboutFile(c);this.removeEventHandlersFromElement(c);return d};c.prototype.cloneElementPreservingEventHandlers=function(c){return c.clone(!0)};c.prototype.resetElementUsingForm=function(c){$("<form></form>").append(c)[0].reset()};c.prototype.removeEventHandlersFromElement=function(c){c.off()};c.prototype.addElementToDomAfterOtherElement=function(c,f){f.after(c)};c.prototype.removeElementFromDomKeepingInformationAboutFile=
function(c){c.detach()};c.prototype.prepareInputForCallback=function(c){c.removeAttr("disabled")};return c}(),GapiCallback=function(){return function(c,d,f,b){this.onFileSelected=c;this.onFileSelectionCanceled=d;this.onFileSelectionFailed=f;this.onFileProcessing=b}}();
(function(c){(function(d){var f=function(){return function(b,a,d,f){var e=this;this.pickerComponents=b;this.pickers=a;this.onCloseClick=d;this.onPickerOpen=f;this.linkToTabName="linkToTab";this.uploadFileTabName="uploadFileTab";this.cloudServiceUnavailableTranslation=ko.observable("");this.isNarrowScreen=ko.observable(c.UploadControlUtils.isMobile());this.namesOfPickersFailedToInit="";this.handlePickersInitialization=function(){e.isWarningVisible=ko.observable(!1);for(var a=0,b=e.pickers;a<b.length;a++)b[a].subscribe(new PickerCallback(function(){},
e.handlePickerInitFailure,function(){},function(){}))};this.handlePickerInitFailure=function(a){e.concatFailedPickerNames(a.pickerName);e.cloudServiceUnavailableTranslation(UploadControlTranslation.cloudServiceUnavailable.replace("{0}",e.namesOfPickersFailedToInit));e.isWarningVisible(!0)};this.isUploadColumnVisible=function(){return 0<e.uploadPickerComponents.length};this.dialogHasMoreThenOneColumn=function(){return e.isUploadColumnVisible()&&e.isLinkColumnVisible()};this.isSeparatorVisible=function(){return e.dialogHasMoreThenOneColumn()};
this.isLinkColumnVisible=function(){return 0<e.linkToCloudPickerComponents.length};this.changeTabForMobile=function(){e.isNarrowScreen.peek()&&e.selectedTabName($(event.currentTarget).find("a").prop("hash").substr(1));event.preventDefault()};this.subscribeToBlurEventCapturePhase=function(){document.getElementById("ccl-uc-file-dialog-container").addEventListener("blur",e.hideDialogContainer,!0)};this.hideDialogContainer=function(){setTimeout(function(){if(e.isNotPartOfDialogContainer($(document.activeElement)))e.onCloseClick()},
0)};this.isNotPartOfDialogContainer=function(a){return 0===a.closest("#ccl-uc-file-dialog-container").length};this.concatFailedPickerNames=function(a){e.namesOfPickersFailedToInit=1>e.namesOfPickersFailedToInit.length?e.namesOfPickersFailedToInit+a:e.namesOfPickersFailedToInit+(", "+a)};this.handlePickersInitialization();this.subscribeToBlurEventCapturePhase();this.uploadPickerComponents=b.filter(function(a){return a.purpose===PickerPurpose.Upload||a.purpose===PickerPurpose.Combined});this.linkToCloudPickerComponents=
b.filter(function(a){return a.purpose===PickerPurpose.LinkToCloud});this.selectedTabName=ko.observable(this.isUploadColumnVisible()?this.uploadFileTabName:this.isLinkColumnVisible()?this.linkToTabName:"");this.isUploadColumnSelected=ko.pureComputed(function(){return!e.isNarrowScreen()||e.selectedTabName()===e.uploadFileTabName});this.isLinkColumnSelected=ko.pureComputed(function(){return!e.isNarrowScreen()||e.selectedTabName()===e.linkToTabName});$(window).on("resize",function(){var a=c.UploadControlUtils.isMobile();
e.isNarrowScreen(a);$("#ccl-uc-file-dialog-container").is(":visible")&&c.UploadControlUtils.toggleTopFrameAndMobileOverlay(!a)})}}();d.DialogViewModel=f})(c.Dialog||(c.Dialog={}))})(Components||(Components={}));
(function(c){(function(d){var f=function(){return function(b,a){var e=this;this.pickerComponents=b;this.pickers=a;this.name=c.ComponentName.dialog;this.viewModel=function(a){return new d.DialogViewModel(e.pickerComponents,e.pickers,a.onCloseClick,a.onPickerOpen)};this.template='\n<div id="ccl-uc-file-dialog-container" tabindex="1">\n    <div id="ccl-uc-triangle-row" data-bind="visible: !isNarrowScreen()">\n        <div id="ccl-uc-triangle-container">\n            <div id="ccl-uc-triangle"></div>\n        </div>\n    </div>\n        \n    <div id="ccl-uc-file-dialog">\n        <button data-bind="click: onCloseClick, visible: !isNarrowScreen(), attr: { \'aria-label\': UploadControlTranslation.close }" id="ccl-uc-close-button" class="ccl-uc-close-icon"></button>\n        <div class="ccl-uc-source-title-container" data-bind="visible: isNarrowScreen">\n            <div role="tab" class="ccl-uc-source-column-title" data-bind="visible: isUploadColumnVisible(), click: changeTabForMobile">\n                <a href="#uploadFileTab" data-bind="text: UploadControlTranslation.uploadFileFromMobile, css: { \'ccl-uc-tab-link-active\': (selectedTabName() === uploadFileTabName && dialogHasMoreThenOneColumn() ) }"></a>\n            </div>\n            <div role="tab" class="ccl-uc-source-column-title" data-bind="visible: isLinkColumnVisible(), click: changeTabForMobile">\n                <a href="#linkToTab" data-bind="text: UploadControlTranslation.linkToMobile, css: { \'ccl-uc-tab-link-active\': (selectedTabName() === linkToTabName && dialogHasMoreThenOneColumn() ) }"></a>\n            </div>\n        </div>\n        <div id="ccl-uc-source">\n            <div class="ccl-uc-source-utmost-column" data-bind="visible: (isUploadColumnVisible() && isUploadColumnSelected)" role="tabpanel">\n                <div class="ccl-uc-source-column-title" data-bind="visible: !isNarrowScreen(), text: UploadControlTranslation.uploadFileFrom"></div>\n                <div data-bind="foreach: uploadPickerComponents">\n                    <div class="ccl-uc-source-column-line" data-bind="component: {name: componentName, params: {onPickerOpen: $parent.onPickerOpen}}"></div>\n                </div>\n            </div>\n        \n            <div id="ccl-uc-source-middle-column" data-bind="visible: (isSeparatorVisible() && !isNarrowScreen())">\n                <div id="ccl-uc-source-middle-column-line"></div>\n                <div id="ccl-uc-source-middle-column-title" data-bind="text: UploadControlTranslation.or"></div>\n            </div>\n        \n            <div class="ccl-uc-source-utmost-column" data-bind="visible: (isLinkColumnVisible() && isLinkColumnSelected)" role="tabpanel">\n                <div class="ccl-uc-source-column-title" data-bind="visible: !isNarrowScreen(), text: UploadControlTranslation.linkTo"></div>\n                <div data-bind="foreach: linkToCloudPickerComponents">\n                    <div class="ccl-uc-source-column-line" data-bind="component: {name: componentName, params: {onPickerOpen: $parent.onPickerOpen}}"></div>\n                </div>\n            </div>\n        </div>\n        <div class="ccl-uc-warning-container" data-bind="visible: isWarningVisible">\n            <div class="ccl-uc-warning">\n                <div class="ccl-uc-warning-icon">\n                    <span aria-hidden="true" class="ili ili-exclamation-circle"></span>\n                </div>\n                <div class="ccl-uc-warning-text">\n                    <span class="ccl-uc-warning-text-header" data-bind="text: cloudServiceUnavailableTranslation"></span>\n                    <span data-bind="text: UploadControlTranslation.tryAgainOrContactAdministrator"></span>\n                </div>\n            </div>\n        </div>\n        <div data-bind="visible: isNarrowScreen" class="ccl-uc-close-button-mobile-container">\n            <button data-bind="text: UploadControlTranslation.cancel, click: onCloseClick" class="ccl-button ccl-button-color-grey"></button>\n        </div>\n    </div>\n</div>\n'}}();d.DialogComponent=
f})(c.Dialog||(c.Dialog={}))})(Components||(Components={}));
(function(c){var d=function(){return function(d,b,a,e){var f=this;void 0===a&&(a=CCL.FileList.Components.NestedFileListComponent.defaultNestedFileListHtmlTag);void 0===e&&(e=!1);this.uploadAreaState=d;this.pickers=b;this.fileListHtmlTagName=a;this.enableCompactView=e;this.name=c.ComponentName.uploadArea;this.viewModel={createViewModel:function(a,b){return new c.UploadAreaViewModel(f.uploadAreaState,f.enableCompactView,f.pickers)}};this.template='\n<div data-bind="visible: isUploadAreaVisible, css: getUploadAreaCss()" class="ccl-uc-upload-area">\n    <dropzone-picker data-bind="visible: !enableCompactView(), click: showDialog" class="ccl-uc-upload-area-picker"></dropzone-picker>\n    <button data-bind="visible: enableCompactView(), click: showDialog, text: linkTitle" class="ccl-uc-upload-area-picker"></button>\n    <media-recorder-picker data-bind="visible: enableCompactView()"></media-recorder-picker>\n    <uc-dialog data-bind="visible: isDialogVisible" params="onCloseClick: hideDialog, onPickerOpen: hideDialog"></uc-dialog>\n</div>\n<'+
this.fileListHtmlTagName+">\n    <"+CCL.FileList.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag+' params="file: $data.file, settings: $data.settings"></'+CCL.FileList.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag+">\n</"+this.fileListHtmlTagName+">\n"}}();c.UploadAreaComponent=d})(Components||(Components={}));
var GapiInitializerSettings=function(){return function(c,d){this.clientId=c;this.scope=d}}(),GapiFileResult=function(){function c(c,f,b,a,e,g,h,k,l){var d=this;void 0===l&&(l=PickerPurpose.Upload);this.url=c;this.name=f;this.size=b;this.isGoogleSpreadsheet=a;this.id=e;this.jq=g;this.authorizationHandler=h;this.googleDriveProxy=k;this.purpose=l;this.updateFileResultUsingGetCallToMetadataService=function(){d.fileMetadataObtainedDfd=$.Deferred();var a={url:d.getMetadataServiceUrl(),type:"GET",data:"",
headers:d.authorizationHandler.getAuthorizationHeader(),success:d.onMetadataGetCallSuccess,error:d.onMetadataGetCallError};d.jq.ajax(a);return d.fileMetadataObtainedDfd.promise()};this.onMetadataGetCallError=function(){d.fileMetadataObtainedDfd.reject()};this.onMetadataGetCallSuccess=function(a){var b=-1<GapiDocType.googleApps.indexOf(a.mimeType);d.permissions=a.permissions;d.capabilities=a.capabilities;d.url=d.purpose===PickerPurpose.LinkToCloud?d.getFileViewUrl(b,a):d.getFileDownloadUrl(a);d.mimeType=
a.mimeType;d.purpose===PickerPurpose.Upload&&b?d.updateFileSizeUsingHeadCallToMetadataService():d.fileMetadataObtainedDfd.resolve()};this.updateFileSizeUsingHeadCallToMetadataService=function(){var a={url:d.getMetadataServiceUrl(),type:"HEAD",data:"",dataType:"text",success:d.onMetadataHeadCallSuccess,error:d.onMetadataHeadCallError};d.jq.ajax(a)};this.onMetadataHeadCallSuccess=function(a,b,c){d.size=parseInt(c.getResponseHeader("Content-Length"));d.fileMetadataObtainedDfd.resolve()};this.onMetadataHeadCallError=
function(a,b,c){500===a.status&&(d.size=0);d.fileMetadataObtainedDfd.resolve()};this.getMetadataServiceUrl=function(){return d.isGoogleSpreadsheet?d.googleDriveProxy+encodeURIComponent(d.url):d.url};contract.require(!objectState.isNullOrWhitespace(k),"'googleDriveProxy' is null or whitespace")}c.prototype.getFileViewUrl=function(c,f){return c?f.alternateLink:f.embedLink};c.prototype.getFileDownloadUrl=function(c){if(c.downloadUrl)return this.authorizationHandler.appendOAuthTokenToUrl(c.downloadUrl).value;
if(c.exportLinks&&c.exportLinks[Object.keys(c.exportLinks)[0]]){var d=GapiDocType.getDocumentType(c.exportLinks);c=this.authorizationHandler.appendOAuthTokenToUrl(c.exportLinks[d]);this.updateExtensionBasedOnExportFormatParam(c);return c.value}};c.prototype.updateExtensionBasedOnExportFormatParam=function(c){if(c=c.getParamValue("exportFormat"))this.name+="."+c};return c}(),GapiDownloadUrl=function(){function c(){this.url="https://www.googleapis.com/drive/v2/files/{fileId}?supportsTeamDrives=true&fields=mimeType,downloadUrl,exportLinks,alternateLink,embedLink,permissions,capabilities"}
c.prototype.getDownloadUrl=function(c){contract.require(!objectState.isNullOrWhitespace(c),"'fileId' is null or whitespace");return this.url.replace("{fileId}",c)};return c}(),GapiActions=function(){function c(d,f,b,a,e,g){var h=this;void 0===g&&(g=PickerPurpose.Upload);this.pickerApi=d;this.authorizationHandler=f;this.proxy=b;this.getCurrentCallbacks=a;this.downloadUrl=e;this.purpose=g;this.onPickerAction=function(a){h.callbacks=h.getCurrentCallbacks();switch(a.action){case h.pickerApi.Action.PICKED:h.handleFilePickedAction(a);
break;case h.pickerApi.Action.CANCEL:if(h.callbacks.onFileSelectionCanceled)h.callbacks.onFileSelectionCanceled()}};this.handleFilePickedAction=function(a){if(h.callbacks.onFileProcessing)h.callbacks.onFileProcessing();a=a[h.pickerApi.Response.DOCUMENTS].map(function(a){return new GapiFileResult(h.downloadUrl.getDownloadUrl(a[h.pickerApi.Document.ID]),a[h.pickerApi.Document.NAME],a.sizeBytes,a.mimeType===GapiDocType.googleSpreadsheet,a[h.pickerApi.Document.ID],$,h.authorizationHandler,h.proxy,h.purpose)});
a.length>c.maximumNumberOfConcurrentRequestsToGoogleApi?h.processFilesSequentially(a):h.processFilesInParallel(a)};this.processFilesSequentially=function(a){a.reduce(function(a,b){return a.pipe(b.updateFileResultUsingGetCallToMetadataService)},$.Deferred().resolve().promise()).done(function(){h.raiseFileSelectedCallbackWithPickerResult(a)}).fail(h.raiseFailureCallback)};this.raiseFailureCallback=function(){if(h.callbacks.onFileSelectionFailed)h.callbacks.onFileSelectionFailed()};this.processFilesInParallel=
function(a){var b=[];a.forEach(function(a){a=a.updateFileResultUsingGetCallToMetadataService();b.push(a)});$.when.apply($,b).done(function(){h.raiseFileSelectedCallbackWithPickerResult(a)}).fail(h.raiseFailureCallback)};this.raiseFileSelectedCallbackWithPickerResult=function(a){a=a.map(h.mapGapiFileToPickerFile);a=new PickerResult(a);h.callbacks.onFileSelected(a)};this.mapGapiFileToPickerFile=function(a){var b=new FileInGoogleDriveHandle({url:a.url,id:a.id,permissions:a.permissions,capabilities:a.capabilities});
return new PickerFileResult(b,a.name,a.size,SourceType.Google,null,a.mimeType)}}c.maximumNumberOfConcurrentRequestsToGoogleApi=7;return c}(),GapiAuthorizationHandler=function(){return function(c){var d=this;this.authApi=c;this.getOAuthToken=function(){if(!d.authApi.currentUser.get().isSignedIn())throw Error("You need to Sign In before getting Google Drive's oAuth Token");return d.authApi.currentUser.get().getAuthResponse().access_token};this.getAuthorizationHeader=function(){return{Authorization:"Bearer "+
d.getOAuthToken()}};this.appendOAuthTokenToUrl=function(c){c=new Url(c);c.appendOrUpdateParam("access_token",d.getOAuthToken());return c};this.authorize=function(c,b){d.authApi.currentUser.get().isSignedIn()?c():d.authApi.signIn().then(function(){c()},function(){b()})}}}(),GapiInitializer=function(){return function(c){var d=this;this.settings=c;this.isAuthApiLoaded=this.isPickerApiLoaded=!1;this.gapi=window.gapi;this.init=function(c,b){contract.require(!objectState.isNullOrUndefined(c),"'onInitSuccess' is not defined");
contract.require(!objectState.isNullOrUndefined(b),"'onInitFailure' is not defined");d.onInitSuccess=c;d.onInitFailure=b;if(objectState.isNullOrUndefined(d.gapi)){if(safeConsoleLogger.error("Loading of Gapi failed. Most probably https://apis.google.com/js/api.js was blocked by firewall, proxy or adblock."),d.onInitFailure)d.onInitFailure()}else d.loadAuthApi(),d.loadPickerApi()};this.loadAuthApi=function(){try{d.gapi.load("auth2",{callback:d.initAuthApi})}catch(f){if(safeConsoleLogger.error("Loading of Gapi Auth failed."),
d.onInitFailure)d.onInitFailure()}};this.initAuthApi=function(){d.gapi.auth2.init({client_id:d.settings.clientId,scope:d.settings.scope}).then(function(){d.onAuthApiLoaded()},function(c){safeConsoleLogger.error(c);d.onInitFailure()})};this.loadPickerApi=function(){try{d.gapi.load("picker",{callback:d.onPickerApiLoaded})}catch(f){if(safeConsoleLogger.error("Loading of Gapi Picker failed."),d.onInitFailure)d.onInitFailure()}};this.onAuthApiLoaded=function(){d.isAuthApiLoaded=!0;d.attempToRaiseSuccess()};
this.onPickerApiLoaded=function(){d.isPickerApiLoaded=!0;d.attempToRaiseSuccess()};this.attempToRaiseSuccess=function(){if(d.isPickerApiLoaded&&d.isAuthApiLoaded)d.onInitSuccess(d.gapi.auth2.getAuthInstance(),google.picker)}}}(),GoogleSettings=function(){return function(c,d,f,b,a,e,g){this.clientId=c;this.scope=d;this.developerKey=f;this.allowMultipleFiles=b;this.originUrl=a;this.proxy=e;this.language=g}}(),GapiPickerUiFactory=function(){return function(c,d,f,b,a){var e=this;this.onPickerAction=c;
this.authHandler=d;this.developerKey=f;this.originUrl=b;this.language=a;this.build=function(){e.builder=new google.picker.PickerBuilder;e.triggerBuild().setVisible(!0)};this.triggerBuild=function(){e.builder.setOAuthToken(e.authHandler.getOAuthToken()).setDeveloperKey(e.developerKey).setCallback(e.onPickerAction).setLocale(e.language);e.prepareViews();e.setOriginUrlIfProvided();e.setApplicationIdIfProvided();e.handleMultipleFilesMode();e.enableTeamDrives();return e.builder.build()};this.prepareViews=
function(){var a=null;e.displayOnlyGoogleApps?a=GapiDocType.googleApps:e.areAllowedMimeTypesProvided()&&(a=e.allowedMimeTypes);e.builder.addView(e.prepareMainView(a));e.builder.addView(e.prepareTeamDriveView(a));e.builder.addView(e.prepareSharedView(a))};this.prepareMainView=function(a){void 0===a&&(a=null);a=e.prepareView(a);a.setParent("root");return a};this.prepareTeamDriveView=function(a){void 0===a&&(a=null);a=e.prepareView(a);a.setEnableTeamDrives(!0);return a};this.prepareSharedView=function(a){void 0===
a&&(a=null);a=e.prepareView(a);a.setOwnedByMe(!1);return a};this.prepareView=function(a){void 0===a&&(a=null);var b=new google.picker.DocsView(google.picker.ViewId.DOCS);b.setIncludeFolders(!0);a&&b.setMimeTypes(""+a.join(","));return b};this.areAllowedMimeTypesProvided=function(){return Array.isArray(e.allowedMimeTypes)&&0<e.allowedMimeTypes.length};this.handleMultipleFilesMode=function(){e.isMultipleFilesModeEnabled?e.builder.enableFeature(google.picker.Feature.MULTISELECT_ENABLED):e.builder.disableFeature(google.picker.Feature.MULTISELECT_ENABLED)};
this.enableTeamDrives=function(){e.builder.enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES)};this.setOriginUrlIfProvided=function(){objectState.isNullOrUndefined(e.originUrl)||e.builder.setOrigin(e.originUrl)};this.setApplicationIdIfProvided=function(){objectState.isNullOrUndefined(e.applicationId)||e.builder.setAppId(e.applicationId)}}}(),GooglePicker=function(){function c(c,f,b,a){var d=this;this.settings=c;this.gapiInitializer=f;this.browserSniffer=b;this.translations=a;this.pickerReadyDfd=
$.Deferred();this.subscribe=function(a){d.pickerReadyDfd.done(a.onPickerInitSuccess);d.pickerReadyDfd.fail(a.onPickerInitFailure);d.callbacks=a};this.open=function(){d.authHandler.authorize(d.displayWindowWithFiles,d.terminateAuthorization)};this.enableMultipleFilesSelecting=function(){d.settings.allowMultipleFiles&&(d.uiFactory.isMultipleFilesModeEnabled=!0)};this.disableMultipleFilesSelecting=function(){d.uiFactory.isMultipleFilesModeEnabled=!1};this.getCurrentCallbacks=function(){return new GapiCallback(d.onFileSelected,
d.callbacks.onFileSelectionCanceled)};this.onFileSelected=function(a){a=a.files.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.getFileHandle().url,a.name,a.size,a.sourceType)});a=new PickerResult(a);d.callbacks.onFileSelected(a)};this.onGapiInitSuccess=function(a,b){d.enabled=!0;d.authHandler=new GapiAuthorizationHandler(a);a=new GapiDownloadUrl;b=new GapiActions(b,d.authHandler,d.settings.proxy,d.getCurrentCallbacks,a);d.uiFactory=new GapiPickerUiFactory(b.onPickerAction,
d.authHandler,d.settings.developerKey,d.settings.originUrl,d.settings.language);d.pickerReadyDfd.resolve()};this.onGapiInitFailure=function(){d.enabled=!1;d.pickerReadyDfd.reject(new PickerInitFailureEventArgs(PickerInitFailureReason.ExternalServiceNotAvailable,d.translations.googleApiNotAvailable,UploadControlTranslation.googleDrive))};this.displayWindowWithFiles=function(){d.uiFactory.build()};this.terminateAuthorization=function(){throw Error("Authorization failed");};contract.require(!objectState.isNullOrUndefined(c),
"'settings' are not defined");contract.require(!objectState.isNullOrUndefined(f),"'gapiInitializer' is not defined");contract.require(!objectState.isNullOrUndefined(b),"'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(a),"'translations' are not defined");this.visible=!0;this.enabled=!1;this.multipleFilesSelectingEnabled=c.allowMultipleFiles;b.isInternetExplorer9()?this.pickerReadyDfd.reject(new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,
a.browserNotSupported,UploadControlTranslation.googleDrive)):this.initialize()}c.prototype.initialize=function(){this.gapiInitializer.init(this.onGapiInitSuccess,this.onGapiInitFailure)};return c}();
function AjaxUploaderCallbacks(c){var d=FunctionFinder();return{controlInitialized:d.getFunctionByName(c?c.OnControlInitialization:void 0),fileSelected:d.getFunctionByName(c?c.OnFileSelected:void 0),beforeFileUpload:d.getFunctionByName(c?c.OnBeforeFileUpload:void 0),fileUploadSuccess:d.getFunctionByName(c?c.OnFileUploadSuccess:void 0),fileUploadError:d.getFunctionByName(c?c.OnFileUploadError:void 0),beforeFileRemoved:d.getFunctionByName(c?c.OnBeforeFileRemoved:void 0),fileRemoveSuccess:d.getFunctionByName(c?
c.OnFileRemoveSuccess:void 0),fileRemoveError:d.getFunctionByName(c?c.OnFileRemoveError:void 0),fileRemoved:d.getFunctionByName(c?c.OnFileRemoved:void 0),beforeFileUploadAborted:d.getFunctionByName(c?c.OnBeforeFileUploadAborted:void 0),fileUploadAborted:d.getFunctionByName(c?c.OnFileUploadAborted:void 0),fileUploadProgress:d.getFunctionByName(c?c.OnFileUploadProgress:void 0)}}
function AjaxUploaderControl(c,d,f,b,a,e,g,h){contract.require(!objectState.isNullOrUndefined(c),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(c.fileInput),"controls.fileInput is not defined");contract.require(!objectState.isNullOrUndefined(c.fileList),"controls.fileList is not defined");contract.require(!objectState.isNullOrUndefined(c.dropZone),"controls.dropZone is not defined");contract.require(!objectState.isNullOrUndefined(c.folderInput),"controls.folderInput is not defined");
contract.require(!objectState.isNullOrUndefined(c.folderInputLink),"controls.folderInputLink is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'validationService' is not defined");contract.require(objectState.isFunction(f.validateFile),"'validationService' has invalid interface");contract.require(!objectState.isNullOrUndefined(b),"argument 'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(a),
"argument 'fileUploadService' is not defined");contract.require(objectState.isFunction(a.subscribe),"'fileUploadService' has invalid interface");contract.require(!objectState.isNullOrUndefined(e),"argument 'folderManifestFactory' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'literals' is not defined");if(void 0===h||null===h)h={};var k={currentFileId:null,disableDeletePostbackThreshold:.99,fileUploader:null,initialize:function(a){k.initializeElementsToSupportSingleOrMultipleFiles();
k.initializeDropZone();void 0!==h.controlInitialized&&h.controlInitialized(a);k.initializeFileUploader()},initializeElementsToSupportSingleOrMultipleFiles:function(){k.changeFileInputToAcceptSingleFile();k.changeDropZoneToAcceptSingleFile();d.allowMultipleFiles&&k.initializeFolderInput()},initializeDropZone:function(){d.allowDragAndDrop?k.enableDropZone():k.disableDropZone()},initializeFolderInput:function(){d.allowFoldersUpload?(k.initializeFolderUploadElements(),k.enableFolderInput()):k.disableFolderInput()},
enableFolderInput:function(){browserSniffer.isDirectoryUploadSupported()&&(c.folderInputLink.removeClass("h-hidden"),c.folderInput.show(),c.folderInputLink.show())},disableFolderInput:function(){c.folderInput.hide();c.folderInputLink.hide()},changeFileInputToAcceptSingleFile:function(){c.fileInput.removeAttr("multiple")},changeFileInputToAcceptMultipleFiles:function(){c.fileInput.attr("multiple",!0)},enableDropZone:function(){browserSniffer.isDragAndDropSupported()&&(c.dropZone.removeClass("h-hidden"),
c.dropZone.show())},disableDropZone:function(){c.dropZone.hide()},changeDropZoneToAcceptMultipleFiles:function(){$(c.fileInput.selector).unbind("fileuploaddrop",k.takeOnlyFirstFileFunction)},changeDropZoneToAcceptSingleFile:function(){$(c.fileInput.selector).bind("fileuploaddrop",k.takeOnlyFirstFileFunction)},isMultipleFileSelect:function(a){return a.originalFiles&&1<a.originalFiles.length},isSingleFileInFolder:function(a){return a.originalFiles&&1===a.originalFiles.length&&""!==auCommon.getRelativePath(a.originalFiles[0],
"")?!0:!1},getArrayFromEventFileList:function(a){var b=[],c;for(c=0;c<a.length;c+=1)b.push(a[c]);return b},handleFolderSelect:function(a){var b=k.getArrayFromEventFileList(a.target.files);k.fileUploader.upload(b);a.target.value=null},initializeFolderUploadElements:function(){c.folderInputLink.click(function(){c.folderInput.click()});c.folderInput.on("change",k.handleFolderSelect)},initializeFileUploader:function(){k.fileUploader=a.subscribe({fileInput:c.fileInput,dropZone:c.dropZone},{onDone:k.onDone,
onFail:k.onFail,onProcessAlways:k.onProcessAlways,onProgress:k.onProgress,onAdd:k.onAdd,onSend:k.onSend,onFileUploadAborted:k.onUploadAborted})},getFolderName:function(a){var b,c=null;for(b=0;b<a.length;b+=1){var d=auCommon.getRelativePath(a[b],"");var e=d.indexOf("/");if(-1===e)return null;d=d.substring(0,e);if(null===c)c=d;else if(c!==d)return null}return c},getFileNameForMultipleFiles:function(a){a=k.getFolderName(a);return null!==a?a:g.files},getTotalSize:function(a){var b=0;$.each(a,function(a,
c){b+=c.size||0});return b},getFileInfo:function(a,b){a=b?{name:k.getFileNameForMultipleFiles(a),size:k.getTotalSize(a)}:a[0];a.fileId=guidFactory.newGuid();return a},handleForbiddenFolderUpload:function(a,b){f.validateIsFile(a.files[0],k.handleIsAFileValidationResult.bind(k,a.files,0,b.fileId,{total:a.files.length,checked:0,stop:!1}))},handleIsAFileValidationResult:function(a,c,d,e,g){e.checked+=1;a[c].checkedForBeingAFolder=!0;g.isValid?e.stop||(e.checked===e.total?k.fileUploader.upload(a):(c+=
1,f.validateIsFile(a[c],k.handleIsAFileValidationResult.bind(k,a,c,d,e)))):(e.stop=!0,b.setFileStatusToError(d,g.errorMessage,k.removeFromList),b.enableAction(d))},hasToBeCheckedForBeingAFolder:function(a){return f.mightBeAFolder(a)&&!a.checkedForBeingAFolder},hasToHandlePossibleForbiddenFolderUpload:function(a){var b;if(browserSniffer.isDirectoryUploadSupported())return!1;if(a.files&&a.files.length)for(b=0;b<a.files.length;b+=1){var c=a.files[b];if(k.hasToBeCheckedForBeingAFolder(c))return!0}return!1},
getProgressFromCallback:function(a,c){h.fileUploadProgress(a,{disableFileAction:function(){b.disableAction(c)},setProgressTo:function(b){a=b}});return a},onDone:function(a,c){k.enableUploadButtonsAndDropzone();var d=c.fileId;b.updateFileProgress(d,1);b.setFileStatusToSuccess(d,k.requestFileDelete);void 0!==h.fileUploadSuccess&&h.fileUploadSuccess(a,c)},onFail:function(a,c){k.enableUploadButtonsAndDropzone();c=c.fileId;b.setFileStatusToError(c,a,k.removeFromList);b.enableAction(c);void 0!==h.fileUploadError&&
h.fileUploadError(a)},onProcessAlways:function(a,c){k.isMultipleFileSelect(c)||(a=c.files[c.index],a.preview&&b.updateFilePreview(c.fileId,a.preview))},onProgress:function(a,c){a=c.fileId;c=c.loaded/c.total;var e=objectState.isFunction(h.fileUploadProgress)?k.getProgressFromCallback(c,a):c;b.updateFileProgress(a,e);d.disableDeletePostBackAfterUpload&&c>=k.disableDeletePostbackThreshold&&b.disableAction(a)},onAdd:function(a,c,g){var l=k.isMultipleFileSelect(c)||k.isSingleFileInFolder(c),m=null!=k.currentFileId;
if(void 0!==h.fileSelected&&(m=h.fileSelected(a,c,m),null!=m&&!0===m.cancel))return m;m=k.getFileInfo(c.files,l);k.currentFileId=m.fileId;b.addFile(m,function(){k.onBeforeAbortUpload();c.abort()});if(k.hasToHandlePossibleForbiddenFolderUpload(c))return k.handleForbiddenFolderUpload(c,m),{cancel:!0};var n=f.validateFile(m);if(!n.isValid)return k.onFail(n.errorMessage,m),{cancel:!0};c.formData=l&&d.includeFolderManifest?{manifest:e.createJSON(c.files)}:{};c.fileId=m.fileId;k.disableUploadButtonsAndDropzone();
b.setFileStatusToInProgress(m.fileId);void 0!==h.beforeFileUpload&&h.beforeFileUpload(a,c,g);window.focus();return{success:!0}},onSend:function(a,c,e){e||(a=c.fileId,b.setDefaultFileProgress(a),d.disableDeletePostBackAfterUpload&&!c.allowAbortInUploadWithoutProgress&&b.disableAction(a))},onBeforeFileRemoved:function(a,b){void 0!==h.beforeFileRemoved&&h.beforeFileRemoved(a,b)},onFileRemoveError:function(a,b,c){void 0!==h.fileRemoveError&&h.fileRemoveError(a,b,c)},onFileRemoveSuccess:function(a,c,d){void 0!==
h.fileRemoveSuccess&&h.fileRemoveSuccess(a,c,d);b.removeFiles();void 0!==h.fileRemoved&&h.fileRemoved()},removeFromList:function(a){k.currentFileId=null;b.removeFile(a);h.fileRemoved&&h.fileRemoved()},requestFileDelete:function(b){a.requestFileDelete(b,{beforeRemoved:k.onBeforeFileRemoved,removeError:k.onFileRemoveError,removeSuccess:k.onFileRemoveSuccess})},onBeforeAbortUpload:function(){void 0!==h.beforeFileUploadAborted&&h.beforeFileUploadAborted()},onUploadAborted:function(a,c){void 0!==h.fileUploadAborted&&
h.fileUploadAborted(a,c);b.removeFiles();k.currentFileId=null;k.enableUploadButtonsAndDropzone()},returnFalseFunction:function(){return!1},takeOnlyFirstFileFunction:function(a,b){b.files=b.files.splice(0,1)},disableUploadButtonsAndDropzone:function(){c.folderInput.prop("disabled",!0);$(c.fileInput.selector).prop("disabled",!0);$(c.fileInput.selector).bind("fileuploaddrop",k.returnFalseFunction)},enableUploadButtonsAndDropzone:function(){c.folderInput.prop("disabled",!1);$(c.fileInput.selector).prop("disabled",
!1);$(c.fileInput.selector).unbind("fileuploaddrop",k.returnFalseFunction)}},l={subscribe:function(a){h=a},setCurrentFileStatusToError:function(a){var c=k.currentFileId;b.setFileStatusToError(c,a,k.removeFromList);b.enableAction(c)},enableMultipleFilesMode:function(){d.allowFoldersUpload&&k.enableFolderInput();d.allowMultipleFiles&&(k.changeFileInputToAcceptMultipleFiles(),k.changeDropZoneToAcceptMultipleFiles())},enableSingleFileMode:function(){k.disableFolderInput();k.changeFileInputToAcceptSingleFile();
k.changeDropZoneToAcceptSingleFile()},disableUploadsUntilFileIsRemoved:function(a){k.disableUploadButtonsAndDropzone();b.setActionCallback(k.currentFileId,function(b){k.removeFromList(b);k.enableUploadButtonsAndDropzone();a()})},setFileRemovedCallback:function(a){b.setActionCallback(k.currentFileId,function(b){k.removeFromList(b);"function"===typeof a&&a()})},displayFileInFileList:function(a,c){k.currentFileId=guidFactory.newGuid();b.addFile({name:a,size:c,fileId:k.currentFileId});b.setFileStatusToSuccess(k.currentFileId);
d.readOnlyMode&&b.hideAction(k.currentFileId)}};k.initialize(l);return l}var UploaderFileItemFactory=function(){return function(c){var d=this;this.literals=c;this.create=function(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'fileData' is not defined");return new UploaderFileItem(c,d.literals)};contract.require(!objectState.isNullOrUndefined(c),"argument 'literals' is not defined")}}();
function AjaxUploaderFolderManifestFactory(){var c={escapeRegExpSpecialCharacters:function(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},makeForwardAndBackSlashesTreatedAsEqual:function(c){return c.replace(/\\\\|\//g,"[\\/]")},markStringAsEndingInput:function(c){return c+"$"},getFileNameRemovalRegExpString:function(d){d=c.escapeRegExpSpecialCharacters(d);d=c.makeForwardAndBackSlashesTreatedAsEqual(d);return c.markStringAsEndingInput(d)},getFileNameRemovalRegExp:function(d){d=c.getFileNameRemovalRegExpString(d);
return new RegExp(d,"i")},removeFileNameFromPath:function(d,b){b=c.getFileNameRemovalRegExp(b);return d.replace(b,"")},trimFolderPath:function(c){c=c.replace(/[\\/]$/,"");return c=c.replace(/^[\\/]/,"")},getFolderForFile:function(d){var b=auCommon.getRelativePath(d,"");d=b.length<d.name.length?b:c.removeFileNameFromPath(b,d.name);return c.trimFolderPath(d)},convertSingleFileToArrayIfNeeded:function(c){Array.isArray(c)||(c=[c]);return c},getArrayOfFolders:function(d){var b=[],a=d.length,e;for(e=0;e<
a;e+=1)objectState.isFileError(d[e])||b.push(c.getFolderForFile(d[e]));return b}},d={create:function(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'files' is not defined");d=c.convertSingleFileToArrayIfNeeded(d);return{folders:c.getArrayOfFolders(d)}},createJSON:function(c){c=d.create(c);return JSON.stringify(c)}};return d}
function AjaxUploaderValidationService(c,d){contract.require(!objectState.isNullOrUndefined(c),"argument 'settings' is not defined");contract.require(0<=c.maxFileSize,"MaxFileSize cannot be less than zero");contract.require(0<=c.minFileSize,"MinFileSize cannot be less than zero");contract.require(!objectState.isNullOrUndefined(d),"argument 'translations' is not defined");var f={getSuccessResult:function(){return{isValid:!0}},getErrorResult:function(a){return{isValid:!1,errorMessage:a}},tryReadFile:function(a,
b){var c=new FileReader,e=!1;c.onprogress=function(a){e||(e=!0,c.abort(),b(f.getSuccessResult()))};c.onerror=function(a){e||(e=!0,b(f.getErrorResult(d.cantHandleFolderDragAndDrop)))};c.readAsArrayBuffer(a)},validateFileSize:function(a){return a<c.minFileSize?f.getErrorResult(d.fileTooSmall):a>c.maxFileSize?f.getErrorResult(d.fileTooBig):f.getSuccessResult()},validateFileExtension:function(a){return c.forbiddenFileExtensions.test(a)?f.getSuccessResult():f.getErrorResult(d.fileExtensionNotAllowed)},
validateFileNameAgainstIllegalCharacters:function(a){var b=[];if(f.areIllegalCharactersDefined())for(var g=c.illegalCharacters.length,h=0;h<g;h++)c.illegalCharacters[h]&&-1<a.indexOf(c.illegalCharacters[h])&&b.push(c.illegalCharacters[h]);return 0<b.length?(a=b.filter(function(a,c){return b.indexOf(a)==c}),f.getErrorResult(d.invalidCharactersXInFileName.replace("{0}",a.join(" ")))):f.getSuccessResult()},areIllegalCharactersDefined:function(){return null!=c.illegalCharacters&&0<c.illegalCharacters.length},
validateFileNameAgainstIllegalFileNames:function(a){var b=[];if(f.areIllegalFileNamesDefined()){a=a.split(".")[0];for(var g=c.illegalFileNames.length,h=0;h<g;h++)c.illegalFileNames[h]&&a.toUpperCase()===c.illegalFileNames[h].toUpperCase()&&b.push(c.illegalFileNames[h])}return 0<b.length?(a=b.filter(function(a,c){return b.indexOf(a)==c}),f.getErrorResult(d.invalidFirstPartOfFileName.replace("{0}",a.join(" ")))):f.getSuccessResult()},areIllegalFileNamesDefined:function(){return null!=c.illegalFileNames&&
0<c.illegalFileNames.length},checkIsFileError:function(a){return objectState.isFileError(a)?f.getErrorResult(d.unableToOpenFile):f.getSuccessResult()}},b={maxFileSize:c.maxFileSize,minFileSize:c.minFileSize,validateFile:function(a){contract.require(!objectState.isNullOrUndefined(a),"argument 'file' is not defined");var b=f.checkIsFileError(a);if(!1===b.isValid)return b;b=f.validateFileNameAgainstIllegalCharacters(a.name);if(!1===b.isValid)return b;b=f.validateFileNameAgainstIllegalFileNames(a.name);
if(!1===b.isValid)return b;b=f.validateFileExtension(a.name);if(!1===b.isValid)return b;b=f.validateFileSize(a.size);return!1===b.isValid?b:f.getSuccessResult()},mightBeAFolder:function(a){return""===a.type},validateIsFile:function(a,c){b.mightBeAFolder(a)&&FileReader?f.tryReadFile(a,c):c(f.getSuccessResult())}};return b}
function AjaxUploaderFileUploader(c){var d={fileInputSelector:c.selector,getFileInput:function(){return $(d.fileInputSelector)},uploadFiles:function(c){d.getFileInput().fileupload("add",{files:c})}};return{upload:function(c){c=Array.isArray(c)?c:[c];d.uploadFiles(c)}}}
function AjaxUploaderFileService(c,d,f){contract.require(!objectState.isNullOrUndefined(c),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(c.uploadUrl),"parameter 'uploadUrl' of argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(c.uploadType),"parameter 'uploadType' of argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'optionsFactory' is not defined");var b={uploadUrl:c.uploadUrl,
uploadType:c.uploadType,dataType:"json",previewMaxWidth:50,previewMaxHeight:50,loadImageMaxFileSize:25E6,errorMessageTranslator:f,isFileUploadAborted:function(a){return"abort"===a.errorThrown},isIframeTransportUsed:function(a){return a.dataType&&"iframe"===a.dataType.substr(0,6)},isUploadProgressSupported:function(a){return!b.isIframeTransportUsed(a)},isDoneReallyAFail:function(a){return!b.isIframeTransportUsed(a)||"undefined"!==typeof a.result&&null==a.result.Error?!1:!0},disableFileUpload:function(a){a.isEnabled=
!1},enableFileUpload:function(a){a.isEnabled=!0},hasDataToSend:function(a){return 0<a.files.length},getErrorMesageFromXhr:function(a){if(a.responseText)try{var b=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(b.errorMessage))return b.errorMessage}catch(g){}return a.statusText},checkSubscribeFunctionPreconditions:function(a,b){contract.require(!objectState.isNullOrUndefined(a),"argument 'uploaderControls' is not defined");contract.require(!objectState.isNullOrUndefined(a.fileInput),
"parameter 'fileInput' of argument 'uploaderControls' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onFail),"parameter 'onFail' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onDone),"parameter 'onDone' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onFileUploadAborted),"parameter 'onFileUploadAborted' of argument 'uploaderCallbacks' is not defined");
contract.require(!objectState.isNullOrUndefined(b.onProcessAlways),"parameter 'onProcessAlways' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onProgress),"parameter 'onProgress' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onSend),"parameter 'onSend' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onAdd),"parameter 'onAdd' of argument 'uploaderCallbacks' is not defined")},
getErrorMessageFromResponse:function(a){var c=null;b.errorMessageTranslator&&(c=b.errorMessageTranslator.getErrorMessageFromResponse(a));null==c&&a.xhr&&(c=b.getErrorMesageFromXhr(a.xhr()));return c},getErrorMessageFromIframeUploadResponse:function(a){var c=null;a.result&&b.errorMessageTranslator&&(c=b.errorMessageTranslator.getErrorMessageFromErrorCode(a.result.Error));null==c&&(c=void 0);return c}};return{subscribe:function(a,c){b.checkSubscribeFunctionPreconditions(a,c);var e={url:b.uploadUrl},
f={isEnabled:!0};a.fileInput.fileupload({url:e.url,type:b.uploadType,dataType:b.dataType,dropZone:a.dropZone||void 0,previewMaxWidth:b.previewMaxWidth,previewMaxHeight:b.previewMaxHeight,loadImageMaxFileSize:b.loadImageMaxFileSize,singleFileUploads:!1,done:function(a,d){if(b.isDoneReallyAFail(d))d.textStatus="error",a=b.getErrorMessageFromIframeUploadResponse(d),c.onFail(a,d);else c.onDone(a,d);b.enableFileUpload(f)},fail:function(a,d){if(b.isFileUploadAborted(d))c.onFileUploadAborted(a,d);else a=
b.getErrorMessageFromResponse(d),c.onFail(a,d);b.enableFileUpload(f)},processalways:c.onProcessAlways,progress:c.onProgress,send:function(a,d){c.onSend(a,d,b.isUploadProgressSupported(d))}});a.fileInput.bind("fileuploadadd",function(a,g){if(!f.isEnabled)return!1;var h=$(this);if(!b.hasDataToSend(g))return!1;b.disableFileUpload(f);var k=d.create(e);if(!0===c.onAdd(a,g,k).cancel)return b.enableFileUpload(f),!1;h.fileupload("option",k.getProcessedOptions())});return AjaxUploaderFileUploader(a.fileInput)},
requestFileDelete:function(a,c){a={url:URI(b.uploadUrl).addSearch("fileId",a).normalizeSearch().toString(),dataType:"json",type:"DELETE",beforeSend:c.beforeRemoved,error:c.removeError,success:c.removeSuccess};$.ajax(a)}}}
function AjaxUploaderControlInitialization(c,d,f,b,a){var e=UploaderSenderOptionsFactory(),g=AjaxUploaderFolderManifestFactory(),h=new UploaderFileItemFactory(d),k=AjaxUploaderValidationService(c,d);h=new UploaderFileList(f.fileList,h,d);a=AjaxUploaderFileService(c,e,a);return AjaxUploaderControl(f,c,k,h,a,g,d,b)}
function AjaxUploaderControls(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'controls' is not defined");var d={getJQuerySafeId:function(c){return"#"+c.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(c){return 0<c.length},getJQElement:function(c,b){c=d.getJQuerySafeId(c);c=$(c);if(d.jQElementExists(c))return c;if(void 0!==b)throw b;},initializeBrowseButtonFocusStyles:function(c){c.focusin(function(){c.toggleClass("ccl-button-color-green-highlight")}).focusout(function(){c.toggleClass("ccl-button-color-green-highlight")})},
initialize:function(c){c=c.fileInput.parent();d.initializeBrowseButtonFocusStyles(c)}};c={fileInput:d.getJQElement(c.FileInput,"FileInput not found"),fileList:d.getJQElement(c.FileList,"FileList not found"),dropZone:d.getJQElement(c.DropZone,"DropZone not found"),folderInput:d.getJQElement(c.FolderInput,"FolderInput not found"),folderInputLink:d.getJQElement(c.FolderInputLink,"FolderInputLink not found")};d.initialize(c);return c}
function AjaxUploaderLiterals(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'translations' is not defined");var d={fileExtensionNotAllowed:c.FileExtensionNotAllowed,fileTooBig:c.FileTooBig,fileTooSmall:c.FileTooSmall,kb:c.Kb,mb:c.Mb,error:c.Error,maxFileSizeForUpload:c.MaxFileSizeForUpload,dropYourFilesHere:c.DropYourFilesHere,browse:c.Browse,remove:c.Remove,unknown:c.Unknown,cantHandleFolderDragAndDrop:c.CantHandleFolderUpload,invalidCharactersXInFileName:c.InvalidCharactersXInFileName,
unableToOpenFile:c.UnableToOpenFile,files:c.Files,invalidFirstPartOfFileName:c.InvalidFirstPartOfFileName,getFormattedFileSize:function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+d.mb:(c/1024).toFixed(2)+" "+d.kb}};return d}
function AjaxUploaderSettings(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'settings' is not defined");var d={getRegExp:function(c){if(c instanceof RegExp)return c;c=c.split("/");var b=c.pop();c.shift();return new RegExp(c.join("/"),b)},getBoolean:function(c){return/^true$/i.test(c)},getArray:function(c){return"undefined"===typeof c||null==c?null:JSON.parse(c)}};return{uploadUrl:c.UploadUrl,uploadType:c.UploadType,maxFileSize:parseInt(c.MaxFileSize),minFileSize:parseInt(c.MinFileSize||
0),forbiddenFileExtensions:d.getRegExp(c.ForbiddenFileExtensions),allowFoldersUpload:d.getBoolean(c.AllowFoldersUpload),allowMultipleFiles:d.getBoolean(c.AllowMultipleFiles),allowDragAndDrop:d.getBoolean(c.AllowDragAndDrop),includeFolderManifest:d.getBoolean(c.IncludeFolderManifest),disableDeletePostBackAfterUpload:d.getBoolean(c.DisableDeletePostBackAfterUpload),illegalFileNames:d.getArray(c.IllegalFileNames),illegalCharacters:d.getArray(c.IllegalCharacters),readOnlyMode:d.getBoolean(c.ReadOnlyMode)}}
var FileListLiterals=function(){function c(c){this.kb=c.KbTranslation;this.mb=c.MbTranslation;this.error=c.ErrorTranslation;this.remove=c.RemoveTranslation;this.unknown=c.UnknownTranslation}c.prototype.getFormattedFileSize=function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+this.mb:(c/1024).toFixed(2)+" "+this.kb};return c}(),FilesInCloudController=function(){return function(c,d,f){var b=this;this.pickers=c;this.fileValidator=d;this.showTemplateOptionsInFilelist=f;this.subscribe=
function(a){b.callbacks=a};this.subscribeToPickers=function(){b.pickers.forEach(function(a){b.initPickerCallback(a)})};this.initPickerCallback=function(a){var c=function(){};c=new PickerCallback(c,c,function(a){return b.fileSelected(a)},c);a.subscribe(c)};this.fileSelected=function(a){if(a.purpose!==PickerPurpose.Upload){a=b.getFilesWithFileItems(a);var c=a.map(function(a){return a.fileItem});b.callbacks.onFilesSelected(c);for(c=0;c<a.length;c++){var d=a[c];b.processFile(d.result,d.fileItem)}}};this.getFilesWithFileItems=
function(a){return a.files.map(function(c){return{result:c,fileItem:b.prepareFileItem(c,a.getOAuthContext())}})};this.prepareFileItem=function(a,c){var d=CCL.FileList.Model.FileItem.buildItemForFileInCloud(FileInCloudMetadata.create(a,c));d.onRemoveCallback=function(){b.callbacks.onFileRemoved(d.Metadata)};d.onSetTemplateCallback=function(){b.callbacks.onFileSetTemplate(d.Metadata)};d.showTemplateOptionsInFilelist(b.showTemplateOptionsInFilelist);return d};this.processFile=function(a,c){a=b.fileValidator.validateFile(a);
a.isValid()?(a=c.Metadata,a instanceof FileInCloudMetadata&&a.sourceType===SourceType.Google&&c.showTemplateOptionsForItem(b.showTemplateOptionsInFilelist),c.markAsUploaded(),b.callbacks.onActionSuccess(c.Metadata),c.markAsCompleted()):(a=a.getData(),c.setError(a),b.callbacks.onActionError(c.Metadata,a))};this.subscribeToPickers()}}(),UploadAreaState=function(){return function(){var c=this;this.isVisible=ko.observable(!1);this.show=function(){c.isVisible(!0)};this.hide=function(){c.isVisible(!1)}}}(),
UploadControl=function(){function c(c,f,b,a,e,g,h,k){var d=this;this.uploadAreaContainerId=c;this.controllers=f;this.callbacks=b;this.uploadArea=a;this.fileList=e;this.statusCalculator=g;this.metadataManager=h;this.allowToSelectMultipleFiles=k;this.subscribeToControllers=function(){d.controllers.forEach(d.subscribeToController)};this.subscribeToController=function(a){a.subscribe({onInitializationFailure:function(){},onFilesSelected:d.signalFilesSelection,onActionSuccess:d.signalSuccess,onActionError:d.signalError,
onActionAborted:d.signalAbort,onFileRemoved:d.signalFileRemoval,onFileRenamed:d.signalFileRenamed,onFileSetTemplate:d.signalFileIsTemplate})};this.handleStateChange=function(){var a=d.fileList.getFiles();d.metadataManager.replaceFileItems(a);d.handleUploadAreaVisibility();d.callbacks.onStatusChanged&&(a=d.statusCalculator.calculate(a),d.callbacks.onStatusChanged(a))};this.handleUploadAreaVisibility=function(){d.allowToSelectMultipleFiles||0===d.fileList.getFiles().length?d.uploadArea.show():d.uploadArea.hide()};
this.signalFilesSelection=function(a){for(var b=0;b<a.length;b++)d.fileList.addFile(a[b]);d.handleStateChange();d.callbacks.onFilesSelected&&(a=a.map(function(a){return a.Metadata}),d.callbacks.onFilesSelected(a))};this.signalSuccess=function(a){d.handleStateChange();if(d.callbacks.onActionSuccess)d.callbacks.onActionSuccess(a)};this.signalError=function(a,b){d.handleStateChange();if(d.callbacks.onActionError)d.callbacks.onActionError(a,b)};this.signalAbort=function(a){d.handleStateChange();if(d.callbacks.onActionAborted)d.callbacks.onActionAborted(a)};
this.signalFileRemoval=function(a){d.handleStateChange();if(d.callbacks.onFileRemoved)d.callbacks.onFileRemoved(a)};this.signalFileRenamed=function(a){d.handleStateChange();if(d.callbacks.onFileRenamed)d.callbacks.onFileRenamed(a)};this.signalFileIsTemplate=function(a){d.handleStateChange();if(d.callbacks.onFileSetTemplate)d.callbacks.onFileSetTemplate(a)};this.showFileItemsFromHiddenMetadataField=function(){for(var a=0,b=d.metadataManager.getFileItems();a<b.length;a++)d.showFileItem(b[a]);d.handleStateChange()};
this.showFileItem=function(a){a.markAsUploaded();d.fileList.addFile(a);a.onRemoveCallback=function(){d.signalFileRemoval(a.Metadata);d.handleStateChange()};a.onRenameCallback=function(){d.signalFileRenamed(a.Metadata);d.handleStateChange()};a.onSetTemplateCallback=function(){d.signalFileIsTemplate(a.Metadata);d.handleStateChange()};a.markAsCompleted()};contract.require(!objectState.isNullOrUndefined(this.controllers),"'controllers' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),
"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploadArea),"'uploadArea' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.statusCalculator),"'statusManager' is not defined");contract.require(!objectState.isNullOrUndefined(this.metadataManager),"'metadataManager' is not defined");this.subscribeToControllers();this.showFileItemsFromHiddenMetadataField();
this.handleUploadAreaVisibility()}Object.defineProperty(c.prototype,"uploadedItems",{get:function(){return this.metadataManager.metadataArrays},enumerable:!0,configurable:!0});c.prototype.dispose=function(){for(var c in Components.ComponentName)Components.ComponentName.hasOwnProperty(c)&&ko.components.unregister(Components.ComponentName[c]);this.fileList.dispose();(c=window.document.getElementById(this.uploadAreaContainerId))&&ko.cleanNode(c)};c.prototype.clearFileListAndLastRequest=function(){if(this.fileList){var c=
this.fileList.getLastAddedFile();c&&c.getState()===CCL.FileList.Model.FileItemState.InProgress&&(c.abortUpload(),this.signalAbort(c.Metadata),this.fileList.removeFile(c));this.fileList.clearFileList()}};c.prototype.removeFilesWithErrors=function(){var c=this;this.fileList.getFiles().forEach(function(d){d.errorMessage()&&c.fileList.removeFile(d)})};return c}(),UploadControlCallbacksFinder=function(){function c(c,f){this.callbackNames=c;this.functionFinder=f;contract.require(!objectState.isNullOrUndefined(this.functionFinder),
"'functionFinder' is not defined")}c.prototype.getCallbacks=function(){return{onFilesSelected:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFilesSelected:void 0),onActionSuccess:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onActionSuccess:void 0),onActionError:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onActionError:void 0),onActionAborted:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onActionAborted:
void 0),onFileRemoved:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFileRemoved:void 0),onFileRenamed:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFileRenamed:void 0),onFileSetTemplate:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFileSetTemplate:void 0),onStatusChanged:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onStatusChanged:void 0)}};return c}(),UploadControlPickerAdapter=
function(){function c(c){this.picker=c}c.prototype.show=function(){};c.prototype.hide=function(){};c.prototype.enable=function(){};c.prototype.disable=function(){};c.prototype.open=function(){this.picker.open()};c.prototype.subscribe=function(c){this.picker.subscribe(c)};c.prototype.enableMultipleFilesSelecting=function(){this.picker.enableMultipleFilesSelecting()};c.prototype.disableMultipleFilesSelecting=function(){this.picker.disableMultipleFilesSelecting()};return c}();
function GoogleDriveUploaderApiInitializer(c,d,f){contract.require(!objectState.isNullOrUndefined(d),"argument 'onReadyCallback' is not defined");var b={pickerApiLoaded:!1,authApiLoaded:!1,oAuthToken:null,retried:!1,onInitializationError:function(a){f&&f(a)},loadAuthApi:function(){c.load("auth",{callback:b.onAuthApiLoaded})},loadPickerApi:function(){c.load("picker",{callback:b.onPickerApiLoaded})},onAuthApiLoaded:function(){b.authApiLoaded=!0;b.ifReadyCallOnReady()},onPickerApiLoaded:function(){b.pickerApiLoaded=
!0;b.ifReadyCallOnReady()},ifReadyCallOnReady:function(){b.pickerApiLoaded&&b.authApiLoaded&&d&&d(c.auth)},initialize:function(){objectState.isNullOrUndefined(c)?(safeConsoleLogger.error("Loading of Google Picker API failed. Most probably https://apis.google.com/js/api.js was block by firewall, proxy or adds blocking software."),b.onInitializationError("gapi is not available")):(b.loadAuthApi(),b.loadPickerApi())}};b.initialize();return{}}
function GoogleDriveUploaderCallbacks(c){var d=FunctionFinder();return{controlInitialized:d.getFunctionByName(c?c.OnControlInitialization:void 0),pickerOpened:d.getFunctionByName(c?c.OnPickerOpened:void 0),fileSelected:d.getFunctionByName(c?c.OnFileSelected:void 0),fileSelectionCanceled:d.getFunctionByName(c?c.OnFileSelectionCanceled:void 0),fileUploadSuccess:d.getFunctionByName(c?c.OnFileUploadSuccess:void 0),fileUploadError:d.getFunctionByName(c?c.OnFileUploadError:void 0),controlInitializationError:d.getFunctionByName(c?
c.OnControlInitializationError:void 0),fileUploadAborted:d.getFunctionByName(c?c.OnFileUploadAborted:void 0)}}function DelayRequest(c){var d={callbacks:[],current:0,signalled:0,running:!1,runCallbacks:function(b){if(!d.running){for(d.running=!0;d.current<d.signalled&&d.current<d.callbacks.length;)d.callbacks[d.current](b),d.current+=1;d.running=!1}}},f={data:c,wait:function(b){d.callbacks.push(b);d.runCallbacks(this);return f},signal:function(){d.signalled+=1;d.runCallbacks(this)}};return f}
function GoogleDriveUploaderControl(c,d,f,b,a,e){contract.require(!objectState.isNullOrUndefined(c),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(d.googleDriveLink),"controls.googleDriveLink is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'literals' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'pickerNamespace' is not defined");
contract.require(!objectState.isNullOrUndefined(a),"argument 'authApi' is not defined");e=e||{};var g={baseDownloadUrl:"https://www.googleapis.com/drive/v2/files/{fileId}?key={developerKey}",pickerBase:null,currentFileId:null,retryAuthorization:!1,oAuthToken:null,disablePickerButton:!1,disableDeletePostbackThreshold:.99,googleDriveSourceType:2,hasCurrentFileUploadEnded:!1,getAuthHeader:function(){return{Authorization:"Bearer "+g.oAuthToken}},initializeBaseDownloadUrl:function(){g.baseDownloadUrl=
g.baseDownloadUrl.replace("{developerKey}",c.developerKey)},setOriginUrlIfNeeded:function(a){objectState.isNullOrUndefined(c.originUrl)||a.setOrigin(c.originUrl)},prepareView:function(a){a=new b.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a},preparePickerBase:function(){var a=new b.PickerBuilder;a.addViewGroup((new b.ViewGroup(g.prepareView(b.ViewId.DOCS))).addView(g.prepareView(b.ViewId.DOCS_IMAGES)).addView(g.prepareView(b.ViewId.DOCS_VIDEOS)).addView(g.prepareView(b.ViewId.DOCUMENTS)).addView(g.prepareView(b.ViewId.DRAWINGS)).addView(g.prepareView(b.ViewId.FOLDERS)).addView(g.prepareView(b.ViewId.PDFS)).addView(g.prepareView(b.ViewId.PHOTOS)).addView(g.prepareView(b.ViewId.PRESENTATIONS)).addView(g.prepareView(b.ViewId.SPREADSHEETS))).setOAuthToken(g.oAuthToken).setDeveloperKey(c.developerKey).setLocale(c.language).setCallback(g.googleDrivePickerCallback);
g.setOriginUrlIfNeeded(a);return a},createPicker:function(a){c.allowMultipleFiles&&h.isMultipleFilesModeEnabled?a.enableFeature(b.Feature.MULTISELECT_ENABLED):a.disableFeature(b.Feature.MULTISELECT_ENABLED);return a.build()},tryAuthorize:function(b,d){a.authorize({client_id:c.clientId,scope:c.scope,immediate:b},function(a){g.onAuthResult(a,d)})},onAuthResult:function(a,b){var c=!1;if(a&&!a.error)g.oAuthToken=a.access_token,c=!0;else{var d=a&&a.error||"some auth error";a=a.error_subtype||"";g.retryAuthorization||
"origin_mismatch"===a?(safeConsoleLogger.error("Authorization of Google Picker API failed. Most probably Platform's subdomain wasn't registered at https://console.developers.google.com."),g.onControlInitializationError(d)):(safeConsoleLogger.warn("Authorization of Google Picker API failed. This might apparently happen when browser uses pop-up blocker. Authorization will be retried on upload button click."),c=g.retryAuthorization=!0)}c&&b&&b()},handleButtonClick:function(){g.disablePickerButton||(g.retryAuthorization?
g.tryAuthorize(!1,g.showPicker):g.showPicker())},showPicker:function(){var a=g.preparePickerBase();g.createPicker(a).setVisible(!0);e.pickerOpened&&e.pickerOpened(h)},bindPickerToLinkClick:function(){d.googleDriveLink.click(g.handleButtonClick)},initialize:function(a){g.tryAuthorize(!0,function(){g.bindPickerToLinkClick();g.initializeBaseDownloadUrl();e.controlInitialized&&e.controlInitialized(a)})},googleDrivePickerCallback:function(a){switch(a.action){case b.Action.PICKED:g.onFileSelected(a);break;
case b.Action.CANCEL:g.onFileSelectionCanceled(a)}},getFileDownloadUrl:function(a){return g.baseDownloadUrl.replace("{fileId}",a[b.Document.ID])},getFileInfo:function(a){var b={fileId:null,size:null,name:null};b.fileId=guidFactory.newGuid();1===a.length?(b.size=a[0].size,b.name=a[0].name):(b.size=a.reduce(function(a,b){return a+b.size},0),b.name=f.files);return b},getParameterValue:function(a,b){for(var c=[],d=a.slice(a.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),c.push(a[0]),
c[a[0]]=a[1];return c[b]},signalIfDoneProcessing:function(a){a.processed+=1;a.processed>=a.total&&a.delayed.signal()},getMetadataUrl:function(a){return a.isSpreadSheet?c.googleDriveProxy+encodeURIComponent(a.url):a.url},getFileSize:function(a){var b=0;a=$.ajax({url:g.getMetadataUrl(a),type:"HEAD",data:"",async:!1});200==a.status&&(b=parseInt(a.getResponseHeader("Content-Length")));return b},checkFileSize:function(a){0==a.size&&(a.size=this.getFileSize(a))},getDownloadUrl:function(a,b){$.ajax({url:g.getMetadataUrl(a),
type:"GET",data:"",headers:g.getAuthHeader(),async:!1,success:function(c){if(c.downloadUrl)a.url=c.downloadUrl+"&access_token="+g.oAuthToken;else if(c.exportLinks&&c.exportLinks[Object.keys(c.exportLinks)[0]]){var d=c.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":c.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":
c.exportLinks["image/png"]?"image/png":c.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"]?"application/vnd.openxmlformats-officedocument.presentationml.presentation":c.exportLinks["application/pdf"]?"application/pdf":Object.keys(c.exportLinks)[0];a.url=c.exportLinks[d]+"&access_token="+g.oAuthToken;if(d=g.getParameterValue(a.url,"exportFormat"))a.name+="."+d}a.thumbnailUrl=c.thumbnailLink;g.checkFileSize(a);g.signalIfDoneProcessing(b)},error:function(){g.signalIfDoneProcessing(b)}})},
onFileSelected:function(a){g.disablePickerButton||(g.disablePickerButton=!0,g.getFileMetadataFromGoogleDriveResponse(a).wait(g.getDownloadUrlForFiles).wait(g.executeFileSelectedCallback))},getFileMetadataFromGoogleDriveResponse:function(a){a=DelayRequest({request:g.prepareFileMetadata(a)});a.signal();return a},prepareFileMetadata:function(a){var c={sourceType:g.googleDriveSourceType,files:null};c.files=a[b.Response.DOCUMENTS].map(function(a){return{url:g.getFileDownloadUrl(a),name:a[b.Document.NAME],
size:a.sizeBytes,isSpreadSheet:"application/vnd.google-apps.spreadsheet"===a.mimeType,fileId:a[b.Document.ID],type:a[b.Document.MIME_TYPE],icon:a[b.Document.ICON_URL]}});g.hasCurrentFileUploadEnded=!1;return c},executeFileSelectedCallback:function(a){a=a.data.request.files;void 0!==e.fileSelected&&e.fileSelected(a)},getDownloadUrlForFiles:function(a){var b=a.data.request.files,c={total:b.length,processed:0,delayed:a};b.forEach(function(a){g.getDownloadUrl(a,c)})},onControlInitializationError:function(a){e.controlInitializationError&&
e.controlInitializationError(a)},onFileSelectionCanceled:function(a){e.fileSelectionCanceled&&e.fileSelectionCanceled()},setUploaderButtonDisplay:function(a){a?d.googleDriveLink.show():d.googleDriveLink.hide()}},h={isMultipleFilesModeEnabled:!0,hideUploaderButton:function(){g.setUploaderButtonDisplay(!1)},showUploaderButton:function(){g.setUploaderButtonDisplay(!0)},enableMultipleFilesMode:function(){h.isMultipleFilesModeEnabled=!0},disableMultipleFilesMode:function(){h.isMultipleFilesModeEnabled=
!1},enablePickerButton:function(){g.disablePickerButton=!1}};g.initialize(h);return h}
function GoogleDriveUploaderSettings(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'settings' is not defined");var d={getRegExp:function(c){if(c instanceof RegExp)return c;c=c.split("/");var b=c.pop();c.shift();return new RegExp(c.join("/"),b)},getBoolean:function(c){return/^true$/i.test(c)}};return{maxFileSize:parseInt(c.MaxFileSize),minFileSize:parseInt(c.MinFileSize||0),developerKey:c.DeveloperKey,clientId:c.ClientId,scope:c.Scope,immediate:d.getBoolean(c.Immediate),allowMultipleFiles:d.getBoolean(c.AllowMultipleFiles),
uploadUrl:c.UploadUrl,googleDriveProxy:c.GoogleDriveProxy,disableDeletePostBackAfterUpload:d.getBoolean(c.DisableDeletePostBackAfterUpload),readOnlyMode:d.getBoolean(c.ReadOnlyMode),uploadStateServiceEndpoint:c.UploadStateServiceEndpoint,originUrl:c.OriginUrl,pickerProxyMode:d.getBoolean(c.PickerProxyMode),language:c.Language}}
function GoogleDriveUploaderControlInitialization(c,d,f,b){var a={onReadyCallback:function(a){GoogleDriveUploaderControl(c,f,d,google.picker,a,b)},initialize:function(){GoogleDriveUploaderApiInitializer(window.gapi,a.onReadyCallback,b.controlInitializationError)}};a.initialize()}
function GoogleDriveUploaderControls(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'controls' is not defined");var d={getJQuerySafeId:function(c){return"#"+c.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(c){return 0<c.length},getJQElement:function(c,b){c=d.getJQuerySafeId(c);c=$(c);if(d.jQElementExists(c))return c;if(void 0!==b)throw b;}};return{googleDriveLink:d.getJQElement(c.GoogleDriveLink,"GoogleDriveLink not found"),fileList:d.getJQElement(c.FileList,"FileList not found")}}
function GoogleDriveUploaderLiterals(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'translations' is not defined");var d={chooseFromGoogleDrive:c.ChooseFromGoogleDrive,kb:c.Kb,mb:c.Mb,unknown:c.Unknown,files:c.Files,getFormattedFileSize:function(c){return objectState.isNumber(c)?1048576<=c?(c/1048576).toFixed(2)+" "+d.mb:(c/1024).toFixed(2)+" "+d.kb:""}};return d}
(function(c){var d=function(){function d(b,a,d){var e=this;this.linkTitle=UploadControlTranslation.addFiles;this.showDialog=function(){c.UploadControlUtils.isMobile()&&(e.lastScroll=$(window).scrollTop(),c.UploadControlUtils.toggleTopFrameAndMobileOverlay(!1));e.isDialogVisible(!0);c.UploadControlUtils.isMobile()||(e.isOnlyOnePickerChoice()?e.openFirstPicker():(e.dialogContainer=document.getElementById("ccl-uc-file-dialog-container"),e.dialogContainer&&(e.isElementInViewport(e.dialogContainer)||e.moveContainerVertically(e.dialogContainer)),
e.focusFirstPicker()))};this.hideDialog=function(){c.UploadControlUtils.toggleTopFrameAndMobileOverlay(!0);e.isDialogVisible(!1);c.UploadControlUtils.isMobile()&&($(window).scrollTop(e.lastScroll),$(".ccl-uc-dropzone-container").focus());!e.isOnlyOnePickerChoice()&&e.dialogContainer&&(e.dialogContainer.style.top=null)};this.focusFirstPicker=function(){$("#ccl-uc-file-dialog-container button")[1].focus()};this.openFirstPicker=function(){$("#ccl-uc-file-dialog-container button")[1].click()};this.isOnlyOnePickerChoice=
function(){return null!==e.pickers&&2===e.pickers.length};contract.require(!objectState.isNullOrUndefined(b),"This ViewModel requires uploadAreaState to be passed. Please provide it.");this.isDialogVisible=ko.observable(!1);this.isUploadAreaVisible=ko.pureComputed(function(){return b.isVisible()});this.enableCompactView=ko.pureComputed(function(){return a});this.getUploadAreaCss=ko.pureComputed(function(){return a?"ccl-uc-upload-area-compact-view":""});this.pickers=d}d.prototype.isElementInViewport=
function(b){b=b.getBoundingClientRect();return 0<=b.top&&0<=b.left&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)};d.prototype.moveContainerVertically=function(b){var a=b.getBoundingClientRect();b.style.top=a.bottom>=(window.innerHeight||document.documentElement.clientHeight)?"-"+(a.bottom-document.documentElement.clientHeight)+"px":63-a.top+"px"};return d}();c.UploadAreaViewModel=d})(Components||(Components=
{}));var uploaderSenderOptionsConstants={fileRepoData:"fileRepoData"};
function FileRepoErrorResponseTranslator(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'errorTranslations' is not defined");var d={getErrorMessageFromResponse:function(c){try{var b=c.xhr()}catch(a){return null}return d.getErrorMessageFromXhr(b)},getErrorMessageFromXhr:function(c){try{var b=JSON.parse(c.responseText).error}catch(a){return null}return d.getErrorMessageFromErrorCode(b)},getErrorMessageFromErrorCode:function(d){return d&&c[d]?c[d]:c[FileRepoError.toString(FileRepoError.UnknownError)]}};
return d}
var UploadControlFactory=function(){function c(c,f,b,a,e,g){this.uploadAreaContainerId=c;this.settings=f;this.callbackFinder=b;this.translations=a;this.metadataField=e;this.fileRepoData=g}c.prototype.build=function(){this.setStaticTranslations();var c=(new PickerObjectsFactory(this.settings,this.translations)).build(),f=c[0],b=c[1],a=c[2];c=c[3];var e=f.concat(b,a);this.initializeDialogComponent(c,e);c=new UploadAreaState;var g=new PickerFileResultValidatorLiterals(this.translations);this.literals=g;
var h=PickerFileResultValidatorFactory.createValidatorForRenameFile(this.settings.ValidationSettings,g);h=new CCL.FileList.NestedFileListControl(this.settings.FileListControlSettings,h);this.initializeUploadAreaComponent(c,e,h.htmlTagName,this.settings.EnableCompactView);ko.applyBindings(null,window.document.getElementById(this.uploadAreaContainerId));e=new UploadStatusCalculator;var k=new HiddenMetadataManager(this.metadataField,this.settings.FileListControlSettings),l=this.callbackFinder.getCallbacks(),
m=new ActionQueue(this.settings.MaximumNumberOfConcurrentUploads),n=PickerFileResultValidatorFactory.create(this.settings.ValidationSettings,g),p=this.getSender();f=new UploadController(f.map(function(a){return new UploadControlPickerAdapter(a)}),p,n,m,this.settings);a=this.getFolderController(a,n,m);g=PickerFileResultValidatorFactory.createValidatorForLinkedFilesInCloud(this.settings.ValidationSettings.MaxFileNameLength,this.settings.ValidationSettings.AllowedFileExtensions,this.settings.ValidationSettings.ForbiddenFileExtensions,
this.settings.IsCasperEnabled,g);b=new FilesInCloudController(b,g,this.settings.FileListControlSettings.ShowTemplateOptions);return new UploadControl(this.uploadAreaContainerId,[f,a,b],l,c,h,e,k,this.settings.AllowToSelectMultipleFiles)};c.prototype.setStaticTranslations=function(){UploadControlTranslation.fileFromComputer=this.translations.ComputerOrDevice;UploadControlTranslation.folderFromComputer=this.translations.Folder;UploadControlTranslation.googleDrive=this.translations.GoogleDrive;UploadControlTranslation.dropbox=
this.translations.Dropbox;UploadControlTranslation.oneDrive=this.translations.OneDrive;UploadControlTranslation.webDav=this.translations.WebDav;UploadControlTranslation.mediaRecorder=this.translations.MediaRecorderRecord;UploadControlTranslation.someFilesInThatFolderCannotBeUploaded=this.translations.SomeFilesInThatFolderCannotBeUploaded;UploadControlTranslation.addFiles=this.translations.AddFiles;UploadControlTranslation.orSimplyDropThemHere=this.translations.OrSimplyDropThemHere;UploadControlTranslation.uploadFileFrom=
this.settings.ForceSingleColumnPickerLayout?this.translations.ColumnAddFrom:this.translations.ColumnFileFrom;UploadControlTranslation.uploadFileFromMobile=this.settings.ForceSingleColumnPickerLayout?this.translations.ColumnAddFrom:this.translations.ColumnFileFromMobile;UploadControlTranslation.or=this.translations.Or;UploadControlTranslation.cancel=this.translations.Cancel;UploadControlTranslation.close=this.translations.Close;UploadControlTranslation.linkTo=this.translations.ColumnLinkTo;UploadControlTranslation.linkToMobile=
this.translations.ColumnLinkToMobile;UploadControlTranslation.cloudServiceUnavailable=this.translations.CloudServiceUnavailable;UploadControlTranslation.tryAgainOrContactAdministrator=this.translations.TryAgainOrContactAdministrator};c.prototype.initializeDialogComponent=function(c,f){c=new Components.Dialog.DialogComponent(c,f);ko.components.register(c.name,c)};c.prototype.initializeUploadAreaComponent=function(c,f,b,a){void 0===b&&(b=CCL.FileList.Components.NestedFileListComponent.defaultNestedFileListHtmlTag);
void 0===a&&(a=!1);c=new Components.UploadAreaComponent(c,f,b,a);ko.components.register(c.name,c)};c.prototype.getSender=function(){var c=new GenericUploader.Sender.FileRepoSenderForLocalFiles.Factory(browserSniffer,this.getFileRepoErrorTranslator(),this.fileRepoData),f=new GenericUploader.Sender.FileRepoSenderForExternalFiles.Factory(browserSniffer,this.getFileRepoErrorTranslator(),{uploadStateServiceEndpoint:this.settings.UploadStateServiceEndpoint,fileRepoData:this.fileRepoData});return new GenericUploader.Sender.FileRepoSender(c,
f)};c.prototype.getFolderController=function(c,f,b){var a=this.getFolderSenderFactory(),d={maxFileNameLength:this.settings.ValidationSettings.MaxFileNameLength},g={fileNameIsTooLong:this.translations.FileNameIsTooLong};d=(new FolderValidatorFactory).createFileValidatorWithLocalizedMessages(d,g);f=new FolderBuilder(f,d);return new FolderController(c.map(function(a){return new UploadControlPickerAdapter(a)}),a,f,b)};c.prototype.getFolderSenderFactory=function(){var c=new GenericUploader.Sender.FileRepoSenderForLocalFiles.Factory(browserSniffer,
this.getFileRepoErrorTranslator(),this.fileRepoData);return new GenericUploader.Sender.FileRepoSenderForLocalFolders.Factory(c)};c.prototype.getFileRepoErrorTranslator=function(){var c={};c[FileRepoError.toString(FileRepoError.UnknownError)]=this.translations.UnknownError;c[FileRepoError.toString(FileRepoError.DownloadFromWebDavForbidden)]=this.translations.DownloadFromWebDavForbidden;c[FileRepoError.toString(FileRepoError.FileSizeTooLarge)]=this.literals.getExcededSizeLimitTranslation(this.settings.ValidationSettings.MaxFileSize);
return FileRepoErrorResponseTranslator(c)};return c}();

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,n,f){a instanceof String&&(a=String(a));for(var l=a.length,h=0;h<l;h++){var p=a[h];if(n.call(f,p,h,a))return{i:h,v:p}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,n,f){a!=Array.prototype&&a!=Object.prototype&&(a[n]=f.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,n,f,l){if(n){f=$jscomp.global;a=a.split(".");for(l=0;l<a.length-1;l++){var h=a[l];h in f||(f[h]={});f=f[h]}a=a[a.length-1];l=f[a];n=n(l);n!=l&&null!=n&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:n})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,f){return $jscomp.findInternal(this,a,f).v}},"es6","es3");var OembedPlugin;
(function(a){var n=function(){function f(l){this.$settings=l;var h=$("#"+l.ClientIds.EmbedCode),p=h[0];setTimeout(function(){f.setCaretToPos(p,0)},10);h.focus().blur(function(){a.OembedRenderer.renderEmbedMedia(h.val().trim(),l)}).on("input paste",null,function(a){f.onEmbedCodeChanged(100,l)}).keyup(function(a){a=a.which;if(!(a>=CCL.CommonConstants.keyCodes.arrowLeft&&a<=CCL.CommonConstants.keyCodes.arrowDown))f.onEmbedCodeChanged(500,l)});$("#"+l.ClientIds.InsertButton).mousedown(function(){a.OembedRenderer.setDimensions(l)});
$(document).keydown(function(a){a.which===CCL.CommonConstants.keyCodes.escape&&CCL.CommonFunctions.makePostMessageCall(parent,new CCL.CommonWindowMessages.TextEditorCloseDialogMessage)});CCL.CommonFunctions.attachPostMessageEventListener($(window),CCL.CommonWindowMessages.MessageNames.editEmbededContent,function(h){h=h.extendedData.editReference;try{h=decodeURIComponent(h)}catch(c){}$("#"+l.ClientIds.EmbedCode).val(h);a.OembedRenderer.renderEmbedMedia(h,l)})}f.onEmbedCodeChanged=function(l,h){var p=
$("#"+h.ClientIds.EmbedCode);a.OembedRenderer.isEmbedCodeChanged(p.val().trim())&&($("#"+h.ClientIds.InsertButton).prop("disabled",!0),a.OembedRenderer.initPlaceholder(h),f.typewatch(function(){var l=$("#"+h.ClientIds.EmbedCodeRequiredValidator),c=$("#"+h.ClientIds.EmbedCodeLengthValidator),f=p.val().trim();""!==f&&l.hide();c.hide();a.OembedRenderer.renderEmbedMedia(f,h)},l))};f.setSelectionRange=function(a,h,f){a.setSelectionRange?(a.focus(),a.setSelectionRange(h,f)):a.createTextRange&&(a=a.createTextRange(),
a.collapse(!0),a.moveEnd("character",f),a.moveStart("character",h),a.select())};f.setCaretToPos=function(a,h){f.setSelectionRange(a,h,h)};f.typewatch=function(){var a=0;return function(h,f){clearTimeout(a);a=setTimeout(h,f)}}();return f}();a.Default=n})(OembedPlugin||(OembedPlugin={}));
(function(a){(function(n){function f(a,b,d,e){$("#"+b.ClientIds.HtmlValidationMessage).toggle(!d);$("#"+b.ClientIds.IsPlainLinkHidden).val(a.isPlainLink);$("#"+b.ClientIds.InsertButton).prop("disabled",!d);$("#"+b.ClientIds.EmbedUrlHidden).val(e)}function l(a){a=$("#"+a.ClientIds.Placeholder);return{height:a[0].scrollHeight,width:a[0].scrollWidth}}function h(c,b,d,e,g){var k=$("#"+c.ClientIds.Placeholder);k.empty();try{var h=d.match(/<(?!img|a|\/)[^>]+>/g);h&&$.each(h,function(a,b){a=b.replace("http://",
"//").replace("https://","//");d=d.replace(b,a)});g&&"View"!==c.RendererMode?k.text(d):k.html(d);k.has("iframe,object,embed")&&k.find("iframe,object,embed").each(function(){var a=$(this),b=a.attr("width"),d=a.attr("height");null==c.CssClasses.NoBorder?a.css("border","0"):a.addClass(c.CssClasses.NoBorder);c.UseFullWidthForFrame?(a.css("width","100%"),a.removeAttr("width")):null==b&&a.attr("width","100%");null==d&&a.attr("height",c.MaxPreviewHeight+"px")});var f=!0}catch(m){f=!1}f&&(c.UseFullWidthOgpContainer&&
k.addClass(c.CssClasses.FullWidthOgp),(new CCL.OgpImageLoader({PlaceholderId:c.ClientIds.Placeholder,IgnoreImageDimensions:!1,CssClasses:{EmbedOgpContainer:c.CssClasses.EmbedOgpContainer,EmbedOgpImagePreview:c.CssClasses.EmbedOgpImagePreview,EmbedOgpImage:c.CssClasses.EmbedOgpImage,EmbedOgpTextContainer:c.CssClasses.EmbedOgpTextContainer,AlignVertically:c.CssClasses.AlignVertically}})).loadImage(),c.AdjustDimensions&&(g=k.addClass(c.CssClasses.IgnoreFluidWidthVideo).find("iframe,object,embed").css({width:"",
height:"","max-width":"","max-height":""}),g.is("iframe[src*='//www.youtube.com']")&&g.attr("width",c.MaxPreviewWidth),k.fitVids({customSelector:a.OembedConstants.fitVidsCustomSelector})),c.ClientIds.OembedPlaceHolder&&(k=new CCL.CommonWindowMessages.EmbeddedContentDataMessage,k.oembedPlaceHolderId=c.ClientIds.OembedPlaceHolder,k.originalEmbedCode=b,k.isPlainLink=e,CCL.CommonFunctions.makePostMessageCall(parent,k),e||setTimeout(function(){p(c)},100)));r=b;return f}function p(a){var b=l(a);if(30<b.height){var d=
new CCL.CommonWindowMessages.EmbeddedContentSizeMessage;d.oembedPlaceHolderId=a.ClientIds.OembedPlaceHolder;d.width=b.width;d.height=b.height;CCL.CommonFunctions.makePostMessageCall(parent,d);t||(t=new CCL.CallbackDebouncer(function(a){return p(a)}),$(window).resize(function(){t.invokeCallback(a,500)}))}else setTimeout(function(){p(a)},250)}function v(a){$("#"+a.ClientIds.Container).removeClass(a.CssClasses.Placeholder)}var c=!1,r="",t,u;n.renderEmbedMedia=function(a,b){""!==a&&(c=!0);if(r===a)return"";
u||(u=new CCL.LinkParser);var d=CCL.LinkParser.wholeUrlRegex.test(a),e=d?CCL.LinkParser.ensureUrlScheme(a):u.getFirstLink(a);if(d||e&&"Edit"===b.RendererMode)return jQuery("body").oembed(e,{onEmbed:function(a){b.ShowDebugInformation&&(console.log("firstLink: "+e),console.log("e.Code: "+a.code),a.code&&console.log("e.Code[0].outerHTML: "+a.code[0].outerHTML),console.log("e.isPlainLink: "+a.isPlainLink),console.log("isUrl: "+d));"string"===typeof a.code?(b.ShowDebugInformation&&console.log("case 1, code is string"),
h(b,e,a.code,a.isPlainLink,!1),f(a,b,!0,e)):a.code&&"string"===typeof a.code[0].outerHTML&&(b.ShowDebugInformation&&console.log("case 2, link with content"),h(b,e,a.code[0].outerHTML,a.isPlainLink,!1),f(a,b,!0,e));v(b)},onError:function(a,d){v(b);h(b,e,"string"===typeof d&&""!==d?d:b.Terms.GetContentErrorMessage,!0,!1);f({},b,!1,"")},longUrlServiceUrl:b.LongUrlServiceUrl,bypassUrl:b.BypassUrl,headParserUrl:b.HeadParserUrl,maxWidth:b.AdjustDimensions?void 0:b.MaxPreviewWidth,maxHeight:b.AdjustDimensions?
void 0:b.MaxPreviewHeight,skipFallback:b.SkipFallback,testEmbed:b.TestEmbed,testModeErrorMessage:b.Terms.TestModeEmbedErrorMessage}),e;if(""===a)return b.ShowDebugInformation&&console.log("case 4"),f({},b,!1,""),c&&Page_ClientValidate(),"";b.ShowDebugInformation&&console.log("case 5");if("View"===b.RendererMode){var g=h(b,a,a,!0,!0);g&&v(b);f({},b,g,a);return a}f({},b,!1,"");c&&Page_ClientValidate();return""};n.setDimensions=function(a){var b=l(a);$("#"+a.ClientIds.ContentWidthHidden).val(b.width.toString());
$("#"+a.ClientIds.ContentHeightHidden).val(b.height.toString())};n.initPlaceholder=function(a){$("#"+a.ClientIds.Placeholder).empty();$("#"+a.ClientIds.Container).addClass(a.CssClasses.Placeholder);r=""};n.isEmbedCodeChanged=function(a){return a!==r}})(a.OembedRenderer||(a.OembedRenderer={}))})(OembedPlugin||(OembedPlugin={}));
(function(a){(a.OembedConstants||(a.OembedConstants={})).fitVidsCustomSelector="iframe[src*='//embed.spotify.com'],iframe[src*='//www.slideshare.net']"})(OembedPlugin||(OembedPlugin={}));/*
 jquery oembed plugin

 Copyright (c) 2009 Richard Chamorro
 Licensed under the MIT license

 Orignal Author: Richard Chamorro
 Forked by Andrew Mee to Provide a slightly diffent kind of embedding experience
*/
(function(a){function n(a,d){d=d?d:"";return a?n(--a,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+d):d}function f(a,d){var b=a.apiendpoint,c="",k;b+=0>=b.indexOf("?")?"?":"&";b=b.replace("#","%23");null===a.maxWidth||"undefined"!==typeof a.params.maxwidth&&null!==a.params.maxwidth||(a.params.maxwidth=a.maxWidth);null===a.maxHeight||"undefined"!==typeof a.params.maxheight&&null!==a.params.maxheight||(a.params.maxheight=a.maxHeight);for(k in a.params)k!=
a.callbackparameter&&null!==a.params[k]&&(c+="&"+escape(k)+"="+a.params[k]);b+="format="+a.format+"&url="+escape(d)+c;"json"!=a.dataType&&(b+="&"+a.callbackparameter+"=?");return b}function l(b,d,e){b.isPlainLink=b.isPlainLink||!1;a("#jqoembeddata").data(d,b);c.beforeEmbed.call(e,b);c.onEmbed.call(e,b);c.afterEmbed.call(e,b)}function h(b,d,e){if(void 0!=a("#jqoembeddata").data(d)&&"iframe"!=e.embedtag.tag){var g=a("#jqoembeddata").data(d);l(g,d,b)}else if(e.yql)d=d.replace('"',"%22"),g=a.extend({url:c.headParserUrl,
dataType:"json",timeout:u,data:{url:d,xpath:e.yql.xpath||"//meta|//title|//link"},success:function(c){var k={url:d};null==c.query&&(c.query={});c.query.results&&c.query.results.meta||(c.query.results={meta:[]});if(c.query.hasError)l({code:v(d),isPlainLink:!0},d,b);else{if(c.query.results.meta)for(var g=0,f=c.query.results.meta.length;g<f;g++){var q=c.query.results.meta[g].name||c.query.results.meta[g].property||null;null!=q&&(k[q.toLowerCase()]=c.query.results.meta[g].content)}k.hasOwnProperty("title")&&
k.hasOwnProperty("og:title")||null==c.query.results.title||(k.title=c.query.results.title);if(!k.hasOwnProperty("og:image")&&c.query.results.hasOwnProperty("link"))for(g=0,f=c.query.results.link.length;g<f;g++)c.query.results.link[g].hasOwnProperty("rel")&&"apple-touch-icon"==c.query.results.link[g].rel&&("/"==c.query.results.link[g].href.charAt(0)?(q=d.match(/^(([a-z]+:)?(\/\/)?[^\/]+\/).*$/),k["og:image"]=q&&q.length?q[1]+c.query.results.link[g].href:"javascript:void(0);"):k["og:image"]=c.query.results.link[g].href);
c=e.yql.datareturn?e.yql.datareturn(e.yql.xpath&&"//meta|//title|//link"===e.yql.xpath?k:c.query.results):!1;!1===c?h(b,d,w):(g=a.extend({},c),g.code=c.code||c,g.previewImage=k["og:image"],l(g,d,b))}},error:function(a,g){(g<r||g>=t||"timeout"===g)&&c.onError.call(b,d,e)}},c.ajaxOptions||{}),a.ajax(g);else if(e.templateRegex)if(""!==e.embedtag.tag){g=e.embedtag.flashvars||"";var k=e.embedtag.tag||"embed",q=e.embedtag.width||c.maxWidth||"auto",x=e.embedtag.height||c.maxHeight||"auto",m=d.replace(e.templateRegex,
e.apiendpoint);m+=e.embedtag.params||"";e.embedtag.templateParams&&(m+=e.embedtag.templateParams(d));e.nocache||(m+="&jqoemcache="+n(5));e.apikey&&(m=m.replace("_APIKEY_",c.apikeys[e.name]));q=a("<"+k+"/>").attr("src",m).attr("width",q).attr("height",x).attr("allowfullscreen",e.embedtag.allowfullscreen||"true").attr("allowscriptaccess",e.embedtag.allowfullscreen||"always").css("max-height",c.maxHeight||"auto").css("max-width",c.maxWidth||"auto");"embed"==k&&q.attr("type",e.embedtag.type||"application/x-shockwave-flash").attr("flashvars",
d.replace(e.templateRegex,g));"iframe"==k&&q.attr("scrolling",e.embedtag.scrolling||"no").attr("frameborder",e.embedtag.frameborder||"0");g={};g.code=q;g.previewImage="";l(g,d,b)}else e.apiendpoint?(e.apikey&&(e.apiendpoint=e.apiendpoint.replace("_APIKEY_",c.apikeys[e.name])),g=a.extend({url:d.replace(e.templateRegex,e.apiendpoint),dataType:"jsonp",timeout:u,success:function(c){var g=a.extend({},c);e.externalUrl=e.externalUrl||d;g.code=e.templateData(c);l(g,d,b)},error:function(a,g){(g<r||g>=t||"timeout"===
g)&&c.onError.call(b,d,e)}},c.ajaxOptions||{}),a.ajax(g)):l({code:d.replace(e.templateRegex,e.template)},d,b);else g=f(e,d),"true"==e.safeget&&null!==c.bypassUrl&&""!==c.bypassUrl&&(g=c.bypassUrl+encodeURIComponent(g)),g=a.extend({url:g,dataType:e.dataType||"json",timeout:u,success:function(e){e=a.extend({},e);e.previewImage="";switch(e.type){case "file":case "photo":var c=a.fn.oembed.getPhotoCode(d,e);e.code=c.code;e.previewImage=c.previewImage;break;case "video":case "rich":e.code=a.fn.oembed.getRichCode(d,
e);break;default:e.code=a.fn.oembed.getGenericCode(d,e)}l(e,d,b)},error:function(a,g,k){if(a.status<r||a.status>=t||"timeout"===g)400==a.status?(provider=w,provider.params=p(c[provider.name])||{},provider.maxWidth=c.maxWidth,provider.maxHeight=c.maxHeight,h(b,d,provider)):c.onError.call(b,d,e)}},c.ajaxOptions||{}),a.ajax(g)}function p(a){if(null===a)return null;var b,e={};for(b in a)null!==b&&(e[b.toLowerCase()]=a[b]);return e}function v(b){var d=a("<div>"),e=a("<a>").attr("target","_blank").attr("href",
b);d.append(e);b=a("<div>").addClass("ccl-embed-ogp-dots").text(b);e.append(b);return d}a.fn.oembed=function(b,d,e){c=a.extend(!0,a.fn.oembed.defaults,d);var g="0rz.tw 1link.in 1url.com 2.gp 2big.at 2tu.us 3.ly 307.to 4ms.me 4sq.com 4url.cc 6url.com 7.ly a.gg a.nf aa.cx abcurl.net ad.vu adf.ly adjix.com afx.cc all.fuseurl.com alturl.com amzn.to ar.gy arst.ch atu.ca azc.cc b23.ru b2l.me bacn.me bcool.bz binged.it bit.ly bizj.us bloat.me bravo.ly bsa.ly budurl.com canurl.com chilp.it chzb.gr cl.lk cl.ly clck.ru cli.gs cliccami.info clickthru.ca clop.in conta.cc cort.as cot.ag crks.me ctvr.us cutt.us dai.ly decenturl.com dfl8.me digbig.com http://digg.com/[^/]+$ disq.us dld.bz dlvr.it do.my doiop.com dopen.us easyuri.com easyurl.net eepurl.com eweri.com fa.by fav.me fb.me fbshare.me ff.im fff.to fire.to firsturl.de firsturl.net flic.kr flq.us fly2.ws fon.gs freak.to fuseurl.com fuzzy.to fwd4.me fwib.net g.ro.lt gizmo.do gl.am go.9nl.com go.ign.com go.usa.gov goo.gl goshrink.com gurl.es hex.io hiderefer.com hmm.ph href.in hsblinks.com htxt.it huff.to hulu.com hurl.me hurl.ws icanhaz.com idek.net ilix.in is.gd its.my ix.lt j.mp jijr.com kaltura.com/tiny www.kaltura.com/tiny kl.am klck.me korta.nu krunchd.com l9k.net lat.ms liip.to liltext.com linkbee.com linkbun.ch liurl.cn ln-s.net ln-s.ru lnk.gd lnk.ms lnkd.in lnkurl.com lru.jp lt.tl lurl.no macte.ch mash.to merky.de migre.me miniurl.com minurl.fr mke.me moby.to moourl.com mrte.ch myloc.me myurl.in n.pr nbc.co nblo.gs nn.nf not.my notlong.com nsfw.in nutshellurl.com nxy.in nyti.ms o-x.fr oc1.us om.ly omf.gd omoikane.net on.cnn.com on.mktw.net onforb.es orz.se ow.ly ping.fm pli.gs pnt.me politi.co post.ly pp.gg profile.to ptiturl.com pub.vitrue.com qlnk.net qte.me qu.tc qy.fi r.ebay.com r.im rb6.me read.bi readthis.ca reallytinyurl.com redir.ec redirects.ca redirx.com retwt.me ri.ms rickroll.it riz.gd rt.nu ru.ly rubyurl.com rurl.org rww.tw s4c.in s7y.us safe.mn sameurl.com sdut.us shar.es shink.de shorl.com short.ie short.to shortlinks.co.uk shorturl.com shout.to show.my shrinkify.com shrinkr.com shrt.fr shrt.st shrten.com shrunkin.com simurl.com slate.me smallr.com smsh.me smurl.name sn.im snipr.com snipurl.com snurl.com sp2.ro spedr.com srnk.net srs.li starturl.com stks.co su.pr surl.co.uk surl.hu t.cn t.co t.lh.com ta.gd tbd.ly tcrn.ch tgr.me tgr.ph tighturl.com tiniuri.com tiny.cc tiny.ly tiny.pl tinylink.in tinyuri.ca tinyurl.com tk. tl.gd tmi.me tnij.org tnw.to tny.com to.ly togoto.us totc.us toysr.us tpm.ly tr.im tra.kz trunc.it twhub.com twirl.at twitclicks.com twitterurl.net twitterurl.org twiturl.de twurl.cc twurl.nl u.mavrev.com u.nu u76.org ub0.cc ulu.lu updating.me ur1.ca url.az url.co.uk url.ie url360.me url4.eu urlborg.com urlbrief.com urlcover.com urlcut.com urlenco.de urli.nl urls.im urlshorteningservicefortwitter.com urlx.ie urlzen.com usat.ly use.my vb.ly vevo.ly vgn.am vl.am vm.lc w55.de wapo.st wapurl.co.uk wipi.es wp.me x.vu xr.com xrl.in xrl.us xurl.es xurl.jp y.ahoo.it yatuc.com ye.pe yep.it yfrog.com yhoo.it yiyd.com yuarel.com z0p.de zi.ma zi.mu zipmyurl.com zud.me zurl.ws zz.gd zzang.kr \u203a.ws \u2729.ws \u273f.ws \u2765.ws \u2794.ws \u279e.ws \u27a1.ws \u27a8.ws \u27af.ws \u27b9.ws \u27bd.ws".split(" ");
0===a("#jqoembeddata").length&&a('<span id="jqoembeddata"></span>').appendTo("body");return this.each(function(){var k=a(this);e?c.onEmbed=e:c.onEmbed||(c.onEmbed=function(b){a.fn.oembed.insertCode(this,c.embedMethod,b)});if(null!==b&&void 0!==b){for(var f=0,n=g.length;f<n;f++)if(null!==b.match(new RegExp("://"+g[f]+"/","i")))return f=a.extend({url:d.longUrlServiceUrl+encodeURIComponent(b),dataType:"json",success:function(d){(longUrl=d["long-url"])?(m=a.fn.oembed.getOEmbedProvider(d["long-url"]),
!0===!!c.skipFallback&&(m="opengraph"===m.name.toLowerCase()?null:m),null!==m?(m.params=p(c[m.name])||{},m.maxWidth=c.maxWidth,m.maxHeight=c.maxHeight,h(k,longUrl,m)):c.onProviderNotFound.call(k,longUrl)):(m=w,m.params=p(c[m.name])||{},m.maxWidth=c.maxWidth,m.maxHeight=c.maxHeight,h(k,b,m))},error:function(a){var d="";try{d=JSON.parse(a.responseText).error}catch(y){}(a.status<r||a.status>=t)&&c.onError.call(k,b,d)}},c.longUrlAjaxOptions||c.ajaxOptions||{}),a.ajax(f),k;var m=a.fn.oembed.getOEmbedProvider(b);
if(c.testEmbed&&(null===m||"opengraph"===m.name.toLowerCase()))return l({code:"<div>"+c.testModeErrorMessage+"</div>",isPlainLink:!0},b,k),k;!0===!!c.skipFallback&&(m="opengraph"===m.name.toLowerCase()?null:m);null!==m?(m.params=p(c[m.name])||{},m.maxWidth=c.maxWidth,m.maxHeight=c.maxHeight,h(k,b,m)):c.onProviderNotFound.call(k,b)}return k})};var c,r=300,t=400,u=2E4;a.fn.oembed.defaults={testEmbed:!1,skipFallback:!1,maxWidth:null,maxHeight:null,longUrlServiceUrl:null,bypassUrl:null,headParserUrl:null,
includeHandle:!0,testModeErrorMessage:null,embedMethod:"auto",onProviderNotFound:function(){},beforeEmbed:function(){},afterEmbed:function(){},onEmbed:!1,onError:function(a,d,e,c){console.log("err:",a,d,e,c)},ajaxOptions:{},longUrlAjaxOptions:{}};a.fn.oembed.insertCode=function(b,d,e){if(null!==e)switch("auto"===d&&null!==b.attr("href")?d="append":"auto"==d&&(d="replace"),d){case "replace":b.replaceWith(e.code);break;case "fill":b.html(e.code);break;case "append":b.wrap('<div class="oembedall-container"></div>');
d=b.parent();c.includeHandle&&a('<span class="oembedall-closehide">&darr;</span>').insertBefore(b).click(function(){var b=encodeURIComponent(a(this).text());a(this).html("%E2%86%91"==b?"&darr;":"&uarr;");a(this).parent().children().last().toggle()});d.append("<br/>");try{e.code.clone().appendTo(d)}catch(k){d.append(e.code)}if(c.maxWidth){var g=d.parent().width();g<c.maxWidth?(b=a("iframe",d).width(),e=a("iframe",d).height(),g=b/g,a("iframe",d).width(b/g),a("iframe",d).height(e/g)):(c.maxWidth&&a("iframe",
d).width(c.maxWidth),c.maxHeight&&a("iframe",d).height(c.maxHeight))}}};a.fn.oembed.getPhotoCode=function(a,d){var b={code:"",previewImage:""},c=d.title?d.title:"";c+=d.author_name?" - "+d.author_name:"";c+=d.provider_name?" - "+d.provider_name:"";d.html?b.code="<div>"+d.html+"</div>":d.url?(b.code='<div><a href="'+a+"\" target='_blank'><img src=\""+d.url+'" alt="'+c+'"/></a></div>',b.previewImage=d.url):d.thumbnail_url?(d=d.thumbnail_url.replace("_s","_b"),b.code='<div><a href="'+a+"\" target='_blank'><img src=\""+
d+'" alt="'+c+'"/></a></div>',b.previewImage=d):code="<div>Error loading this picture</div>";return b};a.fn.oembed.getRichCode=function(a,d){return d.html};a.fn.oembed.getGenericCode=function(a,d){a='<a href="'+a+'">'+(d.title&&null!==d.title?d.title:a)+"</a>";d.html&&(a+="<div>"+d.html+"</div>");return a};a.fn.oembed.getOEmbedProvider=function(b){for(var d=0;d<a.fn.oembed.providers.length;d++)for(var c=0,g=a.fn.oembed.providers[d].urlschemes.length;c<g;c++)if(null!==b.match(new RegExp(a.fn.oembed.providers[d].urlschemes[c],
"i")))return a.fn.oembed.providers[d];return null};a.fn.oembed.getOEmbedProviderByName=function(b){for(var d=0;d<a.fn.oembed.providers.length;d++){var c=a.fn.oembed.providers[d];if(c.name===b)return c}return null};a.fn.oembed.OEmbedProvider=function(a,d,c,g,k){this.name=a;this.type=d;this.urlschemes=c;this.apiendpoint=g;this.maxWidth=500;this.maxHeight=400;k=k||{};k.useYQL&&(k.yql="xml"==k.useYQL?{xpath:"//oembed/html",from:"xml",apiendpoint:this.apiendpoint,url:function(a){return this.apiendpoint+
"?format=xml&url="+a},datareturn:function(a){return!1}}:{from:"json",apiendpoint:this.apiendpoint,url:function(a){return this.apiendpoint+"?format=json&url="+a},datareturn:function(a){return!1}},this.apiendpoint=null);for(var b in k)this[b]=k[b];this.format=this.format||"json";this.safeget=this.safeget||"false";this.callbackparameter=this.callbackparameter||"callback";this.embedtag=this.embedtag||{tag:""}};a.fn.updateOEmbedProvider=function(b,d,c,g,k){for(var e=0;e<a.fn.oembed.providers.length;e++)if(a.fn.oembed.providers[e].name===
b&&(null!==d&&(a.fn.oembed.providers[e].type=d),null!==c&&(a.fn.oembed.providers[e].urlschemes=c),null!==g&&(a.fn.oembed.providers[e].apiendpoint=g),null!==k)){a.fn.oembed.providers[e].extraSettings=k;for(var f in k)null!==f&&null!==k[f]&&(a.fn.oembed.providers[e][f]=k[f])}};var w=new a.fn.oembed.OEmbedProvider("opengraph","rich",[".*"],null,{yql:{xpath:"//meta|//title|//link",from:"html",datareturn:function(b){!b["og:title"]&&b.title&&b.description&&(b["og:title"]=b.title);if(!b["og:title"]&&!b.title&&
!b.url)return!1;var d=!1,c=b["og:url"]||b.url;c=decodeURIComponent(c);/^https?:\/\//i.test(c)||(c="http://"+c);var g=a("<div>").addClass("ccl-embed-ogp-container");c=c?a("<a>").attr("target","_blank").attr("href",c):a("<p/>");g.append(c);if(b["og:image"]){var k=a("<div>").addClass("ccl-embed-ogp-image-preview"),f=a("<img>").attr("src",setHttp(b["og:image"])).addClass("ccl-embed-ogp-image");k.append(f);c.append(k)}k=a("<div>").addClass("ccl-embed-ogp-text-container");b["og:title"]&&(f=a("<div>").addClass("ccl-embed-ogp-header").text(b["og:title"]),
k.append(f));if(f=b["og:description"]||b.description){var h=a("<div>").addClass("ccl-embed-ogp-description").text(f);k.append(h)}if(b["og:title"]||f)if(f=b.url?getHostname(b.url):"",f=b["og:site_name"]||f)f=a("<div>").addClass("ccl-embed-ogp-site-name").text(f),k.append(f);""===k.html()&&""===k.text()&&b.url?(g=v(b.url),d=!0):c.append(k);return{code:g,isPlainLink:d}}}});a.fn.oembed.providers=[new a.fn.oembed.OEmbedProvider("youtube","video",["youtube\\.com/watch.+v=[\\w-]+&?","youtu\\.be/[\\w-]+",
"youtube.com/embed"],"//www.youtube.com/embed/$1?wmode=transparent",{templateRegex:/.*(?:v=|be\/|embed\/)([\w\-]+)&?.*/,embedtag:{tag:"iframe",width:"100%",height:"300",params:"&rel=0",templateParams:function(a){var b="",c=a.match(/[\?&]start=(\d+)?/i),g=a.match(/[\?&]t=((\d+)h)?((\d+)m)?((\d+)s?)?/);c?b+="&start="+c[1]:g&&(b+="&start="+(3600*(parseInt(g[2])||0)+60*(parseInt(g[4])||0)+(parseInt(g[6])||0)));(a=a.match(/[\?&]end=(\d+)?/i))&&(b+="&end="+a[1]);return b}}}),new a.fn.oembed.OEmbedProvider("wistia",
"video",["wistia.com/medias/.+","wistia.com/m/.+","wistia.com/embed/.+","wi.st/m/.+","wi.st/embed/.+"],"//fast.wistia.com/oembed",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("xtranormal","video",["xtranormal\\.com/watch/.+"],"//www.xtranormal.com/xtraplayr/$1/$2",{templateRegex:/.*com\/watch\/([\w\-]+)\/([\w\-]+).*/,embedtag:{tag:"iframe",width:"320",height:"269"}}),new a.fn.oembed.OEmbedProvider("scivee","video",["scivee.tv/node/.+"],"//www.scivee.tv/flash/embedCast.swf?",{templateRegex:/.*tv\/node\/(.+)/,
embedtag:{width:"480",height:"400",flashvars:"id=$1&type=3"}}),new a.fn.oembed.OEmbedProvider("veoh","video",["veoh.com/watch/.+"],"//www.veoh.com/swf/webplayer/WebPlayer.swf?version=AFrontend.5.7.0.1337&permalinkId=$1&player=videodetailsembedded&videoAutoPlay=0&id=anonymous",{templateRegex:/.*watch\/([^\?]+).*/,embedtag:{width:"410",height:"341"}}),new a.fn.oembed.OEmbedProvider("gametrailers","video",["gametrailers\\.com/video/.+"],"//media.mtvnservices.com/mgid:moses:video:gametrailers.com:$2",
{templateRegex:/.*com\/video\/([\w\-]+)\/([\w\-]+).*/,embedtag:{width:"512",height:"288"}}),new a.fn.oembed.OEmbedProvider("funnyordie","video",["funnyordie\\.com/videos/.+"],"//player.ordienetworks.com/flash/fodplayer.swf?",{templateRegex:/.*videos\/([^\/]+)\/([^\/]+)?/,embedtag:{width:512,height:328,flashvars:"key=$1"}}),new a.fn.oembed.OEmbedProvider("colledgehumour","video",["collegehumor\\.com/video/.+"],"//www.collegehumor.com/moogaloop/moogaloop.swf?clip_id=$1&use_node_id=true&fullscreen=1",
{templateRegex:/.*video\/([^\/]+).*/,embedtag:{width:600,height:338}}),new a.fn.oembed.OEmbedProvider("metacafe","video",["metacafe\\.com/watch/.+"],"//www.metacafe.com/fplayer/$1/$2.swf",{templateRegex:/.*watch\/(\d+)\/(\w+)\/.*/,embedtag:{width:400,height:345}}),new a.fn.oembed.OEmbedProvider("bambuser","video",["bambuser\\.com/channel/.*/broadcast/.*"],"//static.bambuser.com/r/player.swf?vid=$1",{templateRegex:/.*bambuser\.com\/channel\/.*\/broadcast\/(\w+).*/,embedtag:{width:512,height:339}}),
new a.fn.oembed.OEmbedProvider("twitvid","video",["twitvid\\.com/.+"],"//www.twitvid.com/embed.php?guid=$1&autoplay=0",{templateRegex:/.*twitvid\.com\/(\w+).*/,embedtag:{tag:"iframe",width:480,height:360}}),new a.fn.oembed.OEmbedProvider("aniboom","video",["aniboom\\.com/animation-video/.+"],"//api.aniboom.com/e/$1",{templateRegex:/.*animation-video\/(\d+).*/,embedtag:{width:594,height:334}}),new a.fn.oembed.OEmbedProvider("vzaar","video",["vzaar\\.com/videos/.+","vzaar.tv/.+"],"//view.vzaar.com/$1/player?",
{templateRegex:/.*\/(\d+).*/,embedtag:{tag:"iframe",width:576,height:324}}),new a.fn.oembed.OEmbedProvider("snotr","video",["snotr\\.com/video/.+"],"//www.snotr.com/embed/$1",{templateRegex:/.*\/(\d+).*/,embedtag:{tag:"iframe",width:400,height:330},nocache:1}),new a.fn.oembed.OEmbedProvider("youku","video",["v.youku.com/v_show/id_.+"],"//player.youku.com/player.php/sid/$1/v.swf",{templateRegex:/.*id_(.+)\.html.*/,embedtag:{width:480,height:400},nocache:1}),new a.fn.oembed.OEmbedProvider("tudou","video",
["tudou.com/programs/view/.+/"],"//www.tudou.com/v/$1/v.swf",{templateRegex:/.*view\/(.+)\//,embedtag:{width:480,height:400},nocache:1}),new a.fn.oembed.OEmbedProvider("embedr","video",["embedr\\.com/playlist/.+"],"//embedr.com/swf/slider/$1/425/520/default/false/std?",{templateRegex:/.*playlist\/([^\/]+).*/,embedtag:{width:425,height:520}}),new a.fn.oembed.OEmbedProvider("blip","video",["blip\\.tv/.+"],"//blip.tv/oembed/"),new a.fn.oembed.OEmbedProvider("minoto-video","video",["//api.minoto-video.com/publishers/.+/videos/.+",
"//dashboard.minoto-video.com/main/video/details/.+","//embed.minoto-video.com/.+"],"//api.minoto-video.com/services/oembed.json",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("animoto","video",["animoto.com/play/.+"],"//animoto.com/services/oembed"),new a.fn.oembed.OEmbedProvider("hulu","video",["hulu\\.com/watch/.*"],"//www.hulu.com/api/oembed.json"),new a.fn.oembed.OEmbedProvider("ustream","video",["ustream\\.tv/recorded/.*"],"//www.ustream.tv/oembed",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("videojug",
"video",["videojug\\.com/(film|payer|interview).*"],"//www.videojug.com/oembed.json",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("sapo","video",["videos\\.sapo\\.pt/.*"],"//videos.sapo.pt/oembed",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("vodpod","video",["vodpod.com/watch/.*"],"//vodpod.com/oembed.js",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("vimeo","video",["www.vimeo.com/groups/.*/videos/.*","www.vimeo.com/.*","vimeo.com/groups/.*/videos/.*","vimeo.com/.*"],"//vimeo.com/api/oembed.json"),
new a.fn.oembed.OEmbedProvider("dailymotion","video",["dailymotion\\.com/.+"],"//www.dailymotion.com/services/oembed"),new a.fn.oembed.OEmbedProvider("5min","video",["www\\.5min\\.com/.+"],"//api.5min.com/oembed.xml",{useYQL:"xml"}),new a.fn.oembed.OEmbedProvider("National Film Board of Canada","video",["nfb\\.ca/film/.+"],"//www.nfb.ca/remote/services/oembed/",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("qik","video",["qik\\.com/\\w+"],"//qik.com/api/oembed.json",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("revision3",
"video",["revision3\\.com"],"//revision3.com/api/oembed/"),new a.fn.oembed.OEmbedProvider("dotsub","video",["dotsub\\.com/view/.+"],"//dotsub.com/services/oembed",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("clikthrough","video",["clikthrough\\.com/theater/video/\\d+"],"//clikthrough.com/services/oembed"),new a.fn.oembed.OEmbedProvider("Kinomap","video",["kinomap\\.com/.+"],"//www.kinomap.com/embed/$1?mapPosition=auto",{templateRegex:/.*(?:watch\/|embed\/)([\w\-]+)&?.*/,embedtag:{tag:"iframe",
width:"100%",height:450}}),new a.fn.oembed.OEmbedProvider("VHX","video",["vhx.tv/.+"],"//vhx.tv/services/oembed.json"),new a.fn.oembed.OEmbedProvider("bambuser","video",["bambuser.com/.+"],"//api.bambuser.com/oembed/iframe.json",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("justin.tv","video",["justin.tv/.+"],"//api.justin.tv/api/embed/from_url.json",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("vine","video",["vine.co/v/.*"],null,{templateRegex:/https?:\/\/w?w?w?.?vine\.co\/v\/([a-zA-Z0-9]*).*/,
template:'<iframe src="//vine.co/v/$1/embed/postcard" width="600" height="600" allowfullscreen="true" allowscriptaccess="always" scrolling="no" frameborder="0"></iframe><script async src="//platform.vine.co/static/scripts/embed.js" charset="utf-8">\x3c/script>',nocache:1}),new a.fn.oembed.OEmbedProvider("boxofficebuz","video",["boxofficebuz\\.com\\/embed/.+"],"//boxofficebuz.com/embed/$1/$2",{templateRegex:[/.*boxofficebuz\.com\/embed\/(\w+)\/([\w*\-*]+)/],embedtag:{tag:"iframe",width:480,height:360}}),
new a.fn.oembed.OEmbedProvider("clipsyndicate","video",["clipsyndicate\\.com/video/play/.+","clipsyndicate\\.com/embed/iframe?.+"],"//eplayer.clipsyndicate.com/embed/iframe?pf_id=1&show_title=0&va_id=$1&windows=1",{templateRegex:[/.*www\.clipsyndicate\.com\/video\/play\/(\w+)\/.*/,/.*eplayer\.clipsyndicate\.com\/embed\/iframe\?.*va_id=(\w+).*.*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("coub","video",["coub\\.com/.+"],"//www.coub.com/embed/$1?muted=false&autostart=false&originalSize=false&hideTopBar=false&noSiteButtons=false&startWithHD=false",
{templateRegex:[/.*coub\.com\/embed\/(\w+)\?*.*/,/.*coub\.com\/view\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("discoverychannel","video",["snagplayer\\.video\\.dp\\.discovery\\.com/.+"],"//snagplayer.video.dp.discovery.com/$1/snag-it-player.htm?auto=no",{templateRegex:[/.*snagplayer\.video\.dp\.discovery\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360}}),new a.fn.oembed.OEmbedProvider("telly","video",["telly\\.com/.+"],"//www.telly.com/embed.php?guid=$1&autoplay=0",
{templateRegex:[/.*telly\.com\/embed\.php\?guid=(\w+).*/,/.*telly\.com\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360}}),new a.fn.oembed.OEmbedProvider("minilogs","video",["minilogs\\.com/.+"],"//www.minilogs.com/e/$1",{templateRegex:[/.*minilogs\.com\/e\/(\w+).*/,/.*minilogs\.com\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("viddy","video",["viddy\\.com/.+"],"//www.viddy.com/embed/video/$1",{templateRegex:[/.*viddy\.com\/embed\/video\/(\.*)/,
/.*viddy\.com\/video\/(\.*)/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("worldstarhiphop","video",["worldstarhiphop\\.com/embed/.+"],"//www.worldstarhiphop.com/embed/$1",{templateRegex:/.*worldstarhiphop\.com\/embed\/(\w+).*/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("zapiks","video",["zapiks\\.fr/.+"],"//www.zapiks.fr/index.php?action=playerIframe&media_id=$1&autoStart=fals",{templateRegex:/.*zapiks\.fr\/index.php\?[\w=&]*media_id=(\w+).*/,
embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("brightcove","video",["players\\.brightcove\\.net/.+"],"//players.brightcove.net/$1/$2/index.html?videoId=$3",{templateRegex:/.*players\.brightcove\.net\/(\d+)\/(\w+)\/index.html?videoId=(\d+).*/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("brightcove","video",["bcove\\.video/.+"],"//bcove.video/$1",{templateRegex:/.*bcove\.video\/(\w+).*/,embedtag:{tag:"iframe",width:480,
height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("kaltura","rich",["kaltura.com/p/.+uiconf_id"],null,{templateRegex:/.*\/p\/([\d]+).*uiconf_id\/([\d]+).*entry_id=([\w]+).*/,template:'<iframe src="//www.kaltura.com/p/$1/sp/$100/embedIframeJs/uiconf_id/$2/partner_id/$1?iframeembed=true&playerId=kaltura_player&entry_id=$3" width="400" height="330" allowfullscreen webkitallowfullscreen mozAllowFullScreen frameborder="0"></iframe>'}),new a.fn.oembed.OEmbedProvider("kaltura","rich",["kaltura.com/.+/partner_id/.+uiconf_id"],
null,{templateRegex:/.*partner_id\/([\d]+).*uiconf_id\/([\d]+).*entry_id\/([\w]+).*/,template:'<iframe src="//www.kaltura.com/p/$1/sp/$100/embedIframeJs/uiconf_id/$2/partner_id/$1?iframeembed=true&playerId=kaltura_player&entry_id=$3" width="400" height="330" allowfullscreen webkitallowfullscreen mozAllowFullScreen frameborder="0"></iframe>'}),new a.fn.oembed.OEmbedProvider("wevideo","rich",["wevideo.com/.+/.+"],null,{templateRegex:/.*wevideo.com\/(view|embed)\/#?([\d]+)/,template:'<iframe src="//www.wevideo.com/embed/#$2" width="500" height="330" allowfullscreen webkitallowfullscreen mozAllowFullScreen frameborder="0"></iframe>'}),
new a.fn.oembed.OEmbedProvider("nrk","rich",["nrk.no/.+embed.js.+data-id=.+"],null,{templateRegex:/.*data-id=([\d]+).*/,template:'<iframe src="//www.nrk.no/embed/PS*$1" width="400" height="300" allowfullscreen webkitallowfullscreen mozAllowFullScreen frameborder="0"></iframe>'}),new a.fn.oembed.OEmbedProvider("official.fm","rich",["official.fm/.+"],"//official.fm/services/oembed",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("chirbit","rich",["chirb.it/.+"],"//chirb.it/oembed.json",{useYQL:"json"}),
new a.fn.oembed.OEmbedProvider("chirbit","audio",["chirb\\.it/.+"],"//chirb.it/wp/$1",{templateRegex:[/.*chirb\.it\/wp\/(\w+).*/,/.*chirb\.it\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("Huffduffer","rich",["huffduffer.com/[-.\\w@]+/\\d+"],"//huffduffer.com/oembed"),new a.fn.oembed.OEmbedProvider("Spotify","rich",["open.spotify.com/(track|album|user)/"],"//embed.spotify.com/oembed/"),new a.fn.oembed.OEmbedProvider("shoudio","rich",["shoudio.com/.+",
"shoud.io/.+"],"//shoudio.com/api/oembed"),new a.fn.oembed.OEmbedProvider("mixcloud","rich",["mixcloud.com/.+"],"//www.mixcloud.com/oembed/",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("rdio.com","rich",["rd.io/.+","rdio.com"],"//www.rdio.com/api/oembed/"),new a.fn.oembed.OEmbedProvider("Soundcloud","rich",["soundcloud.com/.+","snd.sc/.+"],"//soundcloud.com/oembed",{safeget:"true",format:"json"}),new a.fn.oembed.OEmbedProvider("bandcamp","rich",["bandcamp\\.com/album/.+"],null,{yql:{xpath:"//meta[contains(@content, 'EmbeddedPlayer')]",
from:"html",datareturn:function(a){return a.meta?'<iframe width="400" height="100" src="'+a.meta[0].content+'" allowtransparency="true" frameborder="0"></iframe>':!1}}}),new a.fn.oembed.OEmbedProvider("deviantart","photo",["deviantart.com/.+","fav.me/.+","deviantart.com/.+"],"//backend.deviantart.com/oembed",{format:"jsonp"}),new a.fn.oembed.OEmbedProvider("skitch","photo",["skitch.com/.+"],null,{yql:{xpath:"json",from:"json",url:function(a){return"//skitch.com/oembed/?format=json&url="+a},datareturn:function(b){return a.fn.oembed.getPhotoCode(b.json.url,
b.json)}}}),new a.fn.oembed.OEmbedProvider("mobypicture","photo",["mobypicture.com/user/.+/view/.+","moby.to/.+"],"//api.mobypicture.com/oEmbed"),new a.fn.oembed.OEmbedProvider("flickr","photo",["flickr\\.com/photos/.+"],"//flickr.com/services/oembed",{safeget:"true",callbackparameter:"jsoncallback"}),new a.fn.oembed.OEmbedProvider("photobucket","photo",["photobucket\\.com/(albums|groups)/.+"],"//photobucket.com/oembed/"),new a.fn.oembed.OEmbedProvider("instagram","photo",["instagr\\.?am(\\.com)?/.+"],
"//api.instagram.com/oembed"),new a.fn.oembed.OEmbedProvider("SmugMug","photo",["smugmug.com/[-.\\w@]+/.+"],"//api.smugmug.com/services/oembed/"),new a.fn.oembed.OEmbedProvider("chart.ly","photo",["chart\\.ly/[a-z0-9]{6,8}"],"//chart.ly/uploads/large_$1.png",{templateRegex:/.*ly\/([^\/]+).*/,embedtag:{tag:"img"},nocache:1}),new a.fn.oembed.OEmbedProvider("circuitlab","photo",["circuitlab.com/circuit/.+"],"//www.circuitlab.com/circuit/$1/screenshot/540x405/",{templateRegex:/.*circuit\/([^\/]+).*/,
embedtag:{tag:"img"},nocache:1}),new a.fn.oembed.OEmbedProvider("23hq","photo",["23hq.com/[-.\\w@]+/photo/.+"],"//www.23hq.com/23/oembed",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("img.ly","photo",["img\\.ly/.+"],"//img.ly/show/thumb/$1",{templateRegex:/.*ly\/([^\/]+).*/,embedtag:{tag:"img"},nocache:1}),new a.fn.oembed.OEmbedProvider("twitgoo.com","photo",["twitgoo\\.com/.+"],"//twitgoo.com/show/thumb/$1",{templateRegex:/.*com\/([^\/]+).*/,embedtag:{tag:"img"},nocache:1}),new a.fn.oembed.OEmbedProvider("imgur.com",
"photo",["imgur\\.com/gallery/.+"],"//imgur.com/$1l.jpg",{templateRegex:/.*gallery\/([^\/]+).*/,embedtag:{tag:"img"},nocache:1}),new a.fn.oembed.OEmbedProvider("visual.ly","rich",["visual\\.ly/.+"],null,{yql:{xpath:"//a[@id='gc_article_graphic_image']/img",from:"htmlstring"}}),new a.fn.oembed.OEmbedProvider("achewood","photo",["achewood\\.com\\/index.php\\?date=.+"],"//www.achewood.com/comic.php?date=$1",{templateRegex:/.*achewood\.com\/index.php\?date=(\w+).*/,embedtag:{tag:"iframe",width:480,height:360},
nocache:1}),new a.fn.oembed.OEmbedProvider("fotokritik","photo",["fotokritik\\.com/.+"],"//www.fotokritik.com/embed/$1",{templateRegex:[/.*fotokritik\.com\/embed\/(\w+).*/,/.*fotokritik\.com\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("giflike","photo",["giflike\\.com/.+"],"//www.giflike.com/embed/$1",{templateRegex:[/.*giflike\.com\/embed\/(\w+).*/,/.*giflike\.com\/a\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("twitter",
"rich",["twitter.com/.+"],"//api.twitter.com/1/statuses/oembed.json"),new a.fn.oembed.OEmbedProvider("gmep","rich",["gmep.imeducate.com/.*","gmep.org/.*"],"//gmep.org/oembed.json"),new a.fn.oembed.OEmbedProvider("urtak","rich",["urtak.com/(u|clr)/.+"],"//oembed.urtak.com/1/oembed"),new a.fn.oembed.OEmbedProvider("cacoo","rich",["cacoo.com/.+"],"//cacoo.com/oembed.json"),new a.fn.oembed.OEmbedProvider("dailymile","rich",["dailymile.com/people/.*/entries/.*"],"//api.dailymile.com/oembed"),new a.fn.oembed.OEmbedProvider("documentcloud",
"rich",["documentcloud.org/documents/.+"],"//www.documentcloud.org/api/oembed.json"),new a.fn.oembed.OEmbedProvider("dipity","rich",["dipity.com/timeline/.+"],"//www.dipity.com/oembed/timeline/",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("sketchfab","rich",["sketchfab.com/show/.+"],"//sketchfab.com/oembed",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("speakerdeck","rich",["speakerdeck.com/.+"],"//speakerdeck.com/oembed.json",{useYQL:"json"}),new a.fn.oembed.OEmbedProvider("popplet","rich",
["popplet.com/app/.*"],"//popplet.com/app/Popplet_Alpha.swf?page_id=$1&em=1",{templateRegex:/.*#\/([^\/]+).*/,embedtag:{width:460,height:460}}),new a.fn.oembed.OEmbedProvider("pearltrees","rich",["pearltrees.com/.*"],"//cdn.pearltrees.com/s/embed/getApp?",{templateRegex:/.*N-f=1_(\d+).*N-p=(\d+).*/,embedtag:{width:460,height:460,flashvars:"lang=en_US&amp;embedId=pt-embed-$1-693&amp;treeId=$1&amp;pearlId=$2&amp;treeTitle=Diagrams%2FVisualization&amp;site=www.pearltrees.com%2FF"}}),new a.fn.oembed.OEmbedProvider("prezi",
"rich",["prezi.com/.*"],"//prezi.com/bin/preziloader.swf?",{templateRegex:/.*com\/([^\/]+)\/.*/,embedtag:{width:550,height:400,flashvars:"prezi_id=$1&amp;lock_to_path=0&amp;color=ffffff&amp;autoplay=no&amp;autohide_ctrls=0"}}),new a.fn.oembed.OEmbedProvider("tourwrist","rich",["tourwrist.com/tours/.+"],null,{templateRegex:/.*tours.([\d]+).*/,template:function(a,c){setTimeout(function(){loadEmbeds&&loadEmbeds()},2E3);return"<div id='"+c+"' class='tourwrist-tour-embed direct'></div> <script type='text/javascript' src='//tourwrist.com/tour_embed.js'>\x3c/script>"}}),
new a.fn.oembed.OEmbedProvider("meetup","rich",["meetup\\.(com|ps)/.+"],"//api.meetup.com/oembed"),new a.fn.oembed.OEmbedProvider("ebay","rich",["ebay\\.*"],"//togo.ebay.com/togo/togo.swf?2008013100",{templateRegex:/.*\/([^\/]+)\/(\d{10,13}).*/,embedtag:{width:355,height:300,flashvars:"base=//togo.ebay.com/togo/&lang=en-us&mode=normal&itemid=$2&query=$1"}}),new a.fn.oembed.OEmbedProvider("wikipedia","rich",["wikipedia.org/wiki/.+"],"//$1.wikipedia.org/w/api.php?action=parse&page=$2&format=json&section=0&callback=?",
{templateRegex:/.*\/\/([\w]+).*\/wiki\/([^\/]+).*/,templateData:function(b){if(!b.parse)return!1;var c=this.externalUrl.replace(/(https?:)?\/\/([\w|\-]+)\.wikipedia\.org\/wiki\/.*/,"$2"),e=b.parse.displaytitle,g="//"+c+".wikipedia.org/wiki/"+b.parse.title;b=a(b.parse.text["*"]);c=a("<div>").addClass("ccl-embed-ogp-container");g=a("<a>").attr("target","_blank").attr("href",g).appendTo(c);var f=b.find("img");if(0<f.length){var h;f.each(function(b,c){b=a(c);if(100<=parseInt(b.attr("width")))return h=
b,!1});h&&(h.detach(),a("<div>").addClass("ccl-embed-ogp-image-preview").append(h).appendTo(g))}a("<div>").addClass("ccl-embed-ogp-text-container").append(a("<div>").addClass("ccl-embed-ogp-header").append(e)).append(a("<div>").addClass("ccl-embed-ogp-description").text(b.next("p").text())).append(a("<div>").addClass("ccl-embed-ogp-site-name").text("wikipedia.org")).appendTo(g);return c}}),new a.fn.oembed.OEmbedProvider("imdb","rich",["imdb.com/title/.+"],"//www.imdbapi.com/?i=$1&callback=?",{templateRegex:/.*\/title\/([^\/]+).*/,
templateData:function(a){return a.Title?'<div id="content"><h3><a class="nav-link" href="//imdb.com/title/'+a.imdbID+'/">'+a.Title+"</a> ("+a.Year+")</h3><p>Rating: "+a.imdbRating+"<br/>Genre: "+a.Genre+"<br/>Starring: "+a.Actors+'</p></div>  <div id="view-photo-caption">'+a.Plot+"</div></div>":!1}}),new a.fn.oembed.OEmbedProvider("livejournal","rich",["livejournal.com/"],"//ljpic.seacrow.com/json/$2$4?jsonp=?",{templateRegex:/(https:\/\/(((?!users).)+)\.livejournal\.com|.*users\.livejournal\.com\/([^\/]+)).*/,
templateData:function(a){return a.username?'<div><img src="'+a.image+'" align="left" style="margin-right: 1em;" /><span class="oembedall-ljuser"><a href="//'+a.username+'.livejournal.com/profile"><img src="//www.livejournal.com/img/userinfo.gif" alt="[info]" width="17" height="17" /></a><a href="//'+a.username+'.livejournal.com/">'+a.username+"</a></span><br />"+a.name+"</div>":!1}}),new a.fn.oembed.OEmbedProvider("circuitbee","rich",["circuitbee\\.com/circuit/view/.+"],"//c.circuitbee.com/build/r/schematic-embed.html?id=$1",
{templateRegex:/.*circuit\/view\/(\d+).*/,embedtag:{tag:"iframe",width:"500",height:"350"}}),new a.fn.oembed.OEmbedProvider("googlecalendar","rich",["www.google.com/calendar/embed?.+"],"$1",{templateRegex:/(.*)/,embedtag:{tag:"iframe",width:"800",height:"600"}}),new a.fn.oembed.OEmbedProvider("jsfiddle","rich",["jsfiddle.net/[^/]+/?"],"//jsfiddle.net/$1/embedded/result,js,resources,html,css/?",{templateRegex:/.*net\/([^\/]+).*/,embedtag:{tag:"iframe",width:"100%",height:"300"}}),new a.fn.oembed.OEmbedProvider("jsbin",
"rich",["jsbin.com/.+"],"//jsbin.com/$1/?",{templateRegex:/.*com\/([^\/]+).*/,embedtag:{tag:"iframe",width:"100%",height:"300"}}),new a.fn.oembed.OEmbedProvider("jotform","rich",["form.jotform.co/form/.+"],"$1?",{templateRegex:/(.*)/,embedtag:{tag:"iframe",width:"100%",height:"507"}}),new a.fn.oembed.OEmbedProvider("reelapp","rich",["reelapp\\.com/.+"],"//www.reelapp.com/$1/embed",{templateRegex:/.*com\/(\S{6}).*/,embedtag:{tag:"iframe",width:"400",height:"338"}}),new a.fn.oembed.OEmbedProvider("linkedin",
"rich",["linkedin.com/pub/.+"],"//www.linkedin.com/cws/member/public_profile?public_profile_url=$1&format=inline&isFramed=true",{templateRegex:/(.*)/,embedtag:{tag:"iframe",width:"368px",height:"auto"}}),new a.fn.oembed.OEmbedProvider("timetoast","rich",["timetoast.com/timelines/[0-9]+"],"//www.timetoast.com/flash/TimelineViewer.swf?passedTimelines=$1",{templateRegex:/.*timelines\/([0-9]*)/,embedtag:{width:550,height:400},nocache:1}),new a.fn.oembed.OEmbedProvider("pastebin","rich",["pastebin\\.com/[\\S]{8}"],
"//pastebin.com/embed_iframe.php?i=$1",{templateRegex:/.*\/(\S{8}).*/,embedtag:{tag:"iframe",width:"100%",height:"auto"}}),new a.fn.oembed.OEmbedProvider("mixlr","rich",["mixlr.com/.+"],"//mixlr.com/embed/$1?autoplay=ae",{templateRegex:/.*com\/([^\/]+).*/,embedtag:{tag:"iframe",width:"100%",height:"auto"}}),new a.fn.oembed.OEmbedProvider("pastie","rich",["pastie\\.org/pastes/.+"],null,{yql:{xpath:'//pre[@class="textmate-source"]'}}),new a.fn.oembed.OEmbedProvider("github","rich",["gist.github.com/.+"],
"//github.com/api/oembed"),new a.fn.oembed.OEmbedProvider("github","rich",["github.com/[-.\\w@]+/[-.\\w@]+"],"//api.github.com/repos/$1/$2?callback=?",{templateRegex:/.*\/([^\/]+)\/([^\/]+).*/,templateData:function(a){return a.data.html_url?'<div class="oembedall-githubrepos"><ul class="oembedall-repo-stats"><li>'+a.data.language+'</li><li class="oembedall-watchers"><a title="Watchers" href="'+a.data.html_url+'/watchers">&#x25c9; '+a.data.watchers+'</a></li><li class="oembedall-forks"><a title="Forks" href="'+
a.data.html_url+'/network">&#x0265; '+a.data.forks+'</a></li></ul><h3><a href="'+a.data.html_url+'">'+a.data.name+'</a></h3><div class="oembedall-body"><p class="oembedall-description">'+a.data.description+'</p><p class="oembedall-updated-at">Last updated: '+a.data.pushed_at+"</p></div></div>":!1}}),new a.fn.oembed.OEmbedProvider("facebook","rich",["facebook.com/.+"],"https://www.facebook.com/plugins/post/oembed.json"),new a.fn.oembed.OEmbedProvider("stackoverflow","rich",["stackoverflow.com/questions/[\\d]+"],
"//api.stackoverflow.com/1.1/questions/$1?body=true&jsonp=?",{templateRegex:/.*questions\/([\d]+).*/,templateData:function(b){if(!b.questions)return!1;b=b.questions[0];var c=a(b.body).text();c='<div class="oembedall-stoqembed"><div class="oembedall-statscontainer"><div class="oembedall-statsarrow"></div><div class="oembedall-stats"><div class="oembedall-vote"><div class="oembedall-votes"><span class="oembedall-vote-count-post"><strong>'+(b.up_vote_count-b.down_vote_count)+'</strong></span><div class="oembedall-viewcount">vote(s)</div></div></div><div class="oembedall-status"><strong>'+
b.answer_count+'</strong>answer</div></div><div class="oembedall-views">'+b.view_count+' view(s)</div></div><div class="oembedall-summary"><h3><a class="oembedall-question-hyperlink" href="//stackoverflow.com/questions/'+b.question_id+'/">'+b.title+'</a></h3><div class="oembedall-excerpt">'+c.substring(0,100)+'...</div><div class="oembedall-tags">';for(i in b.tags)c+='<a title="" class="oembedall-post-tag" href="//stackoverflow.com/questions/tagged/'+b.tags[i]+'">'+b.tags[i]+"</a>";return c+='</div><div class="oembedall-fr"><div class="oembedall-user-info"><div class="oembedall-user-gravatar32"><a href="//stackoverflow.com/users/'+
b.owner.user_id+"/"+b.owner.display_name+'"><img width="32" height="32" alt="" src="//www.gravatar.com/avatar/'+b.owner.email_hash+'?s=32&amp;d=identicon&amp;r=PG"></a></div><div class="oembedall-user-details"><a href="//stackoverflow.com/users/'+b.owner.user_id+"/"+b.owner.display_name+'">'+b.owner.display_name+'</a><br><span title="reputation score" class="oembedall-reputation-score">'+b.owner.reputation+"</span></div></div></div></div></div>"}}),new a.fn.oembed.OEmbedProvider("wordpress","rich",
["wordpress\\.com/.+","blogs\\.cnn\\.com/.+","techcrunch\\.com/.+","wp\\.me/.+"],"//public-api.wordpress.com/oembed/1.0/?for=jquery-oembed-all"),new a.fn.oembed.OEmbedProvider("screenr","rich",["screenr.com"],"//www.screenr.com/embed/$1",{templateRegex:/.*\/([^\/]+).*/,embedtag:{tag:"iframe",width:"650",height:396}}),new a.fn.oembed.OEmbedProvider("gigpans","rich",["gigapan\\.org/[-.\\w@]+/\\d+"],"//gigapan.org/gigapans/$1/options/nosnapshots/iframe/flash.html",{templateRegex:/.*\/(\d+)\/?.*/,embedtag:{tag:"iframe",
width:"100%",height:400}}),new a.fn.oembed.OEmbedProvider("kickstarter","rich",["kickstarter\\.com/projects/.+"],"$1/widget/card.html",{templateRegex:/([^\?]+).*/,embedtag:{tag:"iframe",width:"220",height:380}}),new a.fn.oembed.OEmbedProvider("amazon","rich",["amzn.com/B+","amazon.com.*/(B\\S+)($|\\/.*)"],"//rcm.amazon.com/e/cm?t=_APIKEY_&o=1&p=8&l=as1&asins=$1&ref=qf_br_asin_til&fc1=000000&IS2=1&lt1=_blank&m=amazon&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr",{apikey:!0,templateRegex:/.*\/(B[0-9A-Z]+)($|\/.*)/,
embedtag:{tag:"iframe",width:"120px",height:"240px"}}),new a.fn.oembed.OEmbedProvider("slideshare","rich",["slideshare.net"],"//www.slideshare.net/api/oembed/2",{format:"json"}),new a.fn.oembed.OEmbedProvider("roomsharejp","rich",["roomshare\\.jp/(en/)?post/.*"],"//roomshare.jp/oembed.json"),new a.fn.oembed.OEmbedProvider("lanyard","rich",["lanyrd.com/\\d+/.+"],null,{yql:{xpath:'(//div[@class="primary"])[1]',from:"htmlstring",datareturn:function(a){return a.result?'<div class="oembedall-lanyard">'+
a.result+"</div>":!1}}}),new a.fn.oembed.OEmbedProvider("asciiartfarts","rich",["asciiartfarts.com/\\d+.html"],null,{yql:{xpath:"//pre/font",from:"htmlstring",datareturn:function(a){return a.result?'<pre style="background-color:#000;">'+a.result+"</div>":!1}}}),new a.fn.oembed.OEmbedProvider("coveritlive","rich",["coveritlive.com/"],null,{templateRegex:/(.*)/,template:'<iframe src="$1" allowtransparency="true" scrolling="no" width="615px" frameborder="0" height="625px"></iframe>'}),new a.fn.oembed.OEmbedProvider("polldaddy",
"rich",["polldaddy.com/"],null,{templateRegex:/(?:https?:\/\/w?w?w?.?polldaddy.com\/poll\/)([0-9]*)\//,template:'<script async type="text/javascript" charset="utf-8" src="//static.polldaddy.com/p/$1.js">\x3c/script>',nocache:1}),new a.fn.oembed.OEmbedProvider("360io","rich",["360\\.io/.+"],"//360.io/$1",{templateRegex:/.*360\.io\/(\w+).*/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("bubbli","rich",["on\\.bubb\\.li/.+"],"//on.bubb.li/$1",{templateRegex:/.*on\.bubb\.li\/(\w+).*/,
embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("cloudup","rich",["cloudup\\.com/.+"],"//cloudup.com/$1?chromeless",{templateRegex:[/.*cloudup\.com\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360}}),new a.fn.oembed.OEmbedProvider("codepen","rich",["codepen.io/.+"],"//codepen.io/$1/embed/$2",{templateRegex:[/.*io\/(\w+)\/pen\/(\w+).*/,/.*io\/(\w+)\/full\/(\w+).*/],embedtag:{tag:"iframe",width:"100%",height:"300"},nocache:1}),new a.fn.oembed.OEmbedProvider("googleviews",
"rich",["(.*maps\\.google\\.com\\/maps\\?).+(output=svembed).+(cbp=(.*)).*"],"//maps.google.com/maps?layer=c&panoid=$3&ie=UTF8&source=embed&output=svembed&cbp=$5",{templateRegex:/(.*maps\.google\.com\/maps\?).+(panoid=(\w+)&).*(cbp=(.*)).*/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("googlemaps","rich",["google\\.com/maps/place/.+"],"//maps.google.com/maps?t=m&q=$1&output=embed",{templateRegex:/.*google\.com\/maps\/place\/([\w\+]*)\/.*/,embedtag:{tag:"iframe",
width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("imajize","rich",["embed\\.imajize\\.com/.+"],"//embed.imajize.com/$1",{templateRegex:/.*embed\.imajize\.com\/(.*)/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("mapjam","rich",["mapjam\\.com/.+"],"//www.mapjam.com/$1",{templateRegex:/.*mapjam\.com\/(.*)/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("polar","rich",["polarb\\.com/.+"],"//assets-polarb-com.a.ssl.fastly.net/api/v4/publishers/unknown/embedded_polls/iframe?poll_id=$1",
{templateRegex:/.*polarb\.com\/polls\/(\w+).*/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("ponga","rich",["ponga\\.com/.+"],"//www.ponga.com/embedded?id=$1",{templateRegex:[/.*ponga\.com\/embedded\?id=(\w+).*/,/.*ponga\.com\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new a.fn.oembed.OEmbedProvider("pod.ac-caen.fr","video",["pod\\.ac-caen\\.fr/video/.+"],"//pod.ac-caen.fr/video/$1/?is_iframe=true",{templateRegex:/.*pod\.ac-caen\.fr\/video\/([\w\-]+)\/.*/,
embedtag:{tag:"iframe",width:480,height:360},nocache:1}),w]})(jQuery);function getHostname(a){var n=document.createElement("a");n.href=setHttp(a);""==n.host&&(n.href=n.href);return n.hostname}function setHttp(a){-1===a.search(/^http[s]?:\/\//)&&(a="http://"+a);return a};/*
 FitVids 1.1

 Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
 Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
 Released under the WTFPL license - http://sam.zoy.org/wtfpl/

*/
(function(a){a.fn.fitVids=function(n){var f={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var l=document.head||document.getElementsByTagName("head")[0],h=document.createElement("div");h.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>';l.appendChild(h.childNodes[1])}n&&
a.extend(f,n);return this.each(function(){var h='iframe[src*="player.vimeo.com"] iframe[src*="youtube.com"] iframe[src*="youtube-nocookie.com"] iframe[src*="kickstarter.com"][src*="video.html"] object embed'.split(" ");f.customSelector&&h.push(f.customSelector);var l=".fitvidsignore";f.ignore&&(l=l+", "+f.ignore);h=a(this).find(h.join(","));h=h.not("object object");h=h.not(l);h.each(function(c){var f=a(this);if(!(0<f.parents(l).length||"embed"===this.tagName.toLowerCase()&&f.parent("object").length||
f.parent(".fluid-width-video-wrapper").length)){f.css("height")||f.css("width")||!isNaN(f.attr("height"))&&!isNaN(f.attr("width"))||(f.attr("height",9),f.attr("width",16));var h="object"===this.tagName.toLowerCase()||f.attr("height")&&!isNaN(parseInt(f.attr("height"),10))?parseInt(f.attr("height"),10):f.height(),n=isNaN(parseInt(f.attr("width"),10))?f.width():parseInt(f.attr("width"),10);h/=n;f.attr("id")||f.attr("id","fitvid"+c);f.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",
100*h+"%");f.removeAttr("height").removeAttr("width")}})})}})(window.jQuery||window.Zepto);

